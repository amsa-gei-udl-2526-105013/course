[
  {
    "objectID": "exercises/02-booting/05-ex-week3.html",
    "href": "exercises/02-booting/05-ex-week3.html",
    "title": "Desxifrat autom√†tic mitjan√ßant clau en disc secundari (USB emulat)",
    "section": "",
    "text": "Aprendre a personalitzar la initramfs per buscar una clau en un disc secundari (emulant un USB).\nDesxifrar autom√†ticament una partici√≥ LUKS durant l‚Äôarrencada amb una keyfile.\nEntendre els hooks i scripts d‚Äôinitramfs-tools i com incloure binaris (cryptsetup) a la imatge.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 5 ¬∑ Arrencada autom√†tica d'una partici√≥ LUKS amb clau en un disc secundari"
    ]
  },
  {
    "objectID": "exercises/02-booting/05-ex-week3.html#objectius",
    "href": "exercises/02-booting/05-ex-week3.html#objectius",
    "title": "Desxifrat autom√†tic mitjan√ßant clau en disc secundari (USB emulat)",
    "section": "",
    "text": "Aprendre a personalitzar la initramfs per buscar una clau en un disc secundari (emulant un USB).\nDesxifrar autom√†ticament una partici√≥ LUKS durant l‚Äôarrencada amb una keyfile.\nEntendre els hooks i scripts d‚Äôinitramfs-tools i com incloure binaris (cryptsetup) a la imatge.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 5 ¬∑ Arrencada autom√†tica d'una partici√≥ LUKS amb clau en un disc secundari"
    ]
  },
  {
    "objectID": "exercises/02-booting/05-ex-week3.html#requeriments-previs",
    "href": "exercises/02-booting/05-ex-week3.html#requeriments-previs",
    "title": "Desxifrat autom√†tic mitjan√ßant clau en disc secundari (USB emulat)",
    "section": "Requeriments Previs",
    "text": "Requeriments Previs\n\nTenir una m√†quina virtual (MV) amb Debian instal¬∑lat, aquesta m√†quina virtual s‚Äôha d‚Äôhaver creat seleccionat l‚Äôopci√≥ de LVM xifrat durant la instal¬∑laci√≥.\nAfegeix un disc secundari a la m√†quina virtual que simular√† un USB de 4GB i de tipus SATA.\nTotes les comandes s‚Äôhan d‚Äôexecutar amb permisos de superusuari (root). Per tant, su -.\nRealitzar un apt update -y && apt upgrade -y per assegurar-se que el sistema est√† actualitzat.\nInstal¬∑lar el paquet apt install parted vim -y per gestionar particions.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 5 ¬∑ Arrencada autom√†tica d'una partici√≥ LUKS amb clau en un disc secundari"
    ]
  },
  {
    "objectID": "exercises/02-booting/05-ex-week3.html#passos",
    "href": "exercises/02-booting/05-ex-week3.html#passos",
    "title": "Desxifrat autom√†tic mitjan√ßant clau en disc secundari (USB emulat)",
    "section": "Passos",
    "text": "Passos\n\nCreaci√≥ del disc secundari amb la clau\nPrimer, cal crear un disc secundari que simuli un USB. Aix√≤ es pot fer afegint un nou disc a la m√†quina virtual. En aquest exemple, suposarem que el nou disc √©s /dev/sda. Si el teu disc √©s diferent, substitueix /dev/sda pel nom correcte. Per obtenir el nom del nou disc, pots utilitzar la comanda lsblk o df -h.\nparted --script /dev/sda mklabel msdos\nparted --script /dev/sda mkpart primary ext4 1MiB 100%\nmkfs.ext4 -L KEYDISK /dev/sda1\nAquestes comandes creen una taula de particions MBR i una partici√≥ prim√†ria que ocupa tot l‚Äôespai del disc, formatada amb el sistema de fitxers ext4 i amb l‚Äôetiqueta KEYDISK.\n\n\nMuntar el disc i crear la clau\nPrimer crearem un punt de muntatge i muntarem la partici√≥ del disc secundari. Despr√©s, generarem un fitxer de clau amb dades aleat√≤ries i li assignarem permisos restrictius per garantir la seva seguretat.\nmkdir -p /tmp/keydisk\nmount /dev/sda1 /tmp/keydisk\ndd if=/dev/urandom of=/tmp/keydisk/keyfile.bin bs=4096 count=1\nchmod 0400 /tmp/keydisk/keyfile.bin\n\n\nAfegir la clau a la partici√≥ LUKS\nAfegirem el fitxer de clau a la partici√≥ LUKS que cont√© la partici√≥ arrel. En aquest exemple, suposarem que la partici√≥ LUKS √©s /dev/nvme0n1p3. Si el teu dispositiu √©s diferent, substitueix /dev/nvme0n1p3 pel nom correcte.\ncryptsetup luksDump /dev/nvme0n1p3\ncryptsetup luksAddKey /dev/nvme0n1p3 /tmp/keydisk/keyfile.bin\nEn aquest punt, se‚Äôt demanar√† introdu√Ør una passphrase existent per autoritzar l‚Äôafegiment de la nova clau, entra la passphrase i comprova que la clau s‚Äôha afegit correctament amb:\ncryptsetup luksDump /dev/nvme0n1p3\nAra veuras una l√≠nia addicional a Key Slot. Indicant que la clau s‚Äôha afegit correctament.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 5 ¬∑ Arrencada autom√†tica d'una partici√≥ LUKS amb clau en un disc secundari"
    ]
  },
  {
    "objectID": "exercises/02-booting/05-ex-week3.html#edita-el-fitxer-etccrypttab",
    "href": "exercises/02-booting/05-ex-week3.html#edita-el-fitxer-etccrypttab",
    "title": "Desxifrat autom√†tic mitjan√ßant clau en disc secundari (USB emulat)",
    "section": "Edita el fitxer /etc/crypttab",
    "text": "Edita el fitxer /etc/crypttab\nAquest fitxer s‚Äôutilitza per definir les particions xifrades que s‚Äôhan de desxifrar durant l‚Äôarrencada. Edita el fitxer /etc/crypttab i afegeix la a entre el UUID de la partici√≥ LUKS i les opcions, la ruta al fitxer de clau que hem creat anteriorment. Per fer-ho, elimineu none i afegiu la ruta al fitxer de clau.\n# /etc/crypttab\nnvme0n1p3_crypt UUID=XXXXXXXXX /tmp/keydisk/keyfile.bin  luks,discard\nIndicarem que la keyfile es troba a /tmp/keydisk/keyfile.bin, ja que en la initramfs muntarem el disc secundari a /tmp/keydisk i llegirem la clau des d‚Äôall√†.\n\nCrear l‚Äôscript per muntar el disc i llegir la clau\nCrearem un script que s‚Äôexecutar√† durant l‚Äôarrencada per muntar el disc secundari, llegir la clau i desxifrar la partici√≥ LUKS. Aquest script es col¬∑locar√† a /etc/initramfs-tools/scripts/local-top/ i s‚Äôanomenar√† mount_disk.\n#!/bin/sh\n### BEGIN INIT INFO\n# Provides:          mount_disk\n# Required-Start:    $local_fs\n# Required-Stop:\n# Default-Start:     S\n# Default-Stop:\n# Short-Description: Unlock LUKS root using a keyfile on a secondary disk\n# Description:       Finds and mounts a secondary disk\n### END INIT INFO\n\nlog_msg() {\n    echo \"mount_disk: $1\" &gt; /dev/kmsg\n}\n\nKEYDISK_UUID=\"XXXXXX\" # &lt;-- Substitueix amb el teu UUID corresponent al disc secundari\nKEYFILE_PATH=\"/keyfile.bin\"\n\nlog_msg \"Iniciant desxifrat autom√†tic amb keyfile.\"\n\nMNT_POINT=\"/tmp/keydisk\"\nmkdir -p \"$MNT_POINT\"\n\nDEV=$(blkid -U \"$KEYDISK_UUID\")\nif [ -n \"$DEV\" ]; then\n    log_msg \"Dispositiu trobat a $DEV. Muntant...\"\n    mount -t ext4 \"$DEV\" \"$MNT_POINT\"\n    if [ $? -ne 0 ]; then\n        log_msg \"ERROR: No s'ha pogut muntar $DEV.\"\n        exit 0\n    fi\nelse\n    log_msg \"ERROR: No s'ha trobat cap dispositiu amb l'UUID especificat.\"\n    exit 0\nfi\n\n# Comprovar si el keyfile existeix\nif [ -f \"$MNT_POINT/$KEYFILE_PATH\" ]; then\n    log_msg \"Keyfile trobat. Desxifrant LUKS...\"\nelse\n    log_msg \"ERROR: No s'ha trobat el keyfile.\"\nfi\n\nexit 0\nGuarda aquest script com a /etc/initramfs-tools/scripts/local-top/mount_disk i fes-lo executable:\nchmod +x /etc/initramfs-tools/scripts/local-top/mount_disk\n\n\nConfiigurar cryptsetup per a la initramfs\ncryptsetup ja esta incl√≤s en la initramfs per defecte, per√≤ cal assegurar-se que est√† configurat per utilitzar el fitxer de clau des del disc secundari. Edita el fitxer /etc/cryptsetup-initramfs/conf-hook i afegeix la seg√ºent l√≠nia que permet que no es demani la contrasenya si es troba el fitxer de clau:\n#  /etc/cryptsetup-initramfs/conf-hook\nASKPASS=n\n\n\nIncloure el fitxer /etc/crypttab a la initramfs\nPer assegurar que el fitxer /etc/crypttab es troba disponible durant l‚Äôarrencada, cal crear un script que el copi√Ø a la initramfs. Crearem un script anomenat copy-crypttab a /etc/initramfs-tools/hooks/.\n#!/bin/sh\ncp /etc/crypttab \"${DESTDIR}/cryptroot/crypttab\"\nexit\nGuarda aquest script com a /etc/initramfs-tools/hooks/copy-crypttab i fes-lo executable:\nchmod +x /etc/initramfs-tools/hooks/copy-crypttab\n\n\nActualitzar la initramfs\nPerqu√® els canvis tinguin efecte, cal actualitzar la initramfs. Aix√≤ es fa amb la comanda seg√ºent:\nupdate-initramfs -u -k $(uname -r)\n\n\nComprovar la inclusi√≥ de l‚Äôscript i cryptsetup a la initramfs\nPer assegurar-te que l‚Äôscript s‚Äôha incl√≤s correctament a la initramfs i que cryptsetup tamb√© hi √©s, pots utilitzar les seg√ºents comandes:\nlsinitramfs /boot/initrd.img-$(uname -r) | grep mount_disk\nlsinitramfs /boot/initrd.img-$(uname -r) | grep cryptsetup\n\n\nProva l‚Äôarrencada\nReinicia la m√†quina virtual per provar l‚Äôarrencada. Si tot est√† configurat correctament, la partici√≥ LUKS s‚Äôhauria de desxifrar autom√†ticament utilitzant la clau emmagatzemada al disc secundari. Sense demanar la contrasenya manualment.\nreboot\n\n\nConsultar el log d‚Äôarrencada\nDurant l‚Äôarrencada, el sistema registrar√† missatges al kernel log. Pots consultar aquests missatges per verificar que l‚Äôscript s‚Äôha executat correctament i que la partici√≥ LUKS s‚Äôha desxifrat. Utilitza la comanda seg√ºent per veure els missatges rellevants:\ndmesg | grep mount_disk",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 5 ¬∑ Arrencada autom√†tica d'una partici√≥ LUKS amb clau en un disc secundari"
    ]
  },
  {
    "objectID": "exercises/02-booting/02-ex-week2.html",
    "href": "exercises/02-booting/02-ex-week2.html",
    "title": "Arrancada UEFI b√†sica amb QEMU",
    "section": "",
    "text": "En aquest exercici aprendrem a crear un entorn d‚Äôarrencada UEFI senzill utilitzant QEMU. A difer√®ncia de la BIOS tradicional, la UEFI utilitza fitxers executables en format PE (Portable Executable) per carregar els sistemes operatius. Aquests fitxers es col¬∑loquen en una partici√≥ especial del disc anomenada ESP (EFI System Partition).\nL‚Äôobjectiu final √©s carregar i executar un petit joc de Tetris dins de l‚Äôentorn UEFI.\n\n\nPer a aquest laboratori, necessitem una m√†quina virtual amb Debian i una interf√≠cie gr√†fica, ja que la UEFI per defecte utilitza un entorn gr√†fic.\nSi no teniu una interf√≠cie gr√†fica, podeu instal¬∑lar-la amb la seg√ºent comanda:\nsu -c \"apt install task-gnome-desktop -y\"\n\n\n\n\n\n\nNotaNota\n\n\n\nUn cop instal¬∑lada la interf√≠cie gr√†fica, reinicieu la m√†quina virtual i inicieu sessi√≥ a l‚Äôentorn d‚Äôescriptori.\n\n\nA m√©s, necessitem instal¬∑lar les eines necess√†ries per compilar i executar el nostre codi UEFI.\nsu -c \"apt install qemu-system-x86 gcc-x86-64-linux-gnu nasm make gnu-efi gdisk mtools -y\"\nsu -c ‚Äúapt install qemu-system-x86 make gdisk mtools -y‚Äù\nFinalment, clonem el repositori amb el codi font del joc de Tetris per UEFI:\ngit clone https://github.com/a1ive/uefi-tetris.git\ncd uefi-tetris\n\n\n\n\n\n\nNotaNota\n\n\n\nQuan executeu les comandes QEMU, no ho feu amb la conexi√≥ SSH ja que us donar√† problemes amb la interf√≠cie gr√†fica. Utilitzeu la terminal de la m√†quina virtual directament.\n\n\n\n\n\nAquest m√®tode ens permetr√† executar r√†pidament un executable UEFI sense la necessitat de crear una imatge de disc. Utilitzarem la UEFI Shell, una l√≠nia de comandes que ens permet interactuar amb l‚Äôentorn UEFI.\nqemu-system-x86_64 -bios /usr/share/qemu/OVMF.fd -drive format=raw,file=fat:rw:./ -net none\nOn aquest comandament:\n\nbios /usr/share/qemu/OVMF.fd: Carrega el firmware OVMF (Open Virtual Machine Firmware), que √©s la implementaci√≥ UEFI per a QEMU.\n-drive format=raw,file=fat:rw:./: Munta el directori actual (./) com si fos una partici√≥ FAT. La UEFI Shell reconeix aquest format de manera nativa, donant-nos acc√©s al nostre fitxer tetris.efi.\n-net none: Deshabilita la xarxa, ja que no la necessitem per a aquest exercici.\n\nEn executar la comanda, QEMU s‚Äôiniciar√† i, com que no hi ha cap sistema operatiu per arrencar, caur√† directament a la UEFI Shell.\n\n\nUn cop a la UEFI Shell, accedim a la partici√≥ que QEMU ha muntat per nosaltres.\nfs0:\nLa comanda fs0: ens canvia a la partici√≥ FAT que correspon al nostre directori.\n\n\n\n\n\n\nNotaNotes\n\n\n\n\nEl teclat est√† en angl√®s per defecte. Per escriure el car√†cter : heu de pr√©mer Shift + √ë.\nSi fs0: no funciona, podeu llistar les particions disponibles amb la comanda map i provar amb les altres.\n\n\n\n\n\n\n\n\n\nNotaNota\n\n\n\nUtilitzeu les comandes ls i cd per navegar pel sistema de fitxers fins que trobeu la carpeta uefi-tetris i dins d‚Äôella el fitxer tetris.efi.\n\n\nFinalment, executem el bootloader UEFI:\ntetris.efi\n\n\n\n\nAquest m√®tode simula un escenari m√©s real, on el fitxer executable es troba en una partici√≥ dedicada al disc. La partici√≥ ESP (EFI System Partition) √©s una partici√≥ especial, formatada en FAT32, on es guarden els fitxers d‚Äôarrencada del sistema operatiu.\n\n\nPrimer, creem un fitxer que far√† de disc dur virtual. Amb 64 MB n‚Äôhi ha prou.\nqemu-img create -f raw tetris.img 64M\n\n\n\nUtilitzarem gdisk per crear la partici√≥ ESP. La GPT (GUID Partition Table) √©s el format modern de taules de particions, necessari per a la UEFI.\nsu -\ncd /path/to/uefi-tetris # Canvia al directori on has clonat el repositori\ngdisk tetris.img\nA la consola de gdisk, utilitzarem les seg√ºents comandes:\n\nPr√©mer o per crear una nova taula GPT.\nPr√©mer n per crear una nova partici√≥.\nPr√®mer 1 per assignar el n√∫mero de partici√≥.\nPr√®mer Enter per acceptar l‚Äôinici per defecte.\nPr√®mer Enter per acceptar la mida per defecte (fins al final del disc).\nPr√®mer ef00 per assignar el tipus EFI System Partition.\nPr√®mer w per escriure els canvis i sortir.\n\n\n\n\n\n\n\nNotaNota\n\n\n\nConfirmeu tots els canvis escrivint Y quan se us demani. Per assegurar-vos que la partici√≥ s‚Äôha creat correctament, podeu utilitzar gdisk -l tetris.img per llistar les particions del fitxer d‚Äôimatge. Observeu que la partici√≥ t√© el tipus EF00, indicant que √©s una partici√≥ ESP.\n\n\n\n\n\nAra que tenim la partici√≥, l‚Äôhem de formatar, √©s a dir, donar-li un sistema de fitxers. La UEFI requereix que la partici√≥ ESP estigui formatada en FAT32.\n\nIdentificar el dispositiu de bucle:\n\n# Com a root\nlosetup --partscan --find --show tetris.img\nAquesta comanda mostrar√† el nom del dispositiu de bucle creat (p.¬†ex., /dev/loop1) i la seva partici√≥ (/dev/loop1p1). Anoteu-ho.\n\nFormatejar la partici√≥:\n\n# Com a root\nmkfs.fat -F 32 /dev/loop1p1\n\n\n\nAra, muntem la partici√≥ i copiem el fitxer tetris.efi a la ubicaci√≥ correcta dins de l‚Äôestructura de directoris esperada per la UEFI.\n# Com a root\nmount /dev/loop1p1 /mnt\nmkdir -p /mnt/EFI/BOOT\ncp tetris.efi /mnt/EFI/BOOT/BOOTX64.EFI\numount /mnt\nlosetup -d /dev/loop1\n\n\n\n\n\n\nNotaObservaci√≥\n\n\n\nLa UEFI espera trobar el fitxer d‚Äôarrencada en aquesta ubicaci√≥ espec√≠fica: \\EFI\\BOOT\\BOOTX64.EFI per a sistemes x86_64. Si utilitzeu una arquitectura diferent, assegureu-vos de canviar el nom del fitxer segons sigui necessari (per exemple, BOOTAA64.EFI per a ARM64). Com estem emulant un sistema x86_64, utilitzem BOOTX64.EFI.\n\n\n\n\n\nFinalment, podem arrencar la nostra imatge de disc amb QEMU utilitzant el firmware UEFI.\nqemu-system-x86_64 -bios /usr/share/qemu/OVMF.fd -drive format=raw,file=tetris.img -net none\nSi tot ha anat b√©, haur√≠eu de veure el joc de Tetris en funcionament a la pantalla directament sense necessitat d‚Äôentrar a la UEFI Shell.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 2 ¬∑ Booting amb UEFI"
    ]
  },
  {
    "objectID": "exercises/02-booting/02-ex-week2.html#tetris-amb-uefi",
    "href": "exercises/02-booting/02-ex-week2.html#tetris-amb-uefi",
    "title": "Arrancada UEFI b√†sica amb QEMU",
    "section": "",
    "text": "En aquest exercici aprendrem a crear un entorn d‚Äôarrencada UEFI senzill utilitzant QEMU. A difer√®ncia de la BIOS tradicional, la UEFI utilitza fitxers executables en format PE (Portable Executable) per carregar els sistemes operatius. Aquests fitxers es col¬∑loquen en una partici√≥ especial del disc anomenada ESP (EFI System Partition).\nL‚Äôobjectiu final √©s carregar i executar un petit joc de Tetris dins de l‚Äôentorn UEFI.\n\n\nPer a aquest laboratori, necessitem una m√†quina virtual amb Debian i una interf√≠cie gr√†fica, ja que la UEFI per defecte utilitza un entorn gr√†fic.\nSi no teniu una interf√≠cie gr√†fica, podeu instal¬∑lar-la amb la seg√ºent comanda:\nsu -c \"apt install task-gnome-desktop -y\"\n\n\n\n\n\n\nNotaNota\n\n\n\nUn cop instal¬∑lada la interf√≠cie gr√†fica, reinicieu la m√†quina virtual i inicieu sessi√≥ a l‚Äôentorn d‚Äôescriptori.\n\n\nA m√©s, necessitem instal¬∑lar les eines necess√†ries per compilar i executar el nostre codi UEFI.\nsu -c \"apt install qemu-system-x86 gcc-x86-64-linux-gnu nasm make gnu-efi gdisk mtools -y\"\nsu -c ‚Äúapt install qemu-system-x86 make gdisk mtools -y‚Äù\nFinalment, clonem el repositori amb el codi font del joc de Tetris per UEFI:\ngit clone https://github.com/a1ive/uefi-tetris.git\ncd uefi-tetris\n\n\n\n\n\n\nNotaNota\n\n\n\nQuan executeu les comandes QEMU, no ho feu amb la conexi√≥ SSH ja que us donar√† problemes amb la interf√≠cie gr√†fica. Utilitzeu la terminal de la m√†quina virtual directament.\n\n\n\n\n\nAquest m√®tode ens permetr√† executar r√†pidament un executable UEFI sense la necessitat de crear una imatge de disc. Utilitzarem la UEFI Shell, una l√≠nia de comandes que ens permet interactuar amb l‚Äôentorn UEFI.\nqemu-system-x86_64 -bios /usr/share/qemu/OVMF.fd -drive format=raw,file=fat:rw:./ -net none\nOn aquest comandament:\n\nbios /usr/share/qemu/OVMF.fd: Carrega el firmware OVMF (Open Virtual Machine Firmware), que √©s la implementaci√≥ UEFI per a QEMU.\n-drive format=raw,file=fat:rw:./: Munta el directori actual (./) com si fos una partici√≥ FAT. La UEFI Shell reconeix aquest format de manera nativa, donant-nos acc√©s al nostre fitxer tetris.efi.\n-net none: Deshabilita la xarxa, ja que no la necessitem per a aquest exercici.\n\nEn executar la comanda, QEMU s‚Äôiniciar√† i, com que no hi ha cap sistema operatiu per arrencar, caur√† directament a la UEFI Shell.\n\n\nUn cop a la UEFI Shell, accedim a la partici√≥ que QEMU ha muntat per nosaltres.\nfs0:\nLa comanda fs0: ens canvia a la partici√≥ FAT que correspon al nostre directori.\n\n\n\n\n\n\nNotaNotes\n\n\n\n\nEl teclat est√† en angl√®s per defecte. Per escriure el car√†cter : heu de pr√©mer Shift + √ë.\nSi fs0: no funciona, podeu llistar les particions disponibles amb la comanda map i provar amb les altres.\n\n\n\n\n\n\n\n\n\nNotaNota\n\n\n\nUtilitzeu les comandes ls i cd per navegar pel sistema de fitxers fins que trobeu la carpeta uefi-tetris i dins d‚Äôella el fitxer tetris.efi.\n\n\nFinalment, executem el bootloader UEFI:\ntetris.efi\n\n\n\n\nAquest m√®tode simula un escenari m√©s real, on el fitxer executable es troba en una partici√≥ dedicada al disc. La partici√≥ ESP (EFI System Partition) √©s una partici√≥ especial, formatada en FAT32, on es guarden els fitxers d‚Äôarrencada del sistema operatiu.\n\n\nPrimer, creem un fitxer que far√† de disc dur virtual. Amb 64 MB n‚Äôhi ha prou.\nqemu-img create -f raw tetris.img 64M\n\n\n\nUtilitzarem gdisk per crear la partici√≥ ESP. La GPT (GUID Partition Table) √©s el format modern de taules de particions, necessari per a la UEFI.\nsu -\ncd /path/to/uefi-tetris # Canvia al directori on has clonat el repositori\ngdisk tetris.img\nA la consola de gdisk, utilitzarem les seg√ºents comandes:\n\nPr√©mer o per crear una nova taula GPT.\nPr√©mer n per crear una nova partici√≥.\nPr√®mer 1 per assignar el n√∫mero de partici√≥.\nPr√®mer Enter per acceptar l‚Äôinici per defecte.\nPr√®mer Enter per acceptar la mida per defecte (fins al final del disc).\nPr√®mer ef00 per assignar el tipus EFI System Partition.\nPr√®mer w per escriure els canvis i sortir.\n\n\n\n\n\n\n\nNotaNota\n\n\n\nConfirmeu tots els canvis escrivint Y quan se us demani. Per assegurar-vos que la partici√≥ s‚Äôha creat correctament, podeu utilitzar gdisk -l tetris.img per llistar les particions del fitxer d‚Äôimatge. Observeu que la partici√≥ t√© el tipus EF00, indicant que √©s una partici√≥ ESP.\n\n\n\n\n\nAra que tenim la partici√≥, l‚Äôhem de formatar, √©s a dir, donar-li un sistema de fitxers. La UEFI requereix que la partici√≥ ESP estigui formatada en FAT32.\n\nIdentificar el dispositiu de bucle:\n\n# Com a root\nlosetup --partscan --find --show tetris.img\nAquesta comanda mostrar√† el nom del dispositiu de bucle creat (p.¬†ex., /dev/loop1) i la seva partici√≥ (/dev/loop1p1). Anoteu-ho.\n\nFormatejar la partici√≥:\n\n# Com a root\nmkfs.fat -F 32 /dev/loop1p1\n\n\n\nAra, muntem la partici√≥ i copiem el fitxer tetris.efi a la ubicaci√≥ correcta dins de l‚Äôestructura de directoris esperada per la UEFI.\n# Com a root\nmount /dev/loop1p1 /mnt\nmkdir -p /mnt/EFI/BOOT\ncp tetris.efi /mnt/EFI/BOOT/BOOTX64.EFI\numount /mnt\nlosetup -d /dev/loop1\n\n\n\n\n\n\nNotaObservaci√≥\n\n\n\nLa UEFI espera trobar el fitxer d‚Äôarrencada en aquesta ubicaci√≥ espec√≠fica: \\EFI\\BOOT\\BOOTX64.EFI per a sistemes x86_64. Si utilitzeu una arquitectura diferent, assegureu-vos de canviar el nom del fitxer segons sigui necessari (per exemple, BOOTAA64.EFI per a ARM64). Com estem emulant un sistema x86_64, utilitzem BOOTX64.EFI.\n\n\n\n\n\nFinalment, podem arrencar la nostra imatge de disc amb QEMU utilitzant el firmware UEFI.\nqemu-system-x86_64 -bios /usr/share/qemu/OVMF.fd -drive format=raw,file=tetris.img -net none\nSi tot ha anat b√©, haur√≠eu de veure el joc de Tetris en funcionament a la pantalla directament sense necessitat d‚Äôentrar a la UEFI Shell.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 2 ¬∑ Booting amb UEFI"
    ]
  },
  {
    "objectID": "exercises/02-booting/01-ex-week2.html",
    "href": "exercises/02-booting/01-ex-week2.html",
    "title": "Booting amb MBR i BIOS",
    "section": "",
    "text": "Entendre com funciona el proc√©s d‚Äôarrencada amb BIOS i MBR.\nCrear un bootloader senzill de primera i segona etapa.\nPracticar l‚Äô√∫s de QEMU per emular una m√†quina amb BIOS.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 1 ¬∑ Booting amb MBR i BIOS"
    ]
  },
  {
    "objectID": "exercises/02-booting/01-ex-week2.html#objectiu",
    "href": "exercises/02-booting/01-ex-week2.html#objectiu",
    "title": "Booting amb MBR i BIOS",
    "section": "",
    "text": "Entendre com funciona el proc√©s d‚Äôarrencada amb BIOS i MBR.\nCrear un bootloader senzill de primera i segona etapa.\nPracticar l‚Äô√∫s de QEMU per emular una m√†quina amb BIOS.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 1 ¬∑ Booting amb MBR i BIOS"
    ]
  },
  {
    "objectID": "exercises/02-booting/01-ex-week2.html#requisits-previs",
    "href": "exercises/02-booting/01-ex-week2.html#requisits-previs",
    "title": "Booting amb MBR i BIOS",
    "section": "Requisits previs",
    "text": "Requisits previs\n\nUna m√†quina virtual amb Debian i acc√©s a la terminal.\n\n\nPart 1: El Bootloader de Primera Etapa (MBR)\nL‚Äôobjectiu d‚Äôaquesta part √©s crear un disc virtual amb un MBR que la BIOS pugui recon√®ixer i executar, mostrant un missatge de benvinguda.\n\nCreaci√≥ de la imatge del disc\nCrearem un fitxer de 10 MiB que servir√† com a disc dur virtual. Utilitzarem la comanda dd:\ndd if=/dev/zero of=disk.img bs=512 count=20480\nObserveu que bs=512 estableix la mida del bloc a 512 bytes, i count=20480 indica que volem 20480 blocs, resultant en un fitxer de 10 MiB (512 bytes * 20480 blocs = 10 MiB). A m√©s, aquest fitxer estar√† inicialitzat amb zeros (if=/dev/zero) i es crear√† amb el nom disk.img.\n\n\n\n\n\n\nNotaRecordatori\n\n\n\nMBR significa Master Boot Record i ocupa els primers 512 bytes del disc.\n\n\n\n\nBootloader de primera etapa\nEl bootloader de primera etapa √©s un petit programa que s‚Äôexecuta quan la BIOS carrega el MBR. Aquest programa ha de ser molt petit, ja que nom√©s t√© 512 bytes per treballar. En aquest exercici, escriurem un bootloader senzill en llenguatge d‚Äôassemblador que mostrar√† un missatge de benvinguda.\nCrea un fitxer anomenat boot.asm amb el seg√ºent contingut:\n[org 0x7c00]      ; L'adre√ßa on la BIOS carrega el nostre codi\n\njmp short start   ; Salt a la rutina principal per evitar que la BIOS executi la taula de particions\nnop               ; \n\nstart:\n    ; Configurem els registres del segment\n    xor ax, ax      ; Posa AX a 0\n    mov ds, ax      ; Configurem DS (segment de dades) a 0\n    mov es, ax      ; Configurem ES (segment extra) a 0\n    mov ss, ax      ; Configurem SS (segment de pila) a 0\n    mov sp, 0x7c00  ; Configurem el punter de pila\n\n    ; Imprimir el missatge de benvinguda\n    mov si, msg     ; Carreguem l'adre√ßa del missatge a SI\n.print_loop:\n    lodsb           ; Carreguem un byte des de [DS:SI] a AL, i incrementem SI\n    cmp al, 0       ; Comparem AL amb zero\n    je .done_print  ; Si AL √©s zero, hem arribat al final del missatge\n    mov ah, 0x0e    ; Funci√≥ BIOS per a l'escriptura en mode teletip\n    int 0x10        ; Crida a la interrupci√≥ de v√≠deo\n    jmp .print_loop\n.done_print:\n\n    ; Bucle infinit per aturar l'execuci√≥\n    cli             ; Deshabilitem les interrupcions\n.halt:\n    hlt             ; Aturem la CPU\n    jmp .halt       ; Saltem a nosaltres mateixos en cas de despertar-nos d'un HLT\n\nmsg db \"Hola, soc l'MBR. La primera etapa d'arrencada ha funcionat!\", 0\n\n; Omplim la resta del sector amb zeros\ntimes 510 - ($-$$) db 0\n\n; La signatura MBR\ndw 0xaa55\nLa primera l√≠nia [org 0x7c00] indica a l‚Äôassemblador que el codi s‚Äôha de considerar com si s‚Äôexecut√©s a l‚Äôadre√ßa 0x7C00, que √©s on la BIOS carrega el sector MBR a la mem√≤ria.\nAbans de l‚Äôexecuci√≥ del nostre codi, els registres de segment de la CPU (DS, ES, SS) poden contenir valors aleatoris. Per garantir que les adreces de mem√≤ria siguin interpretades correctament en mode real, els inicialitzem a zero amb les instruccions mov ds, ax, mov es, ax i mov ss, ax.\nLa instrucci√≥ mov sp, 0x7c00 estableix el punter de pila (SP) a la mateixa adre√ßa on s‚Äôha carregat el MBR, evitant que la pila sobrescrigui el codi. En bootloaders m√©s complexos, aix√≤ permetria utilitzar instruccions com CALL, PUSH i POP sense problemes.\nLa rutina de bucle llegeix cada car√†cter de la cadena de text i el mostra a la pantalla mitjan√ßant la interrupci√≥ BIOS 0x10, funci√≥ teletip (AH=0x0E). Un cop s‚Äôha impr√®s tot el missatge, s‚Äôutilitza la instrucci√≥ HLT dins d‚Äôun bucle infinit per aturar la CPU. Aix√≤ evita que la CPU continu√Ø executant dades no definides m√©s enll√† del sector MBR, cosa que podria provocar comportaments inesperats.\n\n\nEnsamblar i escriure el bootloader al disc\nUtilitzarem nasm per ensamblar el nostre codi i dd per escriure‚Äôl al disc virtual:\n# Instal¬∑lar nasm si no el tens\nsu -c \"apt install nasm -y\"\n# Ensamblar el codi\nnasm -f bin -o boot.bin boot.asm\nOn -f bin indica que volem un fitxer binari pla, i -o boot.bin especifica el nom del fitxer de sortida.\n\n\n\n\n\n\nImportantProblemes\n\n\n\nSi la comanda d‚Äôinstalaci√≥ de qemu no acaba correctament, heu de fer un su -c \"apt update\" i problablement tamb√© un su -c \"apt upgrade -y\" abans de tornar a intentar instal¬∑lar qemu.\n\n\nAra, escrivim el bootloader al disc virtual:\ndd if=boot.bin of=disk.img bs=512 count=1 conv=notrunc\nOn conv=notrunc assegura que no truncarem el fitxer de sortida, mantenint la resta del disc intacta.\nPer comprovar que el bootloader s‚Äôha escrit correctament, podem utilitzar hexdump:\nhexdump -C -n 512 disk.img | sed -n '1,16p'\non -n 512 limita la sortida als primers 512 bytes (el sector MBR) i sed -n '1,16p' mostra nom√©s les primeres 16 l√≠nies de la sortida.\nTamb√© podem comprovar la signatura MBR (els √∫ltims dos bytes del sector) amb:\nhexdump -C -s 510 -n 2 disk.img\nHaurias de veure 55 aa, el 00000200 indica l‚Äôoffset.\n\n\nExecutar la imatge del disc amb QEMU\nFinalment, podem executar la nostra imatge de disc amb QEMU per veure el nostre missatge de benvinguda:\n# Instal¬∑lar QEMU si no el tens\nsu -c \"apt install qemu-system-x86 -y\"\n# Executar la imatge del disc\nqemu-system-x86_64 -drive file=disk.img,format=raw -nographic\n\n\n\n\n\n\nNotaNota\n\n\n\nLa nostra m√†quina virtual √©s mode text (-nographic), aix√≠ que hauries de veure el missatge de benvinguda a la terminal. Si teniu una interf√≠cie gr√†fica, podeu ometre -nographic per veure la sortida en una finestra de QEMU.\n\n\nEnhorabona! Acabes de crear i executar un bootloader de primera etapa senzill que mostra un missatge de benvinguda. Aquest √©s el primer pas per entendre com funciona el proc√©s d‚Äôarrencada d‚Äôun sistema operatiu.\n\n\n\n\n\n\nConsellSortir de QEMU\n\n\n\n\nPer sortir de QEMU, utilitza la combinaci√≥ de tecles Ctrl + A, seguida de X.\nAlternativament, pots Ctrl + C a la terminal per anar a la l√≠nia de comandes de QEMU i despr√©s escriure quit per sortir.\n\n\n\n\n\n\nPart 2: El Bootloader de Segona\nEn aquest punt, ja tenim el nostre bootloader de primera etapa, per√≤ la seva funci√≥ principal √©s passar el control a un programa m√©s gran. Aquest ser√† el nostre bootloader de segona etapa. Per fer-ho, el MBR ha de llegir un sector del disc i carregar-lo a la mem√≤ria. Normalment, el MBR analitzaria la taula de particions per trobar on comen√ßa el seg√ºent bootloader. No obstant aix√≤, per a aquest exercici, simplificarem aquest proc√©s i codificarem directament l‚Äôadre√ßa del nostre bootloader de segona etapa al codi.\nLa interrupci√≥ int 0x13h de la BIOS √©s la responsable de les operacions d‚Äôentrada/sortida de disc i requereix un paquet d‚Äôadreces de disc (DAP) per funcionar. Aquest DAP √©s una estructura de dades de 16 bytes que li diu a la BIOS on llegir i on escriure les dades. La proposta √©s configurar el nostre DAP per llegir el sector 2048 del disc (dword [si+8], 2048) i carregar-lo a la mem√≤ria a l‚Äôadre√ßa 0x8000 (word [si+4], 0x8000).\nEscriu un fitxer anomenat second_boot.asm amb el seg√ºent contingut:\n[org 0x8000]     ; Stage2 carregat pel MBR a 0x8000\n\nmov si, msg\n.print_loop:\n    lodsb\n    or al, al\n    jz .done\n    mov ah, 0x0e\n    int 0x10\n    jmp .print_loop\n\n.done:\n    jmp $       \n\nmsg db \"Hola des del bootloader de segona etapa!\", 0\nAra ensamblarem aquest codi i el prepararem per ser carregat pel nostre bootloader de primera etapa.\nnasm -f bin -o second_boot.bin second_boot.asm\nAra, escriurem aquest bootloader de segona etapa al disc virtual, per√≤ no al principi. El MBR est√† dissenyat per carregar el bootloader de segona etapa des d‚Äôuna ubicaci√≥ espec√≠fica del disc. En aquest cas, utilitzarem el sector 2048 (1 MiB) per a aix√≤. Representaria la primera partici√≥ d‚Äôun disc amb una taula de particions est√†ndard.\ndd if=second_boot.bin of=disk.img bs=512 count=1 seek=2048 conv=notrunc\nModifiqueu el vostre boot.asm per carregar aquest bootloader de segona etapa des del sector 2048:\n[org 0x7c00]\n\njmp short start\nnop\n\nstart:\n    xor ax, ax\n    mov ds, ax\n    mov es, ax\n    mov ss, ax\n    mov sp, 0x7c00\n\n    ; Missatge Stage1\n    mov si, msg_mbr\n.print_loop_mbr:\n    lodsb\n    or al, al\n    jz .load_next_stage\n    mov ah, 0x0e\n    int 0x10\n    jmp .print_loop_mbr\n\n.load_next_stage:\n    ; Configura DAP a 0x0600\n    mov si, 0x0600\n    mov byte [si], 0x10         ; mida del DAP\n    mov byte [si+1], 0x00\n    mov word [si+2], 1          ; sectors a llegir\n    mov word [si+4], 0x8000     ; offset dest√≠\n    mov word [si+6], 0x0000     ; segment dest√≠\n    mov dword [si+8], 2048      ; LBA\n    mov dword [si+12], 0        ; high LBA\n\n    ; BIOS extended read\n    mov ah, 0x42\n    mov dl, 0x80\n    int 0x13\n    jc .boot_failed\n\n    jmp 0:0x8000\n\n.boot_failed:\n    mov si, msg_fail\n.print_loop_fail:\n    lodsb\n    or al, al\n    jz .halt\n    mov ah, 0x0e\n    int 0x10\n    jmp .print_loop_fail\n.halt:\n    cli\n    hlt\n    jmp .halt\n\nmsg_mbr db \"Hola, soc l'MBR. Carregant Stage2...\",0\nmsg_fail db \"Error carregant Stage2!\",0\n\ntimes 510-($-$$) db 0\ndw 0xAA55\nAra ensamblarem el nou MBR:\nnasm -f bin -o boot.bin boot.asm\nI escriurem el nou MBR al disc virtual:\ndd if=boot.bin of=disk.img bs=512 count=1 conv=notrunc\nFinalment, executem la imatge del disc amb QEMU per veure el nostre missatge de benvinguda i la c√†rrega del bootloader de segona etapa:\nqemu-system-x86_64 -drive file=disk.img,format=raw -nographic\nEnhorabona! Acabes de crear i executar un bootloader de primera etapa que carrega un bootloader de segona etapa des d‚Äôuna ubicaci√≥ espec√≠fica del disc.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 1 ¬∑ Booting amb MBR i BIOS"
    ]
  },
  {
    "objectID": "exercises/02-booting/03-ex-week2.html",
    "href": "exercises/02-booting/03-ex-week2.html",
    "title": "Arrancada UEFI",
    "section": "",
    "text": "Entendre com funciona la UEFI i la partici√≥ ESP.\nConfigurar una m√†quina virtual amb dual boot.\nPracticar la gesti√≥ de l‚Äôordre d‚Äôarrencada i la creaci√≥ d‚Äôentrades UEFI.\n\nAl final, hauries de poder seleccionar entre AlmaLinux i Debian a l‚Äôinici de la m√†quina virtual.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 3 ¬∑ Dual Boot amb UEFI"
    ]
  },
  {
    "objectID": "exercises/02-booting/03-ex-week2.html#objectiu",
    "href": "exercises/02-booting/03-ex-week2.html#objectiu",
    "title": "Arrancada UEFI",
    "section": "",
    "text": "Entendre com funciona la UEFI i la partici√≥ ESP.\nConfigurar una m√†quina virtual amb dual boot.\nPracticar la gesti√≥ de l‚Äôordre d‚Äôarrencada i la creaci√≥ d‚Äôentrades UEFI.\n\nAl final, hauries de poder seleccionar entre AlmaLinux i Debian a l‚Äôinici de la m√†quina virtual.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 3 ¬∑ Dual Boot amb UEFI"
    ]
  },
  {
    "objectID": "exercises/02-booting/03-ex-week2.html#preparaci√≥-de-les-m√†quines-virtuals",
    "href": "exercises/02-booting/03-ex-week2.html#preparaci√≥-de-les-m√†quines-virtuals",
    "title": "Arrancada UEFI",
    "section": "Preparaci√≥ de les M√†quines Virtuals",
    "text": "Preparaci√≥ de les M√†quines Virtuals\nEn primer lloc, heu de crear dues m√†quines virtuals amb UEFI com a firmware.\n\n\n\nNom\nOS\nDisc\nFirmware\n\n\n\n\nVM1-AlmaLinux\nAlmaLinux 9\n20 GB\nUEFI\n\n\nVM2-Debian\nDebian 12\n20 GB\nUEFI\n\n\n\n\n\n\n\n\n\nNotaNota\n\n\n\nAssegureu-vos que ambdues m√†quines virtuals tinguin UEFI com a firmware. En el moment de fer les particions, heu de veure que es crea una partici√≥ ESP (EFI System Partition) autom√†ticament. Si no √©s aix√≠, pot ser que la m√†quina virtual no estigui configurada correctament per utilitzar UEFI. No continu√Øs fins que no tinguis aquesta partici√≥.\n\n\n\n\n\n\n\n\nAlertaAdvert√®ncia\n\n\n\nSi VMWare no us deixa seleccionar UEFI com a firmware, un cop creada la m√†quina virtual amb BIOS, heu de modificar el fitxer .vmx de la m√†quina virtual i afegir al final les l√≠nies seg√ºents:\nfirmware = \"efi\"\nefi.secureBoot.enabled = \"FALSE\"\nGuarda els canvis i inicia la m√†quina virtual de nou, i instal¬∑la el sistema operatiu.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 3 ¬∑ Dual Boot amb UEFI"
    ]
  },
  {
    "objectID": "exercises/02-booting/03-ex-week2.html#migrar-el-disc-de-debian-a-la-m√†quina-virtual-dalmalinux",
    "href": "exercises/02-booting/03-ex-week2.html#migrar-el-disc-de-debian-a-la-m√†quina-virtual-dalmalinux",
    "title": "Arrancada UEFI",
    "section": "Migrar el disc de Debian a la m√†quina virtual d‚ÄôAlmaLinux",
    "text": "Migrar el disc de Debian a la m√†quina virtual d‚ÄôAlmaLinux\n\nApaga la m√†quina virtual de Debian si est√† en funcionament.\nLocalitza el fitxer de disc virtual de la m√†quina virtual de Debian. Aquest fitxer al programa VMware sol tenir l‚Äôextensi√≥ .vmdk.\nA la configuraci√≥ de la m√†quina virtual d‚ÄôAlmaLinux, aneu a l‚Äôopci√≥ de disc dur i afegiu un disc dur existent, seleccionant el disc dur de la m√†quina virtual de Debian que heu localitzat en el pas anterior.\nConfirmar els parametres i aplica els canvis.\n\n\nTest\nAssegureu-vos que la m√†quina virtual ara t√© dos discs durs: un amb AlmaLinux i un altre amb Debian utilitzant la comanda lsblk, hauria de mostrar-vos alguna cosa com aix√≤:\n[root@localhost ~]# lsblk\nNAME               MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS\nsr0                 11:0    1  1.7G  0 rom\nnvme0n1            259:0    0   20G  0 disk\n‚îú‚îÄnvme0n1p1        259:1    0  600M  0 part /boot/efi\n‚îú‚îÄnvme0n1p2        259:2    0    1G  0 part /boot\n‚îî‚îÄnvme0n1p3        259:3    0 18.4G  0 part\n‚îú‚îÄalmalinux-root 253:0    0 16.4G  0 lvm  /\n‚îî‚îÄalmalinux-swap 253:1    0    2G  0 lvm  [SWAP]\nnvme0n2            259:4    0   20G  0 disk\n‚îú‚îÄnvme0n2p1        259:5    0  512M  0 part\n‚îú‚îÄnvme0n2p2        259:6    0 18.5G  0 part\n‚îî‚îÄnvme0n2p3        259:7    0  976M  0 part\nOn nvme0n1 √©s el disc d‚ÄôAlmaLinux i nvme0n2 √©s el disc de Debian. Es posible que el nom del disc no sigui nvme, pot ser sda, vda, etc. Dep√®n del tipus de disc que tinguis.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 3 ¬∑ Dual Boot amb UEFI"
    ]
  },
  {
    "objectID": "exercises/02-booting/03-ex-week2.html#tasca",
    "href": "exercises/02-booting/03-ex-week2.html#tasca",
    "title": "Arrancada UEFI",
    "section": "Tasca",
    "text": "Tasca\nReinicia la m√†quina virtual d‚ÄôAlmaLinux i entra a la UEFI (normalment prement F2 o Esc durant l‚Äôarrencada). La teva tasca es configurar la UEFI per afegir una entrada d‚Äôarrencada per a Debian. Has de poder arrancar tant AlmaLinux com Debian des del men√∫ d‚Äôarrencada de la UEFI.\n\nEl primer pas √©s identificar com podem arrancar Debian.\nAnalitzeu la comanda bcfg amb help bcfg per veure com funciona.\n\n\n\n\n\n\n\nImportantNota\n\n\n\nLa comanda bcfg es troba disponible a partir de la versi√≥ 2.3 de UEFI Shell. Si la vostra m√†quina virtual utilitza una versi√≥ anterior, √©s possible que no tingueu aquesta comanda disponible. En aquest cas, haureu d‚Äôactualitzar el firmware UEFI de la vostra m√†quina virtual o utilitzar una altra eina per gestionar les entrades d‚Äôarrencada com efibootmgr des de Linux.\n\n\nEn cas de no poder accedir a la shell o no tenir disponible la comanda bcfg encara que es compleixi el requisit de la versi√≥ de UEFI Shell &gt;= 2.3, cal arrencar des d‚Äôun fitxer EFI Shell V2 m√©s complet. Podeu descarregar-lo aqu√≠.\nPer poder arrencar aquest fitxer des de VMware, l‚Äôhem d‚Äôescriure amb el format correcte a una imatge vmdk:\n\nEl primer pas √©s crear una imatge de disc buida on despr√©s escriurem l‚Äôarbre de directoris adequat per EFI aix√≠ com el fitxer descarregat a arrencar.\ndd if=/dev/zero of=Shell.img bs=1M count=64\nAra utilitzem parted per crear una taula de particions GPT i una partici√≥ FAT32 marcada com a bootable.\nparted Shell.img --script mklabel gpt\nparted Shell.img --script mkpart ESP fat32 1MiB 100%\nparted Shell.img --script set 1 boot on\nPer poder treballar amb les particions dins del fitxer de disc, l‚Äôassociem a un dispositiu loop.\nsudo losetup -Pf Shell.img\nFormatem la partici√≥ EFI amb FAT32, obligatori per a UEFI:\nsudo mkfs.vfat -F32 /dev/loop0p1\nMuntem la partici√≥, creem l‚Äôarbre de directoris correcte i copiem el fitxer .efi amb el nom BOOTX64.EFI. Finalment, desmuntem la partici√≥ i desassociem el dispositiu loop.\nsudo mount /dev/loop0p1 /mnt\nsudo mkdir -p /mnt/EFI/BOOT\nsudo cp Shellx64.efi /mnt/EFI/BOOT/BOOTX64.EFI\nsudo umount /mnt\nsudo losetup -d /dev/loop0\nFinalment convertim la imatge RAW a VMDK perqu√® pugui ser utilitzada a VMware:\nqemu-img convert -f raw -O vmdk Shell.img Shell.vmdk\n\nPer usar aquest fitxer generat, afegiu un disc dur (Hard Disk) a la vostra m√†quina i obriu-lo.\n\n\n\n\n\n\nImportantNota\n\n\n\nEn cas de tenir un altre disc dur bootejable a la m√†quina virtual, per defecte no arrencar√† des del de UEFI Shell. Per poder executar-ho, heu d‚Äôentrar a la UEFI (normalment prement F2 o Esc durant l‚Äôarrencada) i seleccionar el disc dur corresponent a la UEFI Shell.\n\n\nSi per alguna ra√≥ no podeu executar les comandes per crear un disc dur amb l‚Äôimatge de UEFI Shell, el podeu descarregar des d‚Äôaqu√≠.\nA partir d‚Äôaquesta shell ja teniu disponible la comanda bcfg",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 3 ¬∑ Dual Boot amb UEFI"
    ]
  },
  {
    "objectID": "exercises/02-booting/03-ex-week2.html#entrega",
    "href": "exercises/02-booting/03-ex-week2.html#entrega",
    "title": "Arrancada UEFI",
    "section": "Entrega",
    "text": "Entrega\nHas de presentar un document amb els seg√ºents punts:\n\nEls passos que has seguit per configurar la UEFI i afegir l‚Äôentrada d‚Äôarrencada per a Debian.\nFes una captura de pantalla del men√∫ d‚Äôarrencada de la UEFI mostrant les dues entrades (AlmaLinux i Debian) i puja-la a l‚Äôaula virtual juntament amb una breu descripci√≥ dels passos que has seguit per aconseguir-ho.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 3 ¬∑ Dual Boot amb UEFI"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-pam.html",
    "href": "exercises/04-accounts/01-pam.html",
    "title": "Doble factor d‚Äôautenticaci√≥ (2FA) amb PAM",
    "section": "",
    "text": "Acc√©s a una m√†quina virtual Linux (EC2 amb Amazon Linux 2023).\nAcc√©s SSH a la m√†quina virtual (clau publica/privada).\nInstal¬∑lar l‚Äôaplicaci√≥ Google Authenticator al vostre dispositiu m√≤bil (Android o iOS).",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 12 ¬∑ Autenticaci√≥ de doble factor (2FA) amb PAM"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-pam.html#trobleshooting",
    "href": "exercises/04-accounts/01-pam.html#trobleshooting",
    "title": "Doble factor d‚Äôautenticaci√≥ (2FA) amb PAM",
    "section": "Trobleshooting",
    "text": "Trobleshooting\n\nSi no podeu iniciar sessi√≥, reviseu els logs del servei sshd amb sudo journalctl -u sshd per identificar possibles errors de configuraci√≥.",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 12 ¬∑ Autenticaci√≥ de doble factor (2FA) amb PAM"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-pam.html#exercicis-adicionals",
    "href": "exercises/04-accounts/01-pam.html#exercicis-adicionals",
    "title": "Doble factor d‚Äôautenticaci√≥ (2FA) amb PAM",
    "section": "Exercicis adicionals",
    "text": "Exercicis adicionals\n\nConfigura l‚Äôusuari ec2-user per utilitzar tamb√© l‚Äôautenticaci√≥ de doble factor amb Google Authenticator. Amb clau p√∫blica/privada i google authenticator.\nPreparar un script de creaci√≥ d‚Äôusuaris que automatitzi la creaci√≥ d‚Äôusuaris amb Google Authenticator preconfigurat amb public key authentication i 2FA.",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 12 ¬∑ Autenticaci√≥ de doble factor (2FA) amb PAM"
    ]
  },
  {
    "objectID": "exercises/03-fs/09-ex-week6.html",
    "href": "exercises/03-fs/09-ex-week6.html",
    "title": "Administrant RAIDs",
    "section": "",
    "text": "Dos discs durs virtuals de 20 GB cadascun per la configuraci√≥ del RAID1.\nImatge iso basada en Alma Linux.\nUn software de virtualitzaci√≥ com VirtualBox, VMware, UTM o QEMU.\n\n\n\n\nConfigurar un RAID1 per la partici√≥ root (/) durant la instal¬∑laci√≥ d‚ÄôAlma Linux.\n\n\n\n\nInicieu la instal¬∑laci√≥ d‚ÄôAlma Linux fins a la pantalla de selecci√≥ de discs.\n\nSeleccioneu els dos discs virtuals i trieu l‚Äôopci√≥ Personalitzat.\n\nFeu clic a Fet.\n\nApareixer√† la finestra de particions manuals:\n\nLes particions creades seran:\n\n/boot/efi ‚Äì 600 MB\n\n/boot ‚Äì 1 GB\n\nswap ‚Äì 2 GB\n\n/ ‚Äì 16,4 GB\n\nPer configurar el RAID1, seleccioneu la partici√≥ / i feu clic a Editar.\n\n\nTrieu RAID1 com a tipus de dispositiu.\n\nFeu clic a Fet ‚Üí Acceptar canvis.\n\n\n\n\n\n\n\nUn cop finalitzada la instal¬∑laci√≥, el sistema es reiniciar√†.\n\nSi tot √©s correcte, Alma Linux arrencar√† sense problemes.\n\nObserveu que tenim dues particions / (una per disc).\n\n\n\n\n\n\n\nAlertaQu√® passa si el disc vda falla?\n\n\n\nEn cas de fallada del disc vda, el sistema no arrencar√† perqu√® la partici√≥ /boot no est√† replicada en RAID. Tenim replicada nom√©s la partici√≥ /. Per tant, si el disc vda falla, el sistema no podr√† accedir a la partici√≥ /boot i no podr√† arrencar.",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 9 ¬∑ Configuraci√≥ de RAIDs amb mdadm"
    ]
  },
  {
    "objectID": "exercises/03-fs/09-ex-week6.html#installaci√≥-dun-raid1-a-alma-linux",
    "href": "exercises/03-fs/09-ex-week6.html#installaci√≥-dun-raid1-a-alma-linux",
    "title": "Administrant RAIDs",
    "section": "",
    "text": "Dos discs durs virtuals de 20 GB cadascun per la configuraci√≥ del RAID1.\nImatge iso basada en Alma Linux.\nUn software de virtualitzaci√≥ com VirtualBox, VMware, UTM o QEMU.\n\n\n\n\nConfigurar un RAID1 per la partici√≥ root (/) durant la instal¬∑laci√≥ d‚ÄôAlma Linux.\n\n\n\n\nInicieu la instal¬∑laci√≥ d‚ÄôAlma Linux fins a la pantalla de selecci√≥ de discs.\n\nSeleccioneu els dos discs virtuals i trieu l‚Äôopci√≥ Personalitzat.\n\nFeu clic a Fet.\n\nApareixer√† la finestra de particions manuals:\n\nLes particions creades seran:\n\n/boot/efi ‚Äì 600 MB\n\n/boot ‚Äì 1 GB\n\nswap ‚Äì 2 GB\n\n/ ‚Äì 16,4 GB\n\nPer configurar el RAID1, seleccioneu la partici√≥ / i feu clic a Editar.\n\n\nTrieu RAID1 com a tipus de dispositiu.\n\nFeu clic a Fet ‚Üí Acceptar canvis.\n\n\n\n\n\n\n\nUn cop finalitzada la instal¬∑laci√≥, el sistema es reiniciar√†.\n\nSi tot √©s correcte, Alma Linux arrencar√† sense problemes.\n\nObserveu que tenim dues particions / (una per disc).\n\n\n\n\n\n\n\nAlertaQu√® passa si el disc vda falla?\n\n\n\nEn cas de fallada del disc vda, el sistema no arrencar√† perqu√® la partici√≥ /boot no est√† replicada en RAID. Tenim replicada nom√©s la partici√≥ /. Per tant, si el disc vda falla, el sistema no podr√† accedir a la partici√≥ /boot i no podr√† arrencar.",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 9 ¬∑ Configuraci√≥ de RAIDs amb mdadm"
    ]
  },
  {
    "objectID": "exercises/03-fs/09-ex-week6.html#migraci√≥-de-la-carpeta-home-a-un-raid5",
    "href": "exercises/03-fs/09-ex-week6.html#migraci√≥-de-la-carpeta-home-a-un-raid5",
    "title": "Administrant RAIDs",
    "section": "Migraci√≥ de la carpeta /home a un RAID5",
    "text": "Migraci√≥ de la carpeta /home a un RAID5\n\nüß∞ Requisits\nEn la m√†quina virtual anterior, podem afegir quatre discs durs virtuals de 1 GB cadascun (vdc, vdd, vde, vdf).\n\n\nüéØ Objectiu\nMigrar el contingut de la carpeta /home a un dispositiu RAID5 format per quatre discs virtuals.\n\n\nü™õ Procediment\n\nCreem el RAID5 amb la comanda seg√ºent:\nmdadm --create --verbose /dev/md0 --level=5 --raid-devices=4 /dev/vd[c-f]\nComprovem que el RAID s‚Äôha creat correctament amb la comanda:\ncat /proc/mdstat\nCreem un sistema de fitxers XFS en el dispositiu RAID5:\nmkfs.xfs /dev/md0\nMuntarem el dispositiu RAID5 en un directori temporal:\nmkdir /mnt/raid\nmount /dev/md0 /mnt/raid\nCopiem el contingut de la carpeta /home al dispositiu RAID5:\ncp -r /home/* /mnt/raid\nDesmuntem el dispositiu RAID5 del directori temporal:\numount /mnt/raid\nMuntarem el dispositiu RAID5 en la carpeta /home:\nmount /dev/md0 /home\nObtenim el UUID del dispositiu RAID5 amb la comanda:\nblkid /dev/md0\nFem una c√≤pia de seguretat del fitxer /etc/fstab:\n```bash\nPer fer que el muntatge sigui permanent, afegim la seg√ºent l√≠nia al fitxer /etc/fstab:\nUUID=&lt;UUID&gt;  /home  xfs  defaults  0 0\n\n\n\n‚úÖ Resultat final\n\nEl contingut de la carpeta /home s‚Äôha migrat correctament al dispositiu RAID5.\n\nEl sistema utilitza ara el RAID5 per emmagatzemar les dades dels usuaris",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 9 ¬∑ Configuraci√≥ de RAIDs amb mdadm"
    ]
  },
  {
    "objectID": "exercises/03-fs/09-ex-week6.html#simulaci√≥-de-fallades-en-el-raid5",
    "href": "exercises/03-fs/09-ex-week6.html#simulaci√≥-de-fallades-en-el-raid5",
    "title": "Administrant RAIDs",
    "section": "Simulaci√≥ de fallades en el RAID5",
    "text": "Simulaci√≥ de fallades en el RAID5\nAra simularem una fallada en un dels discs durs virtuals del RAID5. I observarem com el sistema continua funcionant sense problemes.\n\nCrearem un usuari de prova i un fitxer de text a la seva carpeta /home:\nuseradd test\necho \"Hola m√≥n\" &gt; /home/test/hola.txt\nchown -R test:test /home/test\nSimulem la fallada d‚Äôun disc dur virtual del RAID5:\nmdadm --manage /dev/md127 --fail /dev/vdc\nComprovem que podem accedir al fitxer de text creat anteriorment:\ncat /home/test/hola.txt\nAra intentarem simular la fallada d‚Äôun segon disc dur virtual del RAID5:\nmdadm --manage /dev/md127 --fail /dev/vdd\nComprovem que el sistema ens avisa que no es pot fallar un segon disc perqu√® el RAID5 nom√©s tolera la fallada d‚Äôun disc:\nmdadm: Cannot remove /dev/vdd from /dev/md0,\n       array will be failed.",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 9 ¬∑ Configuraci√≥ de RAIDs amb mdadm"
    ]
  },
  {
    "objectID": "exercises/03-fs/09-ex-week6.html#exercicis",
    "href": "exercises/03-fs/09-ex-week6.html#exercicis",
    "title": "Administrant RAIDs",
    "section": "Exercicis",
    "text": "Exercicis\nEs demana instal¬∑lar un sistema AlmaLinux de forma tradicional sense RAID en un disc virtual de 20‚ÄØGB (vda), creant les quatre particions habituals: /boot/efi, /boot, swap i /.\nUn cop finalitzada la instal¬∑laci√≥:\n\nAfegiu dos discs durs virtuals addicionals de 20‚ÄØGB cadascun (vdb i vdc).\nMigrar les particions existents a RAID1 de la seg√ºent manera:\n\n/boot/efi ‚Üí RAID1 amb vdb1 i vdc1.\n/boot ‚Üí RAID1 amb vdb2 i vdc2.\nswap ‚Üí RAID1 amb vdb3 i vdc3.\n/ ‚Üí RAID1 amb vdb4 i vdc4.\n\nConfigureu el sistema perqu√® arranqui correctament des dels discs vdb i vdc.\nUn cop comprovat el correcte funcionament, elimineu el disc original vda.\nVerificar que el sistema arranca correctament despr√©s de la migraci√≥.\nConfirmar que totes les particions es troben en RAID1.\nDocumentar tot el proc√©s amb captures de pantalla, explicacions detallades i justificacions t√®cniques en un informe final.",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 9 ¬∑ Configuraci√≥ de RAIDs amb mdadm"
    ]
  },
  {
    "objectID": "exercises/01-foundations-of-systems-administration/01-ex-week1.html",
    "href": "exercises/01-foundations-of-systems-administration/01-ex-week1.html",
    "title": "Configuraci√≥ d‚Äôentorn de virtualitzaci√≥",
    "section": "",
    "text": "Aquest exercici t√© com a objectiu recordar i consolidar les habilitats en la configuraci√≥ d‚Äôentorns de virtualitzaci√≥ utilitzant m√†quines virtuals (MV). Durant el curs, la creaci√≥ i destrucci√≥ de MV ser√† una tasca recurrent, per la qual cosa √©s fonamental tenir una base s√≤lida. Preparant una plantilla preinstal¬∑lada, podreu estalviar temps significatiu evitant la reinstal¬∑laci√≥ completa del sistema operatiu cada cop que necessiteu un nou entorn de treball.",
    "crumbs": [
      "Activitats",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Activitat 1 ¬∑ Configuraci√≥ d'entorn de virtualitzaci√≥"
    ]
  },
  {
    "objectID": "exercises/01-foundations-of-systems-administration/01-ex-week1.html#requeriments-previs",
    "href": "exercises/01-foundations-of-systems-administration/01-ex-week1.html#requeriments-previs",
    "title": "Configuraci√≥ d‚Äôentorn de virtualitzaci√≥",
    "section": "Requeriments previs",
    "text": "Requeriments previs\n\nDisposar d‚Äôun hipervisor de virtualitzaci√≥ instal¬∑lat a la vostra m√†quina hoste. Es recomana utilitzar VMware Workstation Pro o VMware Fusion. Podeu reutilitzar la instal¬∑laci√≥ que ja vau fer a l‚Äôassignatura de Sistemes Operatius.",
    "crumbs": [
      "Activitats",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Activitat 1 ¬∑ Configuraci√≥ d'entorn de virtualitzaci√≥"
    ]
  },
  {
    "objectID": "exercises/01-foundations-of-systems-administration/01-ex-week1.html#objectius",
    "href": "exercises/01-foundations-of-systems-administration/01-ex-week1.html#objectius",
    "title": "Configuraci√≥ d‚Äôentorn de virtualitzaci√≥",
    "section": "Objectius",
    "text": "Objectius\n\nCrear i configurar m√†quines virtuals amb distribucions Linux.\nUtilitzar snapshots per gestionar l‚Äôestat de les MV.\nConfigurar i establir una connexi√≥ remota segura a les MV utilitzant SSH.",
    "crumbs": [
      "Activitats",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Activitat 1 ¬∑ Configuraci√≥ d'entorn de virtualitzaci√≥"
    ]
  },
  {
    "objectID": "exercises/01-foundations-of-systems-administration/01-ex-week1.html#tasques",
    "href": "exercises/01-foundations-of-systems-administration/01-ex-week1.html#tasques",
    "title": "Configuraci√≥ d‚Äôentorn de virtualitzaci√≥",
    "section": "Tasques",
    "text": "Tasques\n\nCreaci√≥ de m√†quines virtuals\nCreareu dues m√†quines virtuals amb les distribucions Linux que farem servir durant el curs. Assegureu-vos de descarregar les imatges ISO correctament:\n\nAlmaLinux: Una distribuci√≥ de GNU/Linux basada en Red Hat Enterprise Linux (RHEL).Descarregueu la versi√≥ 9.6.\nDebian: Una distribuci√≥ popular coneguda per la seva estabilitat. Descarregueu la versi√≥ 12.5.0.\n\nEn la configuraci√≥ no necessitareu finestres gr√†fiques, i de moment podeu utilitzar una configuraci√≥ de disc i particions est√†ndard. M√©s endavant, durant el curs, anirem ajustant la configuraci√≥ segons les necessitats espec√≠fiques de cada pr√†ctica.\n\n\nCreaci√≥ de snapshots\nUn cop instal¬∑lades les dues m√†quines virtuals, creeu una snapshot de cadascuna. Una snapshot √©s una instant√†nia de l‚Äôestat actual de la m√†quina virtual, incloent-hi la seva mem√≤ria, configuraci√≥ i l‚Äôestat dels seus discos virtuals. Aquesta eina us permetr√† tornar r√†pidament a un estat inicial net en qualsevol moment, evitant haver de reinstal¬∑lar el sistema si alguna configuraci√≥ falla.\n\n\nConfiguraci√≥ d‚Äôacc√©s remot amb SSH\nPer facilitar la connexi√≥ i gesti√≥ de les m√†quines virtuals, configurarem l‚Äôacc√©s remot mitjan√ßant SSH (Secure Shell). Aix√≤ us permetr√† connectar-vos a les MV des de la vostra m√†quina hoste utilitzant una terminal o PowerShell amb suport SSH (Linux o MacOS).\nssh user@vm_ip_address\n\n\n√ös de la snapshot\nUn cop h√†giu completat la configuraci√≥ inicial i les proves amb les m√†quines virtuals, practiqueu l‚Äô√∫s de les snapshots:\n\nInstal¬∑leu algun programari a la MV amb debian com les eines de desenvolupament (gcc, make, etc).\n\n# Recordeu instal¬∑lar com a root\napt install build-essential\n\nComproveu que el programari est√† instal¬∑lat correctament.\n\ngcc --version\n\nDespr√©s, torneu a la snapshot creada anteriorment per veure que el programari ja no est√† instal¬∑lat.",
    "crumbs": [
      "Activitats",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Activitat 1 ¬∑ Configuraci√≥ d'entorn de virtualitzaci√≥"
    ]
  },
  {
    "objectID": "exercises/01-foundations-of-systems-administration/01-ex-week1.html#activitat-proposada",
    "href": "exercises/01-foundations-of-systems-administration/01-ex-week1.html#activitat-proposada",
    "title": "Configuraci√≥ d‚Äôentorn de virtualitzaci√≥",
    "section": "Activitat proposada",
    "text": "Activitat proposada\n\nEscriu un script senzill que et permeti obrir la MV i connectar-te via SSH amb un sol comandament. Aquest script hauria de:\n\nIniciar la m√†quina virtual si no est√† en funcionament.\nEsperar fins que la MV estigui completament engegada.\nConnectar-se a la MV mitjan√ßant SSH.",
    "crumbs": [
      "Activitats",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Activitat 1 ¬∑ Configuraci√≥ d'entorn de virtualitzaci√≥"
    ]
  },
  {
    "objectID": "exercises/05-virtualitzation/01-docker.html",
    "href": "exercises/05-virtualitzation/01-docker.html",
    "title": "Exerccisis amb Docker",
    "section": "",
    "text": "Donada la seg√ºent aplicaci√≥ en Python:\n```python\nimport falcon\n\nclass Item:\n    def __init__(self, id, name):\n        self.id = id\n        self.name = name\n\nitems = [\n    Item(1, \"Item 1\"),\n    Item(2, \"Item 2\"),\n    Item(3, \"Item 3\"),\n]\n\nclass ItemListResource:\n    def on_get(self, req, resp):\n        resp.media = [{\"id\": item.id, \"name\": item.name} for item in items]\n\nclass ItemResource:\n    def on_get(self, req, resp, item_id):\n        item = next((i for i in items if i.id == int(item_id)), None)\n        if item:\n            resp.media = {\"id\": item.id, \"name\": item.name}\n        else:\n            resp.status = falcon.HTTP_404\n            resp.media = {\"error\": \"Item not found\"}\n\n\napp = falcon.App()\n\napp.add_route('/items', ItemListResource())\napp.add_route('/items/{item_id}', ItemResource())\n```\n\nPer executar l'aplicaci√≥, es pot fer servir el seg√ºent script:\n\n```bash\ngunicorn -b 0.0.0.0:8000 app:app\n```\n\nOn `app` √©s el nom del fitxer on es troba l'aplicaci√≥.\n\nA m√©s, sabem que l'aplicaci√≥ necessita les seg√ºents llibreries: `falcon` i `gunicorn` en les versions 3.0.0 i 20.1.0 respectivament.\n\nLa teva tasca √©s crear un Dockerfile per a aquesta aplicaci√≥ i un fitxer Makefile que permeti construir la imatge i executar-la.",
    "crumbs": [
      "Activitats",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors",
      "Activitat 13 ¬∑ Introducci√≥ a Docker"
    ]
  },
  {
    "objectID": "exercises/05-virtualitzation/01-docker.html#exercici-1-docker-b√†sic-amb-un-script-python",
    "href": "exercises/05-virtualitzation/01-docker.html#exercici-1-docker-b√†sic-amb-un-script-python",
    "title": "Exerccisis amb Docker",
    "section": "",
    "text": "Donada la seg√ºent aplicaci√≥ en Python:\n```python\nimport falcon\n\nclass Item:\n    def __init__(self, id, name):\n        self.id = id\n        self.name = name\n\nitems = [\n    Item(1, \"Item 1\"),\n    Item(2, \"Item 2\"),\n    Item(3, \"Item 3\"),\n]\n\nclass ItemListResource:\n    def on_get(self, req, resp):\n        resp.media = [{\"id\": item.id, \"name\": item.name} for item in items]\n\nclass ItemResource:\n    def on_get(self, req, resp, item_id):\n        item = next((i for i in items if i.id == int(item_id)), None)\n        if item:\n            resp.media = {\"id\": item.id, \"name\": item.name}\n        else:\n            resp.status = falcon.HTTP_404\n            resp.media = {\"error\": \"Item not found\"}\n\n\napp = falcon.App()\n\napp.add_route('/items', ItemListResource())\napp.add_route('/items/{item_id}', ItemResource())\n```\n\nPer executar l'aplicaci√≥, es pot fer servir el seg√ºent script:\n\n```bash\ngunicorn -b 0.0.0.0:8000 app:app\n```\n\nOn `app` √©s el nom del fitxer on es troba l'aplicaci√≥.\n\nA m√©s, sabem que l'aplicaci√≥ necessita les seg√ºents llibreries: `falcon` i `gunicorn` en les versions 3.0.0 i 20.1.0 respectivament.\n\nLa teva tasca √©s crear un Dockerfile per a aquesta aplicaci√≥ i un fitxer Makefile que permeti construir la imatge i executar-la.",
    "crumbs": [
      "Activitats",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors",
      "Activitat 13 ¬∑ Introducci√≥ a Docker"
    ]
  },
  {
    "objectID": "exercises/05-virtualitzation/01-docker.html#exercici-2-compartint-fitxers-entre-host-i-contenidor",
    "href": "exercises/05-virtualitzation/01-docker.html#exercici-2-compartint-fitxers-entre-host-i-contenidor",
    "title": "Exerccisis amb Docker",
    "section": "Exercici 2: Compartint fitxers entre host i contenidor",
    "text": "Exercici 2: Compartint fitxers entre host i contenidor\nTens el seg√ºent script Python:\nwith open(\"data.txt\") as f:\n    print(f.read())\n\nCrea una imatge Docker m√≠nima que executi aquest script.\nNo copi√Øs data.txt dins de la imatge.\nExecuta el contenidor de manera que l‚Äôarxiu data.txt del host es vegi dins del contenidor.\nEl contingut de data.txt √©s: ‚ÄúHola, Docker!‚Äù i s‚Äôha de mostrar a la terminal quan s‚Äôexecuta el contenidor.\n\nQuina √©s la comanda per construir la imatge Docker? I per executar el contenidor amb l‚Äôarxiu data.txt del host muntat dins del contenidor?\nCal recontruir la imatge Docker si es modifica el contingut de data.txt al host? Justifica la teva resposta.\nQuina difer√®ncia t√© incloure l‚Äôarxiu data.txt dins de la imatge Docker o en la execuci√≥ del contenidor? Quin impacte t√© aix√≤ en el temps de construcci√≥ i la mida de la imatge Docker?",
    "crumbs": [
      "Activitats",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors",
      "Activitat 13 ¬∑ Introducci√≥ a Docker"
    ]
  },
  {
    "objectID": "exercises/05-virtualitzation/01-docker.html#exercici-3-optimitzaci√≥-de-dockerfile",
    "href": "exercises/05-virtualitzation/01-docker.html#exercici-3-optimitzaci√≥-de-dockerfile",
    "title": "Exerccisis amb Docker",
    "section": "Exercici 3: Optimitzaci√≥ de Dockerfile",
    "text": "Exercici 3: Optimitzaci√≥ de Dockerfile\nA partir d‚Äôuna imatge de Dockerfile, heu d‚Äôanalitzar capes i mida d‚Äôuna imatge:\nFROM python:3.11-slim\nRUN apt-get update\nRUN apt-get install -y curl\nRUN pip install flask\nCOPY app.py .\nCMD [\"python\", \"app.py\"]\n\nConstrueix la imatge Docker i identifica les capes creades per cada instrucci√≥ del Dockerfile.\nProposa una versi√≥ millorada del Dockerfile que redueixi la mida de la imatge final combinant capes i eliminant redund√†ncies.\nCalcula la difer√®ncia de mida entre la imatge original i la imatge millorada.",
    "crumbs": [
      "Activitats",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors",
      "Activitat 13 ¬∑ Introducci√≥ a Docker"
    ]
  },
  {
    "objectID": "exercises/05-virtualitzation/01-docker.html#exercici-4-optimitzaci√≥-dimatges-docker",
    "href": "exercises/05-virtualitzation/01-docker.html#exercici-4-optimitzaci√≥-dimatges-docker",
    "title": "Exerccisis amb Docker",
    "section": "Exercici 4: Optimitzaci√≥ d‚Äôimatges Docker",
    "text": "Exercici 4: Optimitzaci√≥ d‚Äôimatges Docker\nDonada la seg√ºent api amb python i flask:\nfrom flask import Flask\napp = Flask(__name__)\n\n@app.route(\"/\")\ndef hello():\n    return \"Hello world!\"\n\nif __name__ == \"__main__\":\n    app.run(host=\"0.0.0.0\", port=5000)\n\nCrea un Dockerfile per a aquesta aplicaci√≥ utilitzant una imatge base oficial de Python (per exemple, python:3.11-slim).\nCrea un Dockerfile ara amb la imatge base alpine (per exemple, python:3.11-alpine).\nCompara les mides i els temps d‚Äôarrrencada de les dues imatges Docker creades.",
    "crumbs": [
      "Activitats",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors",
      "Activitat 13 ¬∑ Introducci√≥ a Docker"
    ]
  },
  {
    "objectID": "exercises/05-virtualitzation/01-docker.html#exercici-5-multi-stage-builds-amb-docker",
    "href": "exercises/05-virtualitzation/01-docker.html#exercici-5-multi-stage-builds-amb-docker",
    "title": "Exerccisis amb Docker",
    "section": "Exercici 5: Multi-stage builds amb Docker",
    "text": "Exercici 5: Multi-stage builds amb Docker\nTens una app de React en un directori frontend/.\n\nFes una imatge sense multi-stage build, instal¬∑lant Node.js i servint l‚Äôapp amb npm run build.\nFes una imatge amb multi-stage build, on en la primera etapa es construeix l‚Äôapp i en la segona etapa es serveix amb un servidor web lleuger (com nginx).\nCompara les mides de les dues imatges i explica els avantatges de l‚Äôenfoc multi-stage build.",
    "crumbs": [
      "Activitats",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors",
      "Activitat 13 ¬∑ Introducci√≥ a Docker"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#contextutalitzaci√≥",
    "href": "slides/03-filesystem-part3.html#contextutalitzaci√≥",
    "title": "Sistema de fitxers (III)",
    "section": "Contextutalitzaci√≥",
    "text": "Contextutalitzaci√≥\nImaginem que disposem d‚Äôun servidor amb un √∫nic disc dur, dividit en quatre particions. Aquestes particions s√≥n:\nFilesystem      Size  Used   Avail  Use%   Mounted on\n/dev/sda1       20G   5.5G   14G    29%    /\n/dev/sda2       10G   10G    0G     100%   /home\n/dev/sda3       5G    1G     4G     20%    /var\n/dev/sda4       5G    1G     4G     20%    /tmp\n\nQu√® passa si la partici√≥ /home s‚Äôomple i la resta de particions tenen espai lliure?\n\n\nLa soluci√≥ tradicional seria redimensionar les particions per alliberar espai per a /home.\n\n\n‚û°Ô∏è Aix√≤ implica complexitat i possibilitat d‚Äôerrors.\n\n\nPer tant, necessitem una soluci√≥ m√©s flexible que ens permeti redimensionar les particions sense haver de moure dades i en temps real.\n\n\nUna situaci√≥ t√≠pica quan administrem servidors √©s que una partici√≥ s‚Äôompli i la resta de particions tinguin espai lliure. En aquest cas, la partici√≥ /home s‚Äôha omplert i la resta de particions tenen espai lliure. Per solucionar aquest problema, haur√≠em de redimensionar les particions per alliberar espai per a /home. Aix√≤ implica complexitat i possibilitat d‚Äôerrors. Per tant, necessitem una soluci√≥ m√©s flexible. Que ens permeti redimensionar les particions sense haver de moure dades i en temps real.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#introducci√≥-a-lvm-1",
    "href": "slides/03-filesystem-part3.html#introducci√≥-a-lvm-1",
    "title": "Sistema de fitxers (III)",
    "section": "Introducci√≥ a LVM",
    "text": "Introducci√≥ a LVM\nLogical Volume Manager (LVM) √©s un sistema de gesti√≥ de discos que permet als administradors gestionar l‚Äôespai de disc de manera m√©s flexible que amb les particions tradicionals, resolent problemes comuns.\n\nEn la situaci√≥ anterior, LVM ens permetria en temps real i sense aturar el sistema:\n\nRedimensionar les particions /var i /tmp per alliberar espai per a /home.\nRedimensionar la partici√≥ /home a partir de l‚Äôespai alliberat.\n\n\n\no b√© tamb√© ens permetria:\n\nAfegir un nou disc dur f√≠sic al servidor.\nUtilitzar aquest disc dur per a augmentar l‚Äôespai de la partici√≥ /home.\n\n\n\nCrear, eliminar, redimensionar i moure particions en temps real.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#caracter√≠stiques-de-lvm",
    "href": "slides/03-filesystem-part3.html#caracter√≠stiques-de-lvm",
    "title": "Sistema de fitxers (III)",
    "section": "Caracter√≠stiques de LVM",
    "text": "Caracter√≠stiques de LVM\n\nAprovisionament: Permet combinar la capacitat de diferents dispositius f√≠sics per crear un √∫nic o m√∫ltiples volums v√≠rtuals. Per exemple, es poden combinar quatre discs durs de 1TB per crear un √∫nic volum virtual de 4TB.\nElasticitat: Permet augmentar o disminuir l‚Äôespai assignat a un volum virtual, sense necessitat de reiniciar el sistema. Per exemple, si un volum virtual s‚Äôest√† quedant sense espai, es pot augmentar la seva mida o reduir-la.\nEscalabilitat: Permet afegir o eliminar dispositius f√≠sics al grup de volums per augmentar o disminuir l‚Äôespai d‚Äôemmagatzematge segons les necessitats. Per exemple, si es necessita m√©s espai d‚Äôemmagatzematge, es poden afegir nous discs f√≠sics.\nResili√®ncia: Atorga la capacitat de crear c√≤pies de seguretat de les dades per protegir-les davant possibles errors o danys. Per exemple, es poden crear snapshots o miralls (mirroring).",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#components-de-lvm",
    "href": "slides/03-filesystem-part3.html#components-de-lvm",
    "title": "Sistema de fitxers (III)",
    "section": "Components de LVM",
    "text": "Components de LVM\n\n\n\nPV (Physical Volume): Dispositiu f√≠sic que es pot utilitzar per emmagatzemar dades. Per exemple, un disc dur, una partici√≥, un dispositiu RAID, etc.\nLV (Logical Volume): Bloc de dades que es pot utilitzar per emmagatzemar dades i contenir el seu propi sistema de fitxers. Equivalent a una partici√≥ de disc en un sistema sense LVM.\nVG (Volume Group): Agrupaci√≥ de LVs i PVs en una unitat administrativa. Un VG pot contenir diversos PVs i LVs.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#mapeig-i-extensions",
    "href": "slides/03-filesystem-part3.html#mapeig-i-extensions",
    "title": "Sistema de fitxers (III)",
    "section": "Mapeig i Extensions",
    "text": "Mapeig i Extensions\n\n\nPE (Physical Extent)\n√âs la unitat m√≠nima d‚Äôemmagatzematge que es pot assignar a un PV. Normalment, un PE t√© una mida de 4MB.\nLE (Logical Extent)\n√âs la unitat m√≠nima d‚Äôemmagatzematge que es pot assignar a un LV. Per exemple, si un LE t√© una mida de 4MB, un LV de 1GB tindr√† 256 LE.\nObservacions\n\nCada VG s‚Äôencarrega de gestionar l‚Äôemmagatzematge f√≠sic (physical extents) mappejant-lo en emmagatzematge l√≤gic (logical extents).\nEls PE i LE tenen la mateixa mida per√≤ s√≥n diferents en funci√≥ de l‚Äôestrategia de mapeig.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#estrat√®gies-de-mapeig",
    "href": "slides/03-filesystem-part3.html#estrat√®gies-de-mapeig",
    "title": "Sistema de fitxers (III)",
    "section": "Estrat√®gies de Mapeig",
    "text": "Estrat√®gies de Mapeig",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#exemple-i-consideracions",
    "href": "slides/03-filesystem-part3.html#exemple-i-consideracions",
    "title": "Sistema de fitxers (III)",
    "section": "Exemple i Consideracions",
    "text": "Exemple i Consideracions\n\n\n\n\n\nEs poden utilitzar dispositius de diferents mides i velocitats.\nUn PV nom√©s pot pert√†nyer a un VG.\nUn LV nom√©s pot pert√†nyer a un VG.\nUn VG pot contenir diversos PVs i LVs.\nLes funcions de mirror i snapshot requereixen m√©s d‚Äôun PV.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#snapshots",
    "href": "slides/03-filesystem-part3.html#snapshots",
    "title": "Sistema de fitxers (III)",
    "section": "Snapshots",
    "text": "Snapshots\nEls snapshots s√≥n c√≤pies instant√†nies d‚Äôun LV en un moment concret. El seu funcionament √©s incremental: nom√©s es copien les dades que han canviat des de l‚Äô√∫ltim snapshot.\nPer qu√® s√≥n √∫tils?\n\nC√≤pies de seguretat: Realitzar c√≤pies de seguretat de les dades sense aturar el sistema.\nRestauraci√≥: Restaurar les dades a un estat anterior.\nTests: Provar canvis en el sistema sense afectar les dades originals.\n\nCompte!\nLes instant√†nies ocupen espai en el VG. Per tant, si es crea una instant√†nia i despr√©s es sobreescriu completament el LV original, l‚Äôinstant√†nia hauria de ser almenys tan gran com el LV original per poder emmagatzemar tots els canvis.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#paquet-lvm2",
    "href": "slides/03-filesystem-part3.html#paquet-lvm2",
    "title": "Sistema de fitxers (III)",
    "section": "Paquet lvm2",
    "text": "Paquet lvm2\nEn la majoria de les distribucions de Linux, el paquet lvm2 permet la creaci√≥ i gesti√≥ de dispositius LVM.\n\n\nDistribucions basades en Red Hat\ndnf search lvm2\ndnf install lvm2 -y\n\nDistribucions basades en Debian\napt search lvm2\napt install lvm2 -y\n\n\nEl funcionament del paquet lvm2 √©s similar en totes les distribucions de Linux. Per tant, les instruccions d‚Äô√∫s s√≥n similars i no importa la distribuci√≥ que s‚Äôutilitzeu.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#creaci√≥-de-pvs",
    "href": "slides/03-filesystem-part3.html#creaci√≥-de-pvs",
    "title": "Sistema de fitxers (III)",
    "section": "Creaci√≥ de PVs",
    "text": "Creaci√≥ de PVs\npvcreate PV [opcions]\nOn: PV pot ser un disc dur, una partici√≥, un dispositiu RAID, etc.\n\n‚Äìdataalignment mida[Unitat]: Alinia el comen√ßament del PV.\n‚Äìdataalignmentoffset mida[Unitat]: Offset per modificar alineaci√≥ de dades.\n‚Äìlabelsector sector: Per defecte, el PV est√† etiquetat amb un identificador LVM2 al seu segon sector (sector 1). Aix√≤ us permet utilitzar un sector diferent a prop de l‚Äôinici del disc (entre 0 i 3).\n‚Äìmetadatasize mida[Unitat]: Mida de les metadades.\n‚Äìsetphysicalvolumesize mida[Unitat]: Mida dels PE.\n‚Äìlonghelp: Mostra totes les opcions (semblant a man pvcreate).\n‚Äìuuid uuid: Assigna un UUID al PV.\n\n\n√ös tradicional: pvcreate /dev/sdb sense opcions.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#organitzaci√≥-interna-dels-pvs",
    "href": "slides/03-filesystem-part3.html#organitzaci√≥-interna-dels-pvs",
    "title": "Sistema de fitxers (III)",
    "section": "Organitzaci√≥ interna dels PVs",
    "text": "Organitzaci√≥ interna dels PVs",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#exemples-de-l√∫s-de-pvcreate",
    "href": "slides/03-filesystem-part3.html#exemples-de-l√∫s-de-pvcreate",
    "title": "Sistema de fitxers (III)",
    "section": "Exemples de l‚Äô√∫s de pvcreate",
    "text": "Exemples de l‚Äô√∫s de pvcreate\n\nInicialitzaci√≥ a partir d‚Äôun disc dur amb alineaci√≥ de dades de 1MB comen√ßant des del sector 7.\n\n\npvcreate --dataalignment 1M --dataalignmentoffset 7s /dev/sdb\n\n\nInicialitzaci√≥ a partir d‚Äôuna partici√≥ amb un UUID espec√≠fic.\n\n\npvcreate --uuid \"my-pv-uuid\" /dev/sdb1\n\n\nInicialitzaci√≥ a partir d‚Äôun raid amb mida de metadades 128MB i 8MB per PE (enlloc de 4MB).\n\n\npvcreate --setphysicalvolumesize 8M --metadatasize 128M /dev/md0",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#modificar-pvs-amb-pvchange",
    "href": "slides/03-filesystem-part3.html#modificar-pvs-amb-pvchange",
    "title": "Sistema de fitxers (III)",
    "section": "Modificar PVs amb pvchange",
    "text": "Modificar PVs amb pvchange\npvchange [opcions] PV\n\n‚Äìall: Aplica l‚Äôacci√≥ a tots els PVs (no cal especificar el PV).\n‚Äìaddtag tag: Afegeix una etiqueta al PV.\n‚Äìdeltag tag: Elimina una etiqueta del PV.\n‚Äìlonghelp: Mostra totes les opcions (semblant a man pvcreate).\n‚Äìuuid uuid: Assigna un UUID al PV.\n‚Äìallocatable y/n: Activa o desactiva l‚Äôassignaci√≥ de PE al PV.\n‚Äìautobackup y/n: Activa o desactiva la c√≤pia de seguretat autom√†tica de les metadades.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#redimensionar-pvs-amb-pvresize",
    "href": "slides/03-filesystem-part3.html#redimensionar-pvs-amb-pvresize",
    "title": "Sistema de fitxers (III)",
    "section": "Redimensionar PVs amb pvresize",
    "text": "Redimensionar PVs amb pvresize\npvresize [opcions] PV\n\n‚Äìsetphysicalvolumesize mida[Unitat]: Redimensiona el PV.\n‚Äìlonghelp: Mostra totes les opcions (semblant a man pvresize).\n\n\nConsideracions pr√†ctiques\n\npvresize redimensiona el PV, per√≤ no redimensiona les particions o els sistemes de fitxers que cont√©. Haur√†s de fer aix√≤ manualment si √©s necessari.\npvresize refusar√† reduir un PV si t√© extensiones assignades m√©s enll√† del nou final. Haur√†s de moure o eliminar aquestes extensions primer.\npvresize permet redimensionar un PV encara que estigui incl√≤s en un VG amb LVs actius.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#exemples-pvresize",
    "href": "slides/03-filesystem-part3.html#exemples-pvresize",
    "title": "Sistema de fitxers (III)",
    "section": "Exemples pvresize",
    "text": "Exemples pvresize\n\nExpandir un PV despr√©s d‚Äôampliar la partici√≥ per utilitzar tot el nou espai disponible.\n\n\npvresize /dev/sdb1\n\n\nReduir un PV abans de reduir la partici√≥ (assegurar-se que la mida del PV √©s adequada per a la nova mida de la partici√≥).\n\n\npvresize --setphysicalvolumesize 40G /dev/sdb1",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#eliminar-pvs-amb-pvremove",
    "href": "slides/03-filesystem-part3.html#eliminar-pvs-amb-pvremove",
    "title": "Sistema de fitxers (III)",
    "section": "Eliminar PVs amb pvremove",
    "text": "Eliminar PVs amb pvremove\npvremove PV\n# Podeu obtenir la llista d'opcions amb pvremove --longhelp \n# o b√© pvremove --help\n\npvremove elimina totes les metadades del PV, per√≤ no elimina les dades.\npvremove no permet eliminar PVs que estiguin en √∫s. Haur√†s de moure o eliminar les extensions primer.\npvremove no permet eliminar PVs que formin part d‚Äôun VG. Haur√†s de treure el PV del VG primer.\n\n\nPer eliminar les dades del PV, haur√†s de sobreescriure el PV amb zeros dd if=/dev/zero of=PV bs=1M count=1 o b√© formatejar el dispositiu.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#obtenir-informaci√≥-pvs",
    "href": "slides/03-filesystem-part3.html#obtenir-informaci√≥-pvs",
    "title": "Sistema de fitxers (III)",
    "section": "Obtenir informaci√≥ pvs",
    "text": "Obtenir informaci√≥ pvs\npvs [opcions]\n\n‚Äìallpvs: Mostra tots els PVs, inclosos els PVs inactius.\n‚Äìall: Mostra tots els dispositius que no han estat inicialitzats com a PVs.\n‚Äìnoheadings: No mostra la cap√ßalera (bona combinaci√≥ amb grep).\n‚Äìdevices PV: Restringeix la sortida als PVs especificats.\n‚Äìoptions String: Permet seleccionar les columnes a mostrar. Per a m√©s informaci√≥, consulteu pvs -o help.\n‚Äìlonghelp: Mostra totes les opcions (semblant a man pvs).\n\n\nAltres opcions per a visualitzar informaci√≥n s√≥n: pvdisplay i pvscan. La principal difer√®ncia √©s que pvdisplay mostra la informaci√≥ de tots els PVs, mentre que pvscan escaneja tots els dispositius per trobar PVs.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#inicialitzaci√≥-de-vgs",
    "href": "slides/03-filesystem-part3.html#inicialitzaci√≥-de-vgs",
    "title": "Sistema de fitxers (III)",
    "section": "Inicialitzaci√≥ de VGs",
    "text": "Inicialitzaci√≥ de VGs\nvgcreate VG PV [opcions]\n\n‚Äìclustered y/n: Activa o desactiva el VG per a l‚Äô√∫s en un cl√∫ster.\n‚Äìmaxlogicalvolumes nombre: N√∫mero m√†xim de LVs que es poden crear en el VG.\n‚Äìmaxphysicalvolumes nombre: N√∫mero m√†xim de PVs que es poden afegir al VG.\n‚Äìphysicalextentsize mida[Unitat]: Mida dels PE.\n‚Äìmetadatasize mida[Unitat]: Mida de les metadades.\n‚Äìalloc [contiguous|cling|normal|anywhere]: Estrat√®gia d‚Äôassignaci√≥ de PE.\n‚Äìlonghelp: Mostra totes les opcions (semblant a man vgcreate).\n\n\nQuan un VG s‚Äôinicialitza a partir d‚Äôun PV, els valors de la mida de les metadades, comen√ßament dels PE,‚Ä¶ es prenen del PV, encara que s‚Äôhagin especificat opcions diferents amb vgcreate. ‚û°Ô∏è si voleu canviar-ho, pvremove. I despr√©s vgcreate amb les opcions desitjades.\n\n\n\nvgcreate incialitza el PV en cas que no estigui inicialitzat.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#augmentar-o-reduir-vgs-amb-vgextend-i-vgreduce",
    "href": "slides/03-filesystem-part3.html#augmentar-o-reduir-vgs-amb-vgextend-i-vgreduce",
    "title": "Sistema de fitxers (III)",
    "section": "Augmentar o Reduir VGs amb vgextend i vgreduce",
    "text": "Augmentar o Reduir VGs amb vgextend i vgreduce\nvgextend VG PV [opcions] # Afegir un PV o una llista de PVs a un VG\nvgreduce VG PV [opcions] # Treure un PV o una llista de PVs d'un VG\n\nvgextend permet afegir PVs no inicialitzats. En aquest cas, vgextend inicialitzar√† els PVs amb les opcions especificades de --labelsector, --metadatasize, --metadataignore, --pvmetadatacopies, --dataalignment, --dataalignmentoffset.\nvgreduce detecta que un o m√©s PVs estan perduts, necessita vgreduce --removemissing per fer que les metadades del VG siguin consistents de nou.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#altres-operacions-amb-vgs",
    "href": "slides/03-filesystem-part3.html#altres-operacions-amb-vgs",
    "title": "Sistema de fitxers (III)",
    "section": "Altres operacions amb VGs",
    "text": "Altres operacions amb VGs\n\nModificar les propietats d‚Äôun VG\n\n\nvgchange [opcions] VG\n\n\nEliminar un VG\n\n\nvgremove VG\n\n\nMostrar informaci√≥ detallada d‚Äôun VG\n\n\nvgs\nvgdisplay VG\nvgscan\n\n\nTotes aquestes comandes tenen opcions similars a les ja vistes per a pvchange, pvremove, pvs, pvdisplay i pvscan. Per a m√©s informaci√≥, consulteu el manual de cada comanda.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#inicialitzaci√≥-de-lvs",
    "href": "slides/03-filesystem-part3.html#inicialitzaci√≥-de-lvs",
    "title": "Sistema de fitxers (III)",
    "section": "Inicialitzaci√≥ de LVs",
    "text": "Inicialitzaci√≥ de LVs\nlvcreate LV VG [opcions]\n\n-n|‚Äìname nom: Nom del LV.\n-L|‚Äìsize mida[Unitat]: Mida del LV en unitats com MiB,GiB,TiB,‚Ä¶.\n-l|‚Äìextents nombre: Defineix com un % del VG o b√© com un nombre enter.\n-i|‚Äìstripes nombre: Defineix el nombre de stripes a utilitzar.\n-I|‚Äìstripesize mida[Unitat]: Defineix la mida de les stripes.\n-m|‚Äìmirrors nombre: Defineix el nombre de miralls a utilitzar.\n-s|‚Äìsnapshot: Crea un snapshot del LV.\n-c|‚Äìchunksize mida[Unitat]: Defineix la mida dels chunks.\n-C|‚Äìcontiguous y/n: Activa o desactiva l‚Äôassignaci√≥ de PE contigus.\n-p|‚Äìpermission r|rw: Defineix els permisos del LV.\n-t|‚Äìthinpool VG: Crea un thin pool LV.\n‚Äìlonghelp: Mostra totes les opcions (semblant a man lvcreate).",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#consideracions-pr√†ctiques-sobre-lvcreate-i",
    "href": "slides/03-filesystem-part3.html#consideracions-pr√†ctiques-sobre-lvcreate-i",
    "title": "Sistema de fitxers (III)",
    "section": "Consideracions pr√†ctiques sobre lvcreate (I)",
    "text": "Consideracions pr√†ctiques sobre lvcreate (I)\n\nlvcreate crea un nou LV en un VG. ‚û°Ô∏è Assigna extensions l√≤giques a les extensions f√≠siques lliures del VG.\n\n\nQu√® passaria si no hi ha prou espai lliure al VG? Haur√≠em d‚Äôampliar el VG amb altres PVs (vgextend), o b√© reduir o eliminar els LV existents (lvremove, lvreduce). Aquesta √©s una consideraci√≥ important a tenir en compte quan es treballa amb grans volums de dades.\n\n\nlvcreate permet especificar quins PVs utilitzar√† un nou LV. ‚û°Ô∏è lvcreate assignar√† extensi√≥ f√≠siques nom√©s dels PVs especificats. Aix√≤ pot ser √∫til quan es vol controlar l‚Äôassignaci√≥ d‚Äôespai en un sistema amb m√∫ltiples PVs.\nlvcreate tamb√© pot crear LV RAID especificant un tipus de LV en crear el LV. ‚û°Ô∏è Diferents nivells de RAID requereixen diferents nombres de PVs √∫nics en el VG per a l‚Äôassignaci√≥. Aix√≤ pot ser √∫til per a la redund√†ncia de dades i la toler√†ncia a fallades.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#consideracions-pr√†ctiques-sobre-lvcreate-ii",
    "href": "slides/03-filesystem-part3.html#consideracions-pr√†ctiques-sobre-lvcreate-ii",
    "title": "Sistema de fitxers (III)",
    "section": "Consideracions pr√†ctiques sobre lvcreate (II)",
    "text": "Consideracions pr√†ctiques sobre lvcreate (II)\n\nlvcreate tamb√© pot crear thin pools i cache pools. ‚û°Ô∏è Aquests no s√≥n utilitzables com a dispositius de bloc est√†ndard, per√≤ els noms dels LV actuen com a refer√®ncies. Aquests pools ens poden interesar en servidors on molts usuaris comparteixen recursos d‚Äôemmagatzematge i es volen limitar els recursos d‚Äôemmagatzematge per usuari.\nlvcreate tamb√© pot crear LV thin i LV VDO. ‚û°Ô∏è Aquests es creen amb una mida virtual en lloc d‚Äôuna mida f√≠sica. Permeten sobreprovisionament i compressi√≥ de dades. ‚û°Ô∏è Tots el usuaris tenen dret a m√©s espai del que realment tenen.\nPodeu utilitzar qualsevol --size o --extents per especificar la mida del LV.\nEn cas de no especificar un nom, es generar√† un nom de LV amb el prefix lvol i un sufix num√®ric √∫nic. Aix√≤ pot ser √∫til quan es vol crear m√∫ltiples LVs de forma r√†pida i eficient.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#altres-operacions-amb-lvs",
    "href": "slides/03-filesystem-part3.html#altres-operacions-amb-lvs",
    "title": "Sistema de fitxers (III)",
    "section": "Altres operacions amb LVs",
    "text": "Altres operacions amb LVs\nEls LVs ens permeten les mateixes operacions amb opcions similars a les ja vistes per a PVs i VGs:\n\nMostrar informaci√≥ detallada d‚Äôun LV: lvs, lvdisplay, lvscan.\nModificar les propietats d‚Äôun LV: lvchange.\nEliminar un LV: lvremove.\nIncrementar o disminuir la mida d‚Äôun LV: lvextend, lvreduce.\n\n\nPer a m√©s informaci√≥, consulteu el manual de cada comanda o b√© executeu comanda --help.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#cas-pr√†ctic-01-lvm-i-bootloaders",
    "href": "slides/03-filesystem-part3.html#cas-pr√†ctic-01-lvm-i-bootloaders",
    "title": "Sistema de fitxers (III)",
    "section": "Cas Pr√†ctic 01: LVM i BootLoaders",
    "text": "Cas Pr√†ctic 01: LVM i BootLoaders\nDurant la realitzaci√≥ d‚Äôuna instal¬∑laci√≥ d‚Äôun sistema operatiu, s‚Äôha de decidir si utilitzar LVM per a la partici√≥ /boot o /boot/efi. Creus que √©s recomanable utilitzar LVM per a aquestes particions?\n\nNo, no √©s recomanable utilitzar LVM per a la partici√≥ /boot o /boot/efi. Els BootLoaders com GRUB no poden llegir els sistemes de fitxers LVM. Per tant, √©s millor utilitzar particions tradicionals per a /boot i /boot/efi.\n\n\nDurant el proc√©s d‚Äôarrancada, el bootloader carrega el kernel i la imatge initramfs des de la partici√≥ /boot. Si aquesta partici√≥ est√† en un sistema de fitxers LVM, el bootloader no podr√† llegir-la i no podr√† carregar el sistema operatiu.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#cas-pr√†ctic-02-dispositiu-compartit-usb",
    "href": "slides/03-filesystem-part3.html#cas-pr√†ctic-02-dispositiu-compartit-usb",
    "title": "Sistema de fitxers (III)",
    "section": "Cas Pr√†ctic 02: Dispositiu compartit (USB)",
    "text": "Cas Pr√†ctic 02: Dispositiu compartit (USB)\nAssumeix que tens un disc dur extern de 2TB i vols fer-ho servir per guardar c√≤pies de seguretat de dos usuaris. El disc es connecta per usb f√≠sicament als dos dispositius. L‚Äôusuari 1 necessita 1TB i l‚Äôusuari 2 necessita 500GB. Assumeix que l‚Äôusuari 1 utilitza Windows i l‚Äôusuari 2 utilitza Linux. Recomanaries utilitzar LVM per aquest cas d‚Äô√∫s?\n\nNo, LVM √©s una tecnologia espec√≠fica de Linux i no √©s compatible amb Windows. Per tant, no √©s recomanable utilitzar LVM per aquest cas d‚Äô√∫s. En aquest cas, seria millor utilitzar particions tradicionals per a cada usuari. Podeu crear dues particions: una de 1TB formatada amb NTFS per a l‚Äôusuari 1 (Windows) i una altra de 500GB formatada amb ext4 per a l‚Äôusuari 2 (Linux). La resta de l‚Äôespai es podria deixar sense particionar o crear una partici√≥ compartida si es desitja.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#cas-pr√†ctic-02-dispositiu-compartit-nas",
    "href": "slides/03-filesystem-part3.html#cas-pr√†ctic-02-dispositiu-compartit-nas",
    "title": "Sistema de fitxers (III)",
    "section": "Cas Pr√†ctic 02: Dispositiu compartit (NAS)",
    "text": "Cas Pr√†ctic 02: Dispositiu compartit (NAS)\nAssumeix ara que el disc dur extern s‚Äôutilitza en un NAS on s‚Äôofereix emmagatzematge compartit per a tots els usuaris en xarxa local. En aquest cas, recomanaries utilitzar LVM per aquest cas d‚Äô√∫s?\n\nS√≠, en aquest cas, LVM pot ser una bona opci√≥ per a la gesti√≥ de l‚Äôespai d‚Äôemmagatzematge compartit. LVM permet crear volums l√≤gics que es poden redimensionar en temps real. Cada usuari podria tenir el seu LV per emmagatzemar les seves dades. Com el NAS √©s un servidor de xarxa, els usuaris podrien accedir als seus LVs a trav√©s de la xarxa; independentment del sistema operatiu que utilitzin els usuaris en els seus dispositius.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#cas-pr√†ctic-03-servidor-de-base-de-dades",
    "href": "slides/03-filesystem-part3.html#cas-pr√†ctic-03-servidor-de-base-de-dades",
    "title": "Sistema de fitxers (III)",
    "section": "Cas Pr√†ctic 03: Servidor de Base de Dades",
    "text": "Cas Pr√†ctic 03: Servidor de Base de Dades\nConsiderant que hem de configurar un servidor de base de dades amb 4 discos durs de 1TB cadascun. Quins avantatges i desavantatges tindria la implementaci√≥ de LVM en aquest context?\n\nLVM permet la creaci√≥ de volums l√≤gics que es poden distribuir en diversos discos f√≠sics, cosa que pot millorar el rendiment mitjan√ßant el striping. ‚û°Ô∏è Aquesta configuraci√≥ pot ser √∫til per a bases de dades que requereixen un alt rendiment d‚ÄôE/S. Per√≤, tamb√© augmenta la complexitat i pot induir a overheads addicionals dels Volums L√≤gics.\n\n\nA m√©s, LVM admet instant√†nies, que poden ser √∫tils per a les c√≤pies de seguretat i la recuperaci√≥ de les dades. Ara b√©, si les instant√†nies es guarden en el mateix disc f√≠sic que la base de dades, i aquest disc falla, es perdran tant la base de dades com les instant√†nies.\n\n\nTamb√© permet afegir o eliminar discos f√≠sics sense temps d‚Äôinactivitat, cosa que millora la disponibilitat del servidor de base de dades. ‚û°Ô∏è Ens permet la seva ampliaci√≥ en un futur sense haver de parar el servei.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#cas-pr√†ctic-04-errors-i-fallades-i",
    "href": "slides/03-filesystem-part3.html#cas-pr√†ctic-04-errors-i-fallades-i",
    "title": "Sistema de fitxers (III)",
    "section": "Cas Pr√†ctic 04: Errors i Fallades (I)",
    "text": "Cas Pr√†ctic 04: Errors i Fallades (I)\nImagineu-vos que esteu treballant amb un grup de volums (VG1) que cont√© diversos discos f√≠sics, entre ells el PV1. A m√©s, teniu un altre grup de volums (VG2) en un disc f√≠sic diferent (PV2) on guardeu les vostres instant√†nies. Qu√® passaria amb les metadades de LVM i les instant√†nies si el disc f√≠sic PV1 falla?\n\nSi les metadades de LVM no estan en el disc fallat PV1, llavors els volums l√≤gics que no estaven en el disc fallat segueixen estant disponibles. ‚û°Ô∏è En aquest cas, les metadades de LVM no es perden i es pot recuperar la informaci√≥ dels volums l√≤gics del VG1.\n\n\nNo obstant aix√≤, si el disc fallat PV1 contenia dades d‚Äôun volum l√≤gic, aquestes dades es perdran a menys que tinguem una instant√†nia. A m√©s, si el disc fallat contenia una part d‚Äôun volum l√≤gic que s‚Äôestenia per diversos discos (com en el cas d‚Äôun volum l√≤gic distribu√Øt o striped), tot el volum l√≤gic pot quedar inutilitzable. ‚û°Ô∏è En aquest cas, les metadades de LVM es perden i no es pot recuperar la informaci√≥ dels volums l√≤gics del VG1.\n\n\nVG2 cont√© les instant√†nies, per tant, si el disc f√≠sic PV1 falla, les instant√†nies no es perdran. ‚û°Ô∏è Aix√≤ permet restaurar les dades del volum l√≤gic original del VG1 a partir de les instant√†nies del VG2.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#cas-pr√†ctic-05-escalabilitat-dapps-i",
    "href": "slides/03-filesystem-part3.html#cas-pr√†ctic-05-escalabilitat-dapps-i",
    "title": "Sistema de fitxers (III)",
    "section": "Cas Pr√†ctic 05: Escalabilitat d‚ÄôApps (I)",
    "text": "Cas Pr√†ctic 05: Escalabilitat d‚ÄôApps (I)\nUna empresa est√† experimentant un r√†pid creixement i necessita implementar un nou servidor per donar suport a una nova aplicaci√≥ cr√≠tica per al negoci. El departament d‚ÄôIT t√© pressupost limitat i nom√©s t√© disponible un emmagatzematge de 2TB per a aquest nou servidor. L‚Äôaplicaci√≥ requereix un m√≠nim de 1TB d‚Äôemmagatzematge per funcionar correctament, per√≤ es preveu que el seu √∫s creixer√† r√†pidament en els propers mesos.\n\nCom a administrador us plantejeu la possibilitat d‚Äôutilitzar el thin provisioning de LVM per donar suport a l‚Äôaplicaci√≥ en creixement. Aquesta t√®cnica permet sobreprovisionar l‚Äôespai d‚Äôemmagatzematge, √©s a dir, assignar m√©s espai del que realment teniu. Aix√≤ √©s possible perqu√® el thin provisioning de LVM nom√©s assigna l‚Äôespai d‚Äôemmagatzematge real a mesura que l‚Äôaplicaci√≥ l‚Äôutilitza.‚û°Ô∏è Si assigneu 4TB d‚Äôemmagatzematge a l‚Äôaplicaci√≥ en un VG format pel disc de 2TB, inicialment nom√©s s‚Äôutilitzar√† l‚Äôespai que l‚Äôaplicaci√≥ necessita realment. Aix√≠, podreu planificar una ampliaci√≥ del disc dur a 4TB en el futur sense haver de parar el servei.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#cas-pr√†ctic-05-escalabilitat-dapps-ii",
    "href": "slides/03-filesystem-part3.html#cas-pr√†ctic-05-escalabilitat-dapps-ii",
    "title": "Sistema de fitxers (III)",
    "section": "Cas Pr√†ctic 05: Escalabilitat d‚ÄôApps (II)",
    "text": "Cas Pr√†ctic 05: Escalabilitat d‚ÄôApps (II)\nNo obstant aix√≤, que pot passar si les vostres previsions no s√≥n correctes i el creixement es mes r√°pid de l‚Äôesperat. ‚û°Ô∏è L‚Äôaplicaci√≥ intenta escriure m√©s de 2TB de dades al disc.\n\nEl thin provisioning de LVM no evitar√† que l‚Äôaplicaci√≥ s‚Äôaturi o es produeixin errors d‚ÄôE/S quan l‚Äôaplicaci√≥ excedeixi la capacitat real. ‚û°Ô∏è Quan l‚Äôaplicaci√≥ intenti escriure m√©s de 2TB de dades al disc, es produir√† un error d‚ÄôE/S, ja que no hi haur√† prou espai d‚Äôemmagatzematge disponible per emmagatzemar les dades.\n\n\nEn aquest cas, es necessitar√† afegir m√©s espai d‚Äôemmagatzematge al grup de volums i ampliar el volum l√≤gic thin provisioned per donar suport a l‚Äôaplicaci√≥ en creixement.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#cas-pr√†ctic-05-escalabilitat-dapps-iii",
    "href": "slides/03-filesystem-part3.html#cas-pr√†ctic-05-escalabilitat-dapps-iii",
    "title": "Sistema de fitxers (III)",
    "section": "Cas Pr√†ctic 05: Escalabilitat d‚ÄôApps (III)",
    "text": "Cas Pr√†ctic 05: Escalabilitat d‚ÄôApps (III)\nEn la situaci√≥ anterior, heu decidit utilitzar el thin provisioning de LVM per donar suport a l‚Äôaplicaci√≥ en creixement. Per√≤, com a administrador de sistemes, us preocupa que l‚Äôaplicaci√≥ pugui aturar-se o produir errors d‚ÄôE/S si l‚Äôespai d‚Äôemmagatzematge s‚Äôomple r√†pidament. Qu√® far√≠eu per reduir el risc d‚Äôaturades i errors d‚ÄôE/S en aquest escenari?\n\nUna opci√≥ seria implementar un sistema de monitoreig i alertes que supervisi l‚Äô√∫s de l‚Äôespai d‚Äôemmagatzematge del grup de volums. Quan l‚Äô√∫s d‚Äôemmagatzematge superi un determinat llindar, el sistema generaria una alerta per afegir m√©s espai d‚Äôemmagatzematge al grup de volums i ampliar el volum l√≤gic thin provisioned per donar suport a l‚Äôaplicaci√≥ en creixement.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#laboratoris",
    "href": "slides/03-filesystem-part3.html#laboratoris",
    "title": "Sistema de fitxers (III)",
    "section": "Laboratoris",
    "text": "Laboratoris\n\nLaboratori 01: Instal¬∑laci√≥ de LVM a AlmaLinux\nLaboratori 02: Gesti√≥ de LVM a AlmaLinux",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#laboratori-01-installaci√≥-de-lvm-a-almalinux",
    "href": "slides/03-filesystem-part3.html#laboratori-01-installaci√≥-de-lvm-a-almalinux",
    "title": "Sistema de fitxers (III)",
    "section": "Laboratori 01: Instal¬∑laci√≥ de LVM a AlmaLinux",
    "text": "Laboratori 01: Instal¬∑laci√≥ de LVM a AlmaLinux\nRequeriments\n\nM√†quina virtual amb 1 disc dur de 20 GB, 1 GB de RAM i 1 CPU.\nImatge ISO d‚ÄôAlmaLinux.\n\n\nTasques\n\nInstal¬∑lar AlmaLinux i configurar LVM durant la instal¬∑laci√≥.\nCrearem un PV a partir del disc dur principal de 20GB.\nCrearem un VG anomenta almalinux.\n/ ser√† un LV amb un sistema de fitxers xfs de 16,4 GB (almalinx-root).\n/boot i boot/efi seran particions tradicionals de 600MiB i 1024MiB respectivament.\nswap ser√† un LV de 2GB (almalinux-swap).",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#laboratori-01-selecci√≥-de-dispositius",
    "href": "slides/03-filesystem-part3.html#laboratori-01-selecci√≥-de-dispositius",
    "title": "Sistema de fitxers (III)",
    "section": "Laboratori 01: Selecci√≥ de dispositius",
    "text": "Laboratori 01: Selecci√≥ de dispositius",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#laboratori-01-configuraci√≥-lvm",
    "href": "slides/03-filesystem-part3.html#laboratori-01-configuraci√≥-lvm",
    "title": "Sistema de fitxers (III)",
    "section": "Laboratori 01: Configuraci√≥ LVM",
    "text": "Laboratori 01: Configuraci√≥ LVM",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#laboratori-01-configuraci√≥-de-les-particions",
    "href": "slides/03-filesystem-part3.html#laboratori-01-configuraci√≥-de-les-particions",
    "title": "Sistema de fitxers (III)",
    "section": "Laboratori 01: Configuraci√≥ de les particions",
    "text": "Laboratori 01: Configuraci√≥ de les particions",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#laboratori-02-configuraci√≥-manual-lvm",
    "href": "slides/03-filesystem-part3.html#laboratori-02-configuraci√≥-manual-lvm",
    "title": "Sistema de fitxers (III)",
    "section": "Laboratori 02: Configuraci√≥ manual LVM",
    "text": "Laboratori 02: Configuraci√≥ manual LVM\nRequeriments\n\nAfegir un disc dur secundari de 10 GB a la m√†quina virtual.\n\n\nTasques\n\nCrear un PV a partir del disc dur secundari.\nCrear un VG anomenat datavg a partir del PV.\nCrear un LV anomenat home amb un sistema de fitxers ext4 de 5GB.\nMuntarem el LV home a /home.\nRedimensionarem el LV en calent.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#laboratori-02-creaci√≥-de-pvs-vgs-i-lvs",
    "href": "slides/03-filesystem-part3.html#laboratori-02-creaci√≥-de-pvs-vgs-i-lvs",
    "title": "Sistema de fitxers (III)",
    "section": "Laboratori 02: Creaci√≥ de PVs, VGs i LVs",
    "text": "Laboratori 02: Creaci√≥ de PVs, VGs i LVs\n\nCreaci√≥ d‚Äôun PV amb el dispositiu /dev/vdb:\n\n\npvcreate /dev/vdb\n\n\nCreaci√≥ d‚Äôun VG anomenat datavg amb el PV /dev/vdb:\n\n\nvgcreate datavg /dev/vdb\n\n\nCreaci√≥ d‚Äôun LV de 5GB anomenat home en el VG datavg:\n\n\nlvcreate -L 5GB M -n home datavg",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#laboratori-02-creaci√≥-de-sistema-de-fitxers-i-muntatge",
    "href": "slides/03-filesystem-part3.html#laboratori-02-creaci√≥-de-sistema-de-fitxers-i-muntatge",
    "title": "Sistema de fitxers (III)",
    "section": "Laboratori 02: Creaci√≥ de sistema de fitxers i muntatge",
    "text": "Laboratori 02: Creaci√≥ de sistema de fitxers i muntatge\n\nCreaci√≥ d‚Äôun sistema de fitxers ext4 en el LV home:\n\n\nmkfs.ext4 /dev/datavg/home\n\n\nMuntatge del LV home en el directori /home:\n\n\nmount /dev/datavg/home /home",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#laboratori-02-ampliaci√≥-lvs",
    "href": "slides/03-filesystem-part3.html#laboratori-02-ampliaci√≥-lvs",
    "title": "Sistema de fitxers (III)",
    "section": "Laboratori 02: Ampliaci√≥ LVs",
    "text": "Laboratori 02: Ampliaci√≥ LVs\n\nAmpliaci√≥ del LV home a 7GB:\n\n\nlvextend -L 7GB /dev/datavg/home\n\n\nRedimensionar el sistema de fitxers ext4:\n\n\nresize2fs /dev/datavg/home",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#laboratori-02-reducci√≥n-lvs",
    "href": "slides/03-filesystem-part3.html#laboratori-02-reducci√≥n-lvs",
    "title": "Sistema de fitxers (III)",
    "section": "Laboratori 02: Reducci√≥n LVs",
    "text": "Laboratori 02: Reducci√≥n LVs\n\nReducci√≥ del sistema de fitxers ext4:\n\n\nresize2fs /dev/datavg/home 6G\n\n\nReducci√≥ del LV home a 6GB:\n\n\nlvreduce -L 6GB /dev/datavg/home",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#exercicis",
    "href": "slides/03-filesystem-part3.html#exercicis",
    "title": "Sistema de fitxers (III)",
    "section": "Exercicis",
    "text": "Exercicis\n\nDeplegament d‚Äôun servidor web amb LVM",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part3.html#thats-all",
    "href": "slides/03-filesystem-part3.html#thats-all",
    "title": "Sistema de fitxers (III)",
    "section": "That‚Äôs all",
    "text": "That‚Äôs all\n\n\n\n\n\n\n\n\n\nTake Home Message\n\n\n\nLVM √©s una eina potent que simplifica la gesti√≥ de l‚Äôespai d‚Äôemmagatzematge en sistemes Linux.\nOfereix als administradors de sistemes la flexibilitat de crear, modificar i eliminar particions de manera din√†mica sense necessitat d‚Äôaturar el sistema.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting.html#etapes-de-larrancada",
    "href": "slides/02-booting.html#etapes-de-larrancada",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Etapes de l‚Äôarrancada",
    "text": "Etapes de l‚Äôarrancada",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#fase-1-m√†quinaria",
    "href": "slides/02-booting.html#fase-1-m√†quinaria",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Fase 1: M√†quinaria",
    "text": "Fase 1: M√†quinaria\n\nEn pr√©mer el bot√≥ d‚Äôencesa, la placa base envia un senyal a la PSU (Power Supply Unit).\nLa PSU proporciona tensi√≥ estable a tots els components i activa la CPU.\nLa CPU inicialitza registres interns i col¬∑loca el Puntador d‚ÄôInstrucci√≥ (EIP) a la direcci√≥ de reset 0xFFFFFFF0.\n\n\n\nAquesta adre√ßa cont√© una instrucci√≥ de salt (jmp) que redirigeix la CPU al Firmware (BIOS/UEFI) per iniciar el proc√©s de diagn√≤stic i arrencada del sistema (POST).",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#fase-2-firmware",
    "href": "slides/02-booting.html#fase-2-firmware",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Fase 2: Firmware",
    "text": "Fase 2: Firmware\nEl teu ordinador necessita un firmware per: provar, detectar, configurar i inicialitzar dispositius. Aquest firmware en sistemes moderns √©s l‚ÄôUEFI i en sistemes antics el BIOS (normalment compatibles amb IBM PC).\n\n\nYou‚Äôve probably read a lot of stuff on the internet about UEFI. Here is something important you should understand: 95% of it was probably garbage. ‚Äî Adam Williamson",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#fase-2-etapes",
    "href": "slides/02-booting.html#fase-2-etapes",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Fase 2: Etapes",
    "text": "Fase 2: Etapes\n\nInicialitzaci√≥ del firmware\n\nCarrega i execuci√≥ del codi de firmware (BIOS/UEFI).\nLectura de la configuraci√≥ de la NVRAM.\nVerificaci√≥ de la integritat del firmware.\n\nDiagn√≤stic i detecci√≥\n\nPower-On Self Test (POST): comprovaci√≥ de CPU, RAM, gr√†fics b√†sics‚Ä¶\nDetecci√≥ i inicialitzaci√≥ dels dispositius connectats.\nAplicaci√≥ de la configuraci√≥ als dispositius.\n\nArrencada del sistema\n\nSelecci√≥ del dispositiu d‚Äôarrencada.\nC√†rrega del bootloader de primera etapa.\nTransfer√®ncia del control al bootloader.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#actualitzaci√≥-del-firmware",
    "href": "slides/02-booting.html#actualitzaci√≥-del-firmware",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Actualitzaci√≥ del firmware",
    "text": "Actualitzaci√≥ del firmware\nEl firmware est√† emmagatzemat en un xip de mem√≤ria flash a la placa base. L‚Äôactualitzaci√≥ (flashing) substitueix el contingut d‚Äôaquest xip per una versi√≥ nova.\n\n\nüöÄ Objectius\n\nCorregir errades de microcodi de la CPU.\nAfegir suport per a nou maquinari (CPU, RAM, targetes).\nAplicar parches de seguretat (ex.: vulnerabilitats Spectre/Meltdown.\nMillorar funcions de gesti√≥ d‚Äôenergia i arrencada segura (Secure Boot).\n\n\n‚ö†Ô∏è Riscos\n\nUn error en el proc√©s (tall de corrent, imatge corrupta, versi√≥ incorrecta) pot deixar el xip inservible (brick).\nAlguns fabricants ofereixen mecanismes de recuperaci√≥ (dual BIOS, BIOS flashback, c√†psules UEFI).\nEn entorns de producci√≥, √©s recomanable validar la nova versi√≥ en un entorn de test abans de desplegar-la.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#difer√®ncies-entre-bios-i-uefi-i",
    "href": "slides/02-booting.html#difer√®ncies-entre-bios-i-uefi-i",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Difer√®ncies entre BIOS i UEFI (I)",
    "text": "Difer√®ncies entre BIOS i UEFI (I)\n\n\n\n\n\n\n\n\nCaracter√≠stica\nBIOS\nUEFI\n\n\n\n\nEmmagatzematge\nTradicionalment en ROM (avui dia flash EEPROM)\nFlash SPI a la placa base + EFI System Partition (ESP) al disc\n\n\nCapacitat de disc\nFins a 2,2 TB (per limitaci√≥ 32-bit LBA, sectors 512 B)\nFins a 9,4 ZB (GPT)\n\n\nInterf√≠cie\nText\nGr√†fica, amb suport per ratol√≠ i resolucions altes\n\n\nSeguretat\nSense proteccions avan√ßades\nSecure Boot, verificaci√≥ de signatures i protecci√≥ contra codi malici√≥s\n\n\nCompatibilitat\nPrincipalment IBM PC compatibles antics\nCompatible amb sistemes moderns, amb suport per Legacy BIOS via CSM",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#difer√®ncies-entre-bios-i-uefi-ii",
    "href": "slides/02-booting.html#difer√®ncies-entre-bios-i-uefi-ii",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Difer√®ncies entre BIOS i UEFI (II)",
    "text": "Difer√®ncies entre BIOS i UEFI (II)\n\n\n\n\n\n\n\n\nCaracter√≠stica\nBIOS\nUEFI\n\n\n\n\nVelocitat d‚Äôarrencada\nM√©s lenta\nM√©s r√†pida gr√†cies a inicialitzaci√≥ paral¬∑lela de drivers i fast boot\n\n\nTaula de particions\nMBR\nGPT\n\n\nNombre m√†xim de particions\n4 prim√†ries (amb l√≤giques dins d‚Äôestesa)\nFins a 128 entrades de particions\n\n\nModularitat\nMonol√≠tica\nModular, permet afegir drivers, aplicacions i extensions UEFI",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#taula-de-particions-mbr",
    "href": "slides/02-booting.html#taula-de-particions-mbr",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Taula de particions MBR",
    "text": "Taula de particions MBR\n\n\nEstructura\n\nBootloader de primera etapa (446 bytes): Cont√© el codi d‚Äôarrencada.\nTaula de particions (64 bytes): Cont√© la informaci√≥ de les particions. Pot contenir fins a 4 entrades.\nSignatura (2 bytes): Marca de final de la taula de particions. Permet identificar la taula de particions com a v√†lida.\n\n\n\n\n\n\n\n\nL√≠mitaci√≥\n\n\n\nCom MBR utiltiza entrades de 32 bits per blocs l√≤gics (LBA) ‚Üí \\(2^{32}\\) sectors √ó \\(512 B = 2 TB\\) aproximadament.\nNom√©s suporta 4 particions prim√†ries.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#particions-mbr-i",
    "href": "slides/02-booting.html#particions-mbr-i",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Particions MBR (I)",
    "text": "Particions MBR (I)\n\nParticions prim√†ries\n\nFins a 4 per disc.\nContenen directament un sistema de fitxers (ext4, NTFS, FAT32).\nPot tenir un Volume Boot Record (VBR) que carrega el sistema operatiu de la partici√≥.\n\nPartici√≥ estesa\n\nUna partici√≥ prim√†ria especial per superar la limitaci√≥ de 4 prim√†ries.\nNo cont√© sistema de fitxers ni VBR; actua com a contenidor de particions l√≤giques.\n\nParticions l√≤giques\n\nResideixen dins de la partici√≥ estesa.\nCada partici√≥ l√≤gica t√© un Extended Boot Record (EBR) amb la seva taula de particions.\nLa linked list d‚ÄôEBRs permet afegir din√†micament m√©s particions l√≤giques.\nPot contenir un VBR per carregar el sistema operatiu",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#particions-mbr-ii",
    "href": "slides/02-booting.html#particions-mbr-ii",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Particions MBR (II)",
    "text": "Particions MBR (II)",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#taula-de-particions-gpt-i",
    "href": "slides/02-booting.html#taula-de-particions-gpt-i",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Taula de particions GPT (I)",
    "text": "Taula de particions GPT (I)\n\nCompatibilitat i protecci√≥\n\nBloqueja utilitats basades en MBR per no sobreescriure un disc GPT.\nCont√© una √∫nica partici√≥ especial que identifica el disc com GPT.\nOS i eines que no suporten GPT reconeixen el disc, per√≤ normalment no el modifiquen.\n\nGPT Header Primari\n\nSituat al segon sector del disc (LBA 1).\nDefineix els blocs utilitzables del disc.\nCont√© la taula de particions (m√≠nim 128 entrades, 128 B cadascuna).\n\nGPT Header Secundari\n\nC√≤pia de seguretat del Primary GPT Header.\nSituat als √∫ltims sectors del disc.\nPermet recuperar la informaci√≥ si el Primary Header est√† corrupte.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#taula-de-particions-gpt",
    "href": "slides/02-booting.html#taula-de-particions-gpt",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Taula de particions GPT",
    "text": "Taula de particions GPT",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#qu√®-√©s-uefi-i",
    "href": "slides/02-booting.html#qu√®-√©s-uefi-i",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Qu√® √©s UEFI? (I)",
    "text": "Qu√® √©s UEFI? (I)\n\nSistema de fitxers propi\n\nUEFI no utilitza MBR tradicional de 512 B ni codi de boot limitat.\nDisposa d‚Äôun filesystem propi (FAT32, 100 a 550 MB) anomenat EFI System Partition (ESP).\nLa partici√≥ EFI √©s marcada amb boot flag, per√≤ mai cont√© OS partitions.\n\nEstructura de la partici√≥ EFI\n\nCada OS t√© la seva carpeta dins de la ESP.\nCont√© tots els fitxers necessaris per carregar el sistema operatiu.\nEn Linux, la ESP sovint es munta sota /boot/efi.\n\n\n\n/\n‚îú‚îÄ‚îÄ boot\n‚îÇ   ‚îú‚îÄ‚îÄ efi\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EFI\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BOOT\n‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BOOTX64.EFI",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#qu√®-√©s-uefi-ii",
    "href": "slides/02-booting.html#qu√®-√©s-uefi-ii",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Qu√® √©s UEFI? (II)",
    "text": "Qu√® √©s UEFI? (II)\n\nMini sistema operatiu\n\nUEFI √©s com un mini sistema operatiu.\n\nExecuta fitxers en format EFI executable.\nPermet drivers i aplicacions independents del SO.\n\nQuan escrius un bootloader natiu UEFI, has de respectar aquest format.\n\nUEFI Boot Manager\n\nMotor de pol√≠tica del firmware per arrencada.\nConfigurable via variables globals a NVRAM.\nCarrega drivers UEFI i aplicacions UEFI (incloent OS bootloaders) en l‚Äôordre definit per les variables.\nLinux disposa de l‚Äôeina efibootmgr per modificar la configuraci√≥ del boot manager.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#m√≤duls-de-la-uefi",
    "href": "slides/02-booting.html#m√≤duls-de-la-uefi",
    "title": "Arrencada del sistema (Part 1)",
    "section": "M√≤duls de la UEFI",
    "text": "M√≤duls de la UEFI",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#efibootmgr",
    "href": "slides/02-booting.html#efibootmgr",
    "title": "Arrencada del sistema (Part 1)",
    "section": "efibootmgr",
    "text": "efibootmgr\n# efibootmgr -v\nBootCurrent: 0002\nTimeout: 3 seconds\nBootOrder: 0003,0002,0000,0004\nBoot0000* CD/DVD Drive  BIOS(3,0,00)\nBoot0001* Hard Drive    HD(2,0,00)\nBoot0002* Fedora        HD(1,800,61800,6d98f360-cb3e-4727-8fed-5ce0c040365d)File(\\EFI\\fedora\\grubx64.efi)\nBoot0003* opensuse      HD(1,800,61800,6d98f360-cb3e-4727-8fed-5ce0c040365d)File(\\EFI\\opensuse\\grubx64.efi)\nBoot0004* Hard Drive    BIOS(2,0,00)P0: ST1500DM003-9YN16G \n\nLes entrades Boot0000 i Boot0004 corresponen a modes de compatibilitat BIOS (CSM), no s√≥n natives- d‚ÄôUEFI.\nGenerades autom√†ticament pel firmware, sense intervenci√≥ externa.\nS‚Äôafegeixen directament a les variables NVRAM del sistema.\nEntrades UEFI natives (Boot0002, Boot0003) apunten directament als fitxers EFI dels OS:\n\nFedora : \\EFI\\fedora\\grubx64.efi\nopenSUSE: \\EFI\\opensuse\\grubx64.efi\n\nL‚Äôordre d‚Äôarrencada es defineix a la variable BootOrder.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#qu√®-√©s-la-consola-de-la-uefi",
    "href": "slides/02-booting.html#qu√®-√©s-la-consola-de-la-uefi",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Qu√® √©s la consola de la UEFI?",
    "text": "Qu√® √©s la consola de la UEFI?\nLa consola de la UEFI √©s una interf√≠cie de l√≠nia de comandes que permet interactuar directament amb el firmware UEFI per realitzar tasques avan√ßades de diagn√≤stic, configuraci√≥ i manteniment del sistema.\n\n\nFuncions\n\nConfiguraci√≥ del maquinari i perif√®rics (CPU, mem√≤ria, dispositius PCIe).\nComprovaci√≥ del funcionament dels dispositius i diagn√≤stic de fallades.\nAcc√©s als sistemes de fitxers EFI i gesti√≥ de fitxers de boot.\nInstal¬∑laci√≥, reparaci√≥ o actualitzaci√≥ de bootloaders i OS.\nExecuci√≥ de aplicacions UEFI natives (mini-aplicacions tipus OS).\n\n\nAcc√©s\n\nPrement una tecla durant l‚Äôengegada del sistema, segons el fabricant: F2, F10, F12, ESC o Supr.\nDes de sistemes operatius:\n\nLinux: efibootmgr o systemctl reboot --firmware-setup.\nWindows: Opci√≥ Advanced Startup i UEFI Firmware Settings.\nmacOS: Reboot amb Option/Alt.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#comandes-de-la-consola-de-la-uefi",
    "href": "slides/02-booting.html#comandes-de-la-consola-de-la-uefi",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Comandes de la consola de la UEFI",
    "text": "Comandes de la consola de la UEFI\n\n\n\n\n\n\n\n\nComanda\nFunci√≥\nExemple\n\n\n\n\nmap\nMostra els dispositius detectats i les unitats l√≤giques associades\nmap fs* ‚Üí llista tots els sistemes de fitxers detectats\n\n\nmem\nMostra l‚Äô√∫s de mem√≤ria i mapa f√≠sic de la RAM\nmemmap ‚Üí mapa detallat de la mem√≤ria f√≠sica\n\n\nls\nLlista fitxers i directoris dins un FS accessible\nls fs0:\\EFI\\Boot ‚Üí mostra fitxers de la partici√≥ EFI\n\n\ncd\nNavegar entre carpetes dins del FS\ncd EFI\\Boot ‚Üí mou a la carpeta d‚Äôarrencada EFI\n\n\ncp\nCopiar fitxers entre unitats o directoris\ncp fs0:\\EFI\\Boot\\bootx64.efi fs1:\\EFI\\Backup\\\n\n\nedit\nEditar fitxers, √∫til per configurar scripts d‚Äôarrencada\nedit fs0:\\EFI\\Boot\\bootx64.efi",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#import√†ncia-de-la-partici√≥-efi",
    "href": "slides/02-booting.html#import√†ncia-de-la-partici√≥-efi",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Import√†ncia de la partici√≥ EFI",
    "text": "Import√†ncia de la partici√≥ EFI\n\nPunt de partida per a l‚Äôarrencada del sistema operatiu.\nEssencial per a l‚Äôarrencada dels sistemes UEFI.\nCont√© fitxers cr√≠tics per carregar el bootloader de segona etapa, com:\n\nGRUB (Linux)\nGestor d‚Äôarrencada de Windows\n\nPermet tenir m√∫ltiples sistemes operatius en el mateix disc.\nFacilita la gesti√≥ i actualitzaci√≥ de bootloaders sense afectar les particions del sistema operatiu.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#arrencar-sense-partici√≥-efi",
    "href": "slides/02-booting.html#arrencar-sense-partici√≥-efi",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Arrencar sense partici√≥ EFI",
    "text": "Arrencar sense partici√≥ EFI\n\nTe√≤ricament possible: configurar UEFI per carregar el bootloader directament des del disc dur.\nPoc com√∫ i no recomanat, ja que:\n\nComplica la gesti√≥ dels sistemes operatius.\nImpedeix actualitzacions i reparacions autom√†tiques dels bootloaders.\n\nLa partici√≥ EFI proporciona un punt centralitzat i est√†ndard per a tots els fitxers d‚Äôarrencada.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#tipus-de-bootloaders",
    "href": "slides/02-booting.html#tipus-de-bootloaders",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Tipus de bootloaders",
    "text": "Tipus de bootloaders\n\nBootloader de primera etapa: Carregat directament pel firmware (BIOS/UEFI). S‚Äôencarrega de carregar el bootloader de segona etapa.\nBootloader de segona etapa: Carregat pel bootloader de primera etapa. S‚Äôencarrega de carregar el sistema operatiu.\n\n\nEn sistemes UEFI, el bootloader de primera etapa √©s un fitxer executable en format EFI (per exemple, grubx64.efi per a GRUB). Mentre que en sistemes BIOS, el bootloader de primera etapa es troba en el MBR del disc.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#funcions-del-bootloader",
    "href": "slides/02-booting.html#funcions-del-bootloader",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Funcions del bootloader",
    "text": "Funcions del bootloader\nUn bootloader √©s el programa encarregat de:\n\nMostrar un men√∫ amb les diverses opcions d‚Äôarrencada disponibles.\nCarregar el nucli (kernel) i l‚ÄôInitrd (si s‚Äôescau) a la mem√≤ria principal.\nEl kernel de linux t√© una convenci√≥ d‚Äôarrencada on el bootloader ha de preparar el mapa de mem√≤ria i els registres de la CPU abans de transferir el control al nucli.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#diferents-gestors-darrencada",
    "href": "slides/02-booting.html#diferents-gestors-darrencada",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Diferents gestors d‚Äôarrencada",
    "text": "Diferents gestors d‚Äôarrencada\n\n\n\n\n\n\n\n\nBootloader\nCompatibilitat\nCaracter√≠stiques principals\n\n\n\n\nLILO\nBIOS\nAntic bootloader Linux, obsolet.\n\n\nGRUB\nBIOS/UEFI\nPopular en Linux; men√∫ configurable; suport multiboot.\n\n\nGRUB2\nBIOS/UEFI\nVersi√≥ moderna; suport FAT, NTFS, ext4; millor multiboot i scripting.\n\n\nrEFInd\nUEFI\nPermet arrencar m√∫ltiples OS; interf√≠cie gr√†fica amigable.\n\n\nsystemd-boot\nUEFI\nSimple i r√†pid; integraci√≥ amb systemd; no recomanat per multiboot.\n\n\nWindows Boot Manager\nUEFI\nGestiona arrencada de Windows i altres OS compatibles; integraci√≥ amb BCD.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#exercicis-propostas",
    "href": "slides/02-booting.html#exercicis-propostas",
    "title": "Arrencada del sistema (Part 1)",
    "section": "Exercicis Propostas",
    "text": "Exercicis Propostas\n\nBooting amb MBR i BIOS\nBooting amb UEFI\nDual Boot amb UEFI",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/02-booting.html#thats-all",
    "href": "slides/02-booting.html#thats-all",
    "title": "Arrencada del sistema (Part 1)",
    "section": "That‚Äôs all",
    "text": "That‚Äôs all\n\n\n\n\n\n\n\n\n\nTake Home Message\n\n\nEl proc√©s d‚Äôarrencada √©s un proc√©s complex. Els administradors de sistemes han de con√®ixer aquest proc√©s per poder gestionar i solucionar problemes durant l‚Äôarrencada del sistema i garantir un sistema segur, estable i eficient.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#arquitectura-de-credencials-del-kernel",
    "href": "slides/04-authentication-part1.html#arquitectura-de-credencials-del-kernel",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Arquitectura de credencials del kernel",
    "text": "Arquitectura de credencials del kernel\nstruct cred {\n    // Identitats reals, efectives i de seguretat\n    kuid_t uid, euid, suid, fsuid; \n    // Grups associats     \n    kgid_t gid, egid, sgid, fsgid;\n    // Capabilities heretables      \n    kernel_cap_t cap_inheritable; \n    // Capabilities permeses      \n    kernel_cap_t cap_permitted;\n    // Capabilities actives         \n    kernel_cap_t cap_effective;  \n    // Claus de sessi√≥      \n    struct key *session_keyring;\n    // Estructura d'usuari global        \n    struct user_struct *user;           \n};\nEls attributs euid/egid permet als progames operar amb elevaci√≥ de privilegis.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#usuaris-a-linux",
    "href": "slides/04-authentication-part1.html#usuaris-a-linux",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Usuaris a Linux",
    "text": "Usuaris a Linux\n\nCada entitat al sistema t√© un Identificador √önic (UID) i un Grup Primari (GID).\nEls recursos (fitxers, directoris, processos) s√≥n propietat d‚Äôun UID i un GID.\nObjectiu de Seguretat: Implementar el Principi de M√≠nims Privilegis (PoLP).\nObjectiu d‚ÄôAuditoria: Registrar i tra√ßar les accions de cada usuari.\n\n\n\n\n\n\n\n\n\n\n\nRang\nCategoria\nDescripci√≥\nPol√≠tica\n\n\n\n\n0\nroot\nSuperusuari, privilegis absoluts\nEvitar-ne l‚Äô√∫s directe\n\n\n1‚Äì999\nSistema\ndimonis, serveis (nginx, mysql)\nSense shell interactiu\n\n\n1000+\nHumans\nUsuaris interactius, grups secundaris\nPAM, auditoria\n\n\n65534\nnobody\nSense privilegis\nA√Øllament de processos",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#el-superusuari-root",
    "href": "slides/04-authentication-part1.html#el-superusuari-root",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "El Superusuari (root)",
    "text": "El Superusuari (root)\n\nUID 0 amb privilegis il¬∑limitats i acc√©s absolut a tots els fitxers i processos.\nRecomanaci√≥ de Seguretat: Evitar l‚Äô√∫s directe de root.\n\nUn error com√®s per root pot ser catastr√≤fic.\nAugmenta el rastre d‚Äôauditoria de l‚Äôusuari real.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#elevaci√≥-de-privilegis",
    "href": "slides/04-authentication-part1.html#elevaci√≥-de-privilegis",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Elevaci√≥ de Privilegis",
    "text": "Elevaci√≥ de Privilegis\n\nsudo: Permet executar comandes com a un altre usuari (per defecte root).\n\nLa configuraci√≥ es fa al fitxer /etc/sudoers mitjan√ßant visudo.\nPermet un control granular: qui, des d‚Äôon, i quines comandes pot executar.\n\nsu -c comanda: Permet executar una comanda com a un altre usuari incloent root.\n\nRequereix la contrasenya de l‚Äôusuari objectiu.\nNo ofereix control granular ni registre detallat.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#grups-dusuaris",
    "href": "slides/04-authentication-part1.html#grups-dusuaris",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Grups d‚Äôusuaris",
    "text": "Grups d‚Äôusuaris\n\nUn grup √©s una col¬∑lecci√≥ d‚Äôusuaris que comparteixen permisos comuns en fitxers i directoris.\nCada usuari t√© un grup primari i pot pert√†nyer a m√∫ltiples grups.\n\n\n$ id usuari\nuid=1001(usuari) gid=1001(usuari) groups=1001(usuari),27(sudo),1002(grup2)\n\n$ groups usuari\nusuari : usuari sudo grup2",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#bases-de-dades",
    "href": "slides/04-authentication-part1.html#bases-de-dades",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Bases de dades",
    "text": "Bases de dades\n\n\n\n\n\n\n\n\n\nFitxer\nPropietari\nPermisos\nContingut\n\n\n\n\n/etc/passwd\nroot\n644\nuid, gid, comentari, shell (p√∫blic)\n\n\n/etc/shadow\nroot\n600\nhashs de contrasenyes (secret)\n\n\n/etc/group\nroot\n644\ndefinicions de grups\n\n\n/etc/gshadow\nroot\n600\ncontrasenyes de grups (rares)\n\n\n\n\nCal comprovar regularment els permissos de:\nstat /etc/passwd /etc/shadow /etc/group",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#etcpasswd",
    "href": "slides/04-authentication-part1.html#etcpasswd",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "/etc/passwd",
    "text": "/etc/passwd\nEl fitxer /etc/passwd √©s un fitxer que cont√© la base de dades d‚Äôusuaris del sistema. Cada l√≠nia del fitxer descriu un compte d‚Äôusuari.\n$ less /etc/passwd\nnom:clau:uid:gid:comentari:directori:shell\n\nnom: Algunes versions limiten el nom a 8 car√†cters. Es recomana utilitzar m√≠niscules i n√∫meros.\nclau: √âs un camp que ja no s‚Äôutilitza. La clau s‚Äôemmagatzema en /etc/shadow.\nuid: N√∫mero intern associat al nom d‚Äôusuari.\ngid: N√∫mero associat al grup principal de l‚Äôusuari. Cada identificador t√© la seva entrada a /etc/group.\ncomentari: Normalment s‚Äôutilitza per al nom complet de l‚Äôusuari o altres dades descriptives.\ndirectori: Directori d‚Äôinici de l‚Äôusuari.\nshell: Int√®rpret de comandes per defecte de l‚Äôusuari (per exemple, /bin/bash).",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#etcpasswd-nom",
    "href": "slides/04-authentication-part1.html#etcpasswd-nom",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "/etc/passwd: nom",
    "text": "/etc/passwd: nom\n\nHa de ser √∫nic.\nNo pot contenir els car√†cters :, \\n\nEs permet fins a 32 car√†cters. El primer car√†cter ha de ser min√∫scula o _.\nS‚Äôaccepten maj√∫scules, min√∫scules, -, _ i n√∫meros.\nEs recomana m√†xim 8 car√†cters per tenir compatibilitat amb legacy systems.\nEs recomana no utilitzar maj√∫scules.\nEs recomana no utilitzar nicknames.\nEs recomana mantenir un esquema de noms.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#etcgroup",
    "href": "slides/04-authentication-part1.html#etcgroup",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "/etc/group",
    "text": "/etc/group\nEl fitxer /etc/group √©s un fitxer que cont√© la base de dades de grups del sistema. Cada l√≠nia del fitxer descriu un grup d‚Äôusuaris.\n$ less /etc/group\nnom:clau:gid:llista_usuaris\n\nnom: Nom del grup. Pot ser el mateix que el de l‚Äôusuari (si √©s l‚Äô√∫nic membre). S‚Äôaconsella min√∫scules i n√∫meros.\nclau: Fa refer√®ncia a una contrasenya opcional pel grup. Un * com a car√†cter inv√†lid impedeix que els usuaris normals canvi√Øn al grup. Una x fa refer√®ncia al fitxer de contrasenya separat /etc/gshadow. gpasswd\ngid: N√∫mero intern associat al grup. Els nombres baixos es reserven pels grups de sistema. Els nombres 200, 500 o 1000 es troben els comptes normals.\nmembres: Una llista de noms d‚Äôusuaris separats per comes. Aquesta llista cont√© tots els usuaris que tenen aquest grup com a grup secundari, √©s a dir, que s√≥n membres d‚Äôaquest grup, per√≤ tenen un valor diferent del camp GID del seu /etc/passwd.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#etcshadow",
    "href": "slides/04-authentication-part1.html#etcshadow",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "/etc/shadow",
    "text": "/etc/shadow\nEl fitxer /etc/shadow √©s un fitxer que cont√© la informaci√≥ de les contrasenyes dels usuaris del sistema. Aquest fitxer √©s llegible nom√©s per l‚Äôusuari root i els processos amb privilegis elevats.\n$ less /etc/shadow\nnom:password_hash:change:min:max:warn:grace:lock\n\n\n\n\n\n\n\n\nCamp\nDescripci√≥\nGesti√≥\n\n\n\n\npassword_hash\nHash (xifrat) de la contrasenya + salt.\n\n\n\nchange\nData de l‚Äô√∫ltim canvi (dies des de 01-01-1970).\nchage -m\n\n\nmin\nDies m√≠nims entre canvis de contrasenya.\nchage -m\n\n\nmax\nDies m√†xims abans de l‚Äôexpiraci√≥.\nchage -M\n\n\nwarn\nDies d‚Äôav√≠s abans de l‚Äôexpiraci√≥.\nchage -W\n\n\ngrace\nDies de gr√†cia despr√©s de l‚Äôexpiraci√≥ abans de bloquejar el compte.\nchage -I\n\n\nlock\nData d‚Äôexpiraci√≥ del compte (Bloqueig).\nchage -E",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#xifrat-de-contrasenyes",
    "href": "slides/04-authentication-part1.html#xifrat-de-contrasenyes",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Xifrat de Contrasenyes",
    "text": "Xifrat de Contrasenyes\nEls sistemes moderns utilitzen algorismes de hashing forts amb salt.\n\nSHA-512: El m√©s segur i actual (per defecte a Debian/RedHat).\nSHA-256: Encara com√∫.\nMD5: Considerat insegur (Legacy).\n\n\nNormalment el xifrat es configura a /etc/login.defs o /etc/pam.d/common-password. M√©s endavant veurem PAM i els seus m√≤duls com pam_pwquality.so.\n\n\nFins al moment, els algorismes de xifratge atorguen una seguretat adequada per a la majoria d‚Äôaplicacions. Per a entorns amb requisits de seguretat m√©s estrictes, es poden utiltizar m√®todes addicionals com l‚Äôautenticaci√≥ de dos factors (2FA) o l‚Äô√∫s de tokens de seguretat. La computaci√≥ qu√†ntica podria afectar els algorismes actuals en el futur, per√≤ encara no √©s una amena√ßa immediata per a la majoria dels sistemes.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#useradd",
    "href": "slides/04-authentication-part1.html#useradd",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "useradd",
    "text": "useradd\nCreaci√≥ d‚Äôun nou compte d‚Äôusuari amb useradd [opcions] [nom_usuari].\n\n\n\n\n\n\n\n\n\nOpci√≥\nClau\nDescripci√≥\nAplicaci√≥\n\n\n\n\n-c comentari\nComentari\nNom complet o informaci√≥ addicional.\nIdentificaci√≥ d‚Äôusuaris.\n\n\n-e YYYY-MM-DD\nExpiraci√≥\nData de caducitat del compte.\nComptes temporals.\n\n\n-g grup\nGrup Primari\nAssigna el grup primari de l‚Äôusuari.\nGesti√≥ de permisos.\n\n\n-k /directori/skel\nEsquelet\nEspecifica un directori d‚Äôesquelet diferent.\nConfiguraci√≥ personalitzada.\n\n\n-m\nCrea Home\nCrea el directori home si no existeix.\nA√Øllament d‚Äôusuaris.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#usermod-i-userdel",
    "href": "slides/04-authentication-part1.html#usermod-i-userdel",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "usermod i userdel",
    "text": "usermod i userdel\n\nLa comanda usermod permet modificar un compte d‚Äôusuari existent amb usermod [opcions] [nom_usuari]. Les opcions s√≥n similars a les de useradd. Per veure les opcions man usermod.\nLa comanda userdel permet eliminar el compte d‚Äôun usuari amb userdel [-r] [nom_usuari] . L‚Äôargument r elimina el directori homei la b√∫stia de correu de l‚Äôusuari.\nLa comanda userdel no elimina les dades relacionades amb les tasques cron (crontabs).",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#passwd-gesti√≥-de-contrasenyes-i",
    "href": "slides/04-authentication-part1.html#passwd-gesti√≥-de-contrasenyes-i",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "passwd (Gesti√≥ de Contrasenyes I)",
    "text": "passwd (Gesti√≥ de Contrasenyes I)\npasswd\n$ passwd\nChanging password for jmateo.\n(current) UNIX password:12345678\nEnter new UNIX password:87654321\nRetype new UNIX password:87654321\npasswd: password updated successfull\n# Show info\n$ passwd -S jmateo\n# Lock the account\n$ passwd -l jmateo\n# Unlock the account\n$ passwd -u jmateo\n# Password change at most every 7 days\n$ passwd -n 7 jmateo\n# Password change at least every 30 days\n$ passwd -x 30 jmateo\n# 3 days grace period before password expires\n$ passwd -w 3 jmateo",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#chage-gesti√≥-de-contrasenyes-ii",
    "href": "slides/04-authentication-part1.html#chage-gesti√≥-de-contrasenyes-ii",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "chage (Gesti√≥ de Contrasenyes II)",
    "text": "chage (Gesti√≥ de Contrasenyes II)\n# Lock account from 1 Dec 2009\n$ chage -E 2009-12-01 jmateo\n# Cancel expiry date\n$ chage -E -1 jmateo\n# Grace period 1 week from password expiry\n$ chage -I 7 jmateo\n# Like passwd -n\n$ chage -m 7 jmateo\n# Like passwd -x\n$ chage -M 7 jmateo\n# Like passwd -w\n$ chage -W 3 jmateo",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#exemples-de-comandes-usuaris",
    "href": "slides/04-authentication-part1.html#exemples-de-comandes-usuaris",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Exemples de comandes (usuaris)",
    "text": "Exemples de comandes (usuaris)\n# Crear usuari amb opcions de seguretat avan√ßada\nsudo useradd -m -d /home/ana -s /bin/bash \\\n    -c \"Ana Garc√≠a\" -g developers -G sudo,docker \\\n    -e 2025-12-31 -f 7 ana\n\n# Modificar data de caducitat\nsudo usermod -e 2025-06-30 ana\n\n# Bloquejar/desbloquejar compte\nsudo passwd -l ana          # Lock\nsudo passwd -u ana          # Unlock\n\n# Consultar estat de la contrasenya i pol√≠tiques\nsudo chage -l ana\nRecomanaci√≥: Manualment, revisar UIDs actius: awk -F: '$3 &gt;= 1000 {print}' /etc/passwd",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#gesti√≥-de-grups",
    "href": "slides/04-authentication-part1.html#gesti√≥-de-grups",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Gesti√≥ de Grups",
    "text": "Gesti√≥ de Grups\n$ groupadd [-g GID] [group name]\n# Modificaci√≥ del grup: -g modifica el GID,\n# -n actualitza el nom.\n$ groupmod [-g GID] [-n nom] [group name]\n# Eliminant grups\n$ grupdel [group name]\n# Afegint un usuari a un grup\n$ gpasswd -a [user] [group]\n# Eliminant l‚Äôusuari del grup\n$ gpasswd -d [user] [group]\n\nUn compte d‚Äôusuari pot pert√†nyer a m√∫ltiples grups secundaris.\nUn compte d‚Äôusuari nom√©s pot tenir un grup primari.\nEl grup primari s‚Äôespecifica al camp GID del fitxer /etc/passwd.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#exemples-de-comandes-grups",
    "href": "slides/04-authentication-part1.html#exemples-de-comandes-grups",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Exemples de comandes (grups)",
    "text": "Exemples de comandes (grups)\n# Crear grup amb GID espec√≠fic\nsudo groupadd -g 2001 devops\n\n# Afegir usuari a grup secundari sense perdre altres\nsudo usermod -aG devops,docker,audit ana\n\n# Consultar grups de l'usuari\nid ana\ngroups ana\n\n# Canviar temporalment el grup\nnewgrp devops\n\n# Llistar membres d'un grup\ngetent group devops",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#permisos-cl√†ssics-unix",
    "href": "slides/04-authentication-part1.html#permisos-cl√†ssics-unix",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Permisos cl√†ssics Unix",
    "text": "Permisos cl√†ssics Unix\ndrwxr-xr-x  3 joan developers 4096 Oct 15 10:20 project/\n‚îÇ‚îÇ  ‚îÇ ‚îî‚îÄ others: r-x (lectura, acc√©s)\n‚îÇ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ group: r-x (lectura, acc√©s)\n‚îÇ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ owner: rwx (total)\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ type: d (directori)\n\nCada fitxer i directori t√© associats tres tipus de permisos:\n\nRead (r): Permet llegir el contingut del fitxer o llistar el contingut del directori.\nWrite (w): Permet modificar el contingut del fitxer o crear/eliminar fitxers dins del directori.\nExecute (x): Permet executar el fitxer com un programa o accedir als fitxers dins del directori.\n\nEls permisos s‚Äôapliquen a tres categories d‚Äôusuaris:\n\nOwner (u): L‚Äôusuari propietari del fitxer o directori.\nGroup (g): Els usuaris que pertanyen al grup associat al fitxer o directori.\nOthers (o): Tots els altres usuaris del sistema.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#chmod-canviant-permisos",
    "href": "slides/04-authentication-part1.html#chmod-canviant-permisos",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "chmod: Canviant permisos",
    "text": "chmod: Canviant permisos\n\nLa comanda chmod s‚Äôutilitza per canviar els permisos d‚Äôun fitxer o directori.\n\n\nchmod [opcions] mode fitxer/directori\n\n\nEl mode es pot especificar de dues maneres:\n\nSimbolica: Utilitza lletres per representar usuaris i permisos.\n\nExemple: chmod u+rwx,g+rx,o-r file.txt\n\nOctal: Utilitza n√∫meros per representar els permisos.\n\nExemple: chmod 755 file.txt (rwxr-xr-x)",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#exmmples-pr√†ctics-chmod-i",
    "href": "slides/04-authentication-part1.html#exmmples-pr√†ctics-chmod-i",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Exmmples pr√†ctics chmod (I)",
    "text": "Exmmples pr√†ctics chmod (I)\njordi@debianlab:~$ chmod +x a.txt\njordi@debianlab:~$ ls -la a.txt\n-rwxr-xr-x 1 jordi jordi 0 11 de jul.  11:26 a.txt\njordi@debianlab:~$ chmod -x a.txt\njordi@debianlab:~$ ls -la a.txt\n-rw-r--r-* 1 jordi jordi 0 11 de jul.  11:26 a.txt\njordi@debianlab:~$ chmod o-r a.txt\njordi@debianlab:~$ ls -la a.txt\n-rw-r----* 1 jordi jordi 0 11 de jul.  11:26 a.txt\njordi@debianlab:~$ chmod g+w a.txt\njordi@debianlab:~$ ls -la a.txt\n-rw-rw---* 1 jordi jordi 0 11 de jul.  11:26 a.txt\njordi@debianlab:~$ chmod o+w a.txt\njordi@debianlab:~$ ls -la a.txt\n-rw-rw--w* 1 jordi jordi 0 11 de jul.  11:26 a.txt",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#exmmples-pr√†ctics-chmod-ii",
    "href": "slides/04-authentication-part1.html#exmmples-pr√†ctics-chmod-ii",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Exmmples pr√†ctics chmod (II)",
    "text": "Exmmples pr√†ctics chmod (II)\njordi@debianlab:~$ chmod a-w a.txt\njordi@debianlab:~$ ls -la a.txt\n-r--r----* 1 jordi jordi 0 11 de jul.  11:26 a.txt\njordi@debianlab:~$ echo \"a\" &gt;&gt; a.txt\n-bash: a.txt: S‚Äôha denegat el perm√≠s\njordi@debianlab:~$ cat a.txt\njordi@debianlab:~$ chmod +w a.txt\njordi@debianlab:~$ echo \"a\" &gt;&gt; a.txt\njordi@debianlab:~$ cat a.txt\na\njordi@debianlab:~$ chmod -r a.txt\njordi@debianlab:~$ cat a.txt\ncat: a.txt: S‚Äôha denegat el perm√≠s",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#chown-i-chgrp-canviant-propietaris-i-grups",
    "href": "slides/04-authentication-part1.html#chown-i-chgrp-canviant-propietaris-i-grups",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "chown i chgrp: Canviant propietaris i grups",
    "text": "chown i chgrp: Canviant propietaris i grups\n\nLa comanda chown s‚Äôutilitza per canviar el propietari d‚Äôun fitxer o directori.\n\n\nchown [opcions] nou_propietari fitxer/directori\n\n\nLa comanda chgrp s‚Äôutilitza per canviar el grup associat a un fitxer o directori.\n\n\nchgrp [opcions] nou_grup fitxer/directori",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#comandes-b√†siques",
    "href": "slides/04-authentication-part1.html#comandes-b√†siques",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Comandes B√†siques",
    "text": "Comandes B√†siques\n# Canviar permisos (simb√≤lic i octal)\nchmod u+rwx,g+rx,o-r fitxer        # Simb√≤lic\nchmod 750 fitxer                   # Octal: rwxr-x---\n\n# Canviar propietari i grup\nsudo chown joan:developers fitxer\nsudo chgrp developers fitxer\n\n# Aplicar recursivament \n## -R per recursiu\n## --changes per mostrar canvis\nsudo chmod -R 750 /home/joan --changes",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#umask",
    "href": "slides/04-authentication-part1.html#umask",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "umask",
    "text": "umask\n\nLa umask (user file-creation mode mask) √©s un valor que determina els permisos per defecte dels fitxers i directoris nous creats per un usuari.\n\n\n# Umask actual (resta de 777/666)\numask                              # Ex: 0022\n\n# Crear fitxer: 666 - 022 = 644 (rw-r--r--)\n# Crear directori: 777 - 022 = 755 (rwxr-xr-x)\n\n# Canviar umask per sessi√≥ (segura)\numask 0077                         # Els nous arxius: -rw------- (600)\n\n# Configurar permanent a ~/.bashrc\necho \"umask 0077\" &gt;&gt; ~/.bashrc\n\n\nS‚Äôaconsella utilitzar una umask 0002 en entorns on els usuaris treballen en grups, ja que permet als membres del grup escriure als fitxers creats per altres membres del mateix grup. Aix√≤ facilita la col¬∑laboraci√≥ i l‚Äôintercanvi de fitxers dins del grup.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#permisos-especials",
    "href": "slides/04-authentication-part1.html#permisos-especials",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Permisos especials",
    "text": "Permisos especials\n\nSetuid (s): Quan s‚Äôaplica a un fitxer executable, permet que el programa s‚Äôexecuti amb els privilegis del propietari del fitxer.\nSetgid (s): Quan s‚Äôaplica a un fitxer executable, permet que el programa s‚Äôexecuti amb els privilegis del grup del fitxer. Quan s‚Äôaplica a un directori, els fitxers creats dins d‚Äôaquest directori hereten el grup del directori.\nSticky bit (t): Quan s‚Äôaplica a un directori, nom√©s el propietari del fitxer o el propietari del directori poden eliminar o renombrar fitxers dins d‚Äôaquest directori.\n\n\n# Exemple de permisos especials\nchmod u+s programa   # Setuid\nchmod g+s directori  # Setgid\nchmod +t directori   # Sticky bit",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#setuid-s-executar-com-a-propietari",
    "href": "slides/04-authentication-part1.html#setuid-s-executar-com-a-propietari",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Setuid (s): Executar com a propietari",
    "text": "Setuid (s): Executar com a propietari\n# El programa 'passwd' s'executa com a root\nls -l /usr/bin/passwd\n-rwsr-xr-x  1 root root 68208 /usr/bin/passwd\n\n# Permetre a programa espec√≠fic operar com a root\nsudo chmod u+s /usr/local/bin/myscript\nEls programes amb setuid poden ser un vector d‚Äôatac si tenen vulnerabilitats. Es important auditar-los peri√≤dicament.\nfind / -perm -4000 -type f 2&gt;/dev/null | sort",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#setgid-s-her√®ncia-de-grup-en-directoris",
    "href": "slides/04-authentication-part1.html#setgid-s-her√®ncia-de-grup-en-directoris",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Setgid (s): Her√®ncia de grup en directoris",
    "text": "Setgid (s): Her√®ncia de grup en directoris\n# Col¬∑laboraci√≥: Els fitxers nous hereten el grup del directori\nsudo mkdir /srv/projectX\nsudo chgrp developers /srv/projectX\nsudo chmod g+s /srv/projectX           # setgid activat\nsudo chmod g+w /srv/projectX\n\n# Tots els fitxers creats dins seran del grup developers",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#sticky-bit-t-protecci√≥-en-tmp",
    "href": "slides/04-authentication-part1.html#sticky-bit-t-protecci√≥-en-tmp",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Sticky bit (t): Protecci√≥ en /tmp",
    "text": "Sticky bit (t): Protecci√≥ en /tmp\n# Nom√©s el propietari pot eliminar el seu fitxer\nls -ld /tmp\ndrwxrwxrwt 12 root root 4096 /tmp\n\n# Aplicar sticky a directori compartit\nsudo chmod +t /srv/shared",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#limitacions-del-model-tradicional",
    "href": "slides/04-authentication-part1.html#limitacions-del-model-tradicional",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Limitacions del model tradicional",
    "text": "Limitacions del model tradicional\nProblema: Tres usuaris (alice, bob, charlie) necessiten permisos diferents sobre un fitxer, per√≤ el model tradicional nom√©s permet propietari, grup, altres.\nalice ‚Üí R (read)\nbob   ‚Üí RW (read, write)\ncharlie ‚Üí (cap acc√©s)\n\nSoluci√≥: ACL (Access Control Lists)",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#acls-permissos-granulars",
    "href": "slides/04-authentication-part1.html#acls-permissos-granulars",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "ACLs: Permissos granulars",
    "text": "ACLs: Permissos granulars\n\nLes Access Control Lists (ACLs) permeten definir permisos m√©s detallats per a usuaris i grups espec√≠fics.\nEl problema dels permisos tradicionals √©s que nom√©s permeten definir permisos per a l‚Äôusuari propietari, el grup i els altres usuaris.\nLes ACLs permeten assignar permisos a m√∫ltiples usuaris i grups per a un mateix fitxer o directori.\n\n\n# Comandes b√†siques per gestionar ACLs\nsetfacl -m u:usuari:rwx fitxer      # Assigna permisos rwx a un usuari espec√≠fic\ngetfacl fitxer                      # Mostra les ACLs\nsetfacl -x u:usuari fitxer          # Elimina les ACLs d'un usuari espec√≠fic\nsetfacl -d -m g:grup:rwx directori  # Assigna permisos per defecte a un grup en un directori per als fitxers nous",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#introducci√≥-a-les-acl",
    "href": "slides/04-authentication-part1.html#introducci√≥-a-les-acl",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Introducci√≥ a les ACL",
    "text": "Introducci√≥ a les ACL\n# Veure ACL actual\ngetfacl /srv/dades.txt\n\n# file: /srv/dades.txt\n# owner: root\n# group: developers\nuser::rw-\nuser:alice:r--\nuser:bob:rw-\ngroup::r--\nmask::rw-\nother::---",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#assignaci√≥-granular-dacl",
    "href": "slides/04-authentication-part1.html#assignaci√≥-granular-dacl",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Assignaci√≥ granular d‚ÄôACL",
    "text": "Assignaci√≥ granular d‚ÄôACL\n# Donar lectura a usuari espec√≠fic\nsetfacl -m u:alice:r /srv/dades.txt\n\n# Donar lectura i escriptura a grup\nsetfacl -m g:teamX:rw /srv/dades.txt\n\n# Permetre execuci√≥ a un usuari\nsetfacl -m u:bob:rwx /srv/script.sh\n\n# Eliminar ACL d'usuari\nsetfacl -x u:alice /srv/dades.txt",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#acl-per-defecte-en-directoris",
    "href": "slides/04-authentication-part1.html#acl-per-defecte-en-directoris",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "ACL per defecte en directoris",
    "text": "ACL per defecte en directoris\n# ACL per defecte: nous fitxers hereten permisos\nsudo mkdir /srv/shared\nsudo setfacl -d -m u:alice:rx /srv/shared\nsudo setfacl -d -m g:devops:rwx /srv/shared\n\n# Verificar her√®ncia\ntouch /srv/shared/testfile.txt\ngetfacl /srv/shared/testfile.txt\nLa herencia d‚ÄôACL √©s especialment √∫til en entorns col¬∑laboratius on diversos usuaris necessiten accedir i modificar fitxers dins d‚Äôun directori compartit. Permet establir pol√≠tiques de permisos coherents i assegurar que els nous fitxers i directoris creats dins del directori heretin els permisos adequats.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#m√†scara-i-preced√®ncia-dacl",
    "href": "slides/04-authentication-part1.html#m√†scara-i-preced√®ncia-dacl",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "M√†scara i preced√®ncia d‚ÄôACL",
    "text": "M√†scara i preced√®ncia d‚ÄôACL\n# La m√†scara limita permisos m√†xims efectius\nsetfacl -m m::rx /srv/dades.txt     # Limita ACL a r-x\nL‚Äôordre de preced√®ncia:\n\nACL de l‚Äôusuari propietari\nACL espec√≠fic de l‚Äôusuari\nM√†scara\nACL del grup propietari\nACL de grup espec√≠fic\nAltres\n\nAquesta jerarquia assegura que els permisos m√©s espec√≠fics tinguin prioritat sobre els m√©s generals.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#auditor√≠a-i-migracions-dacl",
    "href": "slides/04-authentication-part1.html#auditor√≠a-i-migracions-dacl",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Auditor√≠a i migracions d‚ÄôACL",
    "text": "Auditor√≠a i migracions d‚ÄôACL\n# Exportar ACL per backup\ngetfacl -R /srv/dades &gt; acl_backup.txt\n\n# Restaurar ACL\nsetfacl --restore=acl_backup.txt\n\n# Identificar fitxers amb ACL no est√†ndar\nfind /home -type f -exec sh -c 'getfacl {} | grep -q \"^user:\" && echo {}' \\;",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#sudo",
    "href": "slides/04-authentication-part1.html#sudo",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "sudo",
    "text": "sudo\n\nsudo permet executar comandes amb els privilegis d‚Äôun altre usuari (per defecte root).\nLa configuraci√≥ es fa al fitxer /etc/sudoers mitjan√ßant l‚Äôeina visudo.\nPermet un control granular: qui, des d‚Äôon, i quines comandes pot executar.\n\n\n# Configuraci√≥ a /etc/sudoers (editar amb 'visudo')\njoan ALL=(ALL) NOPASSWD: /usr/bin/systemctl restart apache2\n\n# Sintaxi: user host=(runasuser) [NOPASSWD:] command\n\n\nL‚Äôusuari joan pot reiniciar el servei apache2 sense necessitat de proporcionar la contrasenya.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#control-granular-de-permisos",
    "href": "slides/04-authentication-part1.html#control-granular-de-permisos",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Control granular de permisos",
    "text": "Control granular de permisos\n# Definir alias per a reutilitzaci√≥\nCmnd_Alias RESTART = /usr/bin/systemctl restart *, /usr/bin/systemctl reload *\nUser_Alias SYSADMINS = joan, anna, pere\nHost_Alias SERVERS = web01, web02\n\n# Pol√≠tica: els sysadmins poden reiniciar serveis sense password\nSYSADMINS SERVERS = NOPASSWD: RESTART\n\n# Restricci√≥ per hora (integrada amb PAM)\njoan web01 = (root) Cmnd=/usr/sbin/reboot [1-5/09:00-18:00]",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#auditor√≠a-d√∫s-de-sudo",
    "href": "slides/04-authentication-part1.html#auditor√≠a-d√∫s-de-sudo",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Auditor√≠a d‚Äô√∫s de sudo",
    "text": "Auditor√≠a d‚Äô√∫s de sudo\n# Configurar log detallat a /etc/sudoers\nDefaults logfile=\"/var/log/sudo.log\"\nDefaults log_output\n\n# Visualitzar comandos executades\nsudo journalctl SYSLOG_IDENTIFIER=sudo | head -20\n\n# Script per auditar √∫s sospit√≥s\ngrep COMMAND /var/log/sudo.log | grep -E \"(rm|dd|chmod|chown)\"",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#capabilities-alternatives-a-setuid",
    "href": "slides/04-authentication-part1.html#capabilities-alternatives-a-setuid",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Capabilities: alternatives a setuid",
    "text": "Capabilities: alternatives a setuid\n# En lloc de setuid root, es pot utilitzar capabilities\n# Exemple: ping no necessita root complet\ngetcap /usr/bin/ping\n\n# Si es necessita, assignar capability espec√≠fica\nsudo setcap cap_net_raw+p /usr/bin/ping\n\n# Capabilities comunes\n# CAP_NET_BIND_SERVICE: obrir ports &lt; 1024\n# CAP_SYS_ADMIN: admin del sistema (omnibus)\n# CAP_SETUID: canviar UID\n# CAP_DAC_OVERRIDE: ignorar DAC\nAvantatge: Menor superf√≠cie d‚Äôatac que setuid.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#namespaces-dusuari-i-contenidors",
    "href": "slides/04-authentication-part1.html#namespaces-dusuari-i-contenidors",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Namespaces d‚Äôusuari i contenidors",
    "text": "Namespaces d‚Äôusuari i contenidors\n# Crear namespace d'usuari per a√Øllament\nunshare --user --map-root-user --mount-proc bash\n\n# Dins del namespace: sou root (UID 0 local)\n# Per√≤ sense privilegis globals del sistema\n\n# Fonament de contenidors: processos a√Øllats per UID\ndocker run --user=nobody:nogroup ubuntu id\n# uid=65534(nobody) gid=65534(nogroup)\nCas d‚Äô√∫s: A√Øllament de microserveis i entorns CI/CD.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part1.html#exercicis-propostas",
    "href": "slides/04-authentication-part1.html#exercicis-propostas",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 1)",
    "section": "Exercicis Propostas",
    "text": "Exercicis Propostas\n\nLord of the system",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 1)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#etapes-de-larrancada",
    "href": "slides/02-booting-part2.html#etapes-de-larrancada",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Etapes de l‚Äôarrancada",
    "text": "Etapes de l‚Äôarrancada",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#qu√®-√©s-el-grubgrub2",
    "href": "slides/02-booting-part2.html#qu√®-√©s-el-grubgrub2",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Qu√® √©s el GRUB/GRUB2?",
    "text": "Qu√® √©s el GRUB/GRUB2?\nGRUB (GRand Unified Bootloader) √©s un gestor d‚Äôarrencada molt utilitzat en sistemes operatius Linux i altres sistemes Unix-like. La seva funci√≥ principal √©s carregar un kernel del sistema operatiu a la mem√≤ria i iniciar el proc√©s d‚Äôarrencada.\n\nFuncions principals:\n\nPermet seleccionar entre m√∫ltiples sistemes operatius instal¬∑lats en un mateix ordinador (multi-boot).\nProporciona una interf√≠cie per configurar opcions d‚Äôarrencada, com ara par√†metres del kernel.\nSuporta diferents sistemes de fitxers, permetent accedir a particions amb formats com ext4, Btrfs, XFS, entre altres.\nOfereix una consola interactiva per a la resoluci√≥ de problemes i la configuraci√≥ avan√ßada.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#etapes-dexecuci√≥-del-grub",
    "href": "slides/02-booting-part2.html#etapes-dexecuci√≥-del-grub",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Etapes d‚Äôexecuci√≥ del GRUB",
    "text": "Etapes d‚Äôexecuci√≥ del GRUB\n\nStage 1:\n\nEn sistemes BIOS: efectivament √©s el codi al MBR (o VBR) ‚Üí molt petit (‚â§ 446 bytes).\nEn sistemes UEFI: √©s un fitxer executable EFI (normalment a /boot/efi/EFI/grub/grubx64.efi).\n\nStage 1.5 (nom√©s en BIOS, opcional):\n\nProporciona suport b√†sic per a sistemes de fitxers.\nNormalment es troba en sectors buits despr√©s del MBR (espai entre MBR i primera partici√≥). core.img.\n\nStage 2:\n\nCont√© el GRUB complet amb el men√∫ d‚Äôarrencada.\nPot carregar m√≤duls addicionals (drivers de FS, v√≠deo, xarxa, criptografia‚Ä¶).\nTransfereix el control al kernel per iniciar el sistema operatiu.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#diagrama-darrencada-del-grub",
    "href": "slides/02-booting-part2.html#diagrama-darrencada-del-grub",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Diagrama d‚Äôarrencada del GRUB",
    "text": "Diagrama d‚Äôarrencada del GRUB\n\n\nset root=‚Äòhd0,msdos1‚Äô: Indica la partici√≥ arrel on es troba el sistema operatiu que es vol arrencar.\nlinux /vmlinuz root=/dev/sda1: Indica la ruta del kernel i la partici√≥ arrel.\ninitrd /initramfs.img: Indica la ruta de l‚Äôinitramfs.\nboot: Inicia el sistema operatiu.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#configuraci√≥-del-grub-i",
    "href": "slides/02-booting-part2.html#configuraci√≥-del-grub-i",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Configuraci√≥ del GRUB (I)",
    "text": "Configuraci√≥ del GRUB (I)\nEl fitxer principal de configuraci√≥ de GRUB2 √©s:\n- /boot/grub/grub.cfg (o /boot/grub2/grub.cfg en algunes distribucions).\n\n\n\n\n\n\n\nImportant\n\n\nNo s‚Äôha d‚Äôeditar directament, ja que es regenera autom√†ticament.\n\n\n\n\nFitxers i directoris\n\n/etc/default/grub : Opcions generals de configuraci√≥ i variables d‚Äôentorn.\n/etc/grub.d/\nDirectori amb scripts que generen grub.cfg:\n\n00_header ‚Üí configuraci√≥ inicial\n\n10_linux ‚Üí detecta kernels Linux\n\n30_os-prober ‚Üí detecta altres SO\n\n40_custom ‚Üí entrades personalitzades",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#configuraci√≥-del-grub-ii",
    "href": "slides/02-booting-part2.html#configuraci√≥-del-grub-ii",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Configuraci√≥ del GRUB (II)",
    "text": "Configuraci√≥ del GRUB (II)\nUn cop modificats els fitxers anteriors, cal regenerar grub.cfg:\n# Distribucions Debian/Ubuntu\nsudo update-grub\n\n# Distribucions Arch, Fedora, openSUSE...\nsudo grub-mkconfig -o /boot/grub/grub.cfg",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#variables-etcdefaultgrub",
    "href": "slides/02-booting-part2.html#variables-etcdefaultgrub",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Variables /etc/default/grub",
    "text": "Variables /etc/default/grub\n\n\n\n\n\n\n\nVariable\nDescripci√≥\n\n\n\n\nGRUB_BACKGROUND\nImatge de fons que es mostrar√† al men√∫ d‚Äôarrencada.\n\n\nGRUB_TIMEOUT\nTemps en segons abans de carregar l‚Äôentrada predeterminada.\n\n\nGRUB_DEFAULT\nEntrada per defecte que es carregar√† (index o nom)\n\n\nGRUB_CMDLINE_LINUX\nOpcions de l√≠nia de comandes que es passen al nucli en arrencar el sistema.\n\n\nGRUB_DISABLE_RECOVERY\nSi true, desactiva les opcions de mode de recuperaci√≥.\n\n\nGRUB_DISABLE_OS_PROBER\nSi true, impedeix que GRUB busqui altres sistemes operatius instal¬∑lats.\n\n\nGRUB_PRELOAD_MODULES\nLlista de m√≤duls GRUB que es carregaran abans de mostrar el men√∫ d‚Äôarrencada.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#par√†metres-del-kernel-m√©s-comuns",
    "href": "slides/02-booting-part2.html#par√†metres-del-kernel-m√©s-comuns",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Par√†metres del kernel m√©s comuns",
    "text": "Par√†metres del kernel m√©s comuns\n\n\n\n\n\n\n\nPar√†metre\nDescripci√≥\n\n\n\n\nquiet\nSuprimeix els missatges del nucli durant l‚Äôarrencada.\n\n\nsingle\nInicia el sistema en mode d‚Äôusuari √∫nic (single-user mode) per a tasques de manteniment.\n\n\nnomodeset\nDesactiva la detecci√≥ de modes de v√≠deo, √∫til per a solucions de problemes amb gr√†fics.\n\n\nroot=\nEspecifica la partici√≥ arrel del sistema de fitxers.\n\n\ninit=\nEspecifica un fitxer d‚Äôinit alternatiu.\n\n\nro\nMuntatge de la partici√≥ arrel en mode de nom√©s lectura durant l‚Äôarrencada.\n\n\nrw\nMuntatge de la partici√≥ arrel en mode de lectura i escriptura durant l‚Äôarrencada.\n\n\nsystemd.unit =\nEspecifica el target de systemd a iniciar (ex: multi-user.target, graphical.target).",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#consideracions-addicionals",
    "href": "slides/02-booting-part2.html#consideracions-addicionals",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Consideracions addicionals",
    "text": "Consideracions addicionals\n\nEn UEFI, GRUB2 √©s un fitxer EFI a /boot/efi/EFI//grubx64.efi.\nEs poden protegir entrades amb contrasenya a /etc/grub.d/40_custom.\nAl men√∫, amb e es poden passar par√†metres temporals al kernel.\nGRUB permet chainloading per arrencar altres SO (Windows, BSD).\nAmb UEFI Secure Boot, GRUB pot ser signat digitalment.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#secure-boot",
    "href": "slides/02-booting-part2.html#secure-boot",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Secure Boot",
    "text": "Secure Boot\nSecure Boot √©s una caracter√≠stica de seguretat del firmware UEFI que assegura que nom√©s es carregui i s‚Äôexecuti programari de confian√ßa durant el proc√©s d‚Äôarrencada del sistema.\n\nUEFI comprova la signatura digital del bootloader EFI (per exemple, grubx64.efi) abans de carregar-lo.\nLa signatura √©s comparada amb les claus de confian√ßa emmagatzemades en la DB (Database of allowed signatures) del firmware.\nSi la signatura √©s v√†lida, UEFI carrega i executa el bootloader. Sin√≥, impedeix l‚Äôexecuci√≥ del bootloader i mostra un missatge d‚Äôerror.\nPot carregar m√≤duls addicionals signats, que tamb√© poden ser verificats pel mateix GRUB (opcional).\nEl kernel Linux tamb√© pot estar signat (opcional, si s‚Äôutilitza Linux Kernel Signing).\nSi s‚Äôutilitza Shim, aquest actua com a intermediari: el firmware UEFI confia en Shim, i Shim verifica despr√©s GRUB i el kernel.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#problemes-de-secure-boot",
    "href": "slides/02-booting-part2.html#problemes-de-secure-boot",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Problemes de Secure Boot",
    "text": "Problemes de Secure Boot\n\nCompatibilitat: No tots els sistemes operatius o distribucions Linux suporten Secure Boot de manera nativa.\nClaus de confian√ßa: La gesti√≥ de claus pot ser complexa, especialment en entorns corporatius.\nActualitzacions: Les actualitzacions del bootloader o del kernel poden requerir la re-signatura dels components.\nRestriccions: Algunes funcionalitats avan√ßades poden estar limitades per les pol√≠tiques de Secure Boot.\n\nMalgrat Secure Boot, s‚Äôhan detectat vulnerabilitats que permeten carregar bootloaders no autoritzats en alguns dispositius (ArsTechnica, 2024).",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#qu√®-√©s-el-kernel",
    "href": "slides/02-booting-part2.html#qu√®-√©s-el-kernel",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Qu√® √©s el kernel?",
    "text": "Qu√® √©s el kernel?\nEl kernel √©s el nucli del sistema operatiu, responsable de gestionar els recursos del sistema, com la mem√≤ria, el processador, els dispositius d‚Äôentrada/sortida, la xarxa i els processos d‚Äôusuari.\n\n\n\n\n\n\n\nEl kernel es carrega a la mem√≤ria RAM durant el proc√©s d‚Äôarrencada i es troba normalment a la partici√≥ arrel del sistema de fitxers (generalment en /boot).\nEl kernel √©s un programa binari que es compila espec√≠ficament per a l‚Äôarquitectura de maquinari del sistema (per exemple, x86, ARM, etc.)\nPot ser personalitzat amb diferents m√≤duls i controladors segons les necessitats del sistema.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#carregar-el-kernel",
    "href": "slides/02-booting-part2.html#carregar-el-kernel",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Carregar el kernel",
    "text": "Carregar el kernel\nPer carregar el kernel, el bootloader necessita:\n\nRuta del kernel\n\nNormalment un fitxer com vmlinuz-version dins de /boot.\n\nPartici√≥ arrel\n\nLa partici√≥ on es troba el sistema de fitxers del sistema operatiu.\n\nFitxer de configuraci√≥ del bootloader\n\nCom grub.cfg en el cas de GRUB, que indica ruta del kernel, par√†metres i initramfs.\n\nC√†rrega de l‚Äôinitramfs\n\nInitramfs (initial RAM filesystem) √©s un sistema de fitxers temporal a RAM.\n\nPermet inicialitzar controladors b√†sics i muntar la partici√≥ arrel real abans de transferir el control al kernel complet.\n\n\n\nL‚Äôinitramfs facilita la portabilitat i modularitat del kernel, permetent arrencar diferents configuracions de maquinari sense necessitat de recompilar el kernel cada cop.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#qu√®-√©s-linitramfs",
    "href": "slides/02-booting-part2.html#qu√®-√©s-linitramfs",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Qu√® √©s l‚ÄôInitramfs?",
    "text": "Qu√® √©s l‚ÄôInitramfs?\nL‚ÄôInitramfs (Initial RAM Filesystem) √©s un petit sistema de fitxers integrat dins la imatge del nucli Linux.\n\nPermet que el kernel pugui muntar la partici√≥ arrel durant l‚Äôarrencada.\n\nA difer√®ncia de l‚Äôantic initrd, que residia en un disc, l‚Äôinitramfs es carrega completament a RAM com a imatge comprimida.\n\n\nObjectius\n\nProporcionar un sistema de fitxers temporal i m√≠nim.\n\nCarregar m√≤duls essencials del kernel necessaris per accedir a maquinari i sistemes de fitxers.\n\nExecutar scripts d‚Äôinicialitzaci√≥ abans de transferir el control al sistema complet.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#etapes-de-linitramfs-i",
    "href": "slides/02-booting-part2.html#etapes-de-linitramfs-i",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Etapes de l‚ÄôInitramfs (I)",
    "text": "Etapes de l‚ÄôInitramfs (I)\n\nDescompressi√≥ a la RAM\n\nEl fitxer CPIO de l‚Äôinitramfs es descomprimeix a un sistema de fitxers temporal a RAM (tmpfs), creant l‚Äôentorn m√≠nim necessari per iniciar el kernel.\n\n\nExecuci√≥ de l‚Äôscript /init\n\n/init √©s l‚Äôentrypoint principal de l‚Äôinitramfs.\n\nExecuta la seq√º√®ncia d‚Äôinicialitzaci√≥: muntatge de sistemes virtuals, c√†rrega de m√≤duls i preparaci√≥ de l‚Äôentorn.\n\n\nCreaci√≥ del sistema de fitxers temporal\n\nMuntatge de /proc, /sys i /dev.\n\nCreaci√≥ de directoris temporals (/tmp, /run) per permetre que els scripts i utilitats funcionin.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#etapes-de-linitramfs-ii",
    "href": "slides/02-booting-part2.html#etapes-de-linitramfs-ii",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Etapes de l‚ÄôInitramfs (II)",
    "text": "Etapes de l‚ÄôInitramfs (II)\n\nCarregar m√≤duls del kernel\n\nCarrega controladors necessaris per accedir a maquinari (discos, controladors de xarxa, LVM, RAID, xifrat).\n\nSi els m√≤duls estan integrats al kernel, aquesta etapa pot ser m√≠nima o nul¬∑la.\n\nMuntatge de la partici√≥ arrel real\n\nLocalitza la partici√≥ arrel (per exemple /dev/sda1 o UUID=...).\n\nMuntatge en un punt temporal (/mnt/root o similar).\n\n\nTransici√≥ al sistema complet (switch_root)\n\nSubstitueix l‚Äôentorn temporal de l‚Äôinitramfs pel sistema de fitxers real.\n\nExecuta el binari init del sistema complet (normalment /sbin/init o systemd).",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#etapes-de-linitramfs-iii",
    "href": "slides/02-booting-part2.html#etapes-de-linitramfs-iii",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Etapes de l‚ÄôInitramfs (III)",
    "text": "Etapes de l‚ÄôInitramfs (III)\n\nAlliberament de l‚Äôinitramfs\n\nDestruir l‚Äôentorn temporal a RAM.\n\nAlliberar la mem√≤ria utilitzada pel sistema de fitxers temporal, deixant el control complet al sistema operatiu.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#caracter√≠stiques-de-linitramfs",
    "href": "slides/02-booting-part2.html#caracter√≠stiques-de-linitramfs",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Caracter√≠stiques de l‚ÄôInitramfs",
    "text": "Caracter√≠stiques de l‚ÄôInitramfs\n\nFacilita la portabilitat i modularitat del kernel, permetent arrencar diferents configuracions de maquinari sense necessitat de recompilar el kernel cada cop.\nNo sempre est√† present, pot estar buit o om√®s si el sistema no necessita un espai RAM inicial (per exemple, en sistemes simples o compilacions est√†tiques del nucli).\nEs configura durant la compilaci√≥ del nucli make menuconfig i es pot definir el contingut de l‚Äôinitramfs amb un fitxer de configuraci√≥, s‚Äôutiltizen variables:\n\nCONFIG_BLK_DEV_INITRD: Activa la creaci√≥ de l‚Äôinitramfs.\nCONFIG_INITRAMFS_SOURCE: Especifica el fitxer CPIO, un directori o un fitxer d‚Äôespecificaci√≥.\n\nTamb√© es pot personalitzar segons les necessitats del sistema, permetent afegir m√≤duls del kernel, scripts personalitzats o utilitats addicionals.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#contingut-de-linitramfs",
    "href": "slides/02-booting-part2.html#contingut-de-linitramfs",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Contingut de l‚Äôinitramfs",
    "text": "Contingut de l‚Äôinitramfs\n\nFitxers executables\n\nEx: BusyBox, que encapsula moltes utilitats Unix (ls, cp, mount, shell, etc.).\n\nPoden incloure altres programes compilats est√†ticament.\n\nM√≤duls del kernel\n\nControladors per discos, xarxes, sistemes RAID o LVM.\n\nS√≥n carregats si no estan integrats dins del nucli.\n\nFitxers de dispositiu i sistemes especials\n\n/dev cont√© dispositius com tty o null.\n\nGestionats per utilitats com mdev o udev.\n\n\n\nTots aquests elements es troben comprimits en un fitxer CPIO, descomprimits a RAM durant l‚Äôarrencada i executats per l‚Äôscript /init.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#configuraci√≥-de-linitramfs",
    "href": "slides/02-booting-part2.html#configuraci√≥-de-linitramfs",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Configuraci√≥ de l‚Äôinitramfs",
    "text": "Configuraci√≥ de l‚Äôinitramfs\nL‚Äôinitramfs es pot personalitzar segons les necessitats del sistema, permetent afegir m√≤duls del kernel, scripts personalitzats o utilitats addicionals. La configuraci√≥ dep√®n de la distribuci√≥:\nDebian/Ubuntu\nupdate-initramfs -u -k &lt;versi√≥&gt;\n# -u actualitza l'initramfs\n# -k especifica la versi√≥ del nucli\n\nFedora/Red Hat\ndracut -f /boot/initramfs-&lt;versi√≥&gt;.img &lt;versi√≥&gt;\n# -f for√ßa la regeneraci√≥\n# El primer argument √©s la ruta on es vol guardar l'initramfs generat\n# El segon argument √©s la versi√≥ del nucli",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#initramfs-tools-debian-i",
    "href": "slides/02-booting-part2.html#initramfs-tools-debian-i",
    "title": "Arrencada del sistema (Part 2)",
    "section": "initramfs-tools (Debian) (I)",
    "text": "initramfs-tools (Debian) (I)\n\n/etc/initramfs-tools/modules\nLlista de m√≤duls addicionals del kernel a incloure a l‚Äôinitramfs, per exemple controladors de xarxa o discos RAID.\n\n/etc/initramfs-tools/hooks/\nScripts que s‚Äôexecuten durant la creaci√≥ de l‚Äôinitramfs, √∫tils per afegir fitxers o directoris personalitzats.\n\n/etc/initramfs-tools/conf.d/\nFitxers de configuraci√≥ addicionals per modificar par√†metres espec√≠fics de l‚Äôinitramfs.\n\n/etc/initramfs-tools/initramfs.conf\nConfiguraci√≥ principal, inclou opcions com compressi√≥, √∫s de scripts, par√†metres de muntatge.\n\n/usr/share/initramfs-tools/\nScripts i fitxers est√†ndard utilitzats per initramfs-tools, no modificats normalment.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#initramfs-tools-debian-ii",
    "href": "slides/02-booting-part2.html#initramfs-tools-debian-ii",
    "title": "Arrencada del sistema (Part 2)",
    "section": "initramfs-tools (Debian) (II)",
    "text": "initramfs-tools (Debian) (II)\n\n/etc/initramfs-tools/scripts/\nScripts que s‚Äôexecuten durant l‚Äôarrencada:\n\ninit-top/ ‚Üí scripts executats just despr√©s de descomprimir l‚Äôinitramfs i abans de muntar /proc, /sys i /dev. Ideal per inicialitzar serveis cr√≠tics o preparar dispositius especials.\n\ninit-bottom/ ‚Üí scripts executats just abans de fer switch_root al sistema complet. √ötil per passos finals com muntar la partici√≥ arrel, desbloquejar LUKS o activar LVM.\n\nlocal-bottom/ ‚Üí scripts addicionals definits per l‚Äôadministrador.\nlocal-top/ ‚Üí scripts addicionals definits per l‚Äôadministrador.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#initramfs-tools-debian-ii-1",
    "href": "slides/02-booting-part2.html#initramfs-tools-debian-ii-1",
    "title": "Arrencada del sistema (Part 2)",
    "section": "initramfs-tools (Debian) (II)",
    "text": "initramfs-tools (Debian) (II)\n\npremount/ ‚Üí scripts executats abans de muntar la partici√≥ arrel. Ideal per preparar dispositius o sistemes de fitxers especials.\nmount/ ‚Üí scripts executats durant el muntatge de la partici√≥ arrel. √ötil per passos espec√≠fics relacionats amb el muntatge.\ncleanup/ ‚Üí scripts executats despr√©s de fer switch_root al sistema complet. Ideal per netejar recursos temporals o realitzar tasques posteriors a l‚Äôarrencada.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#dracut-fedorared-hat",
    "href": "slides/02-booting-part2.html#dracut-fedorared-hat",
    "title": "Arrencada del sistema (Part 2)",
    "section": "dracut (Fedora/Red Hat)",
    "text": "dracut (Fedora/Red Hat)\n\n/etc/dracut.conf\nFitxer de configuraci√≥ principal de Dracut, on es poden definir opcions generals: compressi√≥, tipus de fitxer d‚Äôinitramfs, par√†metres del kernel, etc.\n\n/etc/dracut.conf.d/\nFitxers de configuraci√≥ addicionals, √∫tils per a configuracions espec√≠fiques de m√≤duls o projectes.\n\n/usr/lib/dracut/modules.d/\nCont√© m√≤duls est√†ndard de Dracut (ex: m√≤duls de xarxa, lvm, cryptsetup), carregats autom√†ticament segons la configuraci√≥.\n\n/etc/dracut/modules.d/\nM√≤duls personalitzats creats per l‚Äôadministrador, per afegir scripts o fitxers espec√≠fics.\n\n/usr/share/dracut/\nCont√© scripts i fitxers est√†ndard utilitzats durant la generaci√≥ de l‚Äôinitramfs, igual que a initramfs-tools.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#quan-regenerar-linitramfs",
    "href": "slides/02-booting-part2.html#quan-regenerar-linitramfs",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Quan regenerar l‚Äôinitramfs?",
    "text": "Quan regenerar l‚Äôinitramfs?\n\nActualitzaci√≥ del nucli: Quan es compila o instal¬∑la un nou kernel, l‚Äôinitramfs associat ha de ser regenerat per garantir que carrega correctament els m√≤duls i el maquinari necessari.\nConfiguraci√≥ RAID: Si es modifiquen o s‚Äôafegeixen sistemes RAID, l‚Äôinitramfs ha de reflectir aquests canvis per assegurar un arrencada correcta.\nXifrat de discos: Per a sistemes amb particions xifrades (LUKS), cal actualitzar l‚Äôinitramfs despr√©s de canvis en la configuraci√≥ de xifrat per poder accedir a les particions durant l‚Äôarrencada.\nConfiguraci√≥ de xarxa: Si es canvien components de xarxa que s‚Äôutilitzen en el proc√©s d‚Äôarrencada (sistemes amb arrencada PXE).",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#cas-dus-usb-amb-clau-de-desxifrat",
    "href": "slides/02-booting-part2.html#cas-dus-usb-amb-clau-de-desxifrat",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Cas d‚Äôus: USB amb clau de desxifrat",
    "text": "Cas d‚Äôus: USB amb clau de desxifrat\nUn cas d‚Äô√∫s com√∫ de l‚Äôinitramfs √©s en sistemes amb particions xifrades amb LUKS que utilitzen una clau emmagatzemada en un dispositiu USB per desxifrar la partici√≥ arrel durant l‚Äôarrencada.\n\n\n\nMunti els sistemes virtuals necessaris (/proc, /sys).\n\nMunti la unitat USB que cont√© la clau.\n\nLlegeixi la clau i desxifri la partici√≥ LUKS.\n\nActivar volums LVM si cal.\n\nMuntar la partici√≥ arrel i transferir el control amb switch_root.\n\n\n#!/bin/busybox sh\nmount -t proc proc /proc\nmount -t sysfs sys /sys\nmount /dev/sdb1 /mnt\nKEYFILE=/mnt/keyfile\ncryptsetup luksOpen /dev/sda1 crypted --key-file $KEYFILE\necho \"Retira el dispositiu USB i prem Enter per continuar.\"\nread\nvgchange -a y\nmount /dev/mapper/vg-root /mnt\nexec switch_root /mnt /sbin/init",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#exercicis-propostas",
    "href": "slides/02-booting-part2.html#exercicis-propostas",
    "title": "Arrencada del sistema (Part 2)",
    "section": "Exercicis Propostas",
    "text": "Exercicis Propostas\n\nModificant la contrasenya de l‚Äôusuari root a trav√©s del GRUB\nDesxifrat autom√†tic mitjan√ßant clau en disc secundari (USB emulat)\nDiscussi√≥: Secure Boot √©s realment segur?: Cerca not√≠cies recents sobre Secure Boot i comparteix-les al f√≤rum del curs. Debatiu sobre avantatges, desavantatges, vulnerabilitats conegudes i experi√®ncies personals.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/02-booting-part2.html#thats-all",
    "href": "slides/02-booting-part2.html#thats-all",
    "title": "Arrencada del sistema (Part 2)",
    "section": "That‚Äôs all",
    "text": "That‚Äôs all\n\n\n\n\n\n\n\n\n\nTake Home Message\n\n\nEl proc√©s d‚Äôarrencada √©s un proc√©s complex. Els administradors de sistemes han de con√®ixer aquest proc√©s per poder gestionar i solucionar problemes durant l‚Äôarrencada del sistema i garantir un sistema segur, estable i eficient.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#necessitat-dautenticaci√≥",
    "href": "slides/04-authentication-part2.html#necessitat-dautenticaci√≥",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "Necessitat d‚Äôautenticaci√≥",
    "text": "Necessitat d‚Äôautenticaci√≥\n\nEls sistemes i serveis moderns requereixen m√®todes d‚Äôautenticaci√≥ flexibles, segurs i integrats.\nCal gestionar diversos mecanismes d‚Äôautenticaci√≥ (contrasenyes, claus SSH, biometria, targetes intel¬∑ligents, etc.) de manera centralitzada i coherent.\nCada aplicaci√≥ no hauria de gestionar per separat la seva pr√≤pia autenticaci√≥.\nEs necessita un sistema com√∫ i modular que permeti a les aplicacions reutilitzar mecanismes d‚Äôautenticaci√≥ compartits.\n\n\nCentralitzar i unificar la gesti√≥ de l‚Äôautenticaci√≥: simplifica el manteniment i millora la seguretat.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#qu√®-√©s-pam",
    "href": "slides/04-authentication-part2.html#qu√®-√©s-pam",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "Qu√® √©s PAM?",
    "text": "Qu√® √©s PAM?\n\nFramework modular d‚Äôautenticaci√≥ utilitzat en sistemes Unix/Linux.\nPermet integrar m√∫ltiples esquemes d‚Äôautenticaci√≥ (Unix, LDAP, biometria, targetes, etc.) a trav√©s d‚Äôuna API comuna que les aplicacions poden utilitzar.\nEls administradors poden modificar o afegir m√®todes d‚Äôautenticaci√≥ sense canviar el codi de les aplicacions.\nEls programadors nom√©s han de confiar en la interf√≠cie PAM; el sistema s‚Äôencarrega de gestionar els m√≤duls subjacents.\n\n\nman pam.d",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#esquema-de-funcionament-de-pam",
    "href": "slides/04-authentication-part2.html#esquema-de-funcionament-de-pam",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "Esquema de funcionament de PAM",
    "text": "Esquema de funcionament de PAM\n\n\n\n\n\nflowchart TD\n    subgraph A[Aplicacions]\n        A1[sshd]\n        A2[login]\n        A3[sudo]\n    end\n\n    A --&gt; B[libpam ¬∑ interf√≠cie PAM]\n\n    B --&gt; C[\"/etc/pam.d/sshd\"]\n    B --&gt; D[\"/etc/pam.d/login\"]\n    B --&gt; E[\"/etc/pam.d/sudo\"]\n\n    subgraph M[ M√≤duls d'autenticaci√≥ PAM ]\n        M1[\"pam_unix.so \n            contrasenyes locals\"]\n        M2[\"pam_ldap.so\n            autenticaci√≥ LDAP\"]\n        M3[\"pam_tally2.so \n            control d‚Äôintents fallits\"]\n        M4[\"pam_limits.so \n            l√≠mits de recursos\"]\n    end\n\n    C --&gt; M\n    D --&gt; M\n    E --&gt; M",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#tipus-de-m√≤duls-pam",
    "href": "slides/04-authentication-part2.html#tipus-de-m√≤duls-pam",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "Tipus de m√≤duls PAM",
    "text": "Tipus de m√≤duls PAM\nCada m√≤dul de PAM t√© un rol espec√≠fic dins del proc√©s d‚Äôautenticaci√≥ i gesti√≥ de sessions:\n\nAutenticaci√≥ (auth): Verifica la identitat de l‚Äôusuari mitjan√ßant contrasenyes, claus, biometria, etc.\nGesti√≥ de comptes (account): Controla l‚Äôacc√©s als recursos segons pol√≠tiques establertes (horaris, permisos, etc.).\nGesti√≥ de contrasenyes (password): S‚Äôencarrega de la modificaci√≥ i actualitzaci√≥ de les contrasenyes dels usuaris.\nGesti√≥ de sessions (session): Gestiona tasques relacionades amb l‚Äôinici i tancament de sessions, com el registre d‚Äôactivitat o el muntatge de directoris.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#llistat-de-m√≤duls-pam-comuns",
    "href": "slides/04-authentication-part2.html#llistat-de-m√≤duls-pam-comuns",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "Llistat de m√≤duls PAM comuns",
    "text": "Llistat de m√≤duls PAM comuns\nPer veure tots els m√≤duls disponibles al vostre sistema, consulteu: /lib/security/ o /lib64/security/ segons l‚Äôarquitectura.\n\n\n\nM√≤dul\nFunci√≥\n\n\n\n\npam_unix.so\nIntegraci√≥ amb autenticaci√≥ cl√†ssica d‚ÄôUNIX.\n\n\npam_ldap.so\nIntegraci√≥ amb LDAP.\n\n\npam_krb5.so\nIntegraci√≥ amb Kerberos5.\n\n\npam_cracklib.so\nVerificaci√≥ de la for√ßa de les contrasenyes.\n\n\npam_env.so\nInicialitzaci√≥ de variables d‚Äôentorn.\n\n\npam_limits.so\nGesti√≥ dels l√≠mits de recursos del sistema.\n\n\npam_tally2.so\nControl d‚Äôintents fallits d‚Äôautenticaci√≥.\n\n\npam_mkhomedir.so\nCreaci√≥ autom√†tica del directori home.\n\n\npam_access.so\nControl d‚Äôacc√©s basat en host.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#l√≤gica-de-les-flags-dels-m√≤duls-pam",
    "href": "slides/04-authentication-part2.html#l√≤gica-de-les-flags-dels-m√≤duls-pam",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "L√≤gica de les flags dels m√≤duls PAM",
    "text": "L√≤gica de les flags dels m√≤duls PAM\nLes flags determinen com cada m√≤dul afecta el resultat global de l‚Äôautenticaci√≥ dins d‚Äôun stack PAM.\n\n\n\n\n\n\n\nFlag\nComportament\n\n\n\n\nrequired\nHa de passar; si falla, la pila continua processant els altres m√≤duls, per√≤ finalment l‚Äôautenticaci√≥ falla.\n\n\nrequisite\nHa de passar; si falla, PAM retorna error immediatament (evita delays o timing attacks).\n\n\nsufficient\nSi passa, PAM omite la resta de la pila (millora efici√®ncia); si falla, es continua amb els altres m√≤duls.\n\n\noptional\nIgnorat tret que sigui l‚Äô√∫nic m√≤dul de la pila; rara vegada √©s cr√≠tic.\n\n\ninclude\nInclou un altre fitxer de configuraci√≥ PAM, √∫til per reutilitzar configuracions comunes.\n\n\nsubstack\nPermet agrupar m√≤duls dins d‚Äôuna pila per aplicar l√≤giques m√©s complexes.\n\n\n\n\nUn timing attack √©s un tipus d‚Äôatac on l‚Äôatacant intenta deduir informaci√≥ sensible (com contrasenyes) mesurant el temps que triga el sistema a respondre a diferents entrades.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#configuraci√≥-de-pam",
    "href": "slides/04-authentication-part2.html#configuraci√≥-de-pam",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "Configuraci√≥ de PAM",
    "text": "Configuraci√≥ de PAM\n\nEls fitxers de configuraci√≥ defineixen com s‚Äôaplica PAM per a cada servei i tipus de tasca.\nEs troben a /etc/pam.d/ i cada servei t√© el seu fitxer propi, per exemple:\n\n/etc/pam.d/sshd\n/etc/pam.d/login\n/etc/pam.d/sudo\n\nEn aquests fitxers s‚Äôespecifica:\n\nQuins m√≤duls s‚Äôutilitzen per a cada tipus de tasca (auth, account, password, session).\nLes flags corresponents per a cada m√≤dul (required, optional, etc.).",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#estructura-dun-fitxer-de-config",
    "href": "slides/04-authentication-part2.html#estructura-dun-fitxer-de-config",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "Estructura d‚Äôun fitxer de config",
    "text": "Estructura d‚Äôun fitxer de config\nCada l√≠nia t√© la seg√ºent estructura:\n&lt;tipus&gt;   &lt;flag&gt;   &lt;m√≤dul&gt;   [opcions]\n\ntipus: Tipus de tasca (auth, account, password, session).\nflag: Comportament del m√≤dul (required, requisite, sufficient, optional).\nm√≤dul: Nom del m√≤dul PAM (per exemple, pam_unix.so).\n[opcions]: Par√†metres addicionals per al m√≤dul.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#opcions-comunes-dels-m√≤duls-pam",
    "href": "slides/04-authentication-part2.html#opcions-comunes-dels-m√≤duls-pam",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "Opcions comunes dels m√≤duls PAM",
    "text": "Opcions comunes dels m√≤duls PAM\nPer consultar totes les opcions disponibles per a un m√≤dul espec√≠fic, utilitzeu: man pam_modulename.\n\n\n\n\n\n\n\nOpci√≥\nDescripci√≥ breu\n\n\n\n\nnullok\nPermet usuaris sense contrasenya.\n\n\ntry_first_pass\nIntenta utilitzar la contrasenya ja proporcionada abans d‚Äôentrar una nova.\n\n\nuse_first_pass\nUtilitza la contrasenya anterior; si falla, no demana una nova.\n\n\nminlen=N\n(pam_cracklib) Longitud m√≠nima de la contrasenya.\n\n\nretry=N\nNombre de intents per introduir la contrasenya abans de fallar.\n\n\ndifok=N\n(pam_cracklib) Nombre m√≠nim de car√†cters diferents respecte a la contrasenya anterior.\n\n\nsha512\n(pam_unix) Encriptaci√≥ de la contrasenya amb SHA-512.\n\n\nremember=N\nN√∫mero de contrasenyes recordades pel canvi de password.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#exemples-de-configuracions",
    "href": "slides/04-authentication-part2.html#exemples-de-configuracions",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "Exemples de configuracions",
    "text": "Exemples de configuracions\n/etc/pam.d/ssh\n# Autenticaci√≥ amb contrasenyes locals; permet usuaris sense contrasenya\nauth     required   pam_unix.so nullok    \n# Gesti√≥ de comptes; comprova permisos i restriccions\naccount  required   pam_unix.so      \n # Gesti√≥ de sessions; registra inici i tancament de sessi√≥     \nsession  required   pam_unix.so    \n/etc/pam.d/sudo\n# Autenticaci√≥ amb contrasenya; prova primer la contrasenya de l'usuari\nauth     required   pam_unix.so try_first_pass\n# Denega immediatament en determinades condicions\nauth     requisite  pam_deny.so\n# Permet sempre l'acc√©s (nom√©s si altres no fallen)\nauth     required   pam_permit.so\n\n\nrequisite: si el m√≤dul falla, PAM retorna error immediatament i no processa m√©s m√≤duls de la pila.\nrequired: si el m√≤dul falla, PAM continua processant la resta de la pila, per√≤ finalment l‚Äôautenticaci√≥ global falla.\nsufficient: si passa, PAM omet la resta de la pila; si falla, es continua.\n\noptional: nom√©s √©s rellevant si √©s l‚Äô√∫nic m√≤dul de la pila; rarament cr√≠tic. Exemple pr√†ctic: pam_deny.so sol usar-se amb requisite per bloquejar l‚Äôacc√©s immediatament.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#configuraci√≥-avan√ßada-de-pam-types",
    "href": "slides/04-authentication-part2.html#configuraci√≥-avan√ßada-de-pam-types",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "Configuraci√≥ avan√ßada de PAM (types)",
    "text": "Configuraci√≥ avan√ßada de PAM (types)\nPAM permet definir condicions complexes per a cada m√≤dul mitjan√ßant valors-accions basats en el codi de retorn del m√≤dul.\n\nEl camp type pot incloure una llista de valors-accions separats per comes per controlar com s‚Äôinterpreta cada resultat.\n\n\ntype[success=ok new_authtok_reqd=ok default=die] module.so options\n\n\nAquesta configuraci√≥ permet:\n\nInterpretar codis de retorn espec√≠fics de cada m√≤dul.\nAplicar regles diferents segons l‚Äô√®xit, error o necessitat de canvi de token.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#accions-comuns-en-pam",
    "href": "slides/04-authentication-part2.html#accions-comuns-en-pam",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "Accions comuns en PAM",
    "text": "Accions comuns en PAM\n\n\n\n\n\n\n\nAcci√≥\nDescripci√≥\n\n\n\n\nignore\nIgnorar el resultat del m√≤dul.\n\n\nok\nConsiderar el m√≤dul com a passat.\n\n\ndie\nConsiderar el m√≤dul com a fallit.\n\n\nreset\nReiniciar el comptador d‚Äôintents fallits o l‚Äôestat de la pila.\n\n\nbad\nConsiderar el m√≤dul com a fallit i incrementar el comptador d‚Äôintents fallits.\n\n\ndone\nFinalitzar el processament de la pila.\n\n\nN\nCom ok, per√≤ pot saltar sobre els propers N m√≤duls.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#fitxers-de-configuraci√≥-pam-defaults",
    "href": "slides/04-authentication-part2.html#fitxers-de-configuraci√≥-pam-defaults",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "Fitxers de configuraci√≥ PAM (defaults)",
    "text": "Fitxers de configuraci√≥ PAM (defaults)\nEls fitxers common-* defineixen configuracions est√†ndard que poden ser reutilitzades per m√∫ltiples serveis, evitant duplicaci√≥ de codi.\n\n/etc/pam.d/common-auth: Configuraci√≥ comuna per a l‚Äôautenticaci√≥.\n/etc/pam.d/common-account: Configuraci√≥ comuna per a la gesti√≥ de comptes.\n/etc/pam.d/common-password: Configuraci√≥ comuna per a la gesti√≥ de contrasenyes.\n/etc/pam.d/common-session: Configuraci√≥ comuna per a la gesti√≥ de sessions.\n\n\nEls fitxers espec√≠fics de servei (/etc/pam.d/sshd) solen incloure aquests fitxers comuns amb la directiva include, permetent aplicar la mateixa pol√≠tica a tots els serveis de manera centralitzada.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#depuraci√≥-de-pam",
    "href": "slides/04-authentication-part2.html#depuraci√≥-de-pam",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "Depuraci√≥ de PAM",
    "text": "Depuraci√≥ de PAM\nPAM ofereix diverses opcions per obtenir informaci√≥ detallada del proc√©s d‚Äôautenticaci√≥.\n\nAfegir l‚Äôopci√≥ debug als m√≤duls PAM dins dels fitxers de configuraci√≥, per exemple:\n\n\nauth required pam_unix.so debug\n\n\nExecutar aplicacions amb PAM en mode depuraci√≥ utilitzant les opcions:\n\n\nssh -vvv usuari@host       # SSH amb depuraci√≥ \nlogin -d                   # Login amb depuraci√≥",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#logs-de-pam-i-autenticaci√≥",
    "href": "slides/04-authentication-part2.html#logs-de-pam-i-autenticaci√≥",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "Logs de PAM i autenticaci√≥",
    "text": "Logs de PAM i autenticaci√≥\nEls logs s√≥n essencials per monitoritzar i depurar l‚Äôautenticaci√≥ gestionada per PAM.\n\n/var/log/auth.log\n\nDistribucions basades en Debian (Ubuntu).\nCont√© registres d‚Äôautenticaci√≥ i autoritzaci√≥ d‚Äôusuaris, incloent els generats per PAM.\n\n/var/log/secure\n\nDistribucions basades en Red Hat (CentOS, Fedora).\nRegistres relacionats amb seguretat i autenticaci√≥, incloent PAM.\n\n/var/log/syslog\n\nAlgunes distribucions utilitzen el syslog general per registrar els esdeveniments de PAM.\nEspecialment √∫til si no hi ha auth.log o secure configurats.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#bones-pr√†ctiques-amb-pam",
    "href": "slides/04-authentication-part2.html#bones-pr√†ctiques-amb-pam",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "Bones pr√†ctiques amb PAM",
    "text": "Bones pr√†ctiques amb PAM\n\nFer c√≤pies de seguretat abans de modificar fitxers de configuraci√≥.\nProvar els canvis amb cura per evitar bloquejos d‚Äôacc√©s al sistema.\nMinimitzar l‚Äô√∫s de sufficient, ja que pot permetre l‚Äôacc√©s encara que altres m√≤duls fallin.\nAplicar el nivell de restricci√≥ m√©s estricte per a cada servei.\nMantenir PAM i el sistema operatiu actualitzats per evitar vulnerabilitats conegudes.\nConfigurar auditoria i monitoritzaci√≥ dels intents d‚Äôautenticaci√≥ per detectar anomalies.\nEvitar modificar els fitxers de PAM per ning√∫ altre que no sigui l‚Äôadministrador del sistema (√∫s sudo). Permisos 600 s√≥n recomanables.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#compatibilitat-amb-pam",
    "href": "slides/04-authentication-part2.html#compatibilitat-amb-pam",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "Compatibilitat amb PAM",
    "text": "Compatibilitat amb PAM\n\nPAM √©s ampliament suportat en la majoria de distribucions Linux i sistemes Unix.\nPer comprovar si una aplicaci√≥ utilitza PAM:\n\nRevisar la documentaci√≥ de l‚Äôaplicaci√≥.\nInspeccionar els fitxers de configuraci√≥ a /etc/pam.d/.\nVerificar si un programa est√† lligat a PAM amb ldd:\n\n\n\nsudo ldd /usr/sbin/sshd | grep libpam.so\nSi apareix libpam.so, el programa utilitza PAM per a l‚Äôautenticaci√≥.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#etcpam.dsshd",
    "href": "slides/04-authentication-part2.html#etcpam.dsshd",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "/etc/pam.d/sshd",
    "text": "/etc/pam.d/sshd\n# Usuari es valida primer amb els m√≤duls de password-auth i postlogin\nauth       substack     password-auth\nauth       include      postlogin\n# Es verifica que l'usuari compleix les condicions d'acc√©s\naccount    required     pam_sepermit.so\naccount    required     pam_nologin.so\naccount    include      password-auth\n# Gesti√≥ de contrasenyes amb els m√≤duls de password-auth\npassword   include      password-auth\n# Es configura i registra la sessi√≥ de l'usuari\nsession    required     pam_selinux.so close\nsession    required     pam_loginuid.so\nsession    required     pam_selinux.so open env_params\nsession    required     pam_namespace.so\nsession    optional     pam_keyinit.so force revoke\nsession    optional     pam_motd.so\nsession    include      password-auth\nsession    include      postlogin\n\n\nAuth (autenticaci√≥)\n\nsubstack password-auth ‚Üí reutilitza un conjunt com√∫ de m√≤duls d‚Äôautenticaci√≥ (usuari/contrasenya).\ninclude postlogin ‚Üí afegeix passos addicionals despr√©s del login, com missatges o hooks espec√≠fics.\n\nAccount (gesti√≥ de comptes)\n\npam_sepermit.so ‚Üí controla permisos SELinux abans de concedir acc√©s.\npam_nologin.so ‚Üí denega acc√©s si el fitxer /etc/nologin existeix (per manteniment o restriccions temporals).\ninclude password-auth ‚Üí aplica regles comunes de control d‚Äôacc√©s i restriccions d‚Äôusuari.\n\nPassword (gesti√≥ de contrasenyes)\n\ninclude password-auth ‚Üí centralitza la pol√≠tica de contrasenyes (for√ßa m√≠nima, historial, encriptaci√≥).\n\nSession (gesti√≥ de sessi√≥)\n\npam_selinux.so close ‚Üí tanca contextos SELinux antics abans d‚Äôiniciar una nova sessi√≥.\npam_loginuid.so ‚Üí registra l‚ÄôUID de l‚Äôusuari per a control d‚Äôauditoria.\npam_selinux.so open env_params ‚Üí obre el context SELinux per a la sessi√≥ de l‚Äôusuari.\npam_namespace.so ‚Üí crea entorns de namespace (a√Øllament de recursos).\npam_keyinit.so force revoke ‚Üí inicialitza/gestiona claus d‚Äôusuari.\npam_motd.so ‚Üí mostra missatges del dia.",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "slides/04-authentication-part2.html#exercicis-proposats",
    "href": "slides/04-authentication-part2.html#exercicis-proposats",
    "title": "Autenticaci√≥ i Autoritzaci√≥ (Part 2)",
    "section": "Exercicis proposats",
    "text": "Exercicis proposats\n\nConfiguraci√≥ de PAM per SSH amb 2FA utilitzant Google Authenticator",
    "crumbs": [
      "Diapositives",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥ (Part 2)"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "AMSA 105013: Administraci√≥ de Sistemes",
    "section": "",
    "text": "Benvinguts al curs d‚ÄôAdministraci√≥ de sistemes i aplicacions (AMSA). Aquest curs est√† dissenyat per proporcionar als estudiants els coneixements i habilitats necessaris per gestionar i mantenir sistemes inform√†tics en entorns professionals.\n\n\n\nCourse Title\nSystems and Applications Administration and Management\n\n\nSemester\n1st Semester of the Bachelor‚Äôs Degree in Computer Engineering\n\n\nCourse Year\nThird Year\n\n\nProfessor\nJordi Mateo\n\n\nSchedule\nüìÖ\n\n\nCourse Guide\nüìö\n\n\nSchool\n\n\n\nUniversity\n\n\n\nDepartment"
  },
  {
    "objectID": "projects/01-project/01-project.html",
    "href": "projects/01-project/01-project.html",
    "title": "Pr√†ctica 01: Snapshots i restauraci√≥ amb systemd i initramfs",
    "section": "",
    "text": "Comprendre el proc√©s d‚Äôarrencada en Linux (GRUB ‚Üí initramfs ‚Üí systemd).\nConfigurar i gestionar serveis systemd.\nCrear snapshots de l‚Äôestat del sistema i restaurar-los.\nIntroduir-se a la personalitzaci√≥ d‚Äôinitramfs i opcionalment GRUB.",
    "crumbs": [
      "Projectes",
      "Projecte 1 ¬∑ Snapshots i Backups amb systemd i initramfs"
    ]
  },
  {
    "objectID": "projects/01-project/01-project.html#objectius",
    "href": "projects/01-project/01-project.html#objectius",
    "title": "Pr√†ctica 01: Snapshots i restauraci√≥ amb systemd i initramfs",
    "section": "",
    "text": "Comprendre el proc√©s d‚Äôarrencada en Linux (GRUB ‚Üí initramfs ‚Üí systemd).\nConfigurar i gestionar serveis systemd.\nCrear snapshots de l‚Äôestat del sistema i restaurar-los.\nIntroduir-se a la personalitzaci√≥ d‚Äôinitramfs i opcionalment GRUB.",
    "crumbs": [
      "Projectes",
      "Projecte 1 ¬∑ Snapshots i Backups amb systemd i initramfs"
    ]
  },
  {
    "objectID": "projects/01-project/01-project.html#context",
    "href": "projects/01-project/01-project.html#context",
    "title": "Pr√†ctica 01: Snapshots i restauraci√≥ amb systemd i initramfs",
    "section": "Context",
    "text": "Context\nEn entorns reals, √©s freq√ºent necessitar tornar a un estat anterior del sistema despr√©s d‚Äôuna fallada o una actualitzaci√≥ incorrecta. Aquesta pr√†ctica simula aquest escenari: configurarem un mecanisme de snapshots i un proc√©s per restaurar-los en arrencar la m√†quina.",
    "crumbs": [
      "Projectes",
      "Projecte 1 ¬∑ Snapshots i Backups amb systemd i initramfs"
    ]
  },
  {
    "objectID": "projects/01-project/01-project.html#entorn-de-treball",
    "href": "projects/01-project/01-project.html#entorn-de-treball",
    "title": "Pr√†ctica 01: Snapshots i restauraci√≥ amb systemd i initramfs",
    "section": "Entorn de treball",
    "text": "Entorn de treball\n\nM√†quina virtual amb Debian 12 i amb UEFI amb 20 GB de disc.\nDisc virtual addicional de 20 GB per emmagatzemar els snapshots.",
    "crumbs": [
      "Projectes",
      "Projecte 1 ¬∑ Snapshots i Backups amb systemd i initramfs"
    ]
  },
  {
    "objectID": "projects/01-project/01-project.html#preparaci√≥-de-la-m√†quina-virtual",
    "href": "projects/01-project/01-project.html#preparaci√≥-de-la-m√†quina-virtual",
    "title": "Pr√†ctica 01: Snapshots i restauraci√≥ amb systemd i initramfs",
    "section": "Preparaci√≥ de la m√†quina virtual",
    "text": "Preparaci√≥ de la m√†quina virtual\nUn cop arrencada la m√†quina virtual, afegiu un disc dur addicional de 20 GB. Aquest disc ser√† utilitzat per emmagatzemar els snapshots. Per exemple, si el disc principal √©s /dev/nvme0n1, el nou disc podria ser /dev/nvme0n2. Un cop afegit el disc, inicieu la m√†quina virtual i comproveu que el nou disc √©s visible amb lsblk.\nUn cop identificat el nou disc, cal crear-hi un sistema de fitxers i muntar-lo. Per exemple, si el nou disc √©s /dev/nvme0n2, podeu fer-ho aix√≠:\n# Com a root o amb sudo\nmkfs.ext4 /dev/nvme0n2\nmount /dev/nvme0n2 /mnt\nmkdir -p /mnt/snapshots\nPer evitar haver de muntar el disc manualment cada cop, afegiu una entrada a /etc/fstab. Per exemple, afegiu aquesta l√≠nia al final del fitxer:\n/dev/nvme0n2  /mnt  ext4  defaults  0  2\n\n\n\n\n\n\nAlertaAdvert√®ncia\n\n\n\nAssegureu-vos d‚Äôindicar el disc correcte que pot ser nvme0n2, sdb, vdb,‚Ä¶ No utilitzeu el disc principal on est√† instal¬∑lat el sistema operatiu.\n\n\nUn cop muntat el disc, instal¬∑leu rsync si no est√† instal¬∑lat:\n# Com a root o amb sudo\napt update\napt install rsync\nEn cas de problemes amb el update, igual necessitareu fer un apt upgrade abans.",
    "crumbs": [
      "Projectes",
      "Projecte 1 ¬∑ Snapshots i Backups amb systemd i initramfs"
    ]
  },
  {
    "objectID": "projects/01-project/01-project.html#tasques",
    "href": "projects/01-project/01-project.html#tasques",
    "title": "Pr√†ctica 01: Snapshots i restauraci√≥ amb systemd i initramfs",
    "section": "Tasques",
    "text": "Tasques\n\nCrear snapshots amb rsync (2 punts) üìù\n\nEscriure un script que cre√Ø snapshots dels directoris /home, /opt, /bin, /usr a /mnt/snapshots utilitzant rsync.\nCrea un primer snapshot manualment per tenir una base de dades inicial i anomeneu-lo snapshot_00000000_000000, feu servir script com a root.\nProvar l‚Äôscript manualment i assegurar-se que es poden crear diversos snapshots.\nUtilitzar un format de nom com snapshot_YYYYMMDD_HHMMSS per al directori.\nEls snapshots han de ser c√≤pies completes: /home, /opt, /bin, /usr . No cal comprimir aquests snapshots. Poden ser carpetes independents utilitzant la nomenclatura indicada.\nImplementar una pol√≠tica per mantenir el snapshot inicial i els 3 snapshots m√©s recents, eliminant els m√©s antics.\n\nAutomatitzar la creaci√≥ de snapshots amb systemd (3 punts) ‚öôÔ∏è\n\nCrear un servei systemd que executi l‚Äôscript de creaci√≥ de snapshots a cada apagada de la m√†quina.\nValidar que cada vegada que s‚Äôaturi la m√†quina es crea un nou snapshot.\n\nRestaurar snapshots en arrencada amb systemd (3 punts) üîÑ\n\nEscriure un script que mostri un llistat de snapshots disponibles i permeti seleccionar-ne un per restaurar.\nCrear un servei systemd que s‚Äôexecuti abans de multi-user.target i cridi aquest script.\nComprovar que en arrencar la m√†quina es mostra el men√∫ de snapshots.\nValidar que es pot restaurar un snapshot seleccionat.\n\nRestaurar snapshots des d‚Äôinitramfs (1/2 punts) üöÄ\n\nAfegir un parametre al kernel per indicar el fitxer de snapshot a restaurar. Aquest par√†metres‚Äôanomenar√† snapshot= i rebrr√† el nom de la snapshot a restaurar, per exemple snapshot=snapshot_20240101_120000. En cas de no rebre cap par√†metre, no es restaurar√† cap snapshot.\nAfegir un script a initramfs que carregui el disc secundari, llegeixi el par√†metre i restauri el snapshot abans de muntar /.\n\nSimple: Utilitzant comandes integrades a initramfs. (1 punt)\nAvan√ßat: Afegint programari compilat estaticament a initramfs. (2 punts)\n\nReconstruir l‚Äôinitramfs i validar que s‚Äôha restaurat el snapshot correcte.",
    "crumbs": [
      "Projectes",
      "Projecte 1 ¬∑ Snapshots i Backups amb systemd i initramfs"
    ]
  },
  {
    "objectID": "projects/01-project/01-project.html#organitzaci√≥-i-lliurament",
    "href": "projects/01-project/01-project.html#organitzaci√≥-i-lliurament",
    "title": "Pr√†ctica 01: Snapshots i restauraci√≥ amb systemd i initramfs",
    "section": "Organitzaci√≥ i lliurament",
    "text": "Organitzaci√≥ i lliurament\nAccediu a l‚Äôactivitat a trav√©s de l‚Äôenlla√ß al Github Classroom. Un cop acceptada l‚Äôactivitat, clonareu el repositori a la vostra m√†quina local i comen√ßareu a treballar. Podeu treballar amb grups de fins a 3 persones.\nüìÇ practica01/\n‚îú‚îÄ‚îÄ SOLUCI√ì.md               \n‚îú‚îÄ‚îÄ scripts/\n‚îÇ   ‚îú‚îÄ‚îÄ create_snapshot.sh    \n‚îÇ   ‚îú‚îÄ‚îÄ restore_snapshot.sh   \n‚îÇ   ‚îî‚îÄ‚îÄ helpers.sh            \n‚îú‚îÄ‚îÄ systemd/\n‚îÇ   ‚îú‚îÄ‚îÄ snapshot.service      \n‚îÇ   ‚îî‚îÄ‚îÄ restore.service       \n‚îú‚îÄ‚îÄ initramfs/\n‚îÇ   ‚îî‚îÄ‚îÄ snapshot_menu        \n‚îî‚îÄ‚îÄ grub/\n    ‚îî‚îÄ‚îÄ 40_custom_snapshot    \nEl document SOLUCI√ì.md ha d‚Äôincloure:\n\nExplicaci√≥ de cada part de la pr√†ctica i comandes utilitzades.\nDifer√®ncies entre les comandes cp, rsync i tar per fer c√≤pies de seguretat.\nConjunt de proves realitzades per validar cada part.\nEnregistrament en format v√≠deo de la consola on es demostri el funcionament correcte de les diferents parts de la pr√†ctica, o b√© captures de pantalla on es mostri el proc√©s i els resultats.\nDocumentaci√≥ o prompts consultats.",
    "crumbs": [
      "Projectes",
      "Projecte 1 ¬∑ Snapshots i Backups amb systemd i initramfs"
    ]
  },
  {
    "objectID": "projects/03-project/03-project.html",
    "href": "projects/03-project/03-project.html",
    "title": "Pr√†ctica 03: Automatitzant LDAP a AWS amb CloudFormation i Ansible",
    "section": "",
    "text": "Desplegar un servidor LDAP segur a AWS utilitzant inst√†ncies EC2.\nAutomatitzar la instal¬∑laci√≥ i configuraci√≥ del servidor LDAP, client LDAP i LAM.\nUtilitzar Ansible o CloudFormation per a la gesti√≥ d‚Äôinfraestructura com a codi.",
    "crumbs": [
      "Projectes",
      "Projecte 3 ¬∑ Infraestructura LDAP Completa a AWS"
    ]
  },
  {
    "objectID": "projects/03-project/03-project.html#objectius",
    "href": "projects/03-project/03-project.html#objectius",
    "title": "Pr√†ctica 03: Automatitzant LDAP a AWS amb CloudFormation i Ansible",
    "section": "",
    "text": "Desplegar un servidor LDAP segur a AWS utilitzant inst√†ncies EC2.\nAutomatitzar la instal¬∑laci√≥ i configuraci√≥ del servidor LDAP, client LDAP i LAM.\nUtilitzar Ansible o CloudFormation per a la gesti√≥ d‚Äôinfraestructura com a codi.",
    "crumbs": [
      "Projectes",
      "Projecte 3 ¬∑ Infraestructura LDAP Completa a AWS"
    ]
  },
  {
    "objectID": "projects/03-project/03-project.html#requisits-previs",
    "href": "projects/03-project/03-project.html#requisits-previs",
    "title": "Pr√†ctica 03: Automatitzant LDAP a AWS amb CloudFormation i Ansible",
    "section": "Requisits previs",
    "text": "Requisits previs\n\nEl tres nodes (servidor LDAP, client LDAP i LAM) han d‚Äôestar desplegats en inst√†ncies EC2 a AWS.\nEl servidor LDAP ha de tenir TLS configurat per a connexions segures.\nEl client LDAP ha de poder autenticar usuaris contra el servidor LDAP.\nLAM ha de ser accessible via web i permetre la gesti√≥ dels usuaris i grups LDAP. No cal que LAM utilitzi certificats SSL per al servidor web, per√≤ si que cal que el servidor LDAP utilitzi TLS.",
    "crumbs": [
      "Projectes",
      "Projecte 3 ¬∑ Infraestructura LDAP Completa a AWS"
    ]
  },
  {
    "objectID": "projects/03-project/03-project.html#requisits-obligatoris",
    "href": "projects/03-project/03-project.html#requisits-obligatoris",
    "title": "Pr√†ctica 03: Automatitzant LDAP a AWS amb CloudFormation i Ansible",
    "section": "Requisits obligatoris",
    "text": "Requisits obligatoris\n\nLes m√†quines han de ser inst√†ncies EC2 a AWS amb Amazon Linux 2023 i t3.micro o t2.micro.",
    "crumbs": [
      "Projectes",
      "Projecte 3 ¬∑ Infraestructura LDAP Completa a AWS"
    ]
  },
  {
    "objectID": "projects/03-project/03-project.html#tasques",
    "href": "projects/03-project/03-project.html#tasques",
    "title": "Pr√†ctica 03: Automatitzant LDAP a AWS amb CloudFormation i Ansible",
    "section": "Tasques",
    "text": "Tasques\nAquest projecte consisteix en desplegar una infraestructura LDAP completa a AWS utilitzant inst√†ncies EC2.\n\nCreu un servidor LDAP amb una base de dades pr√≤pia que contingui usuaris i grups.\n\nLa base de dades LDAP ha de ser dc=amsa,dc=udl,dc=cat.\nCreeu tres rols principals: alumne, professor i admin.\nAquests rols s‚Äôhan de representar en LDAP com a grups i usuaris.\nCreeu un m√≠nim de 6 alumnes, 2 professors i 1 admin.\n\nAutomatitzeu la instal¬∑laci√≥ i configuraci√≥ del servidor LDAP, client LDAP i LAM mitjan√ßant scripts Bash.\n\n\nOpcions d‚Äôautomatitzaci√≥\n\n\nOpci√≥ A: CloudFormation + Ansible + Bash\n\nCreeu 3 scripts de Bash separats per a la instal¬∑laci√≥ i configuraci√≥ del servidor LDAP, client LDAP i LAM.\nCreeu una plantilla de CloudFormation per desplegar les inst√†ncies EC2 necess√†ries.\nCopieu els DNS manualment a l‚Äôinventari d‚ÄôAnsible.\nUtiltizeu Ansible per executar els scripts Bash a les inst√†ncies desplegades i per moure els certificats TLS.\n\n\n\nOpci√≥ B: CloudFormation + Ansible\n\nAutomatizeu tot el proc√©s utilitzant Ansible per a la instal¬∑laci√≥ i configuraci√≥ del servidor LDAP, client LDAP i LAM. Sense scripts Bash. Amb la l√≤gica de ansible.\nCreeu una plantilla de CloudFormation per desplegar les inst√†ncies EC2 necess√†ries.\nCreeu un script que primer desplegui la infraestructura amb CloudFormation i despr√©s executi els playbooks d‚ÄôAnsible, utilitzeu el AWS CLI per obtenir els DNS de les inst√†ncies i generar l‚Äôinventari d‚ÄôAnsible autom√†ticament.\n\n\n\nOpci√≥ C: CloudFormation\n\nAutomatitzeu tot el proc√©s utilitzant nom√©s CloudFormation i scripts d‚Äôinicialitzaci√≥ (UserData) per a la instal¬∑laci√≥ i configuraci√≥ del servidor LDAP, client LDAP i LAM.\nCreeu una plantilla de CloudFormation per desplegar les inst√†ncies EC2 necess√†ries\n\n\n\n\n\n\n\nConsellConsell\n\n\n\nAquesta √©s una opci√≥ avan√ßada i pot resultar no operativa per limitacions amb AWS Educate. Es pot evitar l‚Äô√∫s de IAM Roles, per√≤ complicar√† la pr√†ctica.\n\n\n\n\nAltres opcions\nHi ha altres opcions possibles. C",
    "crumbs": [
      "Projectes",
      "Projecte 3 ¬∑ Infraestructura LDAP Completa a AWS"
    ]
  },
  {
    "objectID": "projects/03-project/03-project.html#tasques-finals",
    "href": "projects/03-project/03-project.html#tasques-finals",
    "title": "Pr√†ctica 03: Automatitzant LDAP a AWS amb CloudFormation i Ansible",
    "section": "Tasques finals",
    "text": "Tasques finals\n\nModifiqueu el script per poder aixecar 1 o N clients LDAP.\nPermeteu que tots els parametres siguin configurables des de la l√≠nia de comandes o fitxer de configuraci√≥.\nEls usuaris dels clients LDAP han de poder accedir √∫nicament per SSH amb clau p√∫blica.",
    "crumbs": [
      "Projectes",
      "Projecte 3 ¬∑ Infraestructura LDAP Completa a AWS"
    ]
  },
  {
    "objectID": "projects/03-project/03-project.html#entrega",
    "href": "projects/03-project/03-project.html#entrega",
    "title": "Pr√†ctica 03: Automatitzant LDAP a AWS amb CloudFormation i Ansible",
    "section": "Entrega",
    "text": "Entrega\nEn totes les entregues cal indicar els membres de l‚Äôequip al README.md o b√© al campus virtual en el moment de la pujada.",
    "crumbs": [
      "Projectes",
      "Projecte 3 ¬∑ Infraestructura LDAP Completa a AWS"
    ]
  },
  {
    "objectID": "projects/03-project/03-project.html#opci√≥-1.-cv",
    "href": "projects/03-project/03-project.html#opci√≥-1.-cv",
    "title": "Pr√†ctica 03: Automatitzant LDAP a AWS amb CloudFormation i Ansible",
    "section": "Opci√≥ 1. CV",
    "text": "Opci√≥ 1. CV\nCal lliurar al campus virtual un fitxer practica03-amsa-&lt;nom1_cognom1,nom2_cognom2,...&gt;.zip amb tots els scripts, plantilles i fitxers necessaris per desplegar la infraestructura i configurar el servidor LDAP, el client LDAP i LAM. Tamb√© cal incloure un fitxer README.md amb instruccions clares sobre com executar els scripts i desplegar la infraestructura.",
    "crumbs": [
      "Projectes",
      "Projecte 3 ¬∑ Infraestructura LDAP Completa a AWS"
    ]
  },
  {
    "objectID": "projects/03-project/03-project.html#opci√≥-2.-repositori-github",
    "href": "projects/03-project/03-project.html#opci√≥-2.-repositori-github",
    "title": "Pr√†ctica 03: Automatitzant LDAP a AWS amb CloudFormation i Ansible",
    "section": "Opci√≥ 2. Repositori GitHub",
    "text": "Opci√≥ 2. Repositori GitHub\nCal pujar tot el contingut a un repositori privat/p√∫blic de GitHub i compartir l‚Äôacc√©s amb l‚Äôadre√ßa de correu del professor. L‚Äôenlla√ß al repo l‚Äôheu d‚Äôindicar al campus virtual. El repositori ha de contenir tots els scripts, plantilles i fitxers necessaris per desplegar la infraestructura i configurar el servidor LDAP, el client LDAP i LAM. Tamb√© cal incloure un fitxer README.md amb instruccions clares sobre com executar els scripts i desplegar la infraestructura.",
    "crumbs": [
      "Projectes",
      "Projecte 3 ¬∑ Infraestructura LDAP Completa a AWS"
    ]
  },
  {
    "objectID": "laboratories/03-jupyter/01-aws-jupyter.html",
    "href": "laboratories/03-jupyter/01-aws-jupyter.html",
    "title": "Servidor de Python al Cloud amb Emmagatzematge S3 Compartit",
    "section": "",
    "text": "Configurar un servidor Jupyter Notebook a AWS EC2.\nUtilitzar systemd per gestionar Jupyter com a servei.\nDescobrir l‚Äôemmagatzematge al n√∫vol amb AWS S3.\nAccedir a S3 des de Jupyter i diferents clients.\nSincronitzar dades entre EC2 i S3.\nAutomatitzar la sincronitzaci√≥ amb scripts i Lambda.",
    "crumbs": [
      "Laboratoris",
      "Storage and Services",
      "Laboratori 04 ¬∑ Servidor de Python al Cloud amb Emmagatzematge S3 Compartit"
    ]
  },
  {
    "objectID": "laboratories/03-jupyter/01-aws-jupyter.html#objectius",
    "href": "laboratories/03-jupyter/01-aws-jupyter.html#objectius",
    "title": "Servidor de Python al Cloud amb Emmagatzematge S3 Compartit",
    "section": "",
    "text": "Configurar un servidor Jupyter Notebook a AWS EC2.\nUtilitzar systemd per gestionar Jupyter com a servei.\nDescobrir l‚Äôemmagatzematge al n√∫vol amb AWS S3.\nAccedir a S3 des de Jupyter i diferents clients.\nSincronitzar dades entre EC2 i S3.\nAutomatitzar la sincronitzaci√≥ amb scripts i Lambda.",
    "crumbs": [
      "Laboratoris",
      "Storage and Services",
      "Laboratori 04 ¬∑ Servidor de Python al Cloud amb Emmagatzematge S3 Compartit"
    ]
  },
  {
    "objectID": "laboratories/03-jupyter/01-aws-jupyter.html#fase-1-llan√ßament-del-n√∫vol-ec2-jupyter-com-a-servei",
    "href": "laboratories/03-jupyter/01-aws-jupyter.html#fase-1-llan√ßament-del-n√∫vol-ec2-jupyter-com-a-servei",
    "title": "Servidor de Python al Cloud amb Emmagatzematge S3 Compartit",
    "section": "üß± Fase 1: Llan√ßament del N√∫vol (EC2 + Jupyter com a servei)",
    "text": "üß± Fase 1: Llan√ßament del N√∫vol (EC2 + Jupyter com a servei)\n\n1.1 Crear inst√†ncia EC2\n\nAneu al AWS Educate Learner Lab i accediu al vostre entorn.\nCerqueu EC2 i creeu una nova inst√†ncia.\nSeleccioneu una AMI Linux i tipus d‚Äôinst√†ncia de baix cost (t2.micro).\nConfigureu un Security Group:\n\nPort 22 (SSH) acceptant 0.0.0.0/0.\nPort 8888 (Jupyter) acceptant 0.0.0.0/0.\n\nLlan√ßeu la inst√†ncia.\n\n\n\n1.2 Instal¬∑lar Jupyter Notebook\n\nConnecteu-vos a la inst√†ncia via SSH.\nActualitzeu els paquets:\nsudo yum update -y\nComproveu que Python3 est√† instal¬∑lat:\npython3 --version\nCrearem un entorn virtual per Jupyter al directori /home/ec2-user/jupyter/env:\nmkdir -p /home/ec2-user/jupyter\npython3 -m venv /home/ec2-user/jupyter/env\nsource /home/ec2-user/jupyter/env/bin/activate\nInstal¬∑leu Jupyter:\npip install jupyter\nComproveu la instal¬∑laci√≥:\njupyter --version\nArranqueu Jupyter:\njupyter-notebook --ip=0.0.0.0 --port=8888 --no-browser\nAccediu a Jupyter des del navegador amb http://&lt;IP_PUBLICA&gt;:8888. A la terminal veureu un token d‚Äôacc√©s que necessitareu per entrar.\n\n\nPregunta de reflexi√≥\n\nPer qu√® √©s recomanable executar Jupyter en un entorn virtual separat en lloc d‚Äôinstal¬∑lar-lo directament al sistema?\n\n\n\n\nüß† Servei jupyter amb systemd\nAra configurarem Jupyter per executar-lo com un servei de sistema amb systemd, de manera que s‚Äôinici√Ø autom√†ticament a l‚Äôarrencada i s‚Äôexecuti en segon pla. La seg√ºent taula resumeix els components principals que crearem:\n\n\n\n\n\n\n\n\nComponent\nLloc\nProp√≤sit\n\n\n\n\nUsuari de sistema\njupyter (no shell, no home)\nExecutar Jupyter de manera segura, √∫nicament per a aquest servei.\n\n\nConfiguraci√≥ Jupyter\n/etc/jupyter\nConfiguraci√≥ i credencials de Jupyter.\n\n\nEntorn virtual\n/opt/jupyter/env\nPaquets de Python a√Øllats per Jupyter.\n\n\nDirectori de treball\n/srv/jupyter\nOn es guarden els notebooks i dades.\n\n\nUnitat systemd\n/etc/systemd/system/jupyter.service\nConfiguraci√≥ del servei Jupyter per a systemd.\n\n\n\n\nCrearem un usuari dedicat per a Jupyter:\nsudo useradd --system --no-create-home --shell /sbin/nologin jupyter\nsudo passwd -l jupyter\nCrearem els directoris necessaris:\nsudo mkdir -p /etc/jupyter /opt/jupyter/env /srv/jupyter mkdir /etc/jupyter/runtime /srv/jupyter/notebooks\nsudo chown -R jupyter:jupyter /srv/jupyter /etc/jupyter /opt/jupyter\nInstal¬∑larem Jupyter a l‚Äôentorn virtual:\nsudo python3 -m venv /opt/jupyter/env\nsudo chown -R jupyter:jupyter /opt/jupyter/env\nsudo -u jupyter /opt/jupyter/env/bin/pip install --upgrade pip\nsudo -u jupyter /opt/jupyter/env/bin/pip install jupyter\nGenereu el fitxer de configuraci√≥ de Jupyter:\nsudo -u jupyter env HOME=/tmp /opt/jupyter/env/bin/jupyter-notebook --generate-config --config-dir=/etc/jupyter\nEditeu el fitxer de configuraci√≥ per definir directori i ports:\nsudo -u jupyter vi /etc/jupyter/jupyter_notebook_config.py\nAfegiu les l√≠nies seg√ºents:\nc.ServerApp.ip = '0.0.0.0'\nc.ServerApp.port = 8888\nc.ServerApp.open_browser = False\nc.ServerApp.root_dir = '/srv/jupyter'\nc.ServerApp.notebook_dir = '/srv/jupyter/notebooks'\nc.serverApp.token = ''  \nc.ServerApp.password = ''  \nGenerar una contrasenya per Jupyter:\nsudo -u jupyter /opt/jupyter/env/bin/python3 -c \"from jupyter_server.auth import passwd; print(passwd())\"\nCopieu la sortida i afegiu-la a c.ServerApp.password al fitxer de configuraci√≥.\nCreeu el fitxer de servei systemd:\nsudo vi /etc/systemd/system/jupyter.service\nAfegiu el seg√ºent contingut:\n[Unit]\nDescription=Jupyter Service\nAfter=network.target\n\n[Service]\nType=simple\nUser=jupyter\nGroup=jupyter\nWorkingDirectory=/srv/jupyter\nEnvironment=\"XDG_DATA_HOME=/srv/jupyter/.local/share\"\nEnvironment=\"JUPYTER_CONFIG_DIR=/etc/jupyter\"\nEnvironment=\"PATH=/opt/jupyter/env/bin\"\nEnvironment=\"JUPYTER_RUNTIME_DIR=/etc/jupyter/runtime\"\nExecStart=/opt/jupyter/env/bin/jupyter-notebook --config=/etc/jupyter/jupyter_notebook_config.py\nRestart=failure\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\nActiveu i inicieu el servei:\nsudo systemctl daemon-reload\nsudo systemctl enable jupyter\nsudo systemctl start jupyter\nsudo systemctl status jupyter\nAccediu a Jupyter des del navegador amb http://&lt;IP_PUBLICA&gt;:8888 i utilitzeu la contrasenya establerta.\n\n\n\n\n\n\n\nNoteLogs de Jupyter\n\n\n\nPodeu veure els logs de Jupyter amb:\njournalctl -u jupyter -f\n\n\n\nPreguntes de reflexi√≥\n\nQu√® passaria si canviem Type=simple a Type=forking? Quines modificacions haur√≠em de fer al fitxer de servei?\nQuin avantatge t√© separar l‚Äôusuari que executa Jupyter del teu usuari d‚Äôadministraci√≥?\nQuines implicacions t√© mantenir un servei com Jupyter en execuci√≥ cont√≠nua? (Considereu consum de recursos, seguretat, monitoritzaci√≥.)",
    "crumbs": [
      "Laboratoris",
      "Storage and Services",
      "Laboratori 04 ¬∑ Servidor de Python al Cloud amb Emmagatzematge S3 Compartit"
    ]
  },
  {
    "objectID": "laboratories/03-jupyter/01-aws-jupyter.html#fase-2-configuraci√≥-demmagatzematge-s3",
    "href": "laboratories/03-jupyter/01-aws-jupyter.html#fase-2-configuraci√≥-demmagatzematge-s3",
    "title": "Servidor de Python al Cloud amb Emmagatzematge S3 Compartit",
    "section": "üíæ Fase 2: Configuraci√≥ d‚Äôemmagatzematge S3",
    "text": "üíæ Fase 2: Configuraci√≥ d‚Äôemmagatzematge S3\n\n2.1 Creaci√≥ de buckets S3\nCrearem diferents buckets S3 per emmagatzemar els notebooks, les dades, els resultats i tamb√© per fer de backup. Per fer-ho, seguirem els passos seg√ºents:\n\nAneu al servei S3 a AWS i creeu els seg√ºents buckets (assegureu-vos que els noms siguin √∫nics a nivell global):\n\namsa-&lt;vostre_nom&gt;-notebooks\namsa-&lt;vostre_nom&gt;-data\namsa-&lt;vostre_nom&gt;-results\namsa-&lt;vostre_nom&gt;-backup\n\nConfigurarem que √∫nicament el vostre usuari tingui acc√©s als buckets creats.\n\n\n\n\n\n\n\nNotePol√≠tica d‚ÄôAcc√©s S3\n\n\n\nA la realitat, haur√≠eu de crear una pol√≠tica d‚Äôacc√©s S3 que permeti nom√©s al vostre usuari accedir als buckets. Per√≤ ens els learner labs d‚ÄôAWS Educate, aix√≤ no √©s possible. Per tant, en aquest laboratori l‚Äôowner del bucket (el vostre usuari d‚ÄôAWS Educate) ser√† l‚Äô√∫nic que podr√† accedir als seu continguts.\n\n\n\nSeleccioneu General purpose.\nACLs desactivades.\nActiveu tots els controls de bloqueig d‚Äôacc√©s p√∫blic.\nDesactiveu el versionat.\nServer-side encryption with Amazon S3 managed keys (SSE-S3).\nSeleccioneu Bucket Key activada.\n\n\nUn cop creats els buckets, anoteu-vos els noms per utilitzar-los m√©s endavant.\nPodeu pujar documents de mostra als buckets per exemple des del vostre ordinador local, aneu a la interf√≠cie web de S3, seleccioneu el bucket i pengeu fitxers.\n\n\n\n2.2 Configuraci√≥ de l‚ÄôAWS CLI a l‚ÄôEC2\n\nInstal¬∑leu l‚ÄôAWS CLI a l‚Äôinst√†ncia EC2:\nsudo yum install awscli -y\nConfigureu l‚ÄôAWS CLI amb les vostres credencials d‚ÄôAWS Educate:\naws configure\nAneu a la pesta√±a d‚Äôacc√©s al Learner Lab i a la secci√≥ AWS Details -&gt; Show AWS CLI -&gt; copieu l‚ÄôAccess Key ID i el Secret Access Key i enganxeu-los a la terminal quan us ho demani. Per a la regi√≥, utilitzeu us-east-1 o la que correspongui al vostre entorn.\nAWS Access Key ID [None]: &lt;ACCESS_KEY&gt;\nAWS Secret Access Key [None]: &lt;SECRET_KEY&gt;\nDefault region name [None]: us-east-1\nDefault output format [None]: None\nComproveu que podeu accedir als buckets creats:\naws s3 ls\nCopiar fitxers entre l‚ÄôEC2 i S3:\ncd /tmp\necho \"Aix√≤ √©s un fitxer de prova per a S3\" &gt; file.txt\naws s3 cp file.txt s3://amsa-&lt;vostre_nom&gt;-notebooks/file.txt\nComproveu que el fitxer s‚Äôha pujat correctament:\naws s3 ls s3://amsa-&lt;vostre_nom&gt;-notebooks/\nConsulteu la cheat sheet al final del laboratori per veure i provar m√©s ordres de l‚ÄôAWS CLI relacionades amb S3.\n\n\n\nPreguntes de reflexi√≥\n\nQuins avantatges t√© utilitzar S3 per emmagatzemar dades en lloc de l‚Äôemmagatzematge local de l‚ÄôEC2?\nQuin √©s el risc de tenir les credencials d‚ÄôAWS configurades directament a l‚ÄôEC2 i com es podria mitigar?\nCerca informaci√≥ sobre emmagatzematge basat en blocs (EBS) i emmagatzematge d‚Äôobjectes (S3). Quines s√≥n les difer√®ncies principals i en quins casos √©s millor utilitzar cada tipus?\n\n\n\n2.3 Control de versions i sincronitzaci√≥\nEl servei S3 permet habilitar el control de versions als buckets per mantenir un historial de canvis dels fitxers. Aix√≤ √©s √∫til per recuperar versions anteriors en cas d‚Äôerrors o p√®rdua de dades.\n\nHabiliteu el control de versions al bucket de notebooks:\naws s3api put-bucket-versioning --bucket amsa-&lt;vostre_nom&gt;-notebooks --versioning-configuration Status=Enabled\nPugeu un fitxer i modifiqueu-lo diverses vegades per veure com es creen diferents versions:\necho \"Versi√≥ 1\" &gt; versioned_file.txt\naws s3 cp versioned_file.txt s3://amsa-&lt;vostre_nom&gt;-notebooks/versioned_file.txt\n\necho \"Versi√≥ 2\" &gt; versioned_file.txt\naws s3 cp versioned_file.txt s3://amsa-&lt;vostre_nom&gt;-notebooks/versioned_file.txt\n\necho \"Versi√≥ 3\" &gt; versioned_file.txt\naws s3 cp versioned_file.txt s3://amsa-&lt;vostre_nom&gt;-notebooks/versioned_file.txt\nLlisteu les versions del fitxer:\naws s3api list-object-versions --bucket amsa-&lt;vostre_nom&gt;-notebooks --prefix versioned_file.txt\nRecupereu una versi√≥ espec√≠fica del fitxer:\naws s3api get-object --bucket amsa-&lt;vostre_nom&gt;-notebooks --key versioned_file.txt --version-id &lt;VERSION_ID&gt; restored_versioned_file.txt\n\n\n\nPregunta de reflexi√≥\n\nQuins problemes pot solucionar el control de versions en un bucket S3? Pensa un exemple pr√†ctic.\nSimula una situaci√≥ on no pots o no vols utilitzar Git per gestionar els teus notebooks de Jupyter (per exemple, en un entorn cloud compartit). Com podries aprofitar el versionament de buckets S3 per mantenir versions dels teus notebooks i recuperar versions anteriors? Quins avantatges i limitacions tindria aquest enfocament comparat amb Git pel que fa a tra√ßabilitat, col¬∑laboraci√≥ i efici√®ncia d‚Äôemmagatzematge?",
    "crumbs": [
      "Laboratoris",
      "Storage and Services",
      "Laboratori 04 ¬∑ Servidor de Python al Cloud amb Emmagatzematge S3 Compartit"
    ]
  },
  {
    "objectID": "laboratories/03-jupyter/01-aws-jupyter.html#fase-4-sincronitzaci√≥-autom√†tica-amb-s3",
    "href": "laboratories/03-jupyter/01-aws-jupyter.html#fase-4-sincronitzaci√≥-autom√†tica-amb-s3",
    "title": "Servidor de Python al Cloud amb Emmagatzematge S3 Compartit",
    "section": "üèóÔ∏è Fase 4: Sincronitzaci√≥ autom√†tica amb S3",
    "text": "üèóÔ∏è Fase 4: Sincronitzaci√≥ autom√†tica amb S3\nUn dels problemes d‚Äôutilitzar 2 serveis diferents com a EC2 i S3 √©s que les dades poden quedar desincronitzades. Per exemple, si treballem amb notebooks a Jupyter i els guardem localment, aquests canvis no es reflectiran autom√†ticament a S3. Si pujem dades a S3 des d‚Äôun altre lloc, aquestes dades no estaran disponibles localment a l‚ÄôEC2.\nUna soluci√≥ seria abans de treballar a Jupyter sincronitzar les dades des de S3 a l‚ÄôEC2 i despr√©s de treballar, tornar a sincronitzar les dades de l‚ÄôEC2 a S3. Aix√≤ es pot fer manualment amb l‚ÄôAWS CLI, per√≤ √©s millor automatitzar-ho.\n#!/bin/bash\n\n# Sincronitzar des de S3 a EC2\naws s3 sync s3://amsa-&lt;vostre_nom&gt;-notebooks /srv/jupyter/notebooks/\n\n# Sincronitzar des de EC2 a S3\naws s3 sync /srv/jupyter/notebooks/ s3://amsa-&lt;vostre_nom&gt;-notebooks\nUn manera d‚Äôautomatitzar-ho seria crear un timer de systemd que executi aquest script cada cert temps (per exemple, cada 5 minuts). Aix√≠, les dades es mantindrien sincronitzades sense necessitat d‚Äôintervenci√≥ manual.\nUna altra opci√≥ seria configurar una Lambda que s‚Äôactivi quan hi hagi canvis al bucket S3 i sincronitzi aquests canvis a l‚ÄôEC2. Aquesta opci√≥ √©s m√©s complexa per√≤ permet una sincronitzaci√≥ m√©s immediata.\n\nConfiguraci√≥ de la funci√≥ Lambda\nEn aquest entorn AWS Educate, Lambda no pot executar ordres directament a l‚ÄôEC2. En un entorn real, podr√≠em utilitzar AWS Systems Manager (SSM) per enviar ordres a l‚ÄôEC2 des de Lambda. Per√≤ com que no tenim permisos per configurar SSM al Learner Lab, no podem implementar aquest model directament.\nimport boto3\n\n ec2 = boto3.client('ec2')\n ssm = boto3.client('ssm')\n\n def lambda_handler(event, context):\n     # ID de la inst√†ncia EC2\n     instance_id = 'i-0fea0f11ae793a212'\n\n     # Comanda a executar a la inst√†ncia EC2\n     command = \"aws s3 sync s3://amsa-&lt;vostre_nom&gt;-notebooks /srv/jupyter/notebooks/\"\n\n     # Executa la comanda via AWS Systems Manager\n     response = ssm.send_command(\n         InstanceIds=[instance_id],\n         DocumentName=\"AWS-RunShellScript\",\n         Parameters={'commands': [command]}\n     )\n     return {\n         'statusCode': 200,\n         'body': 'Comanda de sincronitzaci√≥ enviada correctament.'\n     }\n\n\nActivitats\n\nImplementa un timer de systemd que executi un script de sincronitzaci√≥ cada 5 minuts.\nImplementa una funci√≥ lambda que per cada modificaci√≥ al bucket S3, creei un fitxer de backup al bucket de backup. Nota: Aquesta lambda si es pot implementar al Learner Lab, utiltizeu el LABROLE per executar el codi que c√≤pia els fitxers al bucket de backup i seleccioneu l‚ÄôS3 com a trigger. Podeu fer servir python.",
    "crumbs": [
      "Laboratoris",
      "Storage and Services",
      "Laboratori 04 ¬∑ Servidor de Python al Cloud amb Emmagatzematge S3 Compartit"
    ]
  },
  {
    "objectID": "laboratories/03-jupyter/01-aws-jupyter.html#aws-s3---cheat-sheet",
    "href": "laboratories/03-jupyter/01-aws-jupyter.html#aws-s3---cheat-sheet",
    "title": "Servidor de Python al Cloud amb Emmagatzematge S3 Compartit",
    "section": "üöÄ AWS S3 - Cheat Sheet",
    "text": "üöÄ AWS S3 - Cheat Sheet\n\nCopiar un document de EC2 a S3:\naws s3 cp &lt;local-path&gt;/file.txt s3://&lt;bucket-name&gt;/file.txt\nCopiar un document de S3 a EC2:\naws s3 cp s3://&lt;bucket-name&gt;/file.txt &lt;local-path&gt;/file.txt\nSincronitzar un directori local amb un bucket de S3:\naws s3 sync &lt;local-directory&gt; s3://&lt;bucket-name&gt;\nSincronitzar un bucket de S3 amb un directori local:\naws s3 sync s3://&lt;bucket-name&gt; &lt;local-directory&gt;\nCrear una carpeta a S3:\naws s3 mb s3://&lt;bucket-name&gt;/folder\nEliminar un document de S3:\naws s3 rm s3://&lt;bucket-name&gt;/file.txt\nEliminar documents de S3 de manera recursiva:\naws s3 rm s3://&lt;bucket-name&gt;/ --recursive\nLlistar els documents d‚Äôun bucket de S3:\naws s3 ls s3://&lt;bucket-name&gt;\nLlistar els documents d‚Äôun bucket de S3 de forma recursiva:\naws s3 ls s3://&lt;bucket-name&gt; --recursive",
    "crumbs": [
      "Laboratoris",
      "Storage and Services",
      "Laboratori 04 ¬∑ Servidor de Python al Cloud amb Emmagatzematge S3 Compartit"
    ]
  },
  {
    "objectID": "laboratories/03-jupyter/01-aws-jupyter.html#activitats-extra",
    "href": "laboratories/03-jupyter/01-aws-jupyter.html#activitats-extra",
    "title": "Servidor de Python al Cloud amb Emmagatzematge S3 Compartit",
    "section": "Activitats extra",
    "text": "Activitats extra\n\nBusca informaci√≥ sobre con instal¬∑la un servidor similar a Dropbox o Drive utilitzant EC2 i S3. Aquest servidor pot utilitzant el programari Nextcloud o ownCloud. Resumeix els passos principals per fer-ho. No pots utiltizar docker per aquesta activitat. A m√©s a m√©s, comparar el cost de tenir aquest servidor amb el cost d‚Äôutilitzar serveis com Dropbox o Google Drive per a diferents quantitats d‚Äôemmagatzematge (per exemple, 100GB, 1TB, 10TB).",
    "crumbs": [
      "Laboratoris",
      "Storage and Services",
      "Laboratori 04 ¬∑ Servidor de Python al Cloud amb Emmagatzematge S3 Compartit"
    ]
  },
  {
    "objectID": "laboratories/03-jupyter/01-aws-jupyter.html#finalitzaci√≥-i-neteja",
    "href": "laboratories/03-jupyter/01-aws-jupyter.html#finalitzaci√≥-i-neteja",
    "title": "Servidor de Python al Cloud amb Emmagatzematge S3 Compartit",
    "section": "üßπ Finalitzaci√≥ i Neteja",
    "text": "üßπ Finalitzaci√≥ i Neteja\nRecorda eliminar tots els recursos creats a AWS per evitar c√†rrecs innecessaris.\n\nHappy SysAdmin! üïµÔ∏è‚Äç‚ôÇÔ∏è",
    "crumbs": [
      "Laboratoris",
      "Storage and Services",
      "Laboratori 04 ¬∑ Servidor de Python al Cloud amb Emmagatzematge S3 Compartit"
    ]
  },
  {
    "objectID": "laboratories/01-introduction.html#laboratori-1-fonaments-de-ladministraci√≥-de-sistemes-amb-aws",
    "href": "laboratories/01-introduction.html#laboratori-1-fonaments-de-ladministraci√≥-de-sistemes-amb-aws",
    "title": "Laboratori: Fonaments de l‚ÄôAdministraci√≥ de Sistemes amb AWS",
    "section": "Laboratori 1: Fonaments de l‚ÄôAdministraci√≥ de Sistemes amb AWS",
    "text": "Laboratori 1: Fonaments de l‚ÄôAdministraci√≥ de Sistemes amb AWS",
    "crumbs": [
      "Laboratoris",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Laboratori ¬∑ Fonaments de l'Administraci√≥ de Sistemes amb AWS"
    ]
  },
  {
    "objectID": "laboratories/01-introduction.html#objectius-del-laboratori",
    "href": "laboratories/01-introduction.html#objectius-del-laboratori",
    "title": "Laboratori: Fonaments de l‚ÄôAdministraci√≥ de Sistemes amb AWS",
    "section": "Objectius del laboratori",
    "text": "Objectius del laboratori\n\nAccedir a la plataforma de computaci√≥ en n√∫vol AWS a travv√©s AWS Educate.\nEntendre els conceptes b√†sic d‚Äôaministraci√≥ remota a trav√©s de SSH.\n√ös d‚Äôautenticaci√≥ amb claus SSH.\nCrear i gestionar m√†quines virtuals a AWS EC2.\n\n\nüß™ Laboratori 01: Laboratori de preparaci√≥ i comandes b√†siques d‚Äôadministraci√≥",
    "crumbs": [
      "Laboratoris",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Laboratori ¬∑ Fonaments de l'Administraci√≥ de Sistemes amb AWS"
    ]
  },
  {
    "objectID": "laboratories/01-introduction.html#laboratori-2-desplegament-duna-aplicaci√≥-web-amb-wordpress-a-aws",
    "href": "laboratories/01-introduction.html#laboratori-2-desplegament-duna-aplicaci√≥-web-amb-wordpress-a-aws",
    "title": "Laboratori: Fonaments de l‚ÄôAdministraci√≥ de Sistemes amb AWS",
    "section": "Laboratori 2: Desplegament d‚Äôuna aplicaci√≥ web amb WordPress a AWS",
    "text": "Laboratori 2: Desplegament d‚Äôuna aplicaci√≥ web amb WordPress a AWS",
    "crumbs": [
      "Laboratoris",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Laboratori ¬∑ Fonaments de l'Administraci√≥ de Sistemes amb AWS"
    ]
  },
  {
    "objectID": "laboratories/01-introduction.html#esquema-de-larquitectura",
    "href": "laboratories/01-introduction.html#esquema-de-larquitectura",
    "title": "Laboratori: Fonaments de l‚ÄôAdministraci√≥ de Sistemes amb AWS",
    "section": "Esquema de l‚Äôarquitectura",
    "text": "Esquema de l‚Äôarquitectura",
    "crumbs": [
      "Laboratoris",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Laboratori ¬∑ Fonaments de l'Administraci√≥ de Sistemes amb AWS"
    ]
  },
  {
    "objectID": "laboratories/01-introduction.html#objectius-del-laboratori-1",
    "href": "laboratories/01-introduction.html#objectius-del-laboratori-1",
    "title": "Laboratori: Fonaments de l‚ÄôAdministraci√≥ de Sistemes amb AWS",
    "section": "Objectius del laboratori",
    "text": "Objectius del laboratori\n\nCon√®ixer els serveis b√†sics d‚ÄôAWS per desplegar aplicacions web.\nDesplegar una base de dades gestionada amb Amazon RDS.\nDesplegar una m√†quina virtual amb Amazon EC2.\nDesplegar una aplicaci√≥ web amb WordPress.\n√ös d‚ÄôAnsible per automatitzar el desplegament de l‚Äôaplicaci√≥\n\n\nüß™ Laboratori 02: Desplegament d‚Äôuna aplicaci√≥ web amb WordPress a AWS",
    "crumbs": [
      "Laboratoris",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Laboratori ¬∑ Fonaments de l'Administraci√≥ de Sistemes amb AWS"
    ]
  },
  {
    "objectID": "laboratories/01-foundations/02-aws-wordpress.html",
    "href": "laboratories/01-foundations/02-aws-wordpress.html",
    "title": "Unitat 1 ¬∑ Desplegament d‚Äôuna aplicaci√≥ web amb AWS",
    "section": "",
    "text": "Desplegar una aplicaci√≥ web utilitzant serveis d‚ÄôAWS. En concret, es desplegar√† una aplicaci√≥ WordPress utilitzant Amazon EC2 com a servidor web i Amazon RDS com a base de dades.",
    "crumbs": [
      "Laboratoris",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Laboratori 02 ¬∑ Desplegament d'una aplicaci√≥ web amb AWS"
    ]
  },
  {
    "objectID": "laboratories/01-foundations/02-aws-wordpress.html#objectius",
    "href": "laboratories/01-foundations/02-aws-wordpress.html#objectius",
    "title": "Unitat 1 ¬∑ Desplegament d‚Äôuna aplicaci√≥ web amb AWS",
    "section": "",
    "text": "Desplegar una aplicaci√≥ web utilitzant serveis d‚ÄôAWS. En concret, es desplegar√† una aplicaci√≥ WordPress utilitzant Amazon EC2 com a servidor web i Amazon RDS com a base de dades.",
    "crumbs": [
      "Laboratoris",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Laboratori 02 ¬∑ Desplegament d'una aplicaci√≥ web amb AWS"
    ]
  },
  {
    "objectID": "laboratories/01-foundations/02-aws-wordpress.html#bases-de-dades-rds",
    "href": "laboratories/01-foundations/02-aws-wordpress.html#bases-de-dades-rds",
    "title": "Unitat 1 ¬∑ Desplegament d‚Äôuna aplicaci√≥ web amb AWS",
    "section": "Bases de dades RDS",
    "text": "Bases de dades RDS\nEl servei de bases de dades relacional d‚ÄôAmazon Web Services (RDS) √©s una opci√≥ molt interessant per a desplegar bases de dades MySQL, MariaDB, PostgreSQL, Oracle, SQL Server i Aurora. Aquest servei ofereix una gesti√≥ f√†cil i eficient de les bases de dades, aix√≠ com la possibilitat de fer c√≤pies de seguretat, escalabilitat i alta disponibilitat.\n\nAnem a la consola de Amazon RDS.\nA la consola de Amazon RDS, fem clic a Create database.\n\nSeleccionem el mode Standard Create.\nSeleccionem el motor de base de dades MySQL.\nSeleccionem la versi√≥ de la base de dades MySQL 8.0.42.\nSeleccionem la plantilla Sandbox.\nNom de la base de dades wordpress.\nMaster username admin.\nGesti√≥ de credencials: self-managed.\nSeleccioneu auto-generate a password.\n\nLa resta de par√†metres els deixarem per defecte. Una vegada acabat, fem clic a Create database.\n\n\n\n\n\n\n\nImportantContrassenya\n\n\n\nFeu clic a View Connection Details per veure la password generada. Si no ho feu, haureu d‚Äôanar a modificar, regenerar la password i aplicar els canvis.\n\n\n\nEspereu uns minuts fins que la columna Status estigui en verd i posi Available.\nUn cop la base de dades estigui disponible, fem clic a la base de dades i anem a la pestanya Connectivity & security per veure els detalls de connexi√≥.\n\nHostname: database-1.cik8jidkherq.us-east-1.rds.amazonaws.com\nPort: 3306\nUsername: admin\nDatabase name: wordpress\n\nAra ja podem connectar-nos a la base de dades amb un client MySQL com MySQL Workbench o phpMyAdmin.\n\nHostname: database-1.cik8jidkherq.us-east-1.rds.amazonaws.com\nPort: 3306\nUsername: admin\nPassword: XXXXXXXXXXXXXXX (la que heu generat abans)\n\nPer testejar la connexi√≥, necessitem un client MySQL. La manera m√©s senzilla √©s crear una inst√†ncia EC2 i instal¬∑lar el client MySQL.\n\n\nCrea una inst√†ncia EC2 amb Amazon Linux 2023 (igual que en el laboratori anterior).\nConnecta‚Äôt a la inst√†ncia EC2 via SSH.\nInstal¬∑la el client MySQL:\n# Busquem el paquet a instal¬∑lar\ndnf search mysql\n# Instal¬∑lem el client mariadb\nsudo dnf install mariadb105 -y\nConnecta‚Äôt a la base de dades RDS des de la inst√†ncia EC2:\nmysql -h hostname -u admin -p\n# Introdueix la contrassenya quan et demani\n\nEn aquest punt, observarem que no ens podem connectar a la base de dades. Aix√≤ √©s degut a que la base de dades est√† protegida per un Security Group que no permet connexions des de l‚Äôexterior. Per solucionar-ho, hem d‚Äôafegir una regla al Security Group de la base de dades per permetre connexions des de la inst√†ncia EC2.\n\nAnem a la consola d‚ÄôAmazon RDS.\nSeleccionem la nostra inst√†ncia de base de dades.\nA la secci√≥ de Connectivity & security, busquem el Security Group associat a la base de dades.\nFem clic al Security Group per editar les regles (semblant a default sg-0efc4051ab6288a2d).\nAfegim una nova regla d‚Äôentrada (Inbound rule) per permetre connexions des de l‚Äôadre√ßa IP de la nostra inst√†ncia EC2. Seleccionem el tipus de connexi√≥ MySQL/Aurora i introdu√Øm l‚Äôadre√ßa IP de la inst√†ncia EC2. Per fer-ho, has de clicar a Edit inbound rules i despr√©s afegir la regla seg√ºent:\n\n  Type: MySQL/Aurora\n  Protocol: TCP\n  Port Range: 3306\n  Source: Custom\n  Seleccionar el grup de seguretat de la inst√†ncia EC2 (launch-wizard-1)\n\n\n\n\n\n\nNotaObservaci√≥\n\n\n\nAquesta regla permetr√† connexions a la base de dades des de qualsevol inst√†ncia EC2 que utilitzi aquest grup de seguretat (launch-wizard-1).\n\n\n\nGuardem les regles i tornem a intentar connectar-nos a la base de dades des de la inst√†ncia EC2.\nSi tot ha anat b√©, ara s√≠ que ens podrem connectar a la base de dades.\nUn cop connectats, ja podem crear la base de dades wordpress i l‚Äôusuari wordpress amb tots els permisos.\nCREATE DATABASE wordpress;\nCREATE USER 'wordpress'@'%' IDENTIFIED BY 'wordpress';\nGRANT ALL PRIVILEGES ON wordpress.* TO 'wordpress'@'%';\nFLUSH PRIVILEGES;\nexit\nJa tenim la base de dades preparada per a la instal¬∑laci√≥ de WordPress.\n\n\nInstal¬∑laci√≥ de WordPress a l‚Äôinst√†ncia EC2\n\nPer instal¬∑lar WordPress, primer hem d‚Äôinstal¬∑lar un servidor web (Apache):\nsudo dnf install httpd -y\nsudo systemctl start httpd\nsudo systemctl enable httpd\n\n\n\n\n\n\n\nConsellNota\n\n\n\nObserveu que l‚Äôordre start inicia el servei Apache, per√≤ no el fa arrencar autom√†ticament en reiniciar la m√†quina. Per aix√≤, hem d‚Äôexecutar tamb√© l‚Äôordre enable.\n\n\n\nPer defecte, el grup de seguretat de la inst√†ncia EC2 no permet connexions HTTP (port 80). Podeu comprovar-ho intentant accedir a l‚Äôadre√ßa IP p√∫blica de la inst√†ncia EC2 des del navegador web. Veureu que no es pot connectar.\n\n\n\n\n\n\n\nConsellNota\n\n\n\nSi feu clic a l‚Äôenlla√ß de l‚Äôadre√ßa IP p√∫blica intentar√† accedir per https, per√≤ com que no tenim certificat SSL, no funcionar√†. Modifiqueu manualment la url per http://.\n\n\n\nHem d‚Äôafegir una regla d‚Äôentrada al grup de seguretat per permetre connexions HTTP.\n\nAnem a la consola d‚ÄôEC2.\nSeleccionem la nostra inst√†ncia EC2.\nA la secci√≥ de Security, fem clic al Security Group associat a la inst√†ncia (launch-wizard-1).\nAfegim una nova regla d‚Äôentrada (Inbound rule) per permetre connexions HTTP:\n\nType: HTTP\nProtocol: TCP\nPort Range: 80\nSource: Anywhere (0.0.0.0/0)\n\n\n\n\n\n\n\nConsellNota\n\n\n\nAquesta regla permetr√† connexions HTTP des de qualsevol lloc.\n\n\n\nUn cop afegida la regla, ja podem accedir a l‚Äôadre√ßa IP p√∫blica de la inst√†ncia EC2 des del navegador web. Haurem de veure la p√†gina per defecte d‚ÄôApache.\nUn requisit per a WordPress √©s tenir PHP instal¬∑lat. Instal¬∑lem PHP i les extensions necess√†ries:\nsudo dnf install php8.1 -y\nsudo dnf install php-curl php-zip php-gd php-soap php-intl php-mysqlnd php-pdo -y\nReiniciem el servei Apache per carregar les extensions de PHP:\nsudo systemctl restart httpd\nAra ja podem instal¬∑lar WordPress. Primer, descarreguem l‚Äô√∫ltima versi√≥ de WordPress i la desem a la carpeta per defecte d‚ÄôApache:\ncd /tmp\nwget https://wordpress.org/latest.tar.gz\ntar -xvzf latest.tar.gz\nsudo mv wordpress/* /var/www/html/\nsudo rm -rf wordpress latest.tar.gz\nsudo chown -R apache:apache /var/www/html/\nAra podeu accedir a l‚Äôadre√ßa IP p√∫blica de la inst√†ncia EC2 des del navegador web. Haureu de veure la p√†gina d‚Äôinstal¬∑laci√≥ de WordPress.\nSeguiu els passos de la instal¬∑laci√≥ de WordPress:\n\nSeleccioneu l‚Äôidioma (catal√†).\nFeu clic a Continua.\nFeu clic a Som-hi!.\nIntrodu√Øu les dades de connexi√≥ a la base de dades:\n\nDatabase Name: wordpress\nUsername: wordpress (usuari creat abans)\nPassword: wordpress (contrasenya creada abans)\nDatabase Host: l‚Äôendpoint de la base de dades RDS (per exemple, database-1.cik8jidkherq.us-east-1.rds.amazonaws.com)\nTable Prefix: wp_ (podeu deixar-ho per defecte)\n\nFeu clic a Envia.\nSi tot √©s correcte, feu clic a Executa la instal¬∑laci√≥.\nIntrodu√Øu el t√≠tol del lloc (AMSA Lab02), el nom d‚Äôusuari (jordi), la contrassenya (9T3nEBqnFqDW3uhc7S) i el correu electr√≤nic (jordi@example.com, pot ser qualsevol).\nFeu clic a Instal¬∑la WordPress.\nUn cop acabada la instal¬∑laci√≥, feu clic a Inicia sessi√≥ i introdu√Øu les credencials que heu creat.",
    "crumbs": [
      "Laboratoris",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Laboratori 02 ¬∑ Desplegament d'una aplicaci√≥ web amb AWS"
    ]
  },
  {
    "objectID": "laboratories/01-foundations/02-aws-wordpress.html#automatizaci√≥-de-la-installaci√≥",
    "href": "laboratories/01-foundations/02-aws-wordpress.html#automatizaci√≥-de-la-installaci√≥",
    "title": "Unitat 1 ¬∑ Desplegament d‚Äôuna aplicaci√≥ web amb AWS",
    "section": "Automatizaci√≥ de la instal¬∑laci√≥",
    "text": "Automatizaci√≥ de la instal¬∑laci√≥\nFins ara hem fet la instal¬∑laci√≥ de WordPress manualment (pas a pas amb ordres a l‚ÄôEC2). Una manera m√©s eficient √©s automatitzar aquest proc√©s utilitzant un script en bash.\n\n\n\n\n\n\nImportantExercici\n\n\n\n\nCreeu un script en bash que faci la instal¬∑laci√≥ de WordPress a la inst√†ncia EC2.\n\n\n\nAquest m√®tode encara no √©s ideal, ja que encara estem fent la instal¬∑laci√≥ manualment (hem de connectar-nos a l‚ÄôEC2 i executar l‚Äôscript). Una forma encara millor √©s utilitzar eines d‚Äôautomatitzaci√≥ com Ansible.\nEl primer pas √©s instal¬∑lar Ansible a la nostra m√†quina local (si no el tenim instal¬∑lat). Si no voleu fer-ho a la vostra m√†quina local, podeu utilitzar una altra inst√†ncia EC2 per fer-ho. Per tant, crearem 2 inst√†ncies EC2: una per fer d‚ÄôAnsible i una altra per instal¬∑lar WordPress, les podeu anomenar ansible i webserver.\nA les dues m√†quines EC2 heu d‚Äôinstal¬∑lar el programari ansible amb la comanda seg√ºent:\nsudo yum install ansible -y\nAnsible utilitza el protocol SSH per connectar-se a les m√†quines remotes, per tant, heu de tenir acc√©s SSH a la m√†quina webserver des de la m√†quina ansible. Per fer-ho, podeu crear un parell de claus SSH a la m√†quina ansible i afegir la clau p√∫blica al fitxer ~/.ssh/authorized_keys de la m√†quina webserver.\nUn cop tingueu acc√©s SSH a la m√†quina webserver des de la m√†quina ansible, podeu crear un fitxer d‚Äôinventari d‚ÄôAnsible per definir la m√†quina webserver. Creeu un fitxer anomenat hosts amb el contingut seg√ºent (substitu√Øu &lt;IP_INSTANCIA_EC2&gt; per l‚Äôadre√ßa IP p√∫blica de la vostra inst√†ncia EC2) i ~/.ssh/my-key-pair per la ruta a la vostra clau privada SSH:\n[webserver]\n&lt;IP_INSTANCIA_EC2&gt; ansible_user=ec2-user ansible_ssh_private_key_file=~/.ssh/my-key-pair\nOn  √©s l‚Äôadre√ßa IP p√∫blica de la vostra inst√†ncia EC2 on voleu instal¬∑lar WordPress i la ruta ~/.ssh/my-key-pair √©s la ruta a la vostra clau privada SSH que us permet accedir a la inst√†ncia EC2.\nA continuaci√≥, creeu un playbook d‚ÄôAnsible per instal¬∑lar WordPress a la m√†quina webserver. Un playbook √©s un fitxer YAML que defineix les tasques que Ansible ha d‚Äôexecutar a les m√†quines remotes. Podeu descargar el fitxer wordpress.yml o b√© crear-lo amb el contingut seg√ºent (substitu√Øu &lt;RDS_ENDPOINT&gt; per l‚Äôendpoint de la vostra base de dades RDS):\n---\n- hosts: webserver\n  become: yes\n  tasks:\n    - name: Actualitzar repositoris\n      dnf:\n        name: \"*\"\n        state: latest\n\n    - name: Instal¬∑lar Apache i PHP amb extensions\n      dnf:\n        name: \n          - httpd\n          - php\n          - php-mysqlnd\n          - php-gd\n          - php-xml\n          - php-json\n          - php-intl\n          - php-cli\n        state: present\n\n    - name: Activar i arrencar Apache\n      systemd:\n        name: httpd\n        state: started\n        enabled: yes\n\n    - name: Descarregar WordPress\n      get_url:\n        url: https://wordpress.org/latest.tar.gz\n        dest: /tmp/latest.tar.gz\n\n    - name: Descomprimir WordPress\n      unarchive:\n        src: /tmp/latest.tar.gz\n        dest: /var/www/html/\n        remote_src: yes\n        extra_opts: [--strip-components=1]\n\n    - name: Assignar permisos correctes\n      file:\n        path: /var/www/html\n        owner: apache\n        group: apache\n        mode: '0755'\n        recurse: yes\n\n    - name: Crear arxiu wp-config.php b√†sic\n      copy:\n        dest: /var/www/html/wp-config.php\n        content: |\n          &lt;?php\n          define('DB_NAME', 'wordpress');\n          define('DB_USER', 'wordpress');\n          define('DB_PASSWORD', 'wordpress');\n          define('DB_HOST', '&lt;RDS_ENDPOINT&gt;');\n          define('DB_CHARSET', 'utf8');\n          define('DB_COLLATE', '');\n          $table_prefix = 'wp_';\n          define('WP_DEBUG', false);\n          if ( !defined('ABSPATH') )\n            define('ABSPATH', __DIR__ . '/');\n          require_once ABSPATH . 'wp-settings.php';\nFinalment, executeu el playbook d‚ÄôAnsible per instal¬∑lar WordPress a la vostra inst√†ncia EC2.\nansible-playbook -i hosts wordpress.yml\nUn cop finalitzat, podeu accedir a l‚Äôadre√ßa IP p√∫blica de la inst√†ncia EC2 des del navegador web i completar la instal¬∑laci√≥ de WordPress com s‚Äôha descrit anteriorment.\n\n\n\n\n\n\nImportantExercici\n\n\n\n\nReviseu la documentaci√≥ d‚ÄôAnsible per utilitzar variables i millorar el playbook wordpress.yml fent-lo m√©s gen√®ric.",
    "crumbs": [
      "Laboratoris",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Laboratori 02 ¬∑ Desplegament d'una aplicaci√≥ web amb AWS"
    ]
  },
  {
    "objectID": "laboratories/01-foundations/02-aws-wordpress.html#entrega-del-laboratori",
    "href": "laboratories/01-foundations/02-aws-wordpress.html#entrega-del-laboratori",
    "title": "Unitat 1 ¬∑ Desplegament d‚Äôuna aplicaci√≥ web amb AWS",
    "section": "Entrega del laboratori",
    "text": "Entrega del laboratori\nHeu de pujar al Campus Virtual, un document amb les seg√ºents captures de pantalla:\n\nPantalla de la consola d‚ÄôAmazon RDS amb la base de dades creada.\nPantalla de la consola d‚ÄôEC2 amb la inst√†ncia EC2 creada (eg. podeu fer servir history per veure les ordres que heu executat).\nPantalla del navegador web amb la p√†gina d‚Äôinici de sessi√≥ de WordPress.\nPantalla del tauler d‚Äôadministraci√≥ de WordPress.\nPantalla del playbook d‚ÄôAnsible executat correctament.\n\nA m√©s, heu d‚Äôincloure el contingut dels seg√ºents fitxers:\n\nScript d‚ÄôAnsible modificat amb variables (si heu fet l‚Äôexercici).\nScript en bash per instal¬∑lar WordPress (si heu fet l‚Äôexercici).",
    "crumbs": [
      "Laboratoris",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Laboratori 02 ¬∑ Desplegament d'una aplicaci√≥ web amb AWS"
    ]
  },
  {
    "objectID": "laboratories/01-foundations/02-aws-wordpress.html#neteja-els-recursos-creats",
    "href": "laboratories/01-foundations/02-aws-wordpress.html#neteja-els-recursos-creats",
    "title": "Unitat 1 ¬∑ Desplegament d‚Äôuna aplicaci√≥ web amb AWS",
    "section": "Neteja els recursos creats",
    "text": "Neteja els recursos creats\nUn cop finalitzat podeu eliminar totes les inst√†ncies EC2 i la base de dades RDS per evitar c√†rrecs innecessaris al vostre compte d‚ÄôAWS.",
    "crumbs": [
      "Laboratoris",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Laboratori 02 ¬∑ Desplegament d'una aplicaci√≥ web amb AWS"
    ]
  },
  {
    "objectID": "laboratories/01-foundations/01-aws-introduction.html",
    "href": "laboratories/01-foundations/01-aws-introduction.html",
    "title": "Unitat 1 ¬∑ Laboratori de preparaci√≥ i comandes b√†siques d‚Äôadministraci√≥",
    "section": "",
    "text": "Per preparar l‚Äôentorn de treball a AWS, seguirem els seg√ºents passos:\n\nCrear un compte d‚ÄôAWS Academy\nAccedir al tauler d‚ÄôAWS\nCrear un parell de claus SSH\nLlan√ßar una inst√†ncia EC2\nConnectar-se a la inst√†ncia EC2 mitjan√ßant SSH\n\n\n\nReviseu el vostre correu electr√≤nic per veure si heu rebut un correu electr√≤nic d‚ÄôAWS Academy amb l‚Äôassumpte Invitaci√≥ al curs. Si no l‚Äôheu rebut, feu-m‚Äôho saber. El correu electr√≤nic contindr√† un bot√≥ amb el text Get Started. Feu clic en aquest bot√≥ per iniciar el proc√©s de registre.\n\nDespr√©s de fer clic al bot√≥ Get Started, sereu redirigits a la p√†gina d‚Äôinici de sessi√≥ d‚ÄôAWS Academy. Ara heu de fer clic al bot√≥ Create my account per iniciar el proc√©s de registre, com es mostra a continuaci√≥:\n\nSeleccioneu una contrasenya i completeu el proc√©s de registre. Un cop h√†giu completat el proc√©s de registre, sereu redirigits al tauler d‚ÄôAWS Academy. Enhorabona! Heu creat amb √®xit el vostre compte d‚ÄôAWS Academy.\n\n\n\nAra que heu creat el vostre compte d‚ÄôAWS Academy, podeu accedir al tauler d‚ÄôAWS. El primer que heu de fer √©s fer clic a la pestanya Courses (1) a la part esquerra de la pantalla. Veureu una llista de cursos disponibles per a vosaltres. Feu clic al curs AWS Academy Learner Lab (2), com es mostra a la captura de pantalla seg√ºent:\n\n\n\n\n\n\n\nNota\n\n\n\nEl curs AWS Academy Learner Lab √©s el curs que utilitzareu per completar els laboratoris pr√†ctics, si recordeu a la primera sessi√≥ vam parlar del curs AWS Academy Cloud Foundations, que no √©s obligatori per√≤ √©s altament recomanat per a aquells que vulguin tenir una base m√©s s√≤lida i obtenir el 5% de l‚Äôapartat (Async Activities AWS).\n\n\n\n\n\n\n\n\nAlerta\n\n\n\nTingueu en compte que nom√©s hi ha un curs a la captura de pantalla seg√ºent, no √©s el que haur√≠eu de veure, haur√≠eu de veure dos cursos, un per al AWS Academy Cloud Foundations i un per al AWS Academy Learner Lab. Si no veieu el curs AWS Academy Cloud Foundations i voleu tenir acc√©s a ell, feu-m‚Äôho saber.\n\n\nAra hem de buscar la pestanya Modules (1) a la part esquerra de la pantalla. Feu clic en ella i veureu una llista de m√≤duls disponibles per a vosaltres. Feu clic en el m√≤dul AWS Academy Learner Lab (2), com es mostra a continuaci√≥:\n\nAra se us demanar√† que accepteu els termes i condicions del curs. Feu-ho despla√ßant-vos fins al final de la p√†gina i fent clic al bot√≥ I Agree.\n\nDespr√©s d‚Äôacceptar els termes i condicions, ara nom√©s heu de fer clic al bot√≥ Start Lab.\n\nAra doneu-li uns minuts per carregar. Veureu aquesta animaci√≥ mentre el laboratori s‚Äôest√† preparant per a vosaltres:\n\nFinalment, quan el laboratori estigui llest, veureu que el punt al costat de AWS √©s verd. Tamb√© veureu un temporitzador que compta enrere des de 4 hores. Aquest √©s el temps que teniu per treballar al laboratori. A l‚Äôesquerra del temporitzador veureu com va el vostre pressupost. Teniu un pressupost de 50 d√≤lars per gastar en serveis d‚ÄôAWS. Feu clic a AWS per accedir al tauler d‚ÄôAWS, com es mostra a continuaci√≥:\n\n\n\n\n\n\n\nImportantConsideracions sobre els laboratoris\n\n\n\n\nEls laboratoris s√≥n un entorn real d‚ÄôAWS, per tant, √©s important que tingueu cura dels recursos i de les vostres accions.\nSi superes el pressupost de 50 d√≤lars, ja no tindr√†s acc√©s al tauler d‚ÄôAWS i perdr√†s la teva feina. Assegureu-vos de vigilar el pressupost, √©s responsabilitat de cada estudiant mantenir-se dins del pressupost.\nEls laboratoris tenen una durada de 4 hores. Un cop passades les 4 hores, la sessi√≥ expirar√† i no podreu accedir al tauler d‚ÄôAWS. No obstant aix√≤, aix√≤ no vol dir que perdr√†s el teu treball autom√†ticament. Les tasques i recursos que has creat (com ara inst√†ncies EC2, buckets de S3, etc.) es mantindran accessibles entre sessions, sempre que no els eliminis manualment. Podeu tornar a iniciar el laboratori de forma il¬∑limitada, per√≤ √©s una bona pr√†ctica aturar o tancar manualment els serveis que ja no necessiteu per evitar que consumeixin recursos innecess√†riament.\n\nPer tant, si comences un laboratori i el deixes a mig fer, podr√†s reprendre‚Äôl en una sessi√≥ posterior.\n\n\nGenial! Ara heu accedit al tauler d‚ÄôAWS. Veureu una pantalla similar a la seg√ºent:\n\n\n\n\nLa clau SSH √©s un mecanisme de seguretat que permet l‚Äôautenticaci√≥ segura entre dos sistemes. El servidor d‚ÄôAmazon EC2 t√© la clau p√∫blica i el client (el vostre ordinador local) t√© la clau privada. Quan el client es connecta al servidor, el servidor comprova si la clau p√∫blica del client coincideix amb la clau privada del servidor. Si les claus coincideixen, el client es connecta al servidor. Per tant, la clau privada no s‚Äôha de compartir amb ning√∫. Mentre que la clau p√∫blica es pot compartir amb qualsevol i la podeu fer servir en m√∫ltiples servidors. A dia d‚Äôavui, no hi ha cap mecanisme per obtenir la clau privada a partir de la clau p√∫blica.\nPer crear un parell de claus SSH, utilitzarem la comanda ssh-keygen. Aquesta comanda est√† disponible a la majoria dels sistemes operatius, inclosos Linux, MacOS i Windows (a trav√©s de PowerShell o Windows Subsystem for Linux - WSL). Si utilitzeu Windows i no teniu acc√©s a ssh-keygen, podeu utilitzar eines com PuTTYgen per generar les claus SSH.\nAquesta comanda t√© diversos par√†metres que permeten personalitzar la clau SSH. Els par√†metres m√©s comuns s√≥n:\n\n-t: Especifica el tipus de xifratge de la clau. Els tipus m√©s comuns s√≥n rsa, dsa, ecdsa i ed25519.\n-f: Especifica el nom del fitxer on es guardar√† la clau.\n-b: Especifica la longitud de la clau en bits.\n\n\n\n\n\n\n\nNota\n\n\n\n√âs molt important entendre quan estem treballant al nostre ordinador local i quan estem treballant a la m√†quina remota. El primer pas sempre ser√† obrir un terminal al nostre propi ordinador, per√≤ un cop ens connectem a la m√†quina remota mitjan√ßant l‚Äôordre SSH, encara que sembli que res no ha canviat, el terminal ara est√† connectat a la m√†quina remota. Aix√≤ vol dir que a partir d‚Äôara les ordres que escrivim s‚Äôexecutaran a la m√†quina remota, no al nostre ordinador local. Si no esteu segurs si esteu treballant al vostre ordinador local o a la m√†quina remota, nom√©s heu d‚Äôescriure pwd i veure quin √©s el resultat. Si √©s el vostre ordinador local, veureu la ruta al directori en qu√® esteu al vostre ordinador local, si √©s la m√†quina remota, veureu la ruta al directori en qu√® esteu a la m√†quina remota. pwd significa print working directory.\n\n\nEl primer pas per crear el parell de claus SSH ser√† assegurar-nos que el directori .ssh existeix. Per fer-ho, obriu un terminal al vostre ordinador local i escriviu la seg√ºent ordre:\nmkdir .ssh\n\n\n\n\n\n\nAlerta\n\n\n\nSi el directori .ssh ja existeix, obtindreu un error indicant que el directori ja existeix. Aix√≤ √©s normal, nom√©s vol dir que el directori ja estava all√†.\n\n\nAra crearem el parell de claus SSH. Escriviu la seg√ºent ordre:\nssh-keygen -t rsa -f .ssh/aws-keypair\nSe us demanar√† que introdu√Øu una contrasenya. Podeu deixar-la buida prement Enter dues vegades (us recomano fer-ho per simplicitat, si no, cada vegada que us connecteu a la m√†quina remota haureu d‚Äôintroduir la contrasenya). Haur√≠eu de veure una sortida similar a la seg√ºent:\nGenerating public/private rsa key pair.\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in .ssh/aws-keypair\nYour public key has been saved in .ssh/aws-keypair.pub\nThe key fingerprint is:\nSHA256:uhINFvYaJh6MbwFQCXdZyrW7W46jFGHUhLglDgQ5OYE ferran@DESKTOP-0841\n+---[RSA 3072]----+\n|XBooo*+          |\n|E.++*o..         |\n| O ==o.          |\n|. B.=...         |     \n| o *.=. S        |\n|  + o..o         |\n| .  ..o .        |\n|   .. .*         |\n|    .o+..        |\n+----[SHA256]-----+\nAqu√≠, ssh-keygen √©s l‚Äôordre per generar el parell de claus, -t rsa especifica el tipus de clau a crear, en aquest cas una clau RSA, i -f .ssh/aws-keypair especifica el nom del fitxer per al parell de claus. Podeu anomenar el fitxer com vulgueu, per√≤ √©s important recordar el nom que li heu donat. En aquest cas, l‚Äôestem anomenant aws-keypair. Us recomano que el nomeu igual que jo per no confondre-us m√©s endavant.\n\n\n\n\n\n\nConsellEntendre les claus SSH - Veure video\n\n\n\nEs clau entendre com funcionen les claus p√∫bliques i privades i com s‚Äôutilitzen per establir una connexi√≥ SSH, heu de veure aquest v√≠deo.\n\n\nUna altra vegada, podem comprovar el contingut del directori .ssh escrivint la seg√ºent ordre:\nls .ssh\nHaur√≠em de veure ara dos fitxers, aws-keypair i aws-keypair.pub. El primer √©s la clau privada i el segon √©s la clau p√∫blica. La clau privada mai s‚Äôha de compartir amb ning√∫, mentre que la clau p√∫blica √©s la que s‚Äôha de compartir amb la m√†quina remota. Una ordre √∫til per inspeccionar el contingut d‚Äôun fitxer √©s cat. Per exemple, per veure el contingut de la clau p√∫blica, escriviu la seg√ºent ordre:\ncat .ssh/aws-keypair.pub\n\n\n\n\n\n\nNota\n\n\n\nTamb√© podeu inspeccionar el contingut de la carpeta .ssh i dels fitxers que hi ha dins utilitzant l‚ÄôExplorador de fitxers (o Finder en dispositius Mac). Per√≤ tingueu cura, per defecte, les carpetes i fitxers que comencen amb un . (com .ssh) estan ocults en la majoria d‚Äôexploradors de fitxers i si voleu poder veure‚Äôls, haureu d‚Äôhabilitar l‚Äôopci√≥ per mostrar fitxers ocults. Consulteu aquest tutorial per veure com fer-ho al vostre sistema operatiu. Una altra cosa a tenir en compte √©s que les extensions de fitxer (√©s a dir, la part del nom del fitxer que ve despr√©s del darrer .) tamb√© solen estar ocultes, aix√≤ vol dir que a l‚ÄôExplorador de fitxers potser veieu dos fitxers anomenats aws-keypair quan en realitat un √©s aws-keypair i l‚Äôaltre √©s aws-keypair.pub. Aqu√≠ teniu un tutorial sobre com mostrar les extensions de fitxer al vostre sistema operatiu.\nNo cal que us preocupeu per res d‚Äôaix√≤ si esteu utilitzant el terminal, el terminal us mostrar√† els fitxers i les seves extensions tal com s√≥n. Per√≤ per veure fitxers i carpetes ocults (aquells que comencen amb un .) haureu d‚Äôutilitzar l‚Äôordre ls -a.\nls -a .ssh\n\n\nHem creat un parell de claus SSH que podem utilitzar per connectar-nos a m√†quines remotes. A continuaci√≥, importarem la nostra clau p√∫blica a AWS.\n\n\n\nAra que hem creat el nostre parell de claus SSH, hem d‚Äôimportar la clau p√∫blica a AWS per poder utilitzar-la per connectar-nos a les inst√†ncies EC2 que crearem m√©s endavant. Per fer-ho, hem de tornar al tauler d‚ÄôAWS, que √©s on vam acabar despr√©s de completar el Pas 2.\nAra anirem a la barra de cerca i buscarem el servei EC2. Escriviu EC2 a la barra de cerca i feu clic al servei EC2, com es mostra a continuaci√≥:\n\n\n\nAWS Dashboard\n\n\nAra veureu el tauler d‚ÄôEC2. A la part esquerra de la pantalla, veureu una llista d‚Äôopcions. Feu clic a Key Pairs (Pares de claus) i despr√©s a Create key pair (Crear parell de claus), com es mostra a continuaci√≥:\n\n\n\nAWS Dashboard\n\n\nAra heu de donar un nom al parell de claus. Podeu anomenar-lo com vulgueu, per√≤ us suggereixo que el anomeneu aws-keypair per mantenir les coses simples. Assegureu-vos que l‚Äôopci√≥ Key type (Tipus de clau) estigui configurada a RSA i que l‚Äôopci√≥ Private key file format (Format del fitxer de clau privada) estigui configurada a PEM. Aix√≤ √©s important perqu√® la clau privada s‚Äôha d‚Äôutilitzar en format PEM per connectar-se a la m√†quina remota. Feu clic a Create key pair (Crear parell de claus), com es mostra a continuaci√≥:\n\n\n\nAWS Dashboard\n\n\n\n\n\n\n\n\nNota\n\n\n\nPodeu tamb√© fer clic al bot√≥ Browse per seleccionar el fitxer de clau p√∫blica des del vostre ordinador. Nom√©s cal que feu clic a Browse, navegueu fins a la carpeta .ssh i seleccioneu el fitxer aws-keypair.pub. Per√≤ recordeu, el fitxer ha de ser el fitxer de clau p√∫blica, no el fitxer de clau privada. √âs a dir, el fitxer ha de tenir l‚Äôextensi√≥ .pub. Un cop h√†giu seleccionat el fitxer, feu clic a Import Key Pair.\nRecordeu que com s‚Äôha explicat a la nota anterior, potser no veureu la carpeta .ssh a l‚Äôexplorador de fitxers i potser no veureu l‚Äôextensi√≥ .pub del fitxer. Si teniu problemes amb aix√≤, us recomano utilitzar el terminal per copiar el contingut del fitxer com es mostra a la captura de pantalla anterior.\n\n\nAra haur√≠eu de veure el parell de claus que acabeu d‚Äôimportar a la llista de parells de claus. Probablement hi haur√† un altre parell de claus all√†, aix√≤ est√† b√©, podeu ignorar-lo. Perfecte! Ara heu importat la clau p√∫blica a AWS. A continuaci√≥, crearem una inst√†ncia EC2 i la configurarem per utilitzar el parell de claus que acabem d‚Äôimportar.\n\n\n\nEl primer pas ser√† anar al tauler d‚ÄôEC2. Podeu fer-ho escrivint EC2 a la barra de cerca i fent clic al servei EC2, com vam fer al principi del Pas 3:\n\n\n\nAWS Dashboard\n\n\nUn cop estigueu al tauler d‚ÄôEC2, feu clic a Instances &gt; Launch Instance, com es mostra a continuaci√≥:\n\n\n\nAWS Dashboard\n\n\nDeixeu-ho tot com est√† excepte l‚Äôopci√≥ Key pair (login) (Parell de claus (inici de sessi√≥)) (haureu de despla√ßar-vos cap avall per trobar-la). Feu clic al men√∫ desplegable i seleccioneu el parell de claus que heu importat anteriorment. En aquest cas, hauria de ser aws-keypair. Feu clic a Launch instance, com es mostra a continuaci√≥:\n\n\n\nAWS Dashboard\n\n\nAra tenim una inst√†ncia EC2 en execuci√≥ amb la nostra clau p√∫blica importada. Aix√≤ significa que tenim una m√†quina remota a AWS a la qual podem connectar-nos des del nostre ordinador local mitjan√ßant SSH. Vegem com fer-ho.\n\n\n\nAbans de connectar-nos a la m√†quina remota, vull que proveu alguns ordres al vostre ordinador local que despr√©s repetirem un cop estiguem connectats a la m√†quina remota. Una de les ordres √©s pwd, que significa print working directory, com ja s‚Äôha comentat anteriorment. Aquesta ordre us mostrar√† la ruta al directori en qu√® esteu actualment. L‚Äôaltra ordre √©s whoami, que us mostrar√† el nom d‚Äôusuari amb el qual heu iniciat sessi√≥. Proveu aquestes ordres al vostre ordinador local i recordeu-ne la sortida. Les repetirem un cop estiguem connectats a la m√†quina remota.\nA continuaci√≥ es mostra la sortida que obtinc al meu ordinador local:\nPS C:\\Users\\fnao&gt; pwd\n\nPS C:\\Users\\fnao&gt; whoami\ngft\\fnao\nPS C:\\Users\\fnao&gt;\n\n\n\n\n\n\nAlerta\n\n\n\nEl ordinador local que utilitzo √©s un port√†til amb Windows, aix√≠ que la sortida ser√† diferent de la vostra si esteu utilitzant un Mac o un ordinador amb Linux. Substitueix fnao pel vostre nom d‚Äôusuari i C:\\Users\\fnao per la ruta al vostre directori d‚Äôusuari.\n\n\nPer connectar-nos a la inst√†ncia EC2, utilitzarem el terminal del nostre ordinador local. Aix√≠ com vam fer al principi Pas 3, obriu un terminal al vostre ordinador local. Utilitzarem l‚Äôordre ssh per connectar-nos a la m√†quina remota. L‚Äôordre tindr√† aquest aspecte:\nssh -i .ssh/aws-keypair ec2-user@&lt;public-ip&gt;\nHaureu de substituir &lt;public-ip&gt; per la IP p√∫blica de la inst√†ncia EC2. Per trobar la IP p√∫blica, torneu al tauler d‚ÄôEC2 i feu clic a Instances a la part esquerra de la pantalla. Veureu una llista d‚Äôinst√†ncies, feu clic a la inst√†ncia que heu creat. Veureu la IP p√∫blica a la part inferior de la pantalla com es mostra a continuaci√≥:\n\n\n\nAWS Dashboard\n\n\nTant l‚Äôadre√ßa Public IPv4 address com el Public IPv4 DNS es poden utilitzar com a &lt;public-ip&gt; a l‚Äôordre ssh. Copieu el que preferiu i enganxeu-lo a l‚Äôordre ssh. L‚Äôordre hauria d‚Äôassemblar-se a alguna cosa aix√≠ si utilitzeu l‚Äôadre√ßa IP:\nssh -i .ssh/aws-keypair ec2-user@98.84.68.70\no aix√≠ si utilitzeu el DNS:\nssh -i .ssh/aws-keypair ec2-user@ec2-98-84-68-70.compute-1.amazonaws.com\nSi √©s la primera vegada que us connecteu a la m√†quina remota, obtindreu una advert√®ncia. Aix√≤ √©s normal, nom√©s heu d‚Äôescriure yes i pr√©mer Enter. Ara haur√≠eu de estar connectats a la m√†quina remota. Veureu un missatge similar al seg√ºent:\n   ,     #_\n   ~\\_  ####_        Amazon Linux 2023\n  ~~  \\_#####\\\n  ~~     \\###|\n  ~~       \\#/ ___   https://aws.amazon.com/linux/amazon-linux-2023\n   ~~       V~' '-&gt;\n    ~~~         /\n      ~~._.   _/\n         _/ _/\n       _/m/'\nLast login: Sun Mar  2 09:50:33 2025 from 79.156.58.43\n[ec2-user@ip-172-31-86-82 ~]$\n\n\n\n\n\n\nImportantExercici\n\n\n\nInvestiga quin √©s el significat i la import√†nica del missatge que acceptes quan et connectes per primera vegada a la m√†quina remota. Per qu√® √©s important acceptar aquest missatge? Qu√® significa? Quines implicacions t√©?\n\n\nFant√†stic! Ara esteu connectats a la m√†quina remota. √âs important entendre que a partir d‚Äôara, les ordres que escrivim s‚Äôexecutaran a la m√†quina remota, no al nostre ordinador local. Per comprovar-ho, escriviu les ordres pwd i whoami com vam fer al nostre ordinador local. Veureu que la sortida √©s diferent. A continuaci√≥ es mostra la sortida que obtinc a la m√†quina remota:\n[ec2-user@ip-172-31-86-82 ~]$ pwd\n/home/ec2-user\n[ec2-user@ip-172-31-86-82 ~]$ whoami\nec2-user\n[ec2-user@ip-172-31-86-82 ~]$\n\n\n\n\n\n\nNota\n\n\n\nAquesta vegada la sortida hauria de ser la mateixa que la meva. Observeu que el prompt [ec2-user@ip-172-31-86-82 ~]$ √©s diferent, per√≤ aix√≤ no forma part de les sortides de les ordres. Les sortides de les ordres s√≥n pwd i whoami, que s√≥n home/ec2-user i ec2-user respectivament. El prompt √©s nom√©s una manera de mostrar-vos on esteu al sistema de fitxers i qui sou com a usuari connectat.\n\n\n\n\n\n\n\n\nImportantExercici\n\n\n\nUtilitza la comanada lastlog i investiga com administrador com podem trueure partit d‚Äôaquesta informaci√≥.",
    "crumbs": [
      "Laboratoris",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Laboratori 01 ¬∑ Introducci√≥ a AWS"
    ]
  },
  {
    "objectID": "laboratories/01-foundations/01-aws-introduction.html#preparant-lentorn-de-treball-remot",
    "href": "laboratories/01-foundations/01-aws-introduction.html#preparant-lentorn-de-treball-remot",
    "title": "Unitat 1 ¬∑ Laboratori de preparaci√≥ i comandes b√†siques d‚Äôadministraci√≥",
    "section": "",
    "text": "Per preparar l‚Äôentorn de treball a AWS, seguirem els seg√ºents passos:\n\nCrear un compte d‚ÄôAWS Academy\nAccedir al tauler d‚ÄôAWS\nCrear un parell de claus SSH\nLlan√ßar una inst√†ncia EC2\nConnectar-se a la inst√†ncia EC2 mitjan√ßant SSH\n\n\n\nReviseu el vostre correu electr√≤nic per veure si heu rebut un correu electr√≤nic d‚ÄôAWS Academy amb l‚Äôassumpte Invitaci√≥ al curs. Si no l‚Äôheu rebut, feu-m‚Äôho saber. El correu electr√≤nic contindr√† un bot√≥ amb el text Get Started. Feu clic en aquest bot√≥ per iniciar el proc√©s de registre.\n\nDespr√©s de fer clic al bot√≥ Get Started, sereu redirigits a la p√†gina d‚Äôinici de sessi√≥ d‚ÄôAWS Academy. Ara heu de fer clic al bot√≥ Create my account per iniciar el proc√©s de registre, com es mostra a continuaci√≥:\n\nSeleccioneu una contrasenya i completeu el proc√©s de registre. Un cop h√†giu completat el proc√©s de registre, sereu redirigits al tauler d‚ÄôAWS Academy. Enhorabona! Heu creat amb √®xit el vostre compte d‚ÄôAWS Academy.\n\n\n\nAra que heu creat el vostre compte d‚ÄôAWS Academy, podeu accedir al tauler d‚ÄôAWS. El primer que heu de fer √©s fer clic a la pestanya Courses (1) a la part esquerra de la pantalla. Veureu una llista de cursos disponibles per a vosaltres. Feu clic al curs AWS Academy Learner Lab (2), com es mostra a la captura de pantalla seg√ºent:\n\n\n\n\n\n\n\nNota\n\n\n\nEl curs AWS Academy Learner Lab √©s el curs que utilitzareu per completar els laboratoris pr√†ctics, si recordeu a la primera sessi√≥ vam parlar del curs AWS Academy Cloud Foundations, que no √©s obligatori per√≤ √©s altament recomanat per a aquells que vulguin tenir una base m√©s s√≤lida i obtenir el 5% de l‚Äôapartat (Async Activities AWS).\n\n\n\n\n\n\n\n\nAlerta\n\n\n\nTingueu en compte que nom√©s hi ha un curs a la captura de pantalla seg√ºent, no √©s el que haur√≠eu de veure, haur√≠eu de veure dos cursos, un per al AWS Academy Cloud Foundations i un per al AWS Academy Learner Lab. Si no veieu el curs AWS Academy Cloud Foundations i voleu tenir acc√©s a ell, feu-m‚Äôho saber.\n\n\nAra hem de buscar la pestanya Modules (1) a la part esquerra de la pantalla. Feu clic en ella i veureu una llista de m√≤duls disponibles per a vosaltres. Feu clic en el m√≤dul AWS Academy Learner Lab (2), com es mostra a continuaci√≥:\n\nAra se us demanar√† que accepteu els termes i condicions del curs. Feu-ho despla√ßant-vos fins al final de la p√†gina i fent clic al bot√≥ I Agree.\n\nDespr√©s d‚Äôacceptar els termes i condicions, ara nom√©s heu de fer clic al bot√≥ Start Lab.\n\nAra doneu-li uns minuts per carregar. Veureu aquesta animaci√≥ mentre el laboratori s‚Äôest√† preparant per a vosaltres:\n\nFinalment, quan el laboratori estigui llest, veureu que el punt al costat de AWS √©s verd. Tamb√© veureu un temporitzador que compta enrere des de 4 hores. Aquest √©s el temps que teniu per treballar al laboratori. A l‚Äôesquerra del temporitzador veureu com va el vostre pressupost. Teniu un pressupost de 50 d√≤lars per gastar en serveis d‚ÄôAWS. Feu clic a AWS per accedir al tauler d‚ÄôAWS, com es mostra a continuaci√≥:\n\n\n\n\n\n\n\nImportantConsideracions sobre els laboratoris\n\n\n\n\nEls laboratoris s√≥n un entorn real d‚ÄôAWS, per tant, √©s important que tingueu cura dels recursos i de les vostres accions.\nSi superes el pressupost de 50 d√≤lars, ja no tindr√†s acc√©s al tauler d‚ÄôAWS i perdr√†s la teva feina. Assegureu-vos de vigilar el pressupost, √©s responsabilitat de cada estudiant mantenir-se dins del pressupost.\nEls laboratoris tenen una durada de 4 hores. Un cop passades les 4 hores, la sessi√≥ expirar√† i no podreu accedir al tauler d‚ÄôAWS. No obstant aix√≤, aix√≤ no vol dir que perdr√†s el teu treball autom√†ticament. Les tasques i recursos que has creat (com ara inst√†ncies EC2, buckets de S3, etc.) es mantindran accessibles entre sessions, sempre que no els eliminis manualment. Podeu tornar a iniciar el laboratori de forma il¬∑limitada, per√≤ √©s una bona pr√†ctica aturar o tancar manualment els serveis que ja no necessiteu per evitar que consumeixin recursos innecess√†riament.\n\nPer tant, si comences un laboratori i el deixes a mig fer, podr√†s reprendre‚Äôl en una sessi√≥ posterior.\n\n\nGenial! Ara heu accedit al tauler d‚ÄôAWS. Veureu una pantalla similar a la seg√ºent:\n\n\n\n\nLa clau SSH √©s un mecanisme de seguretat que permet l‚Äôautenticaci√≥ segura entre dos sistemes. El servidor d‚ÄôAmazon EC2 t√© la clau p√∫blica i el client (el vostre ordinador local) t√© la clau privada. Quan el client es connecta al servidor, el servidor comprova si la clau p√∫blica del client coincideix amb la clau privada del servidor. Si les claus coincideixen, el client es connecta al servidor. Per tant, la clau privada no s‚Äôha de compartir amb ning√∫. Mentre que la clau p√∫blica es pot compartir amb qualsevol i la podeu fer servir en m√∫ltiples servidors. A dia d‚Äôavui, no hi ha cap mecanisme per obtenir la clau privada a partir de la clau p√∫blica.\nPer crear un parell de claus SSH, utilitzarem la comanda ssh-keygen. Aquesta comanda est√† disponible a la majoria dels sistemes operatius, inclosos Linux, MacOS i Windows (a trav√©s de PowerShell o Windows Subsystem for Linux - WSL). Si utilitzeu Windows i no teniu acc√©s a ssh-keygen, podeu utilitzar eines com PuTTYgen per generar les claus SSH.\nAquesta comanda t√© diversos par√†metres que permeten personalitzar la clau SSH. Els par√†metres m√©s comuns s√≥n:\n\n-t: Especifica el tipus de xifratge de la clau. Els tipus m√©s comuns s√≥n rsa, dsa, ecdsa i ed25519.\n-f: Especifica el nom del fitxer on es guardar√† la clau.\n-b: Especifica la longitud de la clau en bits.\n\n\n\n\n\n\n\nNota\n\n\n\n√âs molt important entendre quan estem treballant al nostre ordinador local i quan estem treballant a la m√†quina remota. El primer pas sempre ser√† obrir un terminal al nostre propi ordinador, per√≤ un cop ens connectem a la m√†quina remota mitjan√ßant l‚Äôordre SSH, encara que sembli que res no ha canviat, el terminal ara est√† connectat a la m√†quina remota. Aix√≤ vol dir que a partir d‚Äôara les ordres que escrivim s‚Äôexecutaran a la m√†quina remota, no al nostre ordinador local. Si no esteu segurs si esteu treballant al vostre ordinador local o a la m√†quina remota, nom√©s heu d‚Äôescriure pwd i veure quin √©s el resultat. Si √©s el vostre ordinador local, veureu la ruta al directori en qu√® esteu al vostre ordinador local, si √©s la m√†quina remota, veureu la ruta al directori en qu√® esteu a la m√†quina remota. pwd significa print working directory.\n\n\nEl primer pas per crear el parell de claus SSH ser√† assegurar-nos que el directori .ssh existeix. Per fer-ho, obriu un terminal al vostre ordinador local i escriviu la seg√ºent ordre:\nmkdir .ssh\n\n\n\n\n\n\nAlerta\n\n\n\nSi el directori .ssh ja existeix, obtindreu un error indicant que el directori ja existeix. Aix√≤ √©s normal, nom√©s vol dir que el directori ja estava all√†.\n\n\nAra crearem el parell de claus SSH. Escriviu la seg√ºent ordre:\nssh-keygen -t rsa -f .ssh/aws-keypair\nSe us demanar√† que introdu√Øu una contrasenya. Podeu deixar-la buida prement Enter dues vegades (us recomano fer-ho per simplicitat, si no, cada vegada que us connecteu a la m√†quina remota haureu d‚Äôintroduir la contrasenya). Haur√≠eu de veure una sortida similar a la seg√ºent:\nGenerating public/private rsa key pair.\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in .ssh/aws-keypair\nYour public key has been saved in .ssh/aws-keypair.pub\nThe key fingerprint is:\nSHA256:uhINFvYaJh6MbwFQCXdZyrW7W46jFGHUhLglDgQ5OYE ferran@DESKTOP-0841\n+---[RSA 3072]----+\n|XBooo*+          |\n|E.++*o..         |\n| O ==o.          |\n|. B.=...         |     \n| o *.=. S        |\n|  + o..o         |\n| .  ..o .        |\n|   .. .*         |\n|    .o+..        |\n+----[SHA256]-----+\nAqu√≠, ssh-keygen √©s l‚Äôordre per generar el parell de claus, -t rsa especifica el tipus de clau a crear, en aquest cas una clau RSA, i -f .ssh/aws-keypair especifica el nom del fitxer per al parell de claus. Podeu anomenar el fitxer com vulgueu, per√≤ √©s important recordar el nom que li heu donat. En aquest cas, l‚Äôestem anomenant aws-keypair. Us recomano que el nomeu igual que jo per no confondre-us m√©s endavant.\n\n\n\n\n\n\nConsellEntendre les claus SSH - Veure video\n\n\n\nEs clau entendre com funcionen les claus p√∫bliques i privades i com s‚Äôutilitzen per establir una connexi√≥ SSH, heu de veure aquest v√≠deo.\n\n\nUna altra vegada, podem comprovar el contingut del directori .ssh escrivint la seg√ºent ordre:\nls .ssh\nHaur√≠em de veure ara dos fitxers, aws-keypair i aws-keypair.pub. El primer √©s la clau privada i el segon √©s la clau p√∫blica. La clau privada mai s‚Äôha de compartir amb ning√∫, mentre que la clau p√∫blica √©s la que s‚Äôha de compartir amb la m√†quina remota. Una ordre √∫til per inspeccionar el contingut d‚Äôun fitxer √©s cat. Per exemple, per veure el contingut de la clau p√∫blica, escriviu la seg√ºent ordre:\ncat .ssh/aws-keypair.pub\n\n\n\n\n\n\nNota\n\n\n\nTamb√© podeu inspeccionar el contingut de la carpeta .ssh i dels fitxers que hi ha dins utilitzant l‚ÄôExplorador de fitxers (o Finder en dispositius Mac). Per√≤ tingueu cura, per defecte, les carpetes i fitxers que comencen amb un . (com .ssh) estan ocults en la majoria d‚Äôexploradors de fitxers i si voleu poder veure‚Äôls, haureu d‚Äôhabilitar l‚Äôopci√≥ per mostrar fitxers ocults. Consulteu aquest tutorial per veure com fer-ho al vostre sistema operatiu. Una altra cosa a tenir en compte √©s que les extensions de fitxer (√©s a dir, la part del nom del fitxer que ve despr√©s del darrer .) tamb√© solen estar ocultes, aix√≤ vol dir que a l‚ÄôExplorador de fitxers potser veieu dos fitxers anomenats aws-keypair quan en realitat un √©s aws-keypair i l‚Äôaltre √©s aws-keypair.pub. Aqu√≠ teniu un tutorial sobre com mostrar les extensions de fitxer al vostre sistema operatiu.\nNo cal que us preocupeu per res d‚Äôaix√≤ si esteu utilitzant el terminal, el terminal us mostrar√† els fitxers i les seves extensions tal com s√≥n. Per√≤ per veure fitxers i carpetes ocults (aquells que comencen amb un .) haureu d‚Äôutilitzar l‚Äôordre ls -a.\nls -a .ssh\n\n\nHem creat un parell de claus SSH que podem utilitzar per connectar-nos a m√†quines remotes. A continuaci√≥, importarem la nostra clau p√∫blica a AWS.\n\n\n\nAra que hem creat el nostre parell de claus SSH, hem d‚Äôimportar la clau p√∫blica a AWS per poder utilitzar-la per connectar-nos a les inst√†ncies EC2 que crearem m√©s endavant. Per fer-ho, hem de tornar al tauler d‚ÄôAWS, que √©s on vam acabar despr√©s de completar el Pas 2.\nAra anirem a la barra de cerca i buscarem el servei EC2. Escriviu EC2 a la barra de cerca i feu clic al servei EC2, com es mostra a continuaci√≥:\n\n\n\nAWS Dashboard\n\n\nAra veureu el tauler d‚ÄôEC2. A la part esquerra de la pantalla, veureu una llista d‚Äôopcions. Feu clic a Key Pairs (Pares de claus) i despr√©s a Create key pair (Crear parell de claus), com es mostra a continuaci√≥:\n\n\n\nAWS Dashboard\n\n\nAra heu de donar un nom al parell de claus. Podeu anomenar-lo com vulgueu, per√≤ us suggereixo que el anomeneu aws-keypair per mantenir les coses simples. Assegureu-vos que l‚Äôopci√≥ Key type (Tipus de clau) estigui configurada a RSA i que l‚Äôopci√≥ Private key file format (Format del fitxer de clau privada) estigui configurada a PEM. Aix√≤ √©s important perqu√® la clau privada s‚Äôha d‚Äôutilitzar en format PEM per connectar-se a la m√†quina remota. Feu clic a Create key pair (Crear parell de claus), com es mostra a continuaci√≥:\n\n\n\nAWS Dashboard\n\n\n\n\n\n\n\n\nNota\n\n\n\nPodeu tamb√© fer clic al bot√≥ Browse per seleccionar el fitxer de clau p√∫blica des del vostre ordinador. Nom√©s cal que feu clic a Browse, navegueu fins a la carpeta .ssh i seleccioneu el fitxer aws-keypair.pub. Per√≤ recordeu, el fitxer ha de ser el fitxer de clau p√∫blica, no el fitxer de clau privada. √âs a dir, el fitxer ha de tenir l‚Äôextensi√≥ .pub. Un cop h√†giu seleccionat el fitxer, feu clic a Import Key Pair.\nRecordeu que com s‚Äôha explicat a la nota anterior, potser no veureu la carpeta .ssh a l‚Äôexplorador de fitxers i potser no veureu l‚Äôextensi√≥ .pub del fitxer. Si teniu problemes amb aix√≤, us recomano utilitzar el terminal per copiar el contingut del fitxer com es mostra a la captura de pantalla anterior.\n\n\nAra haur√≠eu de veure el parell de claus que acabeu d‚Äôimportar a la llista de parells de claus. Probablement hi haur√† un altre parell de claus all√†, aix√≤ est√† b√©, podeu ignorar-lo. Perfecte! Ara heu importat la clau p√∫blica a AWS. A continuaci√≥, crearem una inst√†ncia EC2 i la configurarem per utilitzar el parell de claus que acabem d‚Äôimportar.\n\n\n\nEl primer pas ser√† anar al tauler d‚ÄôEC2. Podeu fer-ho escrivint EC2 a la barra de cerca i fent clic al servei EC2, com vam fer al principi del Pas 3:\n\n\n\nAWS Dashboard\n\n\nUn cop estigueu al tauler d‚ÄôEC2, feu clic a Instances &gt; Launch Instance, com es mostra a continuaci√≥:\n\n\n\nAWS Dashboard\n\n\nDeixeu-ho tot com est√† excepte l‚Äôopci√≥ Key pair (login) (Parell de claus (inici de sessi√≥)) (haureu de despla√ßar-vos cap avall per trobar-la). Feu clic al men√∫ desplegable i seleccioneu el parell de claus que heu importat anteriorment. En aquest cas, hauria de ser aws-keypair. Feu clic a Launch instance, com es mostra a continuaci√≥:\n\n\n\nAWS Dashboard\n\n\nAra tenim una inst√†ncia EC2 en execuci√≥ amb la nostra clau p√∫blica importada. Aix√≤ significa que tenim una m√†quina remota a AWS a la qual podem connectar-nos des del nostre ordinador local mitjan√ßant SSH. Vegem com fer-ho.\n\n\n\nAbans de connectar-nos a la m√†quina remota, vull que proveu alguns ordres al vostre ordinador local que despr√©s repetirem un cop estiguem connectats a la m√†quina remota. Una de les ordres √©s pwd, que significa print working directory, com ja s‚Äôha comentat anteriorment. Aquesta ordre us mostrar√† la ruta al directori en qu√® esteu actualment. L‚Äôaltra ordre √©s whoami, que us mostrar√† el nom d‚Äôusuari amb el qual heu iniciat sessi√≥. Proveu aquestes ordres al vostre ordinador local i recordeu-ne la sortida. Les repetirem un cop estiguem connectats a la m√†quina remota.\nA continuaci√≥ es mostra la sortida que obtinc al meu ordinador local:\nPS C:\\Users\\fnao&gt; pwd\n\nPS C:\\Users\\fnao&gt; whoami\ngft\\fnao\nPS C:\\Users\\fnao&gt;\n\n\n\n\n\n\nAlerta\n\n\n\nEl ordinador local que utilitzo √©s un port√†til amb Windows, aix√≠ que la sortida ser√† diferent de la vostra si esteu utilitzant un Mac o un ordinador amb Linux. Substitueix fnao pel vostre nom d‚Äôusuari i C:\\Users\\fnao per la ruta al vostre directori d‚Äôusuari.\n\n\nPer connectar-nos a la inst√†ncia EC2, utilitzarem el terminal del nostre ordinador local. Aix√≠ com vam fer al principi Pas 3, obriu un terminal al vostre ordinador local. Utilitzarem l‚Äôordre ssh per connectar-nos a la m√†quina remota. L‚Äôordre tindr√† aquest aspecte:\nssh -i .ssh/aws-keypair ec2-user@&lt;public-ip&gt;\nHaureu de substituir &lt;public-ip&gt; per la IP p√∫blica de la inst√†ncia EC2. Per trobar la IP p√∫blica, torneu al tauler d‚ÄôEC2 i feu clic a Instances a la part esquerra de la pantalla. Veureu una llista d‚Äôinst√†ncies, feu clic a la inst√†ncia que heu creat. Veureu la IP p√∫blica a la part inferior de la pantalla com es mostra a continuaci√≥:\n\n\n\nAWS Dashboard\n\n\nTant l‚Äôadre√ßa Public IPv4 address com el Public IPv4 DNS es poden utilitzar com a &lt;public-ip&gt; a l‚Äôordre ssh. Copieu el que preferiu i enganxeu-lo a l‚Äôordre ssh. L‚Äôordre hauria d‚Äôassemblar-se a alguna cosa aix√≠ si utilitzeu l‚Äôadre√ßa IP:\nssh -i .ssh/aws-keypair ec2-user@98.84.68.70\no aix√≠ si utilitzeu el DNS:\nssh -i .ssh/aws-keypair ec2-user@ec2-98-84-68-70.compute-1.amazonaws.com\nSi √©s la primera vegada que us connecteu a la m√†quina remota, obtindreu una advert√®ncia. Aix√≤ √©s normal, nom√©s heu d‚Äôescriure yes i pr√©mer Enter. Ara haur√≠eu de estar connectats a la m√†quina remota. Veureu un missatge similar al seg√ºent:\n   ,     #_\n   ~\\_  ####_        Amazon Linux 2023\n  ~~  \\_#####\\\n  ~~     \\###|\n  ~~       \\#/ ___   https://aws.amazon.com/linux/amazon-linux-2023\n   ~~       V~' '-&gt;\n    ~~~         /\n      ~~._.   _/\n         _/ _/\n       _/m/'\nLast login: Sun Mar  2 09:50:33 2025 from 79.156.58.43\n[ec2-user@ip-172-31-86-82 ~]$\n\n\n\n\n\n\nImportantExercici\n\n\n\nInvestiga quin √©s el significat i la import√†nica del missatge que acceptes quan et connectes per primera vegada a la m√†quina remota. Per qu√® √©s important acceptar aquest missatge? Qu√® significa? Quines implicacions t√©?\n\n\nFant√†stic! Ara esteu connectats a la m√†quina remota. √âs important entendre que a partir d‚Äôara, les ordres que escrivim s‚Äôexecutaran a la m√†quina remota, no al nostre ordinador local. Per comprovar-ho, escriviu les ordres pwd i whoami com vam fer al nostre ordinador local. Veureu que la sortida √©s diferent. A continuaci√≥ es mostra la sortida que obtinc a la m√†quina remota:\n[ec2-user@ip-172-31-86-82 ~]$ pwd\n/home/ec2-user\n[ec2-user@ip-172-31-86-82 ~]$ whoami\nec2-user\n[ec2-user@ip-172-31-86-82 ~]$\n\n\n\n\n\n\nNota\n\n\n\nAquesta vegada la sortida hauria de ser la mateixa que la meva. Observeu que el prompt [ec2-user@ip-172-31-86-82 ~]$ √©s diferent, per√≤ aix√≤ no forma part de les sortides de les ordres. Les sortides de les ordres s√≥n pwd i whoami, que s√≥n home/ec2-user i ec2-user respectivament. El prompt √©s nom√©s una manera de mostrar-vos on esteu al sistema de fitxers i qui sou com a usuari connectat.\n\n\n\n\n\n\n\n\nImportantExercici\n\n\n\nUtilitza la comanada lastlog i investiga com administrador com podem trueure partit d‚Äôaquesta informaci√≥.",
    "crumbs": [
      "Laboratoris",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Laboratori 01 ¬∑ Introducci√≥ a AWS"
    ]
  },
  {
    "objectID": "laboratories/01-foundations/01-aws-introduction.html#execucio-en-el-nostre-laboratori-remot",
    "href": "laboratories/01-foundations/01-aws-introduction.html#execucio-en-el-nostre-laboratori-remot",
    "title": "Unitat 1 ¬∑ Laboratori de preparaci√≥ i comandes b√†siques d‚Äôadministraci√≥",
    "section": "Execuci√≥ en el nostre laboratori remot",
    "text": "Execuci√≥ en el nostre laboratori remot\nEn aquest apartat de laboratori, treballarem la comunicaci√≥ amb servidors remots i la transfer√®ncia de fitxers entre la m√†quina local i la m√†quina remota. Utilitzarem un script de Python per simular una c√†rrega de treball i generar un gr√†fic a partir d‚Äôun fitxer de dades. Aquest laboratori es dur√† a terme a la inst√†ncia EC2 que hem creat anteriorment.\n\nPas 1: Configuraci√≥ de l‚Äôentorn remot a l‚ÄôEC2\nPrimer, hem de preparar l‚Äôentorn a la nostra inst√†ncia EC2. Aix√≤ inclou instal¬∑lar les eines necess√†ries per executar el nostre script de Python i gestionar les dades. Per tant, ens connectarem a la inst√†ncia EC2 mitjan√ßant SSH com hem fet anteriorment i executarem les seg√ºents ordres per instal¬∑lar les eines necess√†ries.\n# Connecta't a la inst√†ncia EC2\nssh -i .ssh/aws-keypair ec2-user@&lt;public-ip&gt;\n\nActualitzaci√≥ del sistema:\n\nsudo yum update -y\n\nComprova si tens instal¬∑lat Python i, si no, instal¬∑la‚Äôl:\n\npython3 --version # Comprova si Python est√† instal¬∑lat\nsudo yum install python3 -y # Instal¬∑la Python si no est√† instal¬∑lat\n\nCrea un entorn virtual per a Python:\n\npython3 -m venv myenv\nsource myenv/bin/activate\n\nComprova l‚Äôentorn virtual amb un Hello World:\n\npython3 -c \"print('Hello World from the virtual environment')\"\n\n\n\n\n\n\nImportantExercici\n\n\n\nAra utiltiza la comanda exit per sortir de la m√†quina remota. Un cop al teu ordinador local, torna a connectar-te a la m√†quina remota amb SSH i torna a executar la comanda python3 -c \"print('Hello World from the virtual environment')\". Quin √©s el resultat? Per qu√® √©s diferent del que has obtingut abans? Com ho podem solucionar?\n\n\n\nInstal¬∑la les biblioteques necess√†ries per al nostre script:\n\npip install pandas matplotlib psutil\n\nCrea un directori per al projecte i entra-hi:\n\nmkdir lab01-workload-simulation\ncd lab01-workload-simulation\n\nCrea el fitxer del script de Python, utilitzant vi o vim:\n\nvi simulate_workload.py\n\n#!/usr/bin/env python3\nimport sys\nimport time\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\ndef main():\n    if len(sys.argv) != 2:\n        print(\"√ös: python3 simulate.py workload.csv\")\n        sys.exit(1)\n\n    csv_file = sys.argv[1]\n    df = pd.read_csv(csv_file)\n\n    print(\"Simulaci√≥ d'√∫s de CPU i mem√≤ria (amb gr√†fic)\\n\")\n\n    plt.ion()\n    fig, ax = plt.subplots()\n    cpu_vals, mem_vals, ts_vals = [], [], []\n\n    for i, row in df.iterrows():\n        ts = row['timestamp']\n        cpu = row['cpu_usage']\n        mem = row['memory_usage']\n\n        print(f\"[{ts}] CPU: {cpu:.2f}%  |  MEM: {mem:.2f}%\")\n\n        ts_vals.append(ts)\n        cpu_vals.append(cpu)\n        mem_vals.append(mem)\n\n        ax.clear()\n        ax.plot(ts_vals, cpu_vals, label=\"CPU (%)\", color=\"tab:red\", marker=\"o\")\n        ax.plot(ts_vals, mem_vals, label=\"Mem√≤ria (%)\", color=\"tab:blue\", marker=\"x\")\n        ax.set_ylim(0, 100)\n        ax.set_xlabel(\"Temps\")\n        ax.set_ylabel(\"√ös (%)\")\n        ax.set_title(\"Simulaci√≥ de c√†rrega del sistema\")\n        ax.legend()\n        plt.xticks(rotation=45)\n\n\n    print(\"\\n--- Fi de la simulaci√≥ ---\")\n    plt.savefig(\"workload_analysis.png\")\n\nif __name__ == \"__main__\":\n    main()\n\nSi el fitxer existeix, pots executar-lo amb la seg√ºent ordre:\n\npython3 simulate_workload.py workload.csv\nEn aquest punt, haur√≠eu de veure un error indicant que el fitxer workload.csv no existeix. Aix√≤ √©s normal perqu√® encara no hem pujat el fitxer de dades a la inst√†ncia EC2.\n\n\nPas 2: Transfer√®ncia del fitxer de dades a la inst√†ncia EC2\nPer transferir el fitxer de dades workload.csv a la inst√†ncia EC2, utilitzarem SFTP (SSH File Transfer Protocol). SFTP √©s un protocol segur per transferir fitxers entre un ordinador local i una m√†quina remota. Utilitzarem el mateix parell de claus SSH que vam crear anteriorment per autenticar-nos a la inst√†ncia EC2.\n\nDescarrega‚Äôt el fitxer de dades workload.csv al teu ordinador local.\nUtilitza SFTP per pujar el fitxer de dades a la inst√†ncia EC2:\n\n# Substitueix &lt;public-ip&gt; per la IP p√∫blica de la teva inst√†ncia EC2\nsftp -i .ssh/aws-keypair ec2-user@&lt;public-ip&gt;:/home/ec2-user/lab01-workload-simulation\n# Baixa el fitxer workload.csv del directori remot a la m√†quina local\nput workload.csv\n# Tanca la sessi√≥ SFTP\nexit\n\nTorna a connectar-te a la inst√†ncia EC2 mitjan√ßant SSH, i executa el programa de Python de nou:\n\npython3 simulate_workload.py workload.csv\nAra hauria de funcionar correctament i generar un fitxer d‚Äôimatge amb el gr√†fic de la c√†rrega de treball. Pots comprovar que el fitxer d‚Äôimatge s‚Äôha creat correctament amb l‚Äôordre ls -l. Un cop la imatge s‚Äôha generat, pots utilitzar SFTP per baixar-la a la teva m√†quina local:\n# Substitueix &lt;public-ip&gt; per la IP p√∫blica de la teva inst√†ncia EC2\nsftp -i .ssh/aws-keypair ec2-user@&lt;public-ip&gt;:/home/ec2-user/lab01-workload-simulation\n# Baixa el fitxer workload_analysis.png del directori remot a la m√†quina local\nget workload_analysis.png\n# Tanca la sessi√≥ SFTP\nexit\n\n\n\n\n\n\nImportantExercicis\n\n\n\n\nCom podem descarregar tots els fitxers d‚Äôun directori remot a la nostra m√†quina local utilitzant el protocol SFTP? Per exemple, imagina que necessites descarregar tot el contingut del directori remot anomenat lab-workload-simulation. Explica els passos o la comanda que utilitzaries per dur a terme aquesta tasca de manera eficient.\nCom podem descarregar un fitxer espec√≠fic des d‚Äôuna URL directament a un servidor remot? Per a fer-ho m√©s pr√†ctic, prepara un script que, donada una URL, descarregui un fitxer directament al servidor remot sense passar-lo per la m√†quina local. Fes el test amb el fitxer workload.csv que hem utilitzat en aquest laboratori.",
    "crumbs": [
      "Laboratoris",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Laboratori 01 ¬∑ Introducci√≥ a AWS"
    ]
  },
  {
    "objectID": "laboratories/01-foundations/01-aws-introduction.html#tasques-basiques-dadministracio",
    "href": "laboratories/01-foundations/01-aws-introduction.html#tasques-basiques-dadministracio",
    "title": "Unitat 1 ¬∑ Laboratori de preparaci√≥ i comandes b√†siques d‚Äôadministraci√≥",
    "section": "Eines b√†sqiques d‚Äôadministraci√≥",
    "text": "Eines b√†sqiques d‚Äôadministraci√≥\nEn aquest apartat, explorarem algunes tasques b√†siques d‚Äôadministraci√≥ que podem realitzar en un servidor Linux. Aquestes tasques inclouen la gesti√≥ de l‚Äôespai en disc.\n\nGesti√≥ de l‚Äôespai en disc\nAmb la comanda df -h podem veure l‚Äôespai en disc disponible i utilitzat a les particions del sistema. Aquesta comanda ens mostrar√† informaci√≥ sobre l‚Äôespai en disc de cada partici√≥, incloent-hi la mida total, l‚Äôespai utilitzat, l‚Äôespai disponible i el punt de muntatge. En aquest curs estudiarem el sistema de fitxers en profunditat, per√≤ ara nom√©s introduirem la comanda i veurem el seu resultat.\n[ec2-user@ip-172-31-30-17 ~]$ df -h\nFilesystem        Size  Used Avail Use% Mounted on\ndevtmpfs          4.0M     0  4.0M   0% /dev\ntmpfs             453M     0  453M   0% /dev/shm\ntmpfs             181M  424K  181M   1% /run\n/dev/nvme0n1p1    8.0G  2.0G  6.1G  25% /\ntmpfs             453M     0  453M   0% /tmp\n/dev/nvme0n1p128   10M  1.3M  8.7M  13% /boot/efi\ntmpfs              91M     0   91M   0% /run/user/1000\nEn aquest cas, podem veure que la partici√≥ /dev/nvme0n1p1 t√© una mida total de 8.0 GB, amb 2.0 GB utilitzats i 6.1 GB disponibles. Aix√≤ significa que el 25% de l‚Äôespai en disc est√† utilitzat. El seu punt de muntatge √©s /, que √©s el directori arrel del sistema de fitxers. La resta de particions les podem ignorar per ara i les veurem en detall m√©s endavant.\nA m√©s, tamb√© podem utilitzar la comanda du per veure l‚Äôespai en disc utilitzat per un directori espec√≠fic. Per exemple, si volem veure l‚Äôespai en disc utilitzat pel directori /home/ec2-user, podem utilitzar la comanda seg√ºent:\n[ec2-user@ip-172-31-30-17 ~]$ du -sh /home/ec2-user\n301M    /home/ec2-user\nAquesta comanda ens mostrar√† l‚Äôespai en disc utilitzat pel directori /home/ec2-user i tots els seus subdirectoris. L‚Äôopci√≥ -s indica que volem un resum de l‚Äôespai utilitzat, i l‚Äôopci√≥ -h mostra la sortida en un format llegible per humans (per exemple, en KB, MB, GB). En aquest cas, podem veure que el directori /home/ec2-user utilitza 301 MB d‚Äôespai en disc.\nPodem crear un fitxer de prova per veure com afecta l‚Äôespai en disc. Per exemple, podem crear un fitxer de text gran amb la comanda dd:\ndd if=/dev/zero of=largefile.txt bs=1M count=100\nAquesta comanda crear√† un fitxer anomenat largefile.txt de 100 MB ple de zeros. Ara podem tornar a executar la comanda du -sh /home/ec2-user per veure com ha canviat l‚Äôespai en disc utilitzat pel directori /home/ec2-user:\n[ec2-user@ip-172-31-30-17 ~]$ du -sh /home/ec2-user\n401M    /home/ec2-user\nPer eliminar el fitxer que hem creat, podem utilitzar la comanda rm:\nrm largefile.txt\n\n\n\n\n\n\nImportantExercici\n\n\n\n\nCompleta aquest script perque ens permeti llegir un fitxer de text l√≠nia a l√≠nia, cada linia cont√© el nom i la mida en MB d‚Äôun fitxer que volem crear. El script ha de crear els fitxers amb la mida especificada al directori on s‚Äôexecuta el script.\n\nwhile read -r nom_fitxer mida_mb; do\n  \ndone &lt; \"$1\"\n\nUtiltiza la comanda du, sort, head, tail per obtenir el fitxer m√©s gran i el m√©s petit del directori on s‚Äôexecuta el script.\nUtilitza la comanda find per trobar tots els fitxers m√©s grans de 10 MB al directori on s‚Äôexecuta el script.",
    "crumbs": [
      "Laboratoris",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Laboratori 01 ¬∑ Introducci√≥ a AWS"
    ]
  },
  {
    "objectID": "laboratories/01-foundations/01-aws-introduction.html#neteja-final",
    "href": "laboratories/01-foundations/01-aws-introduction.html#neteja-final",
    "title": "Unitat 1 ¬∑ Laboratori de preparaci√≥ i comandes b√†siques d‚Äôadministraci√≥",
    "section": "Neteja final",
    "text": "Neteja final\nUn cop h√†giu acabat el laboratori, √©s important que tanqueu la inst√†ncia EC2 per evitar costos innecessaris. Per fer-ho, torneu al tauler d‚ÄôEC2 i seleccioneu la inst√†ncia que heu creat. A la part superior de la pantalla, feu clic a Instance state i despr√©s a Terminate instance.",
    "crumbs": [
      "Laboratoris",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Laboratori 01 ¬∑ Introducci√≥ a AWS"
    ]
  },
  {
    "objectID": "laboratories/01-foundations/01-aws-introduction.html#entrega-del-laboratori",
    "href": "laboratories/01-foundations/01-aws-introduction.html#entrega-del-laboratori",
    "title": "Unitat 1 ¬∑ Laboratori de preparaci√≥ i comandes b√†siques d‚Äôadministraci√≥",
    "section": "Entrega del laboratori",
    "text": "Entrega del laboratori\nPer a l‚Äôentrega d‚Äôaquest laboratori, heu de preparar un document PDF amb les respostes completes a tots els exercicis. Un cop finalitzat, cal que el pengeu al Campus Virtual, a l‚Äôapartat designat per al Laboratori 1.",
    "crumbs": [
      "Laboratoris",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Laboratori 01 ¬∑ Introducci√≥ a AWS"
    ]
  },
  {
    "objectID": "laboratories/02-network/01-aws-wordpress.html",
    "href": "laboratories/02-network/01-aws-wordpress.html",
    "title": "Desplegament d‚Äôuna aplicaci√≥ web amb alta disponibilitat amb AWS",
    "section": "",
    "text": "En aquest laboratori intensiu, dissenyarem i implementarem una arquitectura de xarxa robusta i segura per allotjar una aplicaci√≥ de WordPress. L‚Äôarquitectura es basa en la separaci√≥ de capes (p√∫blica, aplicaci√≥, dades) i l‚Äô√∫s de Zones de Disponibilitat (AZ) per garantir que el nostre WordPress sigui altament disponible i resistent a fallades.",
    "crumbs": [
      "Laboratoris",
      "Networking",
      "Laboratori 03 ¬∑ Desplegament d'una aplicaci√≥ web amb alta disponibilitat amb AWS"
    ]
  },
  {
    "objectID": "laboratories/02-network/01-aws-wordpress.html#diagrama-de-larquitectura",
    "href": "laboratories/02-network/01-aws-wordpress.html#diagrama-de-larquitectura",
    "title": "Desplegament d‚Äôuna aplicaci√≥ web amb alta disponibilitat amb AWS",
    "section": "Diagrama de l‚ÄôArquitectura",
    "text": "Diagrama de l‚ÄôArquitectura\n\n\n\nEsquema de components, conexions i elements de l‚Äôarquitectura\n\n\nLa imatge mostra com a trav√©s d‚Äôinternet, els usuaris accedeixen al Load Balancer, que distribueix el tr√†fic a les inst√†ncies EC2 que allotgen WordPress. Aquestes inst√†ncies es connecten a la base de dades RDS per gestionar el contingut de WordPress. La inst√†ncia EC2 en la DMZ permet l‚Äôacc√©s segur per a l‚Äôadministraci√≥ dels recursos privats.",
    "crumbs": [
      "Laboratoris",
      "Networking",
      "Laboratori 03 ¬∑ Desplegament d'una aplicaci√≥ web amb alta disponibilitat amb AWS"
    ]
  },
  {
    "objectID": "laboratories/02-network/01-aws-wordpress.html#objectius",
    "href": "laboratories/02-network/01-aws-wordpress.html#objectius",
    "title": "Desplegament d‚Äôuna aplicaci√≥ web amb alta disponibilitat amb AWS",
    "section": "Objectius",
    "text": "Objectius\n\nDissenyar i implementar una arquitectura de xarxa segura i altament disponible a AWS.\nConfigurar VPCs, subxarxes, taules de rutes i grups de seguretat.\nConfigurar una VPN segura per a l‚Äôacc√©s administratiu.\nConfigurar un load balancer per distribuir el tr√†fic a les inst√†ncies EC2.",
    "crumbs": [
      "Laboratoris",
      "Networking",
      "Laboratori 03 ¬∑ Desplegament d'una aplicaci√≥ web amb alta disponibilitat amb AWS"
    ]
  },
  {
    "objectID": "laboratories/02-network/01-aws-wordpress.html#requeriments-pr√®vis",
    "href": "laboratories/02-network/01-aws-wordpress.html#requeriments-pr√®vis",
    "title": "Desplegament d‚Äôuna aplicaci√≥ web amb alta disponibilitat amb AWS",
    "section": "Requeriments Pr√®vis",
    "text": "Requeriments Pr√®vis\n\nAcc√©s al curs AWS Academy Learner Lab.\nCompletar el laboratori Desplegament d‚Äôuna aplicaci√≥ web amb AWS per entendre els conceptes b√†sics d‚ÄôAWS i la configuraci√≥ inicial de WordPress.",
    "crumbs": [
      "Laboratoris",
      "Networking",
      "Laboratori 03 ¬∑ Desplegament d'una aplicaci√≥ web amb alta disponibilitat amb AWS"
    ]
  },
  {
    "objectID": "laboratories/02-network/01-aws-wordpress.html#vpc-i-subxarxes",
    "href": "laboratories/02-network/01-aws-wordpress.html#vpc-i-subxarxes",
    "title": "Desplegament d‚Äôuna aplicaci√≥ web amb alta disponibilitat amb AWS",
    "section": "VPC i Subxarxes",
    "text": "VPC i Subxarxes\nEl primer pas en la nostra arquitectura √©s definir una VPC (Virtual Private Cloud) i les subxarxes necess√†ries per a√Øllar els diferents components de l‚Äôaplicaci√≥. La VPC proporcionar√† un entorn de xarxa virtualitzat on podrem desplegar els nostres recursos d‚ÄôAWS. La configurarem amb la xarxa 10.0.0.0/16, la qual ens proporciona fins a 65.536 adreces IP, m√©s que suficients per al nostre cas d‚Äô√∫s.\n\n\n\n\n\n\nNotaCIDR, Hosts i Adreces Reservades üß†\n\n\n\nLa m√†scara de subxarxa determina el nombre d‚Äôadreces IP disponibles dins d‚Äôuna xarxa o subxarxa. Aix√≤ s‚Äôexpressa mitjan√ßant la Notaci√≥ CIDR (Classless Inter-Domain Routing), on el valor (/n) indica la quantitat de bits reservats per a la part de Xarxa. Una m√†scara de subxarxa de /16 significa que els primers 16 bits de l‚Äôadre√ßa IP estan reservats per a la identificaci√≥ de la xarxa, deixant els altres 16 bits per a la identificaci√≥ dels hosts. Aix√≤ permet tenir fins a 65.536 adreces IP (\\(2^{32-16}\\)) dins d‚Äôaquesta xarxa.\nQuan feu el Subnetting per crear subxarxes dins de la vostra VPC, esteu augmentant el valor CIDR (per exemple, de /16 a /24), per tal de reduir la mida de les subxarxes i a√Øllar millor el tr√†fic. Per exemple, una subxarxa amb CIDR /24 t√© 256 adreces IP (\\(2^{32-24}\\)).\nRecordeu que el total d‚Äôadreces calculat no √©s el total d‚Äôadreces √∫tils per als vostres servidors (hosts). Algunes adreces es reserven per a usos especials, com identificar la xarxa i la difusi√≥ (broadcast).\n\n\nPodem definir la VPC a trav√©s de la interf√≠cie web d‚ÄôAWS, utilitzant els formularis disponibles:\n\n\n\nDefinici√≥ de la VPC utilitzant AWS\n\n\n\nCreaci√≥ de les subxarxes\nA continuaci√≥, afegirem les subxarxes necess√†ries per a la nostra arquitectura. Aneu a VPC ‚Üí Subnets ‚Üí Create subnet. Seleccioneu la VPC que acabem de crear i afegiu les subxarxes seg√ºents:\n\nAMSA-DMZ-01: Subxarxa p√∫blica a la zona us-east-1a. Aquesta subxarxa allotjar√† la inst√†ncia EC2 que far√† de pont segur d‚Äôacc√©s (mitjan√ßant t√∫nel SSH) per a la gesti√≥ de tots els recursos privats. (10.0.1.0/24).\n\n\n\n\nAMSA-DMZ-01\n\n\n\nAMSA-DMZ-02: Subxarxa p√∫blica a la zona us-east-1b. Aquesta subxarxa allotjar√† la inst√†ncia EC2 que far√† de pont segur d‚Äôacc√©s (mitjan√ßant t√∫nel SSH) per a la gesti√≥ de tots els recursos privats. (10.0.2.0/24).\n\n\n\n\nAMSA-DMZ-02\n\n\n\nAMSA-Private01: Subxarxa privada per a les inst√†ncies de WordPress a la zona de disponibilitat us-east-1a. (10.0.3.0/24).\n\n\n\n\nAMSA-Private01\n\n\n\nAMSA-Private02: Subxarxa privada per a les inst√†ncies de WordPress a la zona de disponibilitat us-east-1b. (10.0.4.0/24)\n\n\n\n\nAMSA-Private02\n\n\n\nAMSA-Data: Subxarxa privada per a dades a la zona de disponibilitat us-east-1c. (10.0.5.0/24)\n\n\n\n\nAMSA-Data",
    "crumbs": [
      "Laboratoris",
      "Networking",
      "Laboratori 03 ¬∑ Desplegament d'una aplicaci√≥ web amb alta disponibilitat amb AWS"
    ]
  },
  {
    "objectID": "laboratories/02-network/01-aws-wordpress.html#taules-denrutament-i-associacions",
    "href": "laboratories/02-network/01-aws-wordpress.html#taules-denrutament-i-associacions",
    "title": "Desplegament d‚Äôuna aplicaci√≥ web amb alta disponibilitat amb AWS",
    "section": "Taules d‚ÄôEnrutament i Associacions",
    "text": "Taules d‚ÄôEnrutament i Associacions\nPer gestionar les rutes del tr√†fic i determinar com es distribueix entre les subxarxes, crearem taules de rutes i les associem a les subxarxes corresponents.\n\nConfiguraci√≥ del Gateway d‚ÄôInternet\nUtilitzarem un Gateway d‚ÄôInternet (IGW) per permetre que les subxarxes p√∫bliques (AMSA-DMZ-01 i AMSA-DMZ-02) tinguin acc√©s a Internet tant per a tr√†fic entrant com sortint. Per fer-ho, primer crearem el IGW i despr√©s l‚Äôassociarem a la nostra VPC.\nEl primer pas √©s crear el Gateway d‚ÄôInternet. Aneu a VPC ‚Üí Internet Gateways ‚Üí Create internet gateway. Un cop creat, l‚Äôanomeneu AMSA-IG.\n\n\n\nGateway d‚ÄôInternet per a la VPC\n\n\nEl segon pas √©s associar el Gateway d‚ÄôInternet amb la VPC. Seleccioneu el Gateway d‚ÄôInternet que acabem de crear i feu clic a Actions ‚Üí Attach to VPC. Seleccioneu la VPC AMSA-VPC i feu clic a Attach internet gateway.\n\n\n\nAssociaci√≥ del Gateway d‚ÄôInternet amb la VPC\n\n\n\n\n\nAssociaci√≥ del Gateway d‚ÄôInternet amb la VPC\n\n\n\n\n\n\n\n\nAlertaAttached IGW üõë\n\n\n\nAssegureu-vos que el Gateway d‚ÄôInternet estigui correctament associat a la VPC. Si no est√† associat, les subxarxes p√∫bliques no podran accedir a Internet.\n\n\n\n\nCreaci√≥ de les taules de rutes\nCada subxarxa necessita una taula de rutes per definir com es dirigeix el tr√†fic sortint i entrant. Crearem taules de rutes espec√≠fiques per a cada tipus de subxarxa (p√∫blica i privada) i les associem a les subxarxes corresponents.\n\nEnrutament per a les subxarxes p√∫bliques (DMZ)\nEl primer pas √©s crear la taula de rutes per a les subxarxes p√∫bliques. Aneu a VPC ‚Üí Route Tables ‚Üí Create route table. Seleccioneu la VPC AMSA-VPC i anomeneu la taula de rutes AMSA-DMZ01-RT.\n\n\n\nTaula de rutes per a la subxarxa AMSA-DMZ01-RT\n\n\nEl segon pas √©s associar la taula de rutes (AMSA-DMZ01-RT) amb la subxarxa AMSA-DMZ-01 i permetre el tr√†fic de sortida a Internet a trav√©s del Gateway d‚ÄôInternet que hem creat anteriorment.\n\n\n\nAssociaci√≥ de la taula de rutes amb la subxarxa AMSA-DMZ-01\n\n\nEl tercer pas √©s permetre el tr√†fic de sortida a Internet a trav√©s del Gateway d‚ÄôInternet que hem creat anteriorment. Per fer-ho aneu a la secci√≥ Routes i clicareu a Edit routes. A continuaci√≥, Add route i editareu (Destination: 0.0.0.0/0; Target:Seleccionar el AMSA-IG).\n\n\n\nPermetem el tr√†fic amb l‚Äôexterior a trav√©s del IG\n\n\n\n\n\n\n\n\nAlertaAMSA-DMZ-02 üõë\n\n\n\nRealitzeu els mateixos passos per a la subxarxa AMSA-DMZ-02, modificant nom√©s el nom de la taula de rutes i l‚Äôassociaci√≥ amb la subxarxa.\n\n\n\n\nEnrutament per a les subxarxes privades\nLes subxarxes privades no tenen acc√©s directe a Internet per motius de seguretat. Per tant, necessitem configurar les taules de rutes per a aquestes subxarxes de manera que puguin accedir a Internet a trav√©s d‚Äôun NAT Gateway (Network Address Translation Gateway). Aix√≤ permetr√† que les inst√†ncies dins de les subxarxes privades puguin iniciar connexions cap a l‚Äôexterior, per√≤ impedir√† que l‚Äôexterior inici√Ø connexions cap a elles.\n\n\n\n\n\n\nNotaNAT Gateway üß†\n\n\n\nUn NAT Gateway √©s un servei gestionat per AWS que permet a les inst√†ncies en una subxarxa privada accedir a Internet per a actualitzacions de programari, desc√†rregues de paquets, etc., sense exposar aquestes inst√†ncies directament a Internet. El NAT Gateway tradueix les adreces IP privades de les inst√†ncies a una adre√ßa IP p√∫blica quan aquestes inst√†ncies fan peticions a Internet.\n\n\nPer crear el NAT Gateway, necessitem una IP el√†stica (Elastic IP). Per tant, primer crearem una IP el√†stica i despr√©s la utilitzarem per crear el NAT Gateway. L‚Äôanomeneu AMSA-NAT-EIP.\n\n\n\nCreaci√≥ de la IP el√†stica\n\n\n\n\n\nActualitzar el nom de la IP el√†stica\n\n\nUn cop tenim la IP el√†stica, podem crear el NAT Gateway. L‚Äôanomeneu AMSA-NG i l‚Äôassocieu a la subxarxa AMSA-DMZ-01.\n\n\n\nCreaci√≥ del NAT Gateway\n\n\nCrearem la taula de rutes (AMSA-Private01-RT) per a la subxarxa AMSA-Private01 i l‚Äôassociarem a la subxarxa. Aquesta taula de rutes permetr√† que les inst√†ncies dins d‚Äôaquesta subxarxa accedeixin a Internet a trav√©s del NAT Gateway.\n\n\n\nTaula de rutes per a la subxarxa AMSA-Private01\n\n\nEl segon pas √©s associar la taula de rutes (AMSA-Private01-RT) amb la subxarxa AMSA-Private01 i permetre el tr√†fic de sortida a Internet a trav√©s del NAT Gateway que hem creat anteriorment.\n\n\n\nCreaci√≥ de la taula de rutes per a la subxarxa AMSA-Private01\n\n\nEl tercer pas √©s permetre el tr√†fic de sortida a Internet a trav√©s del NAT Gateway que hem creat anteriorment. Per fer-ho aneu a la secci√≥ Routes i clicareu a Edit routes. A continuaci√≥, Add route i editareu (Destination: 0.0.0.0/0; Target:Seleccionar el AMSA-NG).\n\n\n\n\n\n\nAlertaAMSA-Private02 üõë\n\n\n\nRepetiu els mateixos passos per a la subxarxa AMSA-Private02, modificant nom√©s el nom de la taula de rutes i l‚Äôassociaci√≥ amb la subxarxa.\n\n\n\n\nEnrutament per a la subxarxa de dades (AMSA-Data)\nLa subxarxa AMSA-Data no allotjar√† inst√†ncies que necessitin acc√©s a Internet. Per tant, no necessitem configurar cap ruta per a aquesta subxarxa. Crearem una taula de rutes buida i l‚Äôassociarem a la subxarxa AMSA-Data. Aquesta xarxa ser√† completament a√Øllada i nom√©s permetr√† la comunicaci√≥ interna dins de la VPC.",
    "crumbs": [
      "Laboratoris",
      "Networking",
      "Laboratori 03 ¬∑ Desplegament d'una aplicaci√≥ web amb alta disponibilitat amb AWS"
    ]
  },
  {
    "objectID": "laboratories/02-network/01-aws-wordpress.html#grups-de-seguretat",
    "href": "laboratories/02-network/01-aws-wordpress.html#grups-de-seguretat",
    "title": "Desplegament d‚Äôuna aplicaci√≥ web amb alta disponibilitat amb AWS",
    "section": "Grups de Seguretat",
    "text": "Grups de Seguretat\nEls grups de seguretat (Security Groups) s√≥n una eina per controlar el tr√†fic de xarxa de les inst√†ncies i altres recursos d‚ÄôAWS, actuant com un tallafocs virtual. Permeten definir regles que especifiquen quines connexions estan permeses tant d‚Äôentrada (inbound) com de sortida (outbound).\n\nTrafic inbound: Permet decidir quins tipus de connexions entrants (cap al recurs) s√≥n permeses.\nTrafic outbound: Controla quines connexions sortints (des del recurs cap a altres destinacions) estan autoritzades.\n\n\nGrup de Seguretat per a les inst√†ncies EC2\n\nConnexions entrants (inbound) per als serveis web HTTP (port 80) i HTTPS (port 443), accessibles des de qualsevol origen.\nConnexions SSH (port 22) per a administraci√≥ remota, tamb√© accessibles des de qualsevol origen (inicialment, per√≤ m√©s endavant es restringiran).\nTotes les connexions sortints (outbound), que per defecte estan permeses a AWS, cosa que permet a les inst√†ncies EC2 comunicar-se amb altres recursos com ara RDS.\n\nPer fer-ho, navegarem a la consola de VPC d‚ÄôAWS, seleccionarem la secci√≥ Security Groups i clicarem a Create security group. A continuaci√≥, omplirem els camps amb la informaci√≥ necess√†ria i clicarem a Create security group. El podeu anomenar AMSA-WP-SG.\n\n\n\nGrup de Seguretat per a les inst√†ncies EC2\n\n\n\n\n\n\n\n\nNotaNota sobre la seguretat üîê\n\n\n\nEn aquest moment, estem permetent tot el tr√†fic de xarxa per als serveis web i SSH. Quan ho tinguem tot configurat, restringirem aquest acc√©s √∫nicament al trafic entrant provinent del balancejador de c√†rrega pels serveis web i a la nostra xarxa interna per a SSH.\n\n\n\n\nGrup de Seguretat per a la base de dades RDS\n\nConnexions inbound: Nom√©s permetr√† tr√†fic al port 3306 (MySQL) i exclusivament des de les inst√†ncies EC2 que pertanyin al grup de seguretat AMSA-WP-SG.\nConnexions outbound: Per defecte, AWS permetr√† totes les connexions sortints, cosa que garanteix que la base de dades pugui comunicar-se amb altres recursos si √©s necessari.\n\nPer fer-ho, navegarem a la consola de VPC d‚ÄôAWS, seleccionarem la secci√≥ Security Groups i clicarem a Create security group. A continuaci√≥, omplirem els camps amb la informaci√≥ necess√†ria i clicarem a Create security group.\n\n\n\nGrup de Seguretat per a la base de dades RDS\n\n\n\n\nResum\n\n\n\n\n\n\n\n\nGrup de Seguretat\nInbound\nOutbound\n\n\n\n\nAMSA-WP-SG\nHTTP (80) i HTTPS (443) des de 0.0.0.0/0; SSH (22) des de 0.0.0.0/0\nTotes permeses\n\n\nAMSA-DB-SG\nMySQL (3306) des de AMSA-Web-SG\nTotes permeses",
    "crumbs": [
      "Laboratoris",
      "Networking",
      "Laboratori 03 ¬∑ Desplegament d'una aplicaci√≥ web amb alta disponibilitat amb AWS"
    ]
  },
  {
    "objectID": "laboratories/02-network/01-aws-wordpress.html#creaci√≥-de-la-base-de-dades-rds",
    "href": "laboratories/02-network/01-aws-wordpress.html#creaci√≥-de-la-base-de-dades-rds",
    "title": "Desplegament d‚Äôuna aplicaci√≥ web amb alta disponibilitat amb AWS",
    "section": "Creaci√≥ de la Base de Dades RDS",
    "text": "Creaci√≥ de la Base de Dades RDS\nLa base de dades ja la vam configurar en el laboratori anterior Desplegament d‚Äôuna aplicaci√≥ web amb AWS. La √∫nica difer√®ncia √©s que ara la base de dades es troba en una subxarxa privada i nom√©s √©s accessible des de les inst√†ncies EC2 que pertanyen al grup de seguretat AMSA-Web-SG.\n\nCompute resources: Don‚Äôt connect to an EC2 compute resource\nVPC: AMSA-VPC\nSubnet Group: Create new DB Subnet Group\nPublic accessibility: No\nVPC security group: AMSA-DB-SG\nAvailability Zone: us-east-1d",
    "crumbs": [
      "Laboratoris",
      "Networking",
      "Laboratori 03 ¬∑ Desplegament d'una aplicaci√≥ web amb alta disponibilitat amb AWS"
    ]
  },
  {
    "objectID": "laboratories/02-network/01-aws-wordpress.html#creaci√≥-de-les-inst√†ncies-ec2",
    "href": "laboratories/02-network/01-aws-wordpress.html#creaci√≥-de-les-inst√†ncies-ec2",
    "title": "Desplegament d‚Äôuna aplicaci√≥ web amb alta disponibilitat amb AWS",
    "section": "Creaci√≥ de les inst√†ncies EC2",
    "text": "Creaci√≥ de les inst√†ncies EC2\nLes inst√†ncies EC2 que allotjaran WordPress es desplegaran en les subxarxes privades, recordeu que vam configurar ansible en el laboratori anterior Desplegament d‚Äôuna aplicaci√≥ web amb AWS. AWS ens permet crear plantilles d‚Äôinst√†ncies (Launch Templates) que faciliten la creaci√≥ d‚Äôinst√†ncies amb una configuraci√≥ predefinida. Per tant, crearem una plantilla d‚Äôinst√†ncia que inclogui la configuraci√≥ necess√†ria per a les nostres inst√†ncies EC2 de WordPress, enlloc d‚Äôutiltizar el m√®tode amb ansible que vam utilitzar en el laboratori anterior.",
    "crumbs": [
      "Laboratoris",
      "Networking",
      "Laboratori 03 ¬∑ Desplegament d'una aplicaci√≥ web amb alta disponibilitat amb AWS"
    ]
  },
  {
    "objectID": "laboratories/02-network/01-aws-wordpress.html#configuraci√≥-del-balancejador-de-c√†rrega",
    "href": "laboratories/02-network/01-aws-wordpress.html#configuraci√≥-del-balancejador-de-c√†rrega",
    "title": "Desplegament d‚Äôuna aplicaci√≥ web amb alta disponibilitat amb AWS",
    "section": "Configuraci√≥ del Balancejador de C√†rrega",
    "text": "Configuraci√≥ del Balancejador de C√†rrega\nEn aquest punt, crearem un balancejador de c√†rrega per a les nostres inst√†ncies EC2. Aquest balancejador de c√†rrega ser√† responsable de distribuir uniformement el tr√†fic entre les inst√†ncies EC2 que allotgen WordPress.\nExisteixen 3 tipus de balancejadors de c√†rrega a AWS: Application Load Balancer (ALB), Network Load Balancer (NLB) i Gateway Load Balancer (GWLB). En aquest cas, utilitzarem un Application Load Balancer (ALB), ja que √©s el recomanat per a aplicacions web que utiltizen HTTP i HTTPS.\nNavegueu a la consola de AWS i seleccioneu el servei EC2. A la barra lateral, seleccioneu Load Balancers i despr√©s Create Load Balancer. Seleccioneu Application Load Balancer i feu clic a Create.\n\nNom del balancejador de c√†rrega: AMSA-ALB\nScheme: Internet-facing\nIP Address Type: IPv4\n\n\n\n\nConfiguraci√≥ del balancejador de c√†rrega\n\n\n\nVPC: AMSA-VPC\nAvailability Zones: Seleccionar les zones de disponibilitat on tenim la subxarxa p√∫blica AMSA-DMZ-01 (us-east-1a) i les AMSA-DMZ-02 (us-east-1b).\nGrups de Seguretat: Nou grup de seguretat (AMSA-ALB-SG), aquest grup de seguretat permetr√† el tr√†fic d‚Äôentrada per als ports 80 (HTTP) i 443 (HTTPS) des de qualsevol origen per√≤ restringir√† el tr√†fic de sortida a les inst√†ncies EC2 (grup de seguretat AMSA-WP-SG).\n\n\n\nGrup de Seguretat per al balancejador de c√†rrega\n\n\n\n\n\nConfiguraci√≥ del balancejador de c√†rrega\n\n\nListeners: Crearem un listener per al port 80 (HTTP), que redirigir√† el tr√†fic al port 80 de les inst√†ncies EC2. Al port 443 (HTTPS) de moment no configurarem cap redirecci√≥. Per fer-ho, primer haureu de crear un Target Group. Aquest grup es necessari per indicar al balancejador de c√†rrega on enviar el tr√†fic.\n\nTarget Group:\n\nTarget Type: Instances\nNom: AMSA-WP-TG\nProtocol: HTTP\nPort: 80\nVPC: AMSA-VPC\nHealth checks: HTTP, ruta /\n\n\n\n\nConfiguraci√≥ del target group\n\n\n\n\n\n\n\n\n\n\nNotaHealth Check üéØ\n\n\n\nEl balancejador de c√†rrega comprova la salut de les inst√†ncies EC2 a trav√©s del port 80 i la ruta /. Aix√≤ significa que el balancejador de c√†rrega enviar√† tr√†fic a les inst√†ncies EC2 que responguin correctament a les peticions HTTP a la ruta /. Com que les nostres inst√†ncies EC2 tenen WordPress instal¬∑lat, aquestes inst√†ncies respondran correctament a les peticions HTTP a la ruta /. Podem deixar la configuraci√≥ per defecte. La instal¬∑laci√≥ de WordPress inclou una p√†gina d‚Äôinici que respondr√† amb 302 (Found) quan s‚Äôaccedeixi a la ruta arrel (/), per aix√≤ pot passar que el health check mostri que la inst√†ncia no est√† saludable. Un cop configurat el WordPress, el health check mostrar√† que la inst√†ncia est√† saludable.\n\n\n\nSeleccionarem les dos inst√†ncies EC2 que allotgen WordPress (AMSA-WP-01 i AMSA-WP-02) i les afegirem al target group. Utilitzant el bot√≥ Include as pending below i despr√©s Add to registered.\n\n\n\nConfiguraci√≥ del target group\n\n\nUn cop creat el target group, el seleccionarem com a target del listener del balancejador de c√†rrega.\n\n\n\nConfiguraci√≥ del balancejador de c√†rrega\n\n\nUn cop creat el balancejador de c√†rrega, heu d‚Äôesperar uns minuts fins que el seu estat passi de Provisioning a Active. Un cop l‚Äôestat sigui Active, podeu accedir al balancejador de c√†rrega a trav√©s de la seva adre√ßa DNS.\n\n\n\n\nBalancejador de c√†rrega actiu\n\n\n\nAra ja podem accedir al balancejador de c√†rrega a trav√©s de la seva adre√ßa DNS i veure la p√†gina d‚Äôinstal¬∑laci√≥ de WordPress:\n\n\n\n\nInstal¬∑laci√≥ de WordPress a trav√©s del balancejador de c√†rrega\n\n\nProcedirem a instal¬∑lar WordPress a trav√©s del balancejador de c√†rrega. Seguiu els passos de la instal¬∑laci√≥ i configureu l‚Äôusuari administrador i la contrasenya. Ara ja teniu el servidor web configurat amb WordPress i el balancejador de c√†rrega per distribuir el tr√†fic entre les inst√†ncies EC2.",
    "crumbs": [
      "Laboratoris",
      "Networking",
      "Laboratori 03 ¬∑ Desplegament d'una aplicaci√≥ web amb alta disponibilitat amb AWS"
    ]
  },
  {
    "objectID": "laboratories/02-network/01-aws-wordpress.html#configuraci√≥-vpn",
    "href": "laboratories/02-network/01-aws-wordpress.html#configuraci√≥-vpn",
    "title": "Desplegament d‚Äôuna aplicaci√≥ web amb alta disponibilitat amb AWS",
    "section": "Configuraci√≥ VPN",
    "text": "Configuraci√≥ VPN\n\nEC2 per desplegar el servidor VPN\nPer desplegar el servidor VPN, crearem una nova inst√†ncia EC2 que actuar√† com a servidor VPN. Aquesta inst√†ncia EC2 haur√† d‚Äôestar en una subxarxa p√∫blica connectada a interent. Anomenarem aquesta inst√†ncia AMSA-VPN i la situarem a la subxarxa p√∫blica AMSA-DMZ-01. Aquesta inst√†ncia EC2 utilitzar√† el grup de seguretat AMSA-VPN-SG que permetr√† el tr√†fic necessari per al funcionament del servidor VPN.\n\nNavegueu a la consola de AWS i seleccioneu el servei EC2. A la barra lateral, seleccioneu Instances i despr√©s Launch Instances.\nSeleccioneu la imatge Ubuntu Server 22.04 LTS.\nSeleccioneu la inst√†ncia t2.micro.\nConfigureu la inst√†ncia:\n\nNetwork: AMSA-VPC\nSubnet: AMSA-DMZ-01\nAuto-assign Public IP: Enable\n\n\n\n\nConfiguraci√≥ de la inst√†ncia EC2 per al servidor VPN\n\n\nConfigureu el grup de seguretat: AMSA-VPN-SG.\nSi reviseu la documentaci√≥ d‚Äôinstal¬∑laci√≥ del servidor OpenVPN: OpenVPN Access Server System Administrator Guide. Veure que necessitem els seg√ºents ports oberts: TCP 943, UDP 1194.\n\n\n\nConfiguraci√≥ del grup de seguretat per al servidor VPN\n\n\nConnecteu-vos a la inst√†ncia EC2 a trav√©s de la consola online de AWS o amb una connexi√≥ SSH i executeu la seg√ºent comanda per instal¬∑lar el servidor OpenVPN:\nsudo apt update -y\nsudo apt install ca-certificates gnupg wget net-tools -y\nsudo wget https://as-repository.openvpn.net/as-repo-public.asc -qO /etc/apt/trusted.gpg.d/as-repo-public.asc\nsudo echo \"deb [arch=amd64 signed-by=/etc/apt/trusted.gpg.d/as-repo-public.asc] http://as-repository.openvpn.net/as/debian jammy main\" | sudo tee /etc/apt/sources.list.d/openvpn-as-repo.list\nsudo apt update && sudo apt install openvpn-as -y\n\n\n\nInstal¬∑laci√≥ del servidor OpenVPN\n\n\nAmb aquestes credencials, podreu accedir a la interf√≠cie web del servidor OpenVPN a trav√©s del vostre navegador web. Navegueu a la IP p√∫blica de la inst√†ncia EC2 (en el meu cas https://44.199.196.242:943/admin), com no tenim el certificat SSL configurat, ens sortir√† un missatge d‚Äôadvert√®ncia, ignoreu-lo i continueu. Inicieu sessi√≥ amb les credencials que heu configurat anteriorment.\n\nNota: Si heu perdut les credencials de l‚Äôusuari openvpn, les podeu recuperar consultat el fitxer de logs del servidor OpenVPN. Per exemple, podeu consultar el fitxer de logs amb la seg√ºent comanda:\nsudo less /usr/local/openvpn_as/init.log \n\n\n\n\nInterf√≠cie web del servidor OpenVPN\n\n\n\nAccepteu els termes de llic√®ncia.\n\n\n\n\nAcceptaci√≥ dels termes de llic√®ncia\n\n\n\nAneu a VPN Server/Network Settings i configureu el Hostname or IP Address amb la IP p√∫blica de la inst√†ncia EC2 on teniu el servidor OpenVPN. Un cop fet, clicareu a Save.\n\n\n\nConfiguraci√≥ de la IP p√∫blica del servidor VPN\n\n\nAneu a Access Controls/Internet Access and DNS i seleccioneu l‚Äôopci√≥ Split Tunnel per evitar que tot el tr√†fic del client sigui redirigit a trav√©s de la VPN. √önicament el tr√†fic dirigit a les subxarxes de la VPC ser√† redirigit a trav√©s de la VPN.\n\n\n\nConfiguraci√≥ de Split Tunnel\n\n\nAneu a Access Controls/Global Access Rules i afegiu una regla per permetre el tr√†fic de la VPN a les subxarxes de la VPC:\n\n\n\nConfiguraci√≥ de les regles d‚Äôacc√©s global\n\n\nAneu a User i creu-vos un usuari i una contrasenya per connectar-vos al servidor VPN.\n\n\n\nCreaci√≥ d‚Äôun usuari per al servidor VPN\n\n\nUn cop tinguem el fitxer de configuraci√≥, ja podeu fer un Restart del servei OpenVPN per aplicar tots els canvis. Torneu a accedir a la interf√≠cie web del servidor OpenVPN.\nAneu a User/user/Connection Profiles i creeu un perfil de connexi√≥ per defecte. Un cop creat us baixar√† un fitxer de configuraci√≥ que despr√©s utilitzarem per connectar-nos al servidor VPN.\n\n\n\nDesc√†rrega del fitxer de configuraci√≥ del client VPN\n\n\nInstalleu l‚Äôaplicaci√≥ OpenVPN Connect al vostre ordinador. Aquesta aplicaci√≥ √©s el client VPN que utilitzarem per connectar-nos al servidor VPN.\nUn cop instal¬∑lat, obriu l‚Äôaplicaci√≥ i importeu el fitxer de configuraci√≥ que heu descarregat anteriorment.\n\nUn cop tot configurat, actualitzarem el grup de seguretat de les inst√†ncies EC2 per permetre el tr√†fic al port 22 √∫nicament provinent del servidor VPN. Aix√≤ significa que les inst√†ncies EC2 nom√©s acceptaran tr√†fic SSH del servidor VPN i no de qualsevol altre origen.\n\n\n\nConfiguraci√≥ tr√†fic SSH a Ec2 del servidor VPN\n\n\n\nEn aquest punt, ja no podreu accedir a les inst√†ncies EC2 on teniu el servei de WordPress a trav√©s de SSH, ja que el tr√†fic SSH nom√©s es permet des del servidor VPN. Per accedir a les inst√†ncies EC2, primer heu de connectar-vos al servidor VPN i despr√©s connectar-vos a les inst√†ncies EC2. Per fer-ho:\n\nImporteu el fitxer de configuraci√≥ del client OpenVPN Connect a l‚Äôaplicaci√≥ i connecteu-vos al servidor VPN.\n\n\n\nConnexi√≥ al servidor VPN\n\n\n\nTroubleShooting: Si en el fitxer de configuraci√≥ veieu (Server Hostname) una ip del rang 10.0.X.X, aix√≤ vol dir que la VPN no s‚Äôha configurat correctament. Assegureu-vos de reiniciar el servidor i tornar a descarregar el fitxer de configuraci√≥ del client, ha de tenir la ip p√∫blica del servidor VPN.\n\nUtilitzeu la mateixa contrasenya del usuari openvpn per connectar-vos al servidor VPN.\n\n\n\nConnexi√≥ al servidor VPN\n\n\nSi tot ha anat b√©, veureu que esteu connectats al servidor VPN.\n\n\n\nConnexi√≥ al servidor VPN\n\n\n\nFinalment, connecteu-vos a les inst√†ncies EC2:\n\n\n\nAcc√©s a les inst√†ncies EC2 a trav√©s del servidor VPN\n\n\n\nConsideracions importants: El servidor VPN ens permet accedir a les inst√†ncies EC2 a trav√©s de SSH, per√≤ a partir de l‚Äôadre√ßa interna (10.0.X.X) de la inst√†ncia EC2. No podrem accedir a les inst√†ncies EC2 a trav√©s de la seva adre√ßa p√∫blica ja que hem configurat la VPN per accedir a les subxarxes de la VPC.",
    "crumbs": [
      "Laboratoris",
      "Networking",
      "Laboratori 03 ¬∑ Desplegament d'una aplicaci√≥ web amb alta disponibilitat amb AWS"
    ]
  },
  {
    "objectID": "laboratories/02-network/01-aws-wordpress.html#neteja-els-recursos-creats",
    "href": "laboratories/02-network/01-aws-wordpress.html#neteja-els-recursos-creats",
    "title": "Desplegament d‚Äôuna aplicaci√≥ web amb alta disponibilitat amb AWS",
    "section": "Neteja els recursos creats",
    "text": "Neteja els recursos creats\nUn cop finalitzat podeu eliminar totes les inst√†ncies EC2 i la base de dades RDS per evitar c√†rrecs innecessaris al vostre compte d‚ÄôAWS.",
    "crumbs": [
      "Laboratoris",
      "Networking",
      "Laboratori 03 ¬∑ Desplegament d'una aplicaci√≥ web amb alta disponibilitat amb AWS"
    ]
  },
  {
    "objectID": "laboratories/02-network/01-aws-wordpress.html#exercics-adicionals",
    "href": "laboratories/02-network/01-aws-wordpress.html#exercics-adicionals",
    "title": "Desplegament d‚Äôuna aplicaci√≥ web amb alta disponibilitat amb AWS",
    "section": "Exercics Adicionals",
    "text": "Exercics Adicionals\n\nCom millorar√≠eu els grups de seguretat, quins canvis far√≠eu?\nQu√® caldria fer per connectar un client MySQL des de casa a la base de dades RDS? Expliqueu els passos.\nPrepara un script que faci una prova de c√†rrega al balancejador de c√†rrega i mostri com es distribueix el tr√†fic entre les inst√†ncies EC2.\nGenera un infra_v3.yaml que contingui tota la infraestructura com a codi.",
    "crumbs": [
      "Laboratoris",
      "Networking",
      "Laboratori 03 ¬∑ Desplegament d'una aplicaci√≥ web amb alta disponibilitat amb AWS"
    ]
  },
  {
    "objectID": "laboratories/02-network/01-aws-wordpress.html#recursos-addicionals",
    "href": "laboratories/02-network/01-aws-wordpress.html#recursos-addicionals",
    "title": "Desplegament d‚Äôuna aplicaci√≥ web amb alta disponibilitat amb AWS",
    "section": "Recursos Addicionals",
    "text": "Recursos Addicionals\n\ninfra_v1.yaml: Aquest fitxer cont√© la infraestructura com a codi per crear tots els recursos d‚ÄôAWS utilitzant AWS CloudFormation fins a la creaci√≥ de templates de llan√ßament.\ninfra_v2.yaml: Aquest fitxer cont√© la infraestructura com a codi per crear tots els recursos d‚ÄôAWS utilitzant AWS CloudFormation sense el load balancer ni les instancies EC2 corresponents als WordPress.",
    "crumbs": [
      "Laboratoris",
      "Networking",
      "Laboratori 03 ¬∑ Desplegament d'una aplicaci√≥ web amb alta disponibilitat amb AWS"
    ]
  },
  {
    "objectID": "laboratories/04-ldap/01-ldap.html",
    "href": "laboratories/04-ldap/01-ldap.html",
    "title": "Gesti√≥ centralitzada d‚Äôusuaris utiltizant LDAP",
    "section": "",
    "text": "En aquest laboratori desplegarem i configurarem una infraestructura LDAP completa utilitzant tres inst√†ncies EC2 a AWS Academy. L‚Äôobjectiu √©s entendre tant el funcionament intern d‚Äôun servei d‚Äôautenticaci√≥ centralitzada com la seva integraci√≥ amb clients Linux i eines d‚Äôadministraci√≥.",
    "crumbs": [
      "Laboratoris",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Laboratori 05 ¬∑ Servei d'Autenticaci√≥ Centralitzada amb LDAP a AWS"
    ]
  },
  {
    "objectID": "laboratories/04-ldap/01-ldap.html#objectius-del-laboratori",
    "href": "laboratories/04-ldap/01-ldap.html#objectius-del-laboratori",
    "title": "Gesti√≥ centralitzada d‚Äôusuaris utiltizant LDAP",
    "section": "",
    "text": "En aquest laboratori desplegarem i configurarem una infraestructura LDAP completa utilitzant tres inst√†ncies EC2 a AWS Academy. L‚Äôobjectiu √©s entendre tant el funcionament intern d‚Äôun servei d‚Äôautenticaci√≥ centralitzada com la seva integraci√≥ amb clients Linux i eines d‚Äôadministraci√≥.",
    "crumbs": [
      "Laboratoris",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Laboratori 05 ¬∑ Servei d'Autenticaci√≥ Centralitzada amb LDAP a AWS"
    ]
  },
  {
    "objectID": "laboratories/04-ldap/01-ldap.html#infraestructura-a-desplegar",
    "href": "laboratories/04-ldap/01-ldap.html#infraestructura-a-desplegar",
    "title": "Gesti√≥ centralitzada d‚Äôusuaris utiltizant LDAP",
    "section": "üèóÔ∏è Infraestructura a desplegar",
    "text": "üèóÔ∏è Infraestructura a desplegar\nTreballarem amb tres m√†quines virtuals:\n\nServidor LDAP (OpenLDAP) : Gestionar√† el directori, usuaris, grups i esquemes.\nClient LDAP + SSSD: Permetr√† que els usuaris definits al directori es puguin autenticar al sistema Linux.\nServidor web LAM (LDAP Account Manager): Oferir√† una interf√≠cie gr√†fica per administrar el directori de manera senzilla.",
    "crumbs": [
      "Laboratoris",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Laboratori 05 ¬∑ Servei d'Autenticaci√≥ Centralitzada amb LDAP a AWS"
    ]
  },
  {
    "objectID": "laboratories/04-ldap/01-ldap.html#qu√®-aprendr√†s-en-aquest-laboratori",
    "href": "laboratories/04-ldap/01-ldap.html#qu√®-aprendr√†s-en-aquest-laboratori",
    "title": "Gesti√≥ centralitzada d‚Äôusuaris utiltizant LDAP",
    "section": "üß† Qu√® aprendr√†s en aquest laboratori?",
    "text": "üß† Qu√® aprendr√†s en aquest laboratori?\nEn finalitzar el laboratori ser√†s capa√ß de:\n\nComprendre l‚Äôarquitectura i els components b√†sics d‚Äôun sistema LDAP.\nInstal¬∑lar i configurar OpenLDAP en un servidor Linux.\nActivar TLS/SSL i utilitzar LDAPS (port 636) per a connexions segures.\nCrear i gestionar usuaris, grups i unitats organitzatives (OU) al directori.\nConfigurar un client Linux perqu√® utilitzi LDAP per autenticar usuaris (PAM + SSSD).\nUtilitzar LDAP Account Manager (LAM) per administrar visualment el directori.\nVerificar que un usuari creat al directori pot iniciar sessi√≥ al client Linux.",
    "crumbs": [
      "Laboratoris",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Laboratori 05 ¬∑ Servei d'Autenticaci√≥ Centralitzada amb LDAP a AWS"
    ]
  },
  {
    "objectID": "laboratories/04-ldap/01-ldap.html#resultats-esperats",
    "href": "laboratories/04-ldap/01-ldap.html#resultats-esperats",
    "title": "Gesti√≥ centralitzada d‚Äôusuaris utiltizant LDAP",
    "section": "üìå Resultats esperats",
    "text": "üìå Resultats esperats\nEn acabar haur√†s desplegat un entorn funcional que simula un sistema d‚Äôautenticaci√≥ corporatiu, tal com es trobaria en una infraestructura real d‚Äôempresa.",
    "crumbs": [
      "Laboratoris",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Laboratori 05 ¬∑ Servei d'Autenticaci√≥ Centralitzada amb LDAP a AWS"
    ]
  },
  {
    "objectID": "laboratories/04-ldap/01-ldap.html#requisits-per-comen√ßar-el-laboratori",
    "href": "laboratories/04-ldap/01-ldap.html#requisits-per-comen√ßar-el-laboratori",
    "title": "Gesti√≥ centralitzada d‚Äôusuaris utiltizant LDAP",
    "section": "üß© Requisits per comen√ßar el laboratori",
    "text": "üß© Requisits per comen√ßar el laboratori\nPer completar aquest laboratori necessitareu tres inst√†ncies EC2 que formaran la infraestructura LDAP. Utilitzarem Amazon Linux 2023, ja que √©s estable, lleuger i compatible amb les eines necess√†ries.\n\n\n\n\n\n\n\n\n\nRol\nNom recomanat\nPorts oberts\nProgramari necessari\n\n\n\n\nServidor LDAP\nOpenLDAP-AMSA-Server\n22, 389, 636\nOpenLDAP instal¬∑lat i configurat amb TLS/SSL\n\n\nClient LDAP\nLDAP-Client\n22\nSSSD, Paquets openldap-clients\n\n\nServidor LAM\nLAM-WebServer\n22, 80\nApache HTTPD + PHP + LDAP Account Manager (LAM)\n\n\n\n\nüîê Grups de seguretat (Security Groups)\n\nRegles d‚Äôentrada:\n\n\n\n\nRol\nPorts necessaris oberts\n\n\n\n\nServidor LDAP\nSSH (22/tcp), LDAP (389/tcp), LDAPS (636/tcp)\n\n\nClient LDAP\nSSH (22/tcp)\n\n\nServidor LAM\nSSH (22/tcp), HTTP (80/tcp)\n\n\n\n\nRegles de sortida: Totes per defecte (Allow All).\n\n\n\n\n\n\n\nTipCheckpoint (‚úî)\n\n\n\nVerifica que:\n\nLes 3 inst√†ncies EC2 estan creades. Apunta el DNS p√∫blic de cadascuna.\nAssegura‚Äôt que pots connectar-te via SSH a cada inst√†ncia.\nCada servei t√© els ports necessaris oberts al seu Security Group. Per comprovar-ho pots fer servir la comanda nc -zv &lt;IP_SERVIDOR&gt; &lt;PORT&gt;.",
    "crumbs": [
      "Laboratoris",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Laboratori 05 ¬∑ Servei d'Autenticaci√≥ Centralitzada amb LDAP a AWS"
    ]
  },
  {
    "objectID": "laboratories/04-ldap/01-ldap.html#part-i-configuraci√≥-del-servidor-openldap",
    "href": "laboratories/04-ldap/01-ldap.html#part-i-configuraci√≥-del-servidor-openldap",
    "title": "Gesti√≥ centralitzada d‚Äôusuaris utiltizant LDAP",
    "section": "PART I ‚Äì Configuraci√≥ del servidor OpenLDAP",
    "text": "PART I ‚Äì Configuraci√≥ del servidor OpenLDAP\n\nüõ†Ô∏è Instal¬∑laci√≥ d‚Äôeines i depend√®ncies\nSegons el manual oficial d‚Äôinstal¬∑laci√≥ manual d‚Äôinstal¬∑laci√≥, OpenLDAP requereix un conjunt de biblioteques i eines per poder compilar:\n\nCompilador C (gcc)\nOpenSSL ‚Üí necessari per TLS/SSL\nCyrus SASL ‚Üí suport d‚Äôautenticaci√≥ avan√ßada\nlibevent ‚Üí millora del rendiment en gesti√≥ d‚Äôesdeveniments\nlibargon2 / libsodium ‚Üí hashing de contrasenyes\nEines de compilaci√≥: make, autoconf, libtool\n\nsudo dnf install \\\ncyrus-sasl-devel make libtool autoconf libtool-ltdl-devel \\\nopenssl-devel libdb-devel tar gcc perl perl-devel wget vim -y\n\n\nüì¶ Descarregar i descomprimir OpenLDAP\nDescarregarem el paquet des de la p√†gina oficial mitjan√ßant FTP i el descomprimirem:\nVER=\"2.6.3\"\ncd /tmp\nwget ftp://ftp.openldap.org/pub/OpenLDAP/openldap-release/openldap-$VER.tgz\ntar xzf openldap-$VER.tgz\ncd openldap-$VER\n\n\n\n\n\n\nNote/tmp?\n\n\n\n/tmp: √âs un directori temporal, ideal per compilar programari sense embrutar el sistema. Un cop reiniciem, tot el que hi ha a /tmp es perd.\n\n\n\n\n\n\n\n\nTipCheckpoint (‚úî)\n\n\n\n\npwd ha de mostrar /tmp/openldap-2.6.3.\nls -lah /tmp/openldap-2.6.3 ha de llistar els fitxers font d‚ÄôOpenLDAP.\n\n\n\n\n\n‚öôÔ∏è Configuraci√≥ i instal¬∑laci√≥ d‚ÄôOpenLDAP\nUn cop descarregat el codi font, procedirem a configurar, compilar i instal¬∑lar OpenLDAP. Aquest proc√©s ens permet controlar exactament quines funcionalitats tindr√† el servidor.\n\nConfigurem el paquet amb les opcions que necessitem:\n./configure --prefix=/usr --sysconfdir=/etc --disable-static \\\n--enable-debug --with-tls=openssl --with-cyrus-sasl --enable-dynamic \\\n--enable-crypt --enable-spasswd --enable-slapd --enable-modules \\\n--enable-rlookups  --disable-sql  \\\n--enable-ppolicy --enable-syslog\n\n--prefix=/usr ‚Üí OpenLDAP s‚Äôinstal¬∑lar√† sota /usr (no /usr/local).\n--sysconfdir=/etc ‚Üí Fitxers de configuraci√≥ a /etc/openldap.\n--with-tls=openssl ‚Üí Activa TLS/SSL (LDAPS).\n--enable-slapd ‚Üí Construeix el servidor LDAP.\n--enable-modules ‚Üí Permet c√†rrega din√†mica de m√≤duls.\n--enable-ppolicy ‚Üí Suport de pol√≠tiques de contrasenyes.\n--enable-debug ‚Üí √ötil en entorns docents.\n\nCompilem i instal¬∑lem el paquet:\nsudo make depend\nsudo make\n\n\n\n\n\n\n\nWarningDev/Prod\n\n\n\nEl comandament make test executa proves d‚Äôintegritat, per√≤ pot trigar for√ßa estona i no √©s necessari en aquest laboratori. En producci√≥, s√≠ que es recomana.\n\n\n\nCompilem els m√≤duls addicionals per suportar SHA-2: Per defecte, OpenLDAP utilitza SHA-1, que avui dia √©s insuficientment segur. Activarem suport per a SHA-256, SHA-384 i SHA-512.\ncd contrib/slapd-modules/passwd/sha2\nsudo make\nInstal¬∑lem el servidor OpenLDAP:\ncd ../../../.. # Tornem a la carpeta inicial\nsudo make install\n\nAquesta comanda instal¬∑lar√†: - el servidor slapd - eines d‚Äôadministraci√≥ (ldapadd, ldapsearch, etc.) - configuraci√≥ base a /etc/openldap/\n\nInstal¬∑lem els m√≤duls addicionals relacionats amb SHA-2:\ncd contrib/slapd-modules/passwd/sha2\nsudo make install\n\nEn aquest punt, si tot ha anat b√©, ja tindrem el servidor LDAP instal¬∑lat al nostre servidor. Podeu comprovar:\n\nEls fitxers de configuraci√≥ a /etc/openldap/:\nsudo ls -la /etc/openldap/\nEls m√≤duls instal¬∑lats a /usr/local/libexec/openldap/:\nsudo ls -la /usr/local/libexec/openldap/\n# (o /usr/libexec/openldap/ si la vostra configuraci√≥ aix√≠ ho ha definit).\n\n\n\n\n\n\n\nTipCheckpoint (‚úî)\n\n\n\nAssegura‚Äôt que la instal¬∑laci√≥ ha anat b√©:\n\nVerifica que existeix el directori /etc/openldap.\nVerifica que existeix el directori /usr/local/libexec/openldap.\nVerifica que existeix /usr/local/libexec/openldap/pw-sha2.la.\nVerifica slapd -VV per veure la versi√≥ i els m√≤duls carregats.\n\nSi tot √©s correcte, ja tens OpenLDAP instal¬∑lat i llest per configurar.\n\n\n\n\nüîê Generaci√≥ de contrasenyes amb SHA-512 (SSHA-512)\nUn cop instal¬∑lats els m√≤duls SHA-2, podem generar contrasenyes utilitzant l‚Äôalgorisme SSHA-512, que √©s molt m√©s segur que el tradicional SHA-1. Aquest tipus de hash √©s el que s‚Äôutilitzar√† per emmagatzemar contrasenyes dins del directori LDAP.\n\nüõ†Ô∏è Generaci√≥ del hash amb slappasswd\nUtiltizarem la comanda slappasswd on cal indicar:\n\nquin algorisme de hash volem utilitzar (-h \"{SSHA512}\"), en aquest cas SHA-512.\nels m√≤duls que implementen aquest algorisme (-o module-load=pw-sha2.la).\nla ruta on es troben aquests m√≤duls (-o module-path=/usr/local/libexec/openldap).\n\nslappasswd -h \"{SSHA512}\" -o module-load=pw-sha2.la -o module-path=/usr/local/libexec/openldap\n\n\nüîë Introducci√≥ de la contrasenya\nQuan executeu la comanda, se us demanar√† la contrasenya:\nNew password: ********\nRe-enter new password: ********\n\n\n\n\n\n\nCautionSeguretat de la contrasenya\n\n\n\nEn l‚Äôexemple del laboratori utilitzem 1234 per simplicitat, per√≤ en entorns reals aix√≤ seria extremadament insegur.\n\n\n\n\nüßÆ Exemple de resultat\nEl resultat generat ser√† un hash llarg similar al seg√ºent:\n{SSHA512}CBVaUdQC9mVvAi+0O92J3hA+aPdiWUqf4lVr6bGRAUsFJX5aFOEb+1pSsY8PQwW1UKuuCGO2+160HotnfjXIaRKlryVekLnu\nAquesta cadena √©s el valor que es pot inserir al directori LDAP en atributs com userPassword.\n\n\n\n‚öôÔ∏è Configuraci√≥ del servei slapd.service\n√âs una bona pr√†ctica de seguretat que qualsevol servei del sistema s‚Äôexecuti amb un usuari propi i amb permisos m√≠nims. Aix√≤ evita que un possible atac comprometi tot el sistema. El servidor LDAP (slapd) no ha de ser executat com a root. En lloc d‚Äôaix√≤, crearem un usuari dedicat i un grup dedicat amb permisos estrictament limitats.\nCrearem un grup de sistema anomenat ldap amb un GID fixat:\nsudo groupadd -g 55 ldap\n\n\n\n\n\n\nNotePer qu√® gid 55?\n\n\n\nEl GID 55 √©s una convenci√≥ comuna per al grup ldap en moltes distribucions Linux. Utilitzar un GID fixat ajuda a mantenir la coher√®ncia entre diferents sistemes i facilita la gesti√≥ d‚Äôusuaris i permisos relacionats amb el servei LDAP. Facilita tamb√© la migraci√≥ o sincronitzaci√≥ de dades entre sistemes.\n\n\nCrearem un usuari per al servei LDAP:\nsudo useradd -r -M -d /var/lib/openldap -u 55 -g 55 -s /usr/sbin/nologin ldap\n\n-r ‚Üí crea un usuari de sistema (sense entrada en /etc/login.defs).\n-M ‚Üí no crea directori home (evita carpetes innecess√†ries).\n-d /var/lib/openldap ‚Üí defineix el directori ‚Äúbase‚Äù del servei.\n-u 55 ‚Üí UID espec√≠fic, alineat amb el GID creat.\n-g 55 ‚Üí assigna el grup ldap.\n-s /usr/sbin/nologin ‚Üí impedeix que l‚Äôusuari inici√Ø sessi√≥ interactiva.\n\n\n\n\n\n\n\nNoteLeast Privilege Principle\n\n\n\nEl servei LDAP tindr√† nom√©s els permisos que necessiti, i res m√©s.\n\n\n\n\n‚öôÔ∏è Configuraci√≥ del servei LDAP\n\nüìÅ Creaci√≥ dels directoris necessaris\nOpenLDAP utilitza dos elements importants:\n\nDirectori de dades ‚Üí cont√© la base de dades i el PID del servei\nDirectori de configuraci√≥ slapd.d ‚Üí cont√© la configuraci√≥ din√†mica generada per slapadd i slapd\n\nCreem-los:\nsudo mkdir -p /var/lib/openldap\nsudo mkdir -p /etc/openldap/slapd.d\n\n\nüõ°Ô∏è Assignaci√≥ de permisos\n\nAssignaci√≥ de permisos al directori de dades\nCom hem creat abans l‚Äôusuari i grup ldap, ara assignarem permisos correctes.\nsudo chown -R ldap:ldap /var/lib/openldap\nAix√≤ permet que el servei pugui crear els fitxers de BD, sockets i el PID.\n\n\nPermisos al fitxer de configuraci√≥\nsudo chown root:ldap /etc/openldap/slapd.conf\nsudo chmod 640 /etc/openldap/slapd.conf\nEl fitxer de configuraci√≥ ha de ser propietat de root, per√≤ el grup ldap ha de tenir permisos de lectura. Aix√≤ permet que el servei pugui llegir la configuraci√≥, per√≤ evita que altres usuaris no autoritzats hi accedeixin. Els permisos 640 signifiquen: el propietari (root) t√© permisos de lectura i escriptura, el grup (ldap) t√© permisos de lectura, i altres usuaris no tenen cap perm√≠s.\n\n\n\nüõ†Ô∏è Creaci√≥ del fitxer de servei Systemd\nAra crearem un servei slapd.service perqu√® OpenLDAP s‚Äôintegri amb systemd i pugui arrencar autom√†ticament amb el sistema.\nsudo bash -c \"cat &gt; /etc/systemd/system/slapd.service &lt;&lt; 'EOL'\n[Unit]\nDescription=OpenLDAP Server Daemon\nAfter=syslog.target network-online.target\nDocumentation=man:slapd\nDocumentation=man:slapd-mdb\n\n[Service]\nType=forking\nPIDFile=/var/lib/openldap/slapd.pid\nEnvironment=\\\"SLAPD_URLS=ldap:/// ldapi:/// ldaps:///\\\"\nEnvironment=\\\"SLAPD_OPTIONS=-F /etc/openldap/slapd.d\\\"\nExecStart=/usr/libexec/slapd -u ldap -g ldap -h \\${SLAPD_URLS} \\$SLAPD_OPTIONS\n\n[Install]\nWantedBy=multi-user.target\nEOL\"\nEn la secci√≥ [Unit] definim el nom i les depend√®ncies del servei. El directiu After=syslog.target network-online.target garanteix que slapd no s‚Äôinici√Ø fins que el sistema de registre (syslog) i la connexi√≥ de xarxa estiguin plenament operatius.\nEn la secci√≥ [Service] especifiquem que el servei √©s de tipus forking, ja que el dimoni slapd es bifurca i continua executant-se en segon pla. Tamb√© indiquem el fitxer PID que systemd utilitzar√† per controlar el proc√©s, les variables d‚Äôentorn i la comanda d‚Äôinici. La variable SLAPD_URLS defineix les URL on el servidor escoltar√† connexions:\n\nldap:/// ‚Üí LDAP per TCP (port 389)\nldapi:/// ‚Üí socket Unix local\nldaps:/// ‚Üí LDAP sobre TLS (port 636)\n\nLa variable SLAPD_OPTIONS especifica la ubicaci√≥ del directori de configuraci√≥ din√†mica (slapd.d), que √©s el m√®tode modern de configuraci√≥ d‚ÄôOpenLDAP.\nFinalment, en la secci√≥ [Install] indiquem que el servei ha d‚Äôactivar-se autom√†ticament en l‚Äôobjectiu multi-user.target, que correspon al nivell d‚Äôexecuci√≥ t√≠pic en servidors Linux.\n\n\n\n\n\n\nTipAbans d‚Äôiniciar el servei\n\n\n\nUna bona pr√†ctica √©s reinciar systemd per informar-lo dels nous serveis creats: sudo systemctl daemon-reload.",
    "crumbs": [
      "Laboratoris",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Laboratori 05 ¬∑ Servei d'Autenticaci√≥ Centralitzada amb LDAP a AWS"
    ]
  },
  {
    "objectID": "laboratories/04-ldap/01-ldap.html#creaci√≥-de-la-base-de-dades-de-configuraci√≥-cnconfig",
    "href": "laboratories/04-ldap/01-ldap.html#creaci√≥-de-la-base-de-dades-de-configuraci√≥-cnconfig",
    "title": "Gesti√≥ centralitzada d‚Äôusuaris utiltizant LDAP",
    "section": "üß© Creaci√≥ de la base de dades de configuraci√≥ (cn=config)",
    "text": "üß© Creaci√≥ de la base de dades de configuraci√≥ (cn=config)\nAbans que slapd pugui funcionar, cal inicialitzar la base de dades de configuraci√≥ din√†mica d‚ÄôOpenLDAP. Aquesta configuraci√≥ √©s diferent de la base de dades de dades (on viuran els usuaris) i s‚Äôanomena cn=config.\ncn=config funciona com una BD LDAP normal: - tot s√≥n objectes‚Ä¶ - cada objecte t√© un DN‚Ä¶ - i cada DN t√© objectClasses i atributs.\nAquesta estructura substitueix l‚Äôantic slapd.conf, i √©s molt m√©s flexible.\n\nConceptes\n\nConfiguraci√≥ global (dn: cn=config)\nEl dn indica el nom distintiu de l‚Äôobjecte dins de l‚Äôarbre LDAP. En aquest cas, cn=config √©s el nom distintiu per a la configuraci√≥ global del servidor LDAP. Defineix par√†metres generals que afecten tot el servidor:\n\nRutes per als fitxers de PID i arguments (.pid, .args)\nConfiguraci√≥ TLS m√≠nima\nPol√≠tica general del dimoni\n\n\n\nM√≤duls (dn: cn=module,cn=config)\nEls m√≤duls s√≥n components addicionals que amplien la funcionalitat del servidor LDAP. En aquest cas, carreguem:\n\nback_mdb.la ‚Üí el backend de base de dades MDB (el m√©s modern i recomanat)\npw-sha2.la ‚Üí suport de contrasenyes SHA-256/384/512\n‚ö†Ô∏è Nota: El m√≤dul pw-sha2.la pot estar a /usr/libexec/openldap o /usr/local/libexec/openldap segons la compilaci√≥. Per aix√≤ el fitxer defineix dues entrades.\n\n\n\nEsquemes ‚Äî cn=schema,cn=config\nEls esquemes defineixen quins objectes i atributs existeixen en el directori. En aquest cas, carreguem els esquemes t√≠pics:\n\ncore: objectes b√†sics (person, organization, organizationalUnit, etc.)\ncosine: amplia atributs i objectes est√†ndard\nnis: atributs relacionats amb usuaris i grups d‚Äôestil Unix/NIS\ninetorgperson: l‚Äôesquema m√©s utilitzat per comptes d‚Äôusuari moderns (mail, telephoneNumber, etc.)\n\n\n\nFrontend ‚Äî dn: olcDatabase=frontend,cn=config\nControla com s‚Äôaccedeixen totes les BDs. Nosaltres definirem:\n\nQuin hash utilitzar per defecte ‚Üí {SSHA512}\nPermisos:\n\ntothom pot llegir cn=Subschema\nroot local UNIX (peercred) pot administrar TOT\n\n\n\n\nBase de dades de configuraci√≥ ‚Äî dn: olcDatabase=config,cn=config\nDefineix permisos acl per accedir al propi cn=config.\n\n\n\nüìÑ Creaci√≥ del fitxer /etc/openldap/slapd.ldif\nAquest LDIF cont√© tota la configuraci√≥ inicial de slapd. El crearem aix√≠:\nsudo bash -c \"cat &gt; /etc/openldap/slapd.ldif &lt;&lt; 'EOL'\ndn: cn=config\nobjectClass: olcGlobal\ncn: config\nolcArgsFile: /var/lib/openldap/slapd.args\nolcPidFile: /var/lib/openldap/slapd.pid\nolcTLSCipherSuite: TLSv1.2:HIGH:\\!aNULL:\\!eNULL\nolcTLSProtocolMin: 3.3\n\ndn: cn=schema,cn=config\nobjectClass: olcSchemaConfig\ncn: schema\n\ndn: cn=module,cn=config\nobjectClass: olcModuleList\ncn: module\nolcModulepath: /usr/libexec/openldap\nolcModuleload: back_mdb.la\n\ndn: cn=module,cn=config\nobjectClass: olcModuleList\ncn: module\nolcModulepath: /usr/local/libexec/openldap\nolcModuleload: pw-sha2.la\n\ninclude: file:///etc/openldap/schema/core.ldif\ninclude: file:///etc/openldap/schema/cosine.ldif\ninclude: file:///etc/openldap/schema/nis.ldif\ninclude: file:///etc/openldap/schema/inetorgperson.ldif\n\ndn: olcDatabase=frontend,cn=config\nobjectClass: olcDatabaseConfig\nobjectClass: olcFrontendConfig\nolcDatabase: frontend\nolcPasswordHash: {SSHA512}CBVaUdQC9mVvAi+0O92J3hA+aPdiWUqf4lVr6bGRAUsFJX5aFOEb+1pSsY8PQwW1UKuuCGO2+160HotnfjXIaRKlryVekLnu\nolcAccess: to dn.base=\\\"cn=Subschema\\\" by * read\nolcAccess: to *\n  by dn.base=\\\"gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\\\" manage\n  by * none\n\ndn: olcDatabase=config,cn=config\nobjectClass: olcDatabaseConfig\nolcDatabase: config\nolcRootDN: cn=config\nolcAccess: to *\n  by dn.base=\\\"gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\\\" manage\n  by * none\nEOL\"\nEl script anterior t√© un problema: olcTLSCipherSuite: TLSv1.2:HIGH:\\!aNULL:\\!eNULL cont√© car√†cters especials (\\!) per eliminar-los feu:\nsudo sed -i 's/olcTLSCipherSuite: TLSv1\\.2:HIGH:\\\\!aNULL:\\\\!eNULL/olcTLSCipherSuite: TLSv1.2:HIGH:!aNULL:!eNULL/' /etc/openldap/slapd.ldif\n\n\nüèóÔ∏è Carregar la configuraci√≥ inicial (cn=config) al servidor LDAP\nEn aquest punt, ja hem creat el fitxer slapd.ldif que descriu tota la configuraci√≥ del servidor LDAP:\n\npar√†metres globals\nm√≤duls i esquemes\nACL i bases de dades internes\n\nAra cal carregar aquesta configuraci√≥ dins la base de dades cn=config utilitzant l‚Äôeina slapadd.\n\nPas 1 ‚Äî Carregar la configuraci√≥ amb slapadd\ncd /etc/openldap/\nsudo slapadd -n 0 -F /etc/openldap/slapd.d -l /etc/openldap/slapd.ldif\nsudo chown -R ldap:ldap /etc/openldap/slapd.d\n\nslapadd ‚Üí importa dades directament a una base de dades LDAP sense passar pel servidor.\n-n 0 ‚Üí indica que volem modificar la base n√∫mero 0, que sempre correspon a cn=config.\n-F /etc/openldap/slapd.d ‚Üí defineix el directori on s‚Äôescriuran els fitxers de configuraci√≥ din√†mica.\n-l slapd.ldif ‚Üí fitxer amb el contingut que volem carregar.\n\nDespr√©s de carregar la configuraci√≥, canviem els permisos perqu√® el servei LDAP (slapd) pugui llegir i escriure al directori slapd.d.\n\n\n\n\n\n\nWarningSoluci√≥ d‚Äôerrors\n\n\n\nSi es produeix un error, podeu eliminar la base de dades i tornar a carregar la configuraci√≥. Per fer-ho, sudo rm -rf /etc/openldap/slapd.d/* i torneu a executar la comanda slapadd.\n\n\n\n\nPas 2 ‚Äî Iniciar el servei LDAP\nUn cop la base de dades cn=config est√† creada, ja podem arrencar slapd com a servei systemd:\nsudo systemctl enable --now slapd\n\n\n\n\n\n\nTipCheckpoint (‚úî)\n\n\n\nVerifica que el servei s‚Äôha iniciat correctament:\n\nComprova l‚Äôestat del servei amb: systemctl status slapd\n\n\n\n\n\n\nüóÇÔ∏è Configurant l‚Äôestructura de la base de dades del directori\nUn cop tenim configurada la base cn=config, √©s moment de crear la base de dades LDAP que contindr√† les dades reals: usuaris, grups i unitats organitzatives. Aquesta base de dades es defineix mitjan√ßant una entrada dins cn=config anomenada: dn: olcDatabase=mdb,cn=config.\n\nrootdn.ldif ‚Äî Creaci√≥ de l‚Äôusuari admin i configuraci√≥ de la base de dades\nCrearem un fitxer amb la configuraci√≥ de la base de dades principal i el root admin.\n\nBASE=\"dc=amsa,dc=udl,dc=cat\"\nsudo bash -c \"cat &lt;&lt; EOL &gt; /etc/openldap/rootdn.ldif\ndn: olcDatabase=mdb,cn=config\nobjectClass: olcDatabaseConfig\nobjectClass: olcMdbConfig\nolcDatabase: mdb\nolcDbMaxSize: 42949672960\nolcDbDirectory: /var/lib/openldap\nolcSuffix: $BASE\nolcRootDN: cn=admin,$BASE\nolcRootPW: {SSHA512}CBVaUdQC9mVvAi+0O92J3hA+aPdiWUqf4lVr6bGRAUsFJX5aFOEb+1pSsY8PQwW1UKuuCGO2+160HotnfjXIaRKlryVekLnu\nolcDbIndex: uid pres,eq\nolcDbIndex: cn,sn pres,eq,approx,sub\nolcDbIndex: mail pres,eq,sub\nolcDbIndex: objectClass pres,eq\nolcDbIndex: loginShell pres,eq\nolcAccess: to attrs=userPassword,shadowLastChange,shadowExpire\n  by self write\n  by anonymous auth\n  by dn.subtree=\\\"gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\\\" manage\n  by dn.subtree=\\\"ou=system,$BASE\\\" read\n  by * none\nolcAccess: to dn.subtree=\\\"ou=system $BASE\\\"\n  by dn.subtree=\\\"gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\\\" manage\n  by * none\nolcAccess: to dn.subtree=\\\"$BASE\\\"\n  by dn.subtree=\\\"gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\\\" manage\n  by users read\n  by * none\nEOL\"\nObserva que:\n\nEl node arrel de la base de dades ser√† dc=amsa,dc=udl,dc=cat. Aquest node defineix l‚Äôabast del directori LDAP i √©s on s‚Äôemmagatzemaran tots els usuaris i grups. Tot el que crearem viur√† sota aquest node.\nL‚Äôusuari administrador ser√† cn=admin,dc=amsa,dc=udl,dc=cat. Aquest usuari tindr√† privilegis elevats per gestionar el directori. La seva contrasenya est√† definida mitjan√ßant un hash SSHA-512 (ara mateix √©s 1234), per√≤ podeu canviar-la generant un nou hash amb slappasswd.\nEls √≠ndexs definits optimitzen les cerques habituals en el directori (per exemple, per uid, cn, sn, mail, etc.).\nEls ACLs (Access Control Lists) defineixen qui pot accedir a quins atributs i entrades dins del directori. Per exemple, nom√©s l‚Äôusuari admin i el root local poden gestionar tot, mentre que els usuaris normals nom√©s poden llegir. Ning√∫ m√©s t√© acc√©s. El root s‚Äôaconsegueix amb peercred.\n\n\n\nCarregar la configuraci√≥ de la base de dades\nUn cop creat el fitxer, carreguem la configuraci√≥ a la base de dades:\nsudo ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/rootdn.ldif\nAquesta comanda:\n\nldapadd ‚Üí eina per afegir entrades a una base de dades LDAP.\n-Y EXTERNAL ‚Üí utilitza l‚Äôautenticaci√≥ SASL EXTERNAL, que permet autenticar-se com a usuari del sistema (en aquest cas, root).\n-H ldapi:/// ‚Üí utilitza el socket local (ldapi) per connectar-se al servidor LDAP.\n-f rootdn.ldif ‚Üí fitxer amb la configuraci√≥ que volem carregar.\n\n\n\n\nCreaci√≥ de l‚Äôestructura del directori LDAP\nUn cop creada la base de dades MDB i configurat l‚Äôusuari administrador (cn=admin,$BASE), ja podem definir l‚Äôestructura b√†sica del Directori d‚ÄôInformaci√≥ (DIT). Aquesta estructura seguir√† un patr√≥ molt habitual en entorns Linux i empreses:\n\nou=users ‚Üí usuaris del sistema\nou=groups ‚Üí grups del sistema\nou=system ‚Üí comptes o recursos especials\n\nPer tant, la nostra estructura b√†sica ser√†:\n\ndc=amsa,dc=udl,dc=cat: Node principal de la jerarquia LDAP.\nou=groups,dc=amsa,dc=udl,dc=cat. Aquesta entrada representa una organitzaci√≥ per als grups. Contindr√† entrades de tipus posixGroup o groupOfNames.\nou=users,dc=amsa,dc=udl,dc=cat. Aquesta entrada representa una organitzaci√≥ per als usuaris. Contindr√† entrades de tipus inetOrgPerson, posixAccount, o altres objectClasses d‚Äôusuaris.\nou=system,dc=amsa,dc=udl,dc=cat: Aquesta entrada representa una organitzaci√≥ per al sistema. √âs habitual crear aquesta OU per comptes especials del sistema, serveis, ACL internes, o objectes que no s√≥n ‚Äúusuaris reals‚Äù.\n\nAquesta estructura fa que el directori sigui ordenat, modular i coherent amb els sistemes Linux quan utilitzen NSS/LDAP.\nPer a crear aquesta estructura, primer crearem un fitxer LDIF anomenat basedn.ldif:\nBASE=\"dc=amsa,dc=udl,dc=cat\"\nDC=\"amsa\"\n\nsudo bash -c \"cat &lt;&lt; EOL &gt;&gt; basedn.ldif\ndn: $BASE\nobjectClass: dcObject\nobjectClass: organization\nobjectClass: top\no: AMSA\ndc: $DC\n\ndn: ou=groups,$BASE\nobjectClass: organizationalUnit\nobjectClass: top\nou: groups\n\ndn: ou=users,$BASE\nobjectClass: organizationalUnit\nobjectClass: top\nou: users\n\ndn: ou=system,$BASE\nobjectClass: organizationalUnit\nobjectClass: top\nou: system\nEOL\"\nCom que el nostre servidor permet peercred com a administrador, podem afegir aquests objectes amb:\nsudo ldapadd -Y EXTERNAL -H ldapi:/// -f basedn.ldif\n\n\n\n\n\n\nNoteSeguretat del socket ldapi\n\n\n\n-Y EXTERNAL -H ldapi:/// √©s el m√®tode m√©s segur: autentica via socket Unix com a root local del sistema, sense enviar cap contrasenya. En altres entorns, ldapadd -x -D \"cn=admin,$BASE\" -W -f basedn.ldif demanar√† la contrasenya de l‚Äôusuari admin.\n\n\n\n\nüìÇ Creaci√≥ d‚Äôusuaris i grups dins del directori LDAP\nAra que ja tenim l‚Äôestructura b√†sica (ou=users, ou=groups, ou=system), podem comen√ßar a crear usuaris i grups reals dins el directori. La creaci√≥ d‚Äôun usuari en LDAP es fa mitjan√ßant un fitxer LDIF que descriu totes les seves propietats.\n\nüë§ Exemple b√†sic: Creaci√≥ d‚Äôun usuari\ndn: uid=johndoe,ou=users,dc=amsa,dc=udl,dc=cat\nobjectClass: inetOrgPerson\nobjectClass: posixAccount\nobjectClass: shadowAccount\nobjectClass: top\ncn: John Doe\nsn: Doe\nuid: johndoe\nuidNumber: 1000\ngidNumber: 1000\nhomeDirectory: /home/johndoe\nloginShell: /bin/bash\nuserPassword: {SSHA512}CBVaUdQC9mVvAi+0O92J3hA+aPdiWUqf4lVr6bGRAUsFJX5aFOEb+1pSsY8PQwW1UKuuCGO2+160HotnfjXIaRKlryVekLnu\non:\n\ninetOrgPerson: Permet atributs de persona (nom, cognom, email‚Ä¶).\nposixAccount: Necessari perqu√® el sistema Linux pugui validar UID, GID, shell, home, etc.\nshadowAccount: Permet gestionar atributs com caducitat de contrasenya.\nuidNumber / gidNumber: Identificadors reals d‚Äôusuari i grup.\nloginShell: Shell que s‚Äôexecutar√† quan entri al sistema.\nuserPassword: Hash generat pr√®viament (SSHA-512).\n\n\n\n\n\n\n\nTipüîê Qu√® √©s un usuari OSProxy?\n\n\n\n√âs habitual crear un usuari especial OSProxy, amb la missi√≥ de permetre a sistemes Linux consultar:\n\nUID d‚Äôusuaris\nGID de grups\nLlistes de membres\n\nAix√≤ forma part del model de seguretat least privilege: Un compte limitat que nom√©s pot llegir informaci√≥ essencial del directori, sense privilegis administratius.\n\n\n\n\nüõ†Ô∏è Creaci√≥ del fitxer users.ldif amb usuaris i grups\nsudo bash -c '\nBASE=\"dc=amsa,dc=udl,dc=cat\"\n\ngroups=(\"programadors\" \"dissenyadors\")\ngids=(\"4000\" \"5000\")\nusers=(\"ramon\" \"manel\")\nsns=(\"mateo\" \"lopez\")\nuids=(\"4001\" \"5001\")\n\n# Crear fitxer LDIF\ncat &gt; /etc/openldap/users.ldif &lt;&lt; EOL1\ndn: cn=osproxy,ou=system,${BASE}\nobjectClass: organizationalRole\nobjectClass: simpleSecurityObject\ncn: osproxy\nuserPassword: {SSHA512}CBVaUdQC9mVvAi+0O92J3hA+aPdiWUqf4lVr6bGRAUsFJX5aFOEb+1pSsY8PQwW1UKuuCGO2+160HotnfjXIaRKlryVekLnu\ndescription: OS proxy for resolving UIDs/GIDs\n\nEOL1\n\n# GRUPS\nfor (( j=0; j&lt;${#groups[@]}; j++ )); do\ncat &gt;&gt; /etc/openldap/users.ldif &lt;&lt; EOL2\ndn: cn=${groups[$j]},ou=groups,${BASE}\nobjectClass: posixGroup\ncn: ${groups[$j]}\ngidNumber: ${gids[$j]}\n\nEOL2\ndone\n\n# USUARIS\nfor (( j=0; j&lt;${#users[@]}; j++ )); do\ncat &gt;&gt; /etc/openldap/users.ldif &lt;&lt; EOL3\ndn: uid=${users[$j]},ou=users,${BASE}\nobjectClass: inetOrgPerson\nobjectClass: posixAccount\nobjectClass: shadowAccount\ncn: ${users[$j]}\nsn: ${sns[$j]}\nuid: ${users[$j]}\nuidNumber: ${uids[$j]}\ngidNumber: ${uids[$j]}\nhomeDirectory: /home/${users[$j]}\nloginShell: /bin/bash\nuserPassword: {SSHA512}CBVaUdQC9mVvAi+0O92J3hA+aPdiWUqf4lVr6bGRAUsFJX5aFOEb+1pSsY8PQwW1UKuuCGO2+160HotnfjXIaRKlryVekLnu\n\nEOL3\ndone\n'\n\n\nCarregar els usuaris i grups al directori LDAP\nsudo ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/users.ldif\n\n\n\nüß™ Testeig inicial de la instal¬∑laci√≥ LDAP (abans de TLS)\n\nüîç Buscar objectes amb ldapsearch (mode local ldapi:///)\nPer comprovar que la base de dades cont√© els usuaris creats, fem una cerca a ou=users:\nldapsearch -H ldapi:/// -Y EXTERNAL -b \"ou=users,dc=amsa,dc=udl,dc=cat\"\n# La sortida ha de mostrar els usuaris creats com el ramon i el manel amb els seus atributs\n\n\nüîç Buscar objectes amb ldapsearch (mode an√≤nim)\nTamb√© podem provar una connexi√≥ LDAP an√≤nima (sense autenticar) per veure quina informaci√≥ √©s accessible p√∫blicament:\nldapsearch -x -H ldapi:/// -b \"ou=users,dc=amsa,dc=udl,dc=cat\"\nSi tot est√† configurat correctament, haur√†s de veure nom√©s els atributs que l‚ÄôACL permet per a usuaris an√≤nims (normalment molt pocs o cap).\n\n\nüîê Prova amb l‚Äôusuari admin (connexi√≥ autenticada)\nTamb√© podem provar una connexi√≥ LDAP cl√†ssica utilitzant cn=admin,$BASE.\nldapsearch -x -W \\\n  -H ldapi:/// \\\n  -D \"cn=admin,dc=amsa,dc=udl,dc=cat\" \\\n  -b \"ou=users,dc=amsa,dc=udl,dc=cat\"\nOn:\n\nEl par√†metre -x indica que utilitzem autenticaci√≥ simple (sense SASL).\nEl par√†metre -D especifica el DN de l‚Äôusuari amb el qual ens autenticarem (admin).\n\n\n\n\nAltres comandes √∫tils per a la gesti√≥ LDAP\nAquestes s√≥n les eines b√†siques per gestionar qualsevol directori LDAP:\n\n\n\nEina\nFunci√≥\n\n\n\n\nldapsearch\nCerca i consulta entrades\n\n\nldapadd\nAfegeix entrades (LDIF)\n\n\nldapmodify\nModifica entrades existents\n\n\nldapdelete\nElimina entrades\n\n\nldappasswd\nCanvia contrasenyes\n\n\n\nUs recomano familiaritzar-vos amb aquestes eines, ja que s√≥n fonamentals per a l‚Äôadministraci√≥ di√†ria d‚Äôun servidor LDAP. Feu proves amb elles per entendre com funcionen. Per exemple, podeu provar a canviar la contrasenya d‚Äôun usuari amb ldappasswd.\nldappasswd -H ldapi:/// \\\n  -D \"cn=admin,dc=amsa,dc=udl,dc=cat\" \\\n  -x -W \\\n  \"uid=manel,ou=users,dc=amsa,dc=udl,dc=cat\"\nAquesta comanda canviar√† la contrasenya de l‚Äôusuari manel. Et demanar√†: la contrasenya de l‚Äôadmin i despr√©s la nova contrasenya per a manel (2 vegades). Recordeu que ldappasswd genera autom√†ticament el hash de la contrasenya. No us cal fer-ho manualment. Podeu introduir la contrasenya en text pla, i ldappasswd s‚Äôencarregar√† de convertir-la al format correcte (SSHA512).\n\n\nExercicis d‚Äôampliaci√≥\n\nExercic 1: middleearth.ldif ‚Äî Creaci√≥ de la base de dades MiddleEarth\nA partir del que has fet a l‚Äôexercici anterior, crea una jerarquia nova per a middleearth dins el teu domini LDAP. Crea un fitxer middleearth.ldif que cont√©:\n\nels grups hobbits, elfs, nans, mags\nels seus gidNumber respectius\nAfegeix-lo al servidor amb ldapadd.\nComprova que els grups s‚Äôhan creat amb ldapsearch\n\n\n\nExercici 2: Crear els usuaris de Middle-Earth\nCrea un fitxer users-middleearth.ldif amb:\n\nels usuaris Frodo, Samwise, Gollum, Legolas, Gimli i Gandalf\nsn correctes\nuidNumber √∫nics\ngidNumber que coincideixi amb el seu grup\n\nVerifica que pots consultar-los amb ldapsearch.\n\n\nExercici 3: Modificar grup amb ldapmodify\n\nModificar el grup actual d‚Äôun usuari (per exemple, assigna a Gandalf el grup dels hobbits).\nComprova que el canvi s‚Äôha aplicat correctament amb ldapsearch.\n\n\n\nExercici 4: Eliminar usuari amb ldapdelete\n\nElimina l‚Äôusuari Gollum del directori LDAP.\nVerifica que ja no existeix amb ldapsearch.\n\n\n\n\nüîê Configuraci√≥ de certificats TLS per LDAP (LDAPS)\nPer protegir la comunicaci√≥ amb el servidor LDAP, activarem TLS perqu√® els clients puguin utilitzar LDAPS (port 636) o LDAP+StartTLS (port 389). Aix√≤ garanteix que:\n\nles contrasenyes viatgen xifrades\ntotes les consultes i respostes es protegeixen contra interceptaci√≥\nels clients poden verificar la identitat del servidor\n\n\nGeneraci√≥ de certificats TLS amb OpenSSL\nEl primer pas ser√† generar un parell de claus i un certificat autosignat amb OpenSSL. Aix√≤ √©s suficient per a un laboratori, per√≤ en producci√≥ es faria amb una CA real.\n\n\n\n\n\n\nWarning‚ö†Ô∏è IMPORTANT\n\n\n\nEl Common Name (CN) del certificat ha de coincidir amb el hostname del servidor LDAP que faran servir els clients.\n\n\nPATH_PKI=\"/etc/pki/tls\"\nHOSTNAME=\"ec2-xx-xxx-xxx-xxx.compute-1.amazonaws.com\"  # Canvia-ho pel teu hostname p√∫blic o privat\ncommonname=$HOSTNAME\ncountry=ES\nstate=Spain\nlocality=Igualada\norganization=UdL\norganizationalunit=IT\nemail=admin@udl.cat\n\nsudo openssl req -days 500 -newkey rsa:4096 \\\n    -keyout \"$PATH_PKI/ldapkey.pem\" -nodes \\\n    -sha256 -x509 -out \"$PATH_PKI/ldapcert.pem\" \\\n    -subj \"/C=$country/ST=$state/L=$locality/O=$organization/OU=$organizationalunit/CN=$commonname/emailAddress=$email\"\nAix√≤ crear√† una clau privada RSA de 4096 bits i un certificat X.509 autosignat v√†lid per 500 dies.\n\n\nAssignaci√≥ de permisos\nLa clau privada ha de ser llegible nom√©s per l‚Äôusuari ldap:\nsudo chown ldap:ldap \"$PATH_PKI/ldapkey.pem\"\nsudo chmod 400 \"$PATH_PKI/ldapkey.pem\"\n\n\n\n\n\n\nNoteQu√® √©s una CA?\n\n\n\nUna CA (Certificate Authority) √©s una entitat de confian√ßa que emet certificats digitals. Aquests certificats s‚Äôutilitzen per verificar la identitat d‚Äôun servidor o usuari i per establir connexions segures mitjan√ßant protocols com TLS/SSL. Quan un client es connecta a un servidor, utilitza el certificat em√®s per la CA per assegurar-se que est√† comunicant-se amb el servidor leg√≠tim i no amb un impostor. Ens ajuda a establir una cadena de confian√ßa en les comunicacions segures.\n\n\nCreem tamb√© un CA (per autosignats utilitzem el mateix certificat):\nsudo cp \"$PATH_PKI/ldapcert.pem\" \"$PATH_PKI/cacerts.pem\"\n\n\n\n\n\n\nTip(‚úîÔ∏è) Checkpoint\n\n\n\n\nVerifica que els fitxers s‚Äôhan creat correctament: openssl x509 -in /etc/pki/tls/ldapcert.pem -noout -text\n\n\n\n\n\n\nAfegir la configuraci√≥ TLS al servidor LDAP\nAra crearem un LDIF per dir al servidor LDAP on trobar els certificats.\nsudo bash -c \" cat &lt;&lt; EOF &gt; /etc/openldap/add-tls.ldif\ndn: cn=config\nchangetype: modify\nadd: olcTLSCACertificateFile\nolcTLSCACertificateFile: \"$PATH_PKI/cacerts.pem\"\n-\nadd: olcTLSCertificateKeyFile\nolcTLSCertificateKeyFile: \"$PATH_PKI/ldapkey.pem\"\n-\nadd: olcTLSCertificateFile\nolcTLSCertificateFile: \"$PATH_PKI/ldapcert.pem\"\nEOF\"\n\n\n\n\n\n\nNotePer qu√® add: i no replace:?\n\n\n\nPerqu√® aquests atributs encara no existeixen en la configuraci√≥ inicial. Si tornessis a aplicar TLS una segona vegada, aleshores s√≠ que hauries d‚Äôusar:\nchangetype: modify\nreplace: olcTLSCertificateFile\n\n\n\nCarregar la configuraci√≥ TLS\nsudo ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/add-tls.ldif\n\n\nReiniciar el servei LDAP\nsudo systemctl restart slapd\n\n\n\n\n\n\nTip(‚úîÔ∏è) Checkpoint\n\n\n\n\nComprova que el servei s‚Äôha reiniciat correctament: systemctl status slapd\nComprova que est√† escoltant als ports LDAP i LDAPS amb: ss -tuln | grep slapd\nPots utilitzar openssl s_client -connect localhost:636 -showcerts per verificar que el certificat TLS s‚Äôha carregat correctament.\nldapwhoami -H ldaps://$HOSTNAME -x -D \"cn=admin,dc=amsa,dc=udl,dc=cat\" -W per assegurar-te que pots autenticar-te via LDAPS.",
    "crumbs": [
      "Laboratoris",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Laboratori 05 ¬∑ Servei d'Autenticaci√≥ Centralitzada amb LDAP a AWS"
    ]
  },
  {
    "objectID": "laboratories/04-ldap/01-ldap.html#configuraci√≥-del-client-ldap",
    "href": "laboratories/04-ldap/01-ldap.html#configuraci√≥-del-client-ldap",
    "title": "Gesti√≥ centralitzada d‚Äôusuaris utiltizant LDAP",
    "section": "üñ•Ô∏è Configuraci√≥ del client LDAP",
    "text": "üñ•Ô∏è Configuraci√≥ del client LDAP\nEn aquest apartat configurarem una nova inst√†ncia EC2 perqu√® pugui:\n\nvalidar usuaris LDAP,\nutilitzar grups LDAP,\ncrear autom√†ticament el directori /home/ quan un usuari LDAP entri al sistema,\nutilitzar LDAPS (TLS) per a totes les connexions.\n\n\nInstal¬∑lar els paquets necessaris\nEl client necessita eines LDAP i SSSD (System Security Services Daemon), que permet integrar LDAP amb PAM i NSS.\nsudo dnf install -y openldap-clients sssd sssd-tools authselect oddjob-mkhomedir\n\nopenldap-clients ‚Üí eines com ldapsearch, ldapadd, etc.\nsssd ‚Üí daemon que gestiona usuaris i credencials.\noddjob-mkhomedir ‚Üí crea /home/ autom√†ticament.\nauthselect ‚Üí configura PAM/NSS amb SSSD.\n\n\n\nCopiar el certificat CA del servidor LDAP\nEl client ha de confiar en el certificat TLS del servidor.\nAl servidor LDAP:\nsudo cat /etc/pki/tls/cacerts.pem\n# Copia TOT el contingut.\nAl client LDAP:\nCrea el fitxer:\nsudo vi /etc/pki/tls/cacert.crt\n# Enganxa el contingut.\nEs recomana establir permisos restrictius:\nsudo chmod 644 /etc/pki/tls/cacert.crt\n\n\nConfigurar /etc/openldap/ldap.conf\nAquest fitxer indica al client on trobar el servidor LDAP i la CA:\nsudo bash -c \"cat &gt; /etc/openldap/ldap.conf &lt;&lt; EOF\nBASE dc=amsa,dc=udl,dc=cat\nURI ldaps://ec2-XX-XXX-XXX-XXX.compute-1.amazonaws.com\nTLS_CACERT /etc/pki/tls/cacert.crt\nEOF\"\n\n\nConfigurar SSSD /etc/sssd/sssd.conf\nsudo bash -c \"cat &gt; /etc/sssd/sssd.conf &lt;&lt; EOF\n[sssd]\nservices = nss, pam, sudo\nconfig_file_version = 2\ndomains = default\n\n[nss]\n\n[pam]\noffline_credentials_expiration = 60\n\n[domain/default]\nid_provider = ldap\nauth_provider = ldap\nchpass_provider = ldap\naccess_provider = ldap\nsudo_provider = ldap\ncache_credentials = True\n\nldap_uri = ldaps://ec2-XX-XXX-XXX-XXX.compute-1.amazonaws.com\nldap_search_base = dc=amsa,dc=udl,dc=cat\nldap_user_search_base = ou=users,dc=amsa,dc=udl,dc=cat\nldap_group_search_base = ou=groups,dc=amsa,dc=udl,dc=cat\n\nldap_default_bind_dn = cn=osproxy,ou=system,dc=amsa,dc=udl,dc=cat\nldap_default_authtok = 1234\n\nldap_tls_reqcert = demand\nldap_tls_cacert = /etc/pki/tls/cacert.crt\n\nldap_id_use_start_tls = True\nldap_search_timeout = 50\nldap_network_timeout = 60\n\nldap_access_filter = (objectClass=posixAccount)\nEOF\"\nAquest fitxer configura SSSD per utilitzar LDAP com a font d‚Äôusuaris i grups, amb connexi√≥ segura via LDAPS. Molt important: assegura‚Äôt que ldap_uri i ldap_default_bind_dn coincideixen amb el teu servidor i usuari OSProxy. La contrasenya tamb√© ha de ser correcta.\n\n\n\n\n\n\nNotePassword en texto pl√†?\n\n\n\nEn aquest exemple, la contrasenya de l‚Äôusuari osproxy s‚Äôha posat en text pla per simplicitat. En un entorn de producci√≥, √©s recomanable utilitzar m√®todes m√©s segurs per gestionar les contrasenyes, com ara fitxers de contrasenyes xifrats o utilitzar eines de gesti√≥ de secrets. Tot i aix√≤, recordeu que l‚Äôusuari proxy t√© permisos limitats per llegir nom√©s la informaci√≥ necess√†ria i no pot escriure/modificar res al directori LDAP.\n\n\nAssigneu els permisos correctes:\nsudo chmod 600 /etc/sssd/sssd.conf\n\n\nConfigurar Authselect\nauthselect √©s una eina que simplifica la configuraci√≥ d‚Äôautenticaci√≥ en sistemes Linux. Ens permet no tenir que configurar PAM i NSS manualment.\nsudo authselect select sssd --force\n\n\nConfigurar Oddjob per a la creaci√≥ autom√†tica de directoris d‚Äôinici\nEl servei oddjobd crea els directoris /home/&lt;usuari&gt; quan un usuari LDAP inicia sessi√≥ per primera vegada.\nsudo systemctl enable --now oddjobd\nAfegeix la seg√ºent l√≠nia al fitxer /etc/pam.d/system-auth per habilitar aquesta funcionalitat:\nsudo bash -c 'echo \"session optional pam_oddjob_mkhomedir.so skel=/etc/skel/ umask=0077\" &gt;&gt; /etc/pam.d/system-auth'\n\n\nIniciar i habilitar SSSD\nsudo systemctl enable --now sssd\n\n\nTestar la configuraci√≥ del client LDAP\nProva a cercar usuaris LDAP amb id i getent:\nid ramon\ngetent passwd ramon\ngetent group programadors\n\n\nTestar amb creaci√≥ manual\nsudo mkdir /home/ramon\nsudo chown 4001::4000 /home/ramon\nls -ld /home/ramon\n# Si veus que el propietari √©s ramon i el grup √©s programadors, tot funciona correctament.\n# Si veus, 4001:4000, vol dir que SSSD no est√† funcionant correctament.",
    "crumbs": [
      "Laboratoris",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Laboratori 05 ¬∑ Servei d'Autenticaci√≥ Centralitzada amb LDAP a AWS"
    ]
  },
  {
    "objectID": "laboratories/04-ldap/01-ldap.html#installaci√≥-i-configuraci√≥-dun-client-web-ldap-lam",
    "href": "laboratories/04-ldap/01-ldap.html#installaci√≥-i-configuraci√≥-dun-client-web-ldap-lam",
    "title": "Gesti√≥ centralitzada d‚Äôusuaris utiltizant LDAP",
    "section": "üåê Instal¬∑laci√≥ i configuraci√≥ d‚Äôun client web LDAP (LAM)",
    "text": "üåê Instal¬∑laci√≥ i configuraci√≥ d‚Äôun client web LDAP (LAM)\nPer facilitar l‚Äôadministraci√≥ del servidor LDAP, instal¬∑larem LAM ‚Äî LDAP Account Manager, una interf√≠cie web que permet:\n\nveure usuaris i grups de manera visual\nmodificar entrades LDAP\nafegir nous usuaris i grups\ngestionar contrasenyes\naplicar plantilles d‚Äôusuaris i perfils\n\n√âs una eina molt √∫til perqu√® els estudiants entenguin com est√† organitzat el directori i com funcionen els objectClasses. Aquesta configuraci√≥ es pot fer en la mateixa inst√†ncia del servidor LDAP o en una inst√†ncia separada. Nosaltres ho farem en una inst√†ncia separada per simular un entorn real on el client web est√† a√Øllat del servidor LDAP.\n\nInstal¬∑laci√≥ de depend√®ncies\nCal instal¬∑lar Apache i els m√≤duls PHP necessaris perqu√® LAM funcioni:\nsudo dnf install -y httpd php php-ldap php-mbstring php-gd php-gmp php-zip\nsudo systemctl enable --now httpd\n\n\nInstal¬∑laci√≥ de LAM\nPer fer-ho, descarregarem el paquet RPM oficial de LAM i l‚Äôinstal¬∑larem:\nsudo wget https://github.com/LDAPAccountManager/lam/releases/download/9.0.RC1/ldap-account-manager-9.0.RC1-0.fedora.1.noarch.rpm\nsudo dnf install -y ldap-account-manager-9.0.RC1-0.fedora.1.noarch.rpm\n\n\n\n\n\n\nNoteVerifica la versi√≥ m√©s recent\n\n\n\nComprova a la p√†gina oficial de LAM Releases si hi ha una versi√≥ m√©s recent i actualitza l‚Äôenlla√ß de desc√†rrega si cal.\n\n\nLAM quedar√† instal¬∑lat a /usr/share/lam i accessible via http:///lam.\n\n\nConfiguraci√≥ de LAM\nPer configurar LAM, es pot fer des de la interf√≠cie web. Accedeix a: http://&lt;IP_SERVER&gt;/lam, el usuari per defecte √©s lam i la contrasenya tamb√© lam. √âs molt important que canvieu aquesta contrasenya en el primer acc√©s per motius de seguretat.\n\nAneum a LAM Configuration:\n\nEdit general settings:\n\nImporteu el certificat CA del servidor LDAP a la secci√≥ TLS/SSL per permetre connexions segures. Copieu l‚Äôadre√ßa del servidor LDAP (e.g ldaps://XXXXXXXX.compute-1.amazonaws.com:636) i feu clic a Import from server.\n\nEdit server profiles:\n\nServer Address: ldaps://XXXXXXXX.compute-1.amazonaws.com:636 o b√© si esteu utilitzant el vostre servidor LDAP, ldap://localhost:389.\nActivate TLS: Marcat.\nList of Valid Users: cn=osproxy,ou=system,dc=amsa,dc=udl,dc=cat.\nTree suffix: dc=amsa,dc=udl,dc=cat.\n\nAccount Types:\n\nUsers: ou=users,dc=amsa,dc=udl,dc=cat.\nGroups: ou=groups,dc=amsa,dc=udl,dc=cat.\n\nList of Valid Users: cn=osproxy,ou=system,dc=amsa,dc=udl,dc=cat.\n\n\n\n\n\n\n\nTipConfiguraci√≥ de LAM\n\n\n\nAquesta configuraci√≥ es guarda en un fitxer anomenat config.inc.php a /etc/lam/. Si necessites canviar la configuraci√≥ manualment, pots editar aquest fitxer.",
    "crumbs": [
      "Laboratoris",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Laboratori 05 ¬∑ Servei d'Autenticaci√≥ Centralitzada amb LDAP a AWS"
    ]
  },
  {
    "objectID": "laboratories/04-ldap/01-ldap.html#testing-de-lam",
    "href": "laboratories/04-ldap/01-ldap.html#testing-de-lam",
    "title": "Gesti√≥ centralitzada d‚Äôusuaris utiltizant LDAP",
    "section": "Testing de LAM",
    "text": "Testing de LAM\nUn cop configurat correctament, haur√≠eu de poder iniciar sessi√≥ a LAM amb l‚Äôusuari osproxy i la contrasenya que heu definit anteriorment. Un cop dins, podreu veure i gestionar els usuaris i grups del vostre directori LDAP de manera visual. Ara podeu afegir nous usuaris, modificar els existents i gestionar grups f√†cilment.",
    "crumbs": [
      "Laboratoris",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Laboratori 05 ¬∑ Servei d'Autenticaci√≥ Centralitzada amb LDAP a AWS"
    ]
  },
  {
    "objectID": "laboratories/04-ldap/01-ldap.html#project-03-automatitzaci√≥-amb-aws-i-ansible",
    "href": "laboratories/04-ldap/01-ldap.html#project-03-automatitzaci√≥-amb-aws-i-ansible",
    "title": "Gesti√≥ centralitzada d‚Äôusuaris utiltizant LDAP",
    "section": "Project 03: Automatitzaci√≥ amb AWS i Ansible",
    "text": "Project 03: Automatitzaci√≥ amb AWS i Ansible\n\nPr√†ctica 03 - Enunciat",
    "crumbs": [
      "Laboratoris",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Laboratori 05 ¬∑ Servei d'Autenticaci√≥ Centralitzada amb LDAP a AWS"
    ]
  },
  {
    "objectID": "projects/02-project/02-project.html",
    "href": "projects/02-project/02-project.html",
    "title": "Pr√†ctica 02: Diagn√≤stic i resoluci√≥ d‚Äôincid√®ncies en un servidor",
    "section": "",
    "text": "Aquesta pr√†ctica √©s un hack-the-box de diagnosi i resoluci√≥ d‚Äôincid√®ncies en un servidor Linux. El professor us proporcionar√† una m√†quina virtual amb diversos problemes que haureu d‚Äôidentificar i solucionar en format contrarellotge (temps limitat de la classe).\n\n‚è± Durada: 2 hores\nüñ•Ô∏è Entorn: m√†quina virtual facilitada pel professor\nüë• Treball: en grups de 2‚Äì3 persones\nüìÑ Entrega: Informe en format pdf al campus virtual.\n\nPodeu utilitzar qualsevol comanda i cercar informaci√≥ en l√≠nia. Actueu amb cura i preserveu evid√®ncies abans de fer canvis irreversibles.",
    "crumbs": [
      "Projectes",
      "Projecte 2 ¬∑ Diagn√≤stic i Resoluci√≥ d'Incid√®ncies"
    ]
  },
  {
    "objectID": "projects/02-project/02-project.html#instruccions-generals",
    "href": "projects/02-project/02-project.html#instruccions-generals",
    "title": "Pr√†ctica 02: Diagn√≤stic i resoluci√≥ d‚Äôincid√®ncies en un servidor",
    "section": "",
    "text": "Aquesta pr√†ctica √©s un hack-the-box de diagnosi i resoluci√≥ d‚Äôincid√®ncies en un servidor Linux. El professor us proporcionar√† una m√†quina virtual amb diversos problemes que haureu d‚Äôidentificar i solucionar en format contrarellotge (temps limitat de la classe).\n\n‚è± Durada: 2 hores\nüñ•Ô∏è Entorn: m√†quina virtual facilitada pel professor\nüë• Treball: en grups de 2‚Äì3 persones\nüìÑ Entrega: Informe en format pdf al campus virtual.\n\nPodeu utilitzar qualsevol comanda i cercar informaci√≥ en l√≠nia. Actueu amb cura i preserveu evid√®ncies abans de fer canvis irreversibles.",
    "crumbs": [
      "Projectes",
      "Projecte 2 ¬∑ Diagn√≤stic i Resoluci√≥ d'Incid√®ncies"
    ]
  },
  {
    "objectID": "projects/02-project/02-project.html#context",
    "href": "projects/02-project/02-project.html#context",
    "title": "Pr√†ctica 02: Diagn√≤stic i resoluci√≥ d‚Äôincid√®ncies en un servidor",
    "section": "Context",
    "text": "Context\nHeu rebut una trucada d‚Äôun client que t√© problemes amb el seu servidor Linux. La imatge de la m√†quina virtual que us ha facilitat cont√© el servidor del client. La vostra missi√≥ √©s identificar tots els problemes ocults al sistema, explicar-ne la causa, aplicar solucions raonades i deixar el sistema operatiu i net. Per a cada problema heu de documentar el proc√©s de diagnosi i resoluci√≥.",
    "crumbs": [
      "Projectes",
      "Projecte 2 ¬∑ Diagn√≤stic i Resoluci√≥ d'Incid√®ncies"
    ]
  },
  {
    "objectID": "projects/02-project/02-project.html#procediment",
    "href": "projects/02-project/02-project.html#procediment",
    "title": "Pr√†ctica 02: Diagn√≤stic i resoluci√≥ d‚Äôincid√®ncies en un servidor",
    "section": "Procediment",
    "text": "Procediment\n\nArrencar la m√†quina virtual i observar el comportament inicial.\n\nInvestigar sistem√†ticament per identificar problemes i causes.\nAplicar solucions i verificar la recuperaci√≥.\n\nDocumentar tot el proc√©s de diagnosi i resoluci√≥.",
    "crumbs": [
      "Projectes",
      "Projecte 2 ¬∑ Diagn√≤stic i Resoluci√≥ d'Incid√®ncies"
    ]
  },
  {
    "objectID": "projects/02-project/02-project.html#tasques",
    "href": "projects/02-project/02-project.html#tasques",
    "title": "Pr√†ctica 02: Diagn√≤stic i resoluci√≥ d‚Äôincid√®ncies en un servidor",
    "section": "Tasques",
    "text": "Tasques\n\nComproveu els logs del sistema (dmesg, journalctl, /var/log/syslog).\nVerifiqueu l‚Äôestat dels serveis amb systemctl.\nComproveu l‚Äôespai en disc amb la comanda df.\nReviseu els permisos dels fitxers i directoris rellevants.\nEs molt important que l‚Äôusuari jordi tingui un programa amb c anomenat hola a /home/jordi/bin/hola que imprimeixi Hola, m√≥n! quan s‚Äôexecuti.\nEs molt important que elimineu l‚Äôarxiu /srv/lab/passwords.txt que cont√© contrasenyes en text pla i que no s‚Äôhauria d‚Äôhaver creat mai.\nReporteu els logs amb evid√®ncies de cada problema, reviseu els logs tamb√© entre arrencades.\n\n\nEl sistema t√© 2 usuaris: root i jordi. Els passwords d‚Äôaquests usuaris s√≥n 1234.",
    "crumbs": [
      "Projectes",
      "Projecte 2 ¬∑ Diagn√≤stic i Resoluci√≥ d'Incid√®ncies"
    ]
  },
  {
    "objectID": "projects/02-project/02-project.html#entrega",
    "href": "projects/02-project/02-project.html#entrega",
    "title": "Pr√†ctica 02: Diagn√≤stic i resoluci√≥ d‚Äôincid√®ncies en un servidor",
    "section": "Entrega",
    "text": "Entrega\nEntregueu un informe:\n\nDescripci√≥ del sistema:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nElement\nDispositiu (e.g.¬†/dev/sda1)\nPunts de muntatge\nTipus FS\nUUID\nMida\nEspai lliure\nInodes totals\nInodes lliures\nNotes\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPer a cada problema identificat, incloeu:\n\n\n\n\n\n\n\n\n\n\n\n\nProblema\nS√≠mptoma\nComandes de diagnosi\nSoluci√≥ aplicada\nRecomanaci√≥ futura\nEvid√®ncies\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFeu una recomanaci√≥ general per millorar la seguretat i estabilitat del sistema.\n\n\nContingut de l‚Äôinforme\n\nS√≠mptoma observat (captura o sortida de comandes).\nComandes utilitzades per diagnosticar.\nSoluci√≥ aplicada (i per qu√®).\nRecomanaci√≥ per evitar-ho en futur.\nArxius d‚Äôevid√®ncia: export de journals i logs rellevants.\nLlista de comandes executades (p.¬†ex. un commands.txt amb les comandes clau).",
    "crumbs": [
      "Projectes",
      "Projecte 2 ¬∑ Diagn√≤stic i Resoluci√≥ d'Incid√®ncies"
    ]
  },
  {
    "objectID": "projects/02-project/02-project.html#avaluaci√≥",
    "href": "projects/02-project/02-project.html#avaluaci√≥",
    "title": "Pr√†ctica 02: Diagn√≤stic i resoluci√≥ d‚Äôincid√®ncies en un servidor",
    "section": "Avaluaci√≥",
    "text": "Avaluaci√≥\n\n\n\nCriteri\nPercentatge\n\n\n\n\nIdentificaci√≥ correcta dels problemes\n40%\n\n\nSolucions aplicades i afecte rebut\n30%\n\n\nQualitat de la documentaci√≥ i evid√®ncies\n20%\n\n\nBona pr√†ctica operativa (preservar evid√®ncies, justificar canvis)\n10%\n\n\n\n\n\nHappy SysAdmin! üïµÔ∏è‚Äç‚ôÇÔ∏è",
    "crumbs": [
      "Projectes",
      "Projecte 2 ¬∑ Diagn√≤stic i Resoluci√≥ d'Incid√®ncies"
    ]
  },
  {
    "objectID": "projects/04-project/04-project.html",
    "href": "projects/04-project/04-project.html",
    "title": "Pr√†ctica 04: Dockeritzaci√≥ i Orquestraci√≥ d‚Äôuna API a AWS",
    "section": "",
    "text": "Aquesta pr√†ctica ha estat desenvolupada pels professors de Lleida, i enguany la fareu als dos campus:\nEn part es tracta d‚Äôuna competici√≥ amistosa entre els dos campus per veure qui ho fa millor!",
    "crumbs": [
      "Projectes",
      "Projecte 4 ¬∑ Dockeritzaci√≥ i Orquestraci√≥ d'una API a AWS"
    ]
  },
  {
    "objectID": "projects/04-project/04-project.html#introduction",
    "href": "projects/04-project/04-project.html#introduction",
    "title": "Pr√†ctica 04: Dockeritzaci√≥ i Orquestraci√≥ d‚Äôuna API a AWS",
    "section": "1. Introduction",
    "text": "1. Introduction\nThe objective for this assignment is to dockerize and orchestrate a provided API.\nWe‚Äôve created an HTTP Server API, a program that communicate between different applications by defining clear rules for how data is requested, sent, and received.\nThere are lots of different behaviours for APIs (and we‚Äôll explain how ours works in the sections bellow), but they will typically have:\n\nEndpoints: An API endpoint is a dedicated URL that provides access to a specific resource. For instance, the /articles endpoint in a blogging app would return all the articles of the server.\nMethod: The request‚Äôs method indicates the type of operation the client would like to perform on a given resource. REST APIs are accessible through standard HTTP methods, which perform common actions like retrieving, creating, updating, and deleting data.\nParameters: Parameters are the variables that are passed to an API endpoint to provide specific instructions for the API to process. These parameters can be included in the API request as part of the URL, in the query string, or in the request body. For example, the /articles endpoint of a blogging API might accept a ‚Äútopic‚Äù parameter, which it would use to access and return articles on a specific topic.\nRequest body: The body is the main part of the request, and it includes the actual data that is required to create, update, or delete a resource. For instance, if you were creating a new article in a blogging app, the request body would likely include the article‚Äôs content, title, and author.\n\nThe objective of this activity is to dockerize and deploy to AWS our API, while also learning about databases in the way.",
    "crumbs": [
      "Projectes",
      "Projecte 4 ¬∑ Dockeritzaci√≥ i Orquestraci√≥ d'una API a AWS"
    ]
  },
  {
    "objectID": "projects/04-project/04-project.html#delivery",
    "href": "projects/04-project/04-project.html#delivery",
    "title": "Pr√†ctica 04: Dockeritzaci√≥ i Orquestraci√≥ d‚Äôuna API a AWS",
    "section": "2. Delivery",
    "text": "2. Delivery\nAccept the assignment in Github Classroom, following the link\nTo complete this activity, you must do the following for each sub-delivery (PRAC-4.1, PRAC-4.2, PRAC-4.3 and PRAC-4.4):\n\nDeliver a link to your Github repository on the virtual campus activity.\nPush the code you‚Äôve written (before the final deadline) to your Github repo so we can evaluate it.\n\n\n\n\n\n\n\nConsell\n\n\n\nRemember that we‚Äôre only going to evaluate your assignment after the final deadline, but following the recommended tempos and pushing each part of the activity accordingly can grant you extra points.",
    "crumbs": [
      "Projectes",
      "Projecte 4 ¬∑ Dockeritzaci√≥ i Orquestraci√≥ d'una API a AWS"
    ]
  },
  {
    "objectID": "projects/04-project/04-project.html#outline",
    "href": "projects/04-project/04-project.html#outline",
    "title": "Pr√†ctica 04: Dockeritzaci√≥ i Orquestraci√≥ d‚Äôuna API a AWS",
    "section": "3. Outline",
    "text": "3. Outline\nThis activity is split onto 4 incremental parts, which are going to be related to the contents explained during the different classes.\n\nOn the first week, your job will be to ‚Äúdockerize‚Äù the API.\nOn the second week, your job will be to communicate the API with a postgresql database using docker-compose on your local PC.\nThen, we‚Äôll want you to deploy the API to AWS.\nFinally, after having explained the AWS Relational Database Service (RDS), you‚Äôll connect the ECS service to your newly created RDS database.",
    "crumbs": [
      "Projectes",
      "Projecte 4 ¬∑ Dockeritzaci√≥ i Orquestraci√≥ d'una API a AWS"
    ]
  },
  {
    "objectID": "projects/04-project/04-project.html#resources",
    "href": "projects/04-project/04-project.html#resources",
    "title": "Pr√†ctica 04: Dockeritzaci√≥ i Orquestraci√≥ d‚Äôuna API a AWS",
    "section": "4. Resources",
    "text": "4. Resources\nSince building the users API yourself is outside the scope of this subject, the teachers have prepared some helpful resources to make the activity quicker and more enjoyable. This way, you can focus on the fun parts: containers and AWS services!\n\nRepository template\nWhen you join the Github Classroom activity with the link provided on Step 2, a remote repository is automatically created for you to work on this assignment. This repository will already contain all the python code of the API, below are the details of what comes with the repo:\n\nIt has everything needed to serve the API.\nA README.md file where you‚Äôll have instructions on how to set up the python environment.\n\n\n\nUnderstanding the API\nHow does our API work? First, you have to setup your environment and start the server, see section 6.\nBy default, the server listens for HTTP connections on port 8000. Be aware that, this means that if you‚Äôre running it on your pc (without any container), you can access it via http://localhost:8000 on your browser. If you‚Äôre running it on a conainer, you‚Äôll need to map the port of the container to your host so you can access it on your browser (see how to map it on our reference cheatsheet).\nThe API, exposes three ‚Äúendpoints‚Äù, let‚Äôs see them:\n\n(GET /docs) Documentation: Returns an html file (the type of files that your browser knows how to show/paint on the screen), that allows us to easily call the other two endpoints of the API. 1\n(POST /users) Create a user given:\n\nA username\nA name\nA role (‚Äúuser‚Äù or ‚Äúadmin‚Äù)\nA password\n\n(GET /users) List all existing users\n\nIf you want to see the documentation and ‚Äúplay‚Äù with the /users endpoints, you can access http://localhost:8000/docs 2 This will allow you to create users with POST http://localhost:8000/users, and then retrieve the information with GET http://localhost:8000/users, nice!\nIf it still didn‚Äôt make clear what an API really is watch the hardvard cs50 http class, and then think that:\n\nThe /docs endpoint is just the same as the ‚Äúfacebook‚Äù example they show, it returns text in html format.\nThe other two endpoints, (POST users and GET users) receive and return text in the json format, not html.\n\n\n\nThe database\n\n\n\n\n\n\nNotaDon‚Äôt worry too much\n\n\n\nYou‚Äôll switch and explore the databases on PRAC-4.2! Although it is recommended that you try to understand them now, so you can ‚Äúmore or less‚Äù see, how our service works!\n\n\nOur app needs a way to save the users information! We save it on a database, and we want to choose between different databases 3 :\n\nBy default, it uses an internal sqlite, which just uses a ‚Äúraw‚Äù file as the database. This means that it doesn‚Äôt connect to anything, it just saves the information to an ‚Äúoptimized‚Äù file, and that‚Äôs really it.\nIf the PROD environment variable is set 4 , then it will attempt to connect to a postgresql database. This database is another ‚Äúservice‚Äù on his own, that exposes a port (by default 5432), where you can connect and send values to be saved. Of course, not everyone should connect to this database, only the people with a valid username and password, that‚Äôs the reason behind that, when you create a postgresql database, you need to tell it the user and password that you want!\n\nOnce we have an instance of postgresql running, we can tell the users api to use this instance instead of the sqlite one (This will be a requirement on Prac-4.2!). So, we‚Äôll have to tell him the following information via environment variables:\n\nPROD: Set it to true if you want to use a postgresql instance.\nDB_USER: The user who will connect to the database\nDB_PASSWORD: The password to connect to the database\nDB_HOST: The IP address of the host of the database\nDB_PORT: The port of the host of the database\nDB_NAME: The name of the database inside postgresql\n\n\n\nBrief summary\nA brief summary of how the app works is shown below (using user creation (POST /users) as an example): \nKeep in mind that if you‚Äôre running everything on localhost (which is likely the case for PRAC-4.1 and PRAC-4.2) the IP address used in the example figure will be 127.0.0.1, or simply the domain name localhost. In this setup (PRAC-4.1 and PRAC-4.2), your machine acts as both the server and the client.",
    "crumbs": [
      "Projectes",
      "Projecte 4 ¬∑ Dockeritzaci√≥ i Orquestraci√≥ d'una API a AWS"
    ]
  },
  {
    "objectID": "projects/04-project/04-project.html#tasks",
    "href": "projects/04-project/04-project.html#tasks",
    "title": "Pr√†ctica 04: Dockeritzaci√≥ i Orquestraci√≥ d‚Äôuna API a AWS",
    "section": "5. Tasks",
    "text": "5. Tasks\n\nPrac-4.1: ‚ÄúDockerizing‚Äù the API\nYour main objective is to ‚Äúdockerize‚Äù the API. That‚Äôs it, we keep it simple this week. So you should write a Dockerfile to run the users API http server inside a container. The rules are the following:\n\nKeep in mind that the command you must run inside the Docker container is uv run fastapi run, and that dependencies must be synced before (this means the virtual environment should be created before doing the uv run).\nYou must only use the sqlitedb database! This means that, in prac-4.1, you don‚Äôt have to docker run with custom env variables, just the default ones!.\nRemember to map the container‚Äôs port to a port on your host machine, otherwise, the server will remain isolated inside the container and you won‚Äôt be able to access it from your host.\nIf you have any questions about what you‚Äôre allowed to do in the Dockerfile, please ask the teachers.\n\nYour goal should be to make the resulting image as small as possible, as that‚Äôs what good developers should do!\n\n\n\n\n\n\nConsellCurrent record\n\n\n\nThe current record for the smallest image achieved by a Lleida student is 220 MB! Can you beat it?\n\n\n\n\nPrac-4.2: Moving to Docker Compose üöß‚õèÔ∏èüë∑\nNo worries! We‚Äôll upload it as soon as the date arrives. üöß‚õèÔ∏èüë∑\n\n\nPrac-4.3: Using AWS ECR and ECS\nNo worries! We‚Äôll upload it as soon as the date arrives. üöß‚õèÔ∏èüë∑\n\n\nPrac-4.4: Merging it with AWS RDS!\nNo worries! We‚Äôll upload it as soon as the date arrives. üöß‚õèÔ∏èüë∑",
    "crumbs": [
      "Projectes",
      "Projecte 4 ¬∑ Dockeritzaci√≥ i Orquestraci√≥ d'una API a AWS"
    ]
  },
  {
    "objectID": "projects/04-project/04-project.html#sec-setup",
    "href": "projects/04-project/04-project.html#sec-setup",
    "title": "Pr√†ctica 04: Dockeritzaci√≥ i Orquestraci√≥ d‚Äôuna API a AWS",
    "section": "6. Setting up the server!",
    "text": "6. Setting up the server!\n\nCloning the repository and set it up:\nRemember that, once you entered the Github Classroom on section 2, you will have to clone your repository with:\ngit clone &lt;ssh_address_of_your_git_repository&gt;\nThen, setup a virtual environment for the python project, which can be done with:\nuv sync\nNow, you‚Äôre ready to run the users api server, do it with:\nuv run fastapi run",
    "crumbs": [
      "Projectes",
      "Projecte 4 ¬∑ Dockeritzaci√≥ i Orquestraci√≥ d'una API a AWS"
    ]
  },
  {
    "objectID": "projects/04-project/04-project.html#evaluation",
    "href": "projects/04-project/04-project.html#evaluation",
    "title": "Pr√†ctica 04: Dockeritzaci√≥ i Orquestraci√≥ d‚Äôuna API a AWS",
    "section": "7. Evaluation",
    "text": "7. Evaluation\nYour final score will come from various parts:\n\n4.1: Docker ‚Üí 15%.\n4.2: Docker-Compose ‚Üí 15%.\n4.3: ECR & ECS ‚Üí 15%.\n4.4: RDS ‚Üí 15%.\nBest practices are used ‚Üí 40%.\n\nHow small is your Docker image?\nIs your compose deterministic?\nDoes your compose expose more than needed?\n‚Ä¶",
    "crumbs": [
      "Projectes",
      "Projecte 4 ¬∑ Dockeritzaci√≥ i Orquestraci√≥ d'una API a AWS"
    ]
  },
  {
    "objectID": "projects/04-project/04-project.html#rules",
    "href": "projects/04-project/04-project.html#rules",
    "title": "Pr√†ctica 04: Dockeritzaci√≥ i Orquestraci√≥ d‚Äôuna API a AWS",
    "section": "8. Rules",
    "text": "8. Rules\n\nIt is forbidden to modify our python code (the given API). It has everything you need and there‚Äôs no need to modify it. If you feel like modifying the code would make something better, contact the teachers before doing so.\nIn the Dockerfile for the user API, the dependencies must be installed in the Docker, not in runtime\nIf you are a group of 2, both of you must contribute to the repository with at least 1 commit.",
    "crumbs": [
      "Projectes",
      "Projecte 4 ¬∑ Dockeritzaci√≥ i Orquestraci√≥ d'una API a AWS"
    ]
  },
  {
    "objectID": "projects/04-project/04-project.html#resources-1",
    "href": "projects/04-project/04-project.html#resources-1",
    "title": "Pr√†ctica 04: Dockeritzaci√≥ i Orquestraci√≥ d‚Äôuna API a AWS",
    "section": "9. Resources",
    "text": "9. Resources\n\nDocker Commands Reference\nWhat are Restful APIs?\nDocker for beginners\nDocker compose quickstart",
    "crumbs": [
      "Projectes",
      "Projecte 4 ¬∑ Dockeritzaci√≥ i Orquestraci√≥ d'una API a AWS"
    ]
  },
  {
    "objectID": "projects/04-project/04-project.html#doubts",
    "href": "projects/04-project/04-project.html#doubts",
    "title": "Pr√†ctica 04: Dockeritzaci√≥ i Orquestraci√≥ d‚Äôuna API a AWS",
    "section": "10. Doubts",
    "text": "10. Doubts\nPlease don‚Äôt hesitate to ask the teachers any doubts, there are no dumb questions, we‚Äôre here to help.\nYou can reach us by email (find them at the top of this page) or come to our office at EPS 3.07 (we‚Äôre here mostly during mornings).",
    "crumbs": [
      "Projectes",
      "Projecte 4 ¬∑ Dockeritzaci√≥ i Orquestraci√≥ d'una API a AWS"
    ]
  },
  {
    "objectID": "projects/04-project/04-project.html#footnotes",
    "href": "projects/04-project/04-project.html#footnotes",
    "title": "Pr√†ctica 04: Dockeritzaci√≥ i Orquestraci√≥ d‚Äôuna API a AWS",
    "section": "Notes a peu de p√†gina",
    "text": "Notes a peu de p√†gina\n\n\nThe http://localhost:8000/docs webpage, isn‚Äôt the only way to ‚Äútest‚Äù the endpoints of the API. Our server exposes a connection http on the port 8000, so any clients that support the http protocol could be used instead. If you‚Äôre curious, you can use another client like for example postman (see video here) or if you want a cli tool that is installed on every linux distro, just use curl‚Ü©Ô∏é\nIn reality, you could also access http://localhost:8000 instead of http://localhost:8000/docs, since it will automatically redirect you to /docs, you can see the code of the server that does this‚Ü©Ô∏é\nA database is just a program that makes saving and retrieving data easy and fast. We could save our users inside a file named ‚Äúusers.txt‚Äù, ex:\n1,pabloteach,Pablo Fraile,admin,4346%3450834\n2,ori,Oriol Agost,admin,435-08345237\n...\nBut, of course, this would be slow as f**k, that‚Äôs why we use databases.‚Ü©Ô∏é\nIf you don‚Äôt know what environment variables are (you should know it from the Operating Systems course), you can have a great explanation on the hpc-wiki‚Ü©Ô∏é",
    "crumbs": [
      "Projectes",
      "Projecte 4 ¬∑ Dockeritzaci√≥ i Orquestraci√≥ d'una API a AWS"
    ]
  },
  {
    "objectID": "CONTRIBUTING.html",
    "href": "CONTRIBUTING.html",
    "title": "Contribueix",
    "section": "",
    "text": "Aquest material √©s de codi obert i podeu col¬∑laborar-hi, complementar-lo o corregir-lo mitjan√ßant pull requests al repositori.\n\n\n\nFork el repositori: Fes clic al bot√≥ Fork a la part superior dreta de la p√†gina. Aix√≤ crear√† una c√≤pia del repositori al teu compte de GitHub. Veure imatge:\n\n\n\n\nClona el repositori a la teva m√†quina: Utilitza Git per clonar el repositori que has clonat a la teva m√†quina.\nCrea una branca (branch) nova: Abans de fer canvis, crea una branca nova on far√†s les teves modificacions. Aix√≤ ajuda a mantenir les coses ordenades. Utilitza la comanda seg√ºent:\n\ngit checkout -b nom_de_la_branca\n\nFes els canvis: Realitza les modificacions necess√†ries en els fitxers del projecte.\nAfegeix i commiteja els canvis: Utilitza els seg√ºents comandos per afegir els canvis i fer un commit.\nPuja els canvis al teu repositori a GitHub amb la comanda seg√ºent:\n\ngit push origin nom_de_la_branca\n\nCrea una PR: V√©s al teu repositori a GitHub i selecciona la branca on has fet els canvis. Apareixer√† un missatge destacat dient que has fet una nova branca. Fes clic a ‚ÄúCompare & pull request‚Äù per comen√ßar la PR.\n\nTamb√©, pots anar a la nova branca fent click al menu desplegable i seleccionant la branca que has creat 1 i fent click al bot√≥ New pull request 2. Veure imatge:\n\n\nProporciona una descripci√≥ detallada dels canvis que has fet. A m√©s, pots afegir captures de pantalla o informaci√≥ addicional per ajudar els revisors a entendre els teus canvis. Fes clic a New pull request i beuras una pantalla com la seg√ºent:\n\n\n1 Indica el meu repositori (on vols enviar les modificacions) i 2 indica el teu fork (on has fet les modificacions). Assegura‚Äôt de seleccionar la branca amb les modificacions 3. Finalment, fes clic a Create pull request 4.\n\nEnvia la PR: Un cop hagis omplert tota la informaci√≥, fes clic al bot√≥ ‚ÄúCreate pull request‚Äù per enviar la PR al projecte original.\n\n\n\n\nPer editar el material:\n\nAl teu ordinador, necessitareu instal¬∑lar Quarto.\nDirectament al navegador, podeu editar els fitxers .qmd fent clic al bot√≥ de llapis que apareix a la part superior dreta de cada fitxer. Aix√≤ crear√† una nova branca amb els teus canvis i et permetr√† fer una PR directament des del navegador.\n\n\n\nAbans de comen√ßar, assegura‚Äôt que tens Quarto instal¬∑lat al teu ordinador. Obra un terminal o un IDE com VSCode i navega fins a la carpeta on tens el projecte.\nPer veure una previsualitzaci√≥ local del lloc web:\nquarto preview\nAix√≤ obrir√† una previsualitzaci√≥ local al teu navegador. La previsualitzaci√≥ s‚Äôactualitza autom√†ticament quan deses els canvis.\n\n\n\nEs pot integrar amb Visual Studio Code (VSCode) per a una millor experi√®ncia d‚Äôedici√≥. Si no tens VSCode, pots descarregar-lo des de https://code.visualstudio.com/.\n\nQuarto: Edici√≥ en mode visual: Permet editar els fitxers .qmd en un mode visual que facilita l‚Äô√∫s de les funcions de Quarto.\nQuarto: Previsualitzaci√≥: Obre una previsualitzaci√≥ del fitxer .qmd actual.\nQuarto: Edici√≥ en mode font: Torna a l‚Äôedici√≥ en mode text pla."
  },
  {
    "objectID": "CONTRIBUTING.html#instruccions-per-contribu√Ør",
    "href": "CONTRIBUTING.html#instruccions-per-contribu√Ør",
    "title": "Contribueix",
    "section": "",
    "text": "Fork el repositori: Fes clic al bot√≥ Fork a la part superior dreta de la p√†gina. Aix√≤ crear√† una c√≤pia del repositori al teu compte de GitHub. Veure imatge:\n\n\n\n\nClona el repositori a la teva m√†quina: Utilitza Git per clonar el repositori que has clonat a la teva m√†quina.\nCrea una branca (branch) nova: Abans de fer canvis, crea una branca nova on far√†s les teves modificacions. Aix√≤ ajuda a mantenir les coses ordenades. Utilitza la comanda seg√ºent:\n\ngit checkout -b nom_de_la_branca\n\nFes els canvis: Realitza les modificacions necess√†ries en els fitxers del projecte.\nAfegeix i commiteja els canvis: Utilitza els seg√ºents comandos per afegir els canvis i fer un commit.\nPuja els canvis al teu repositori a GitHub amb la comanda seg√ºent:\n\ngit push origin nom_de_la_branca\n\nCrea una PR: V√©s al teu repositori a GitHub i selecciona la branca on has fet els canvis. Apareixer√† un missatge destacat dient que has fet una nova branca. Fes clic a ‚ÄúCompare & pull request‚Äù per comen√ßar la PR.\n\nTamb√©, pots anar a la nova branca fent click al menu desplegable i seleccionant la branca que has creat 1 i fent click al bot√≥ New pull request 2. Veure imatge:\n\n\nProporciona una descripci√≥ detallada dels canvis que has fet. A m√©s, pots afegir captures de pantalla o informaci√≥ addicional per ajudar els revisors a entendre els teus canvis. Fes clic a New pull request i beuras una pantalla com la seg√ºent:\n\n\n1 Indica el meu repositori (on vols enviar les modificacions) i 2 indica el teu fork (on has fet les modificacions). Assegura‚Äôt de seleccionar la branca amb les modificacions 3. Finalment, fes clic a Create pull request 4.\n\nEnvia la PR: Un cop hagis omplert tota la informaci√≥, fes clic al bot√≥ ‚ÄúCreate pull request‚Äù per enviar la PR al projecte original."
  },
  {
    "objectID": "CONTRIBUTING.html#edici√≥-del-material",
    "href": "CONTRIBUTING.html#edici√≥-del-material",
    "title": "Contribueix",
    "section": "",
    "text": "Per editar el material:\n\nAl teu ordinador, necessitareu instal¬∑lar Quarto.\nDirectament al navegador, podeu editar els fitxers .qmd fent clic al bot√≥ de llapis que apareix a la part superior dreta de cada fitxer. Aix√≤ crear√† una nova branca amb els teus canvis i et permetr√† fer una PR directament des del navegador.\n\n\n\nAbans de comen√ßar, assegura‚Äôt que tens Quarto instal¬∑lat al teu ordinador. Obra un terminal o un IDE com VSCode i navega fins a la carpeta on tens el projecte.\nPer veure una previsualitzaci√≥ local del lloc web:\nquarto preview\nAix√≤ obrir√† una previsualitzaci√≥ local al teu navegador. La previsualitzaci√≥ s‚Äôactualitza autom√†ticament quan deses els canvis.\n\n\n\nEs pot integrar amb Visual Studio Code (VSCode) per a una millor experi√®ncia d‚Äôedici√≥. Si no tens VSCode, pots descarregar-lo des de https://code.visualstudio.com/.\n\nQuarto: Edici√≥ en mode visual: Permet editar els fitxers .qmd en un mode visual que facilita l‚Äô√∫s de les funcions de Quarto.\nQuarto: Previsualitzaci√≥: Obre una previsualitzaci√≥ del fitxer .qmd actual.\nQuarto: Edici√≥ en mode font: Torna a l‚Äôedici√≥ en mode text pla."
  },
  {
    "objectID": "course-information/schedule.html",
    "href": "course-information/schedule.html",
    "title": "AMSA 105013: System Administration",
    "section": "",
    "text": "A continuaci√≥ es presenta un calendari complet dels temes, el contingut del curs i les tasques per al semestre. Tingueu en compte que aquest calendari √©s un document viu i es pot actualitzar. Tots els canvis es publicaran aqu√≠ per assegurar-vos que teniu la informaci√≥ m√©s actual.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSetmana\nTipus\nData\nTema\nDiapositives\nApunts\nLaboratori\nAltres\nTasques\nLliuraments\n\n\n\n\n1\nTeoria\n10/09/25\nUnitat 01: Fonaments de l‚ÄôAdministraci√≥ de Sistemes\nüìñ\n\n\n\nüìù üìù\n\n\n\n2\nLaboratori\n15/09/25\nUnitat 01: Fonaments de l‚ÄôAdministraci√≥ de Sistemes\n\n\nüß™ üß™\n\n\n\n\n\n2\nTeoria\n17/09/25\nUnitat 02: Arrencada del sistema\nüìñ\n\n\n\nüìù üìù üìù\n\n\n\n3\nLaboratori\n24/09/25\nUnitat 02: Arrencada del sistema (II)\nüìñ\n\n\nüí¨\nüìù üìù\n\n\n\n4\nTeoria\n29/09/25\nUnitat 02: Arrencada del sistema (III)\nüìñ\n\n\nüí¨\nüìù üìù\nüë©üèª‚Äçüíª\n\n\n4\nLaboratori\n01/10/25\nNetworking\n\n\nüß™\n\n\n\n\n\n5\nTeoria\n06/10/25\nUnitat 03: Sistemes de fitxers (Part 1)\nüìñ\n\n\n\nüìù\n\n\n\n5\nLaboratori\n08/10/25\nNetworking\n\n\nüß™\n\n\n\n\n\n6\nTeoria\n13/10/25\nUnitat 03: Sistemes de fitxers (Part 2)\nüìñ\n\n\n\nüìù\n\n\n\n6\nLaboratori\n15/10/25\n(Vaga general)\n\n\n\n\n\n\n\n\n7\nTeoria\n20/10/25\nUnitat 03: Sistemes de fitxers (Part 3)\nüìñ\n\n\n\nüìù\n\n\n\n7\nLaboratori\n22/10/25\nUnitat 03: Pr√†ctica 02\n\n\n\n¬†\n\nüë©üèª‚Äçüíª\n\n\n8\nTeoria\n27/10/25\nRep√†s Parcial\n\n\n\n\n\n\n\n\n8\nLaboratori\n29/10/25\nAWS: S3\n\n\nüß™\n\n\n\n\n\n9\nPARCIALS\n¬†\n\n\n\n\n\n\n\n\n\n10\nTeoria\n10/11/25\nUnitat 04: Autenticaci√≥ i Autoritzaci√≥ (Part 1)\nüìñ\n\n\n\nüìù\n\n\n\n10\nLaboratori\n12/11/25\nUnitat 04: Autenticaci√≥ i Autoritzaci√≥ (Part 2)\nüìñ\n\n\n\nüìù\n\n\n\n11\nLaboratori\n17/11/25\nUnitat 04: Autenticaci√≥ i Autoritzaci√≥\n\n\nüß™\n\n\n\n\n\n11\nLaboratori\n19/11/25\nUnitat 04: Autenticaci√≥ i Autoritzaci√≥\n\n\nüß™\n\n\n\n\n\n12\nTeoria\n24/11/25\nUnitat 05: Virtualitzaci√≥ i Contenidors (Part 1)\nüìñ\n\n\n\nüìù\n\n\n\n12\nLaboratori\n26/11/25\nProjecte 3 ¬∑ Infraestructura LDAP Completa a AWS\n\n\n\n¬†\n\nüë©üèª‚Äçüíª\n\n\n13\nTeoria\n01/12/25\nUnitat 05: Virtualitzaci√≥ i Contenidors (Part 1)\nüìñ\n\n\n\nüìù"
  },
  {
    "objectID": "course-information/schedule.html#planificaci√≥",
    "href": "course-information/schedule.html#planificaci√≥",
    "title": "AMSA 105013: System Administration",
    "section": "",
    "text": "A continuaci√≥ es presenta un calendari complet dels temes, el contingut del curs i les tasques per al semestre. Tingueu en compte que aquest calendari √©s un document viu i es pot actualitzar. Tots els canvis es publicaran aqu√≠ per assegurar-vos que teniu la informaci√≥ m√©s actual.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSetmana\nTipus\nData\nTema\nDiapositives\nApunts\nLaboratori\nAltres\nTasques\nLliuraments\n\n\n\n\n1\nTeoria\n10/09/25\nUnitat 01: Fonaments de l‚ÄôAdministraci√≥ de Sistemes\nüìñ\n\n\n\nüìù üìù\n\n\n\n2\nLaboratori\n15/09/25\nUnitat 01: Fonaments de l‚ÄôAdministraci√≥ de Sistemes\n\n\nüß™ üß™\n\n\n\n\n\n2\nTeoria\n17/09/25\nUnitat 02: Arrencada del sistema\nüìñ\n\n\n\nüìù üìù üìù\n\n\n\n3\nLaboratori\n24/09/25\nUnitat 02: Arrencada del sistema (II)\nüìñ\n\n\nüí¨\nüìù üìù\n\n\n\n4\nTeoria\n29/09/25\nUnitat 02: Arrencada del sistema (III)\nüìñ\n\n\nüí¨\nüìù üìù\nüë©üèª‚Äçüíª\n\n\n4\nLaboratori\n01/10/25\nNetworking\n\n\nüß™\n\n\n\n\n\n5\nTeoria\n06/10/25\nUnitat 03: Sistemes de fitxers (Part 1)\nüìñ\n\n\n\nüìù\n\n\n\n5\nLaboratori\n08/10/25\nNetworking\n\n\nüß™\n\n\n\n\n\n6\nTeoria\n13/10/25\nUnitat 03: Sistemes de fitxers (Part 2)\nüìñ\n\n\n\nüìù\n\n\n\n6\nLaboratori\n15/10/25\n(Vaga general)\n\n\n\n\n\n\n\n\n7\nTeoria\n20/10/25\nUnitat 03: Sistemes de fitxers (Part 3)\nüìñ\n\n\n\nüìù\n\n\n\n7\nLaboratori\n22/10/25\nUnitat 03: Pr√†ctica 02\n\n\n\n¬†\n\nüë©üèª‚Äçüíª\n\n\n8\nTeoria\n27/10/25\nRep√†s Parcial\n\n\n\n\n\n\n\n\n8\nLaboratori\n29/10/25\nAWS: S3\n\n\nüß™\n\n\n\n\n\n9\nPARCIALS\n¬†\n\n\n\n\n\n\n\n\n\n10\nTeoria\n10/11/25\nUnitat 04: Autenticaci√≥ i Autoritzaci√≥ (Part 1)\nüìñ\n\n\n\nüìù\n\n\n\n10\nLaboratori\n12/11/25\nUnitat 04: Autenticaci√≥ i Autoritzaci√≥ (Part 2)\nüìñ\n\n\n\nüìù\n\n\n\n11\nLaboratori\n17/11/25\nUnitat 04: Autenticaci√≥ i Autoritzaci√≥\n\n\nüß™\n\n\n\n\n\n11\nLaboratori\n19/11/25\nUnitat 04: Autenticaci√≥ i Autoritzaci√≥\n\n\nüß™\n\n\n\n\n\n12\nTeoria\n24/11/25\nUnitat 05: Virtualitzaci√≥ i Contenidors (Part 1)\nüìñ\n\n\n\nüìù\n\n\n\n12\nLaboratori\n26/11/25\nProjecte 3 ¬∑ Infraestructura LDAP Completa a AWS\n\n\n\n¬†\n\nüë©üèª‚Äçüíª\n\n\n13\nTeoria\n01/12/25\nUnitat 05: Virtualitzaci√≥ i Contenidors (Part 1)\nüìñ\n\n\n\nüìù"
  },
  {
    "objectID": "slides/05-virtualization-part1.html#qu√®-√©s-la-virtualitzaci√≥",
    "href": "slides/05-virtualization-part1.html#qu√®-√©s-la-virtualitzaci√≥",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Qu√® √©s la virtualitzaci√≥?",
    "text": "Qu√® √©s la virtualitzaci√≥?\nLa virtualitzaci√≥ √©s una tecnologia que permet executar m√∫ltiples sistemes complets (SO, aplicacions i maquinari virtualitzat) sobre un √∫nic host f√≠sic.\n\nPer a qu√® serveix?\n\nA√Øllament: cada m√†quina virtual s‚Äôexecuta de manera independent, sense interferir amb les altres.\nFlexibilitat: permet crear, modificar i eliminar entorns r√†pidament.\nEfici√®ncia de recursos: aprofita millor el hardware compartint CPU, mem√≤ria i emmagatzematge.\nFacilitat de desplegament i manteniment: simplifica proves, r√®pliques, desastres i actualitzacions.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#emulaci√≥-i-virtualitzaci√≥",
    "href": "slides/05-virtualization-part1.html#emulaci√≥-i-virtualitzaci√≥",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Emulaci√≥ i virtualitzaci√≥",
    "text": "Emulaci√≥ i virtualitzaci√≥\n\n\nEmulaci√≥\n\nReprodueix una arquitectura diferent de la del host (p.¬†ex. executar programari ARM en un host x86).\nM√©s lenta, perqu√® s‚Äôhan de traduir instruccions.\n√ötil per a compatibilitat, proves o sistemes antics.\n\n\nExemple: QEMU en mode full emulation.\n\n\nHost (x86)\n   ‚Üì traducci√≥\nGuest (ARM)  --&gt; Lenta\n\n\nVirtualitzaci√≥\n\nGuest i host comparteixen la mateixa arquitectura.\nEl hypervisor aprofita instruccions de hardware ‚Üí rendiment molt proper al natiu.\n√ötil per executar diversos SO al mateix temps en un host.\n\n\nExemples: KVM, VMware, Hyper-V.\n\n\nHost (x86)\n   ‚Üì execuci√≥ directa\nGuest (x86) --&gt; Proper al natiu",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#hypervisor",
    "href": "slides/05-virtualization-part1.html#hypervisor",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Hypervisor",
    "text": "Hypervisor\nUn hypervisor √©s el programari que crea, executa i gestiona m√†quines virtuals (VMs). Permet compartir el maquinari f√≠sic entre diversos sistemes operatius.\n\n\nType 1 (bare metal)\n\nS‚Äôexecuta directament sobre el hardware (no hi ha un SO host).\nM√©s rendiment, menys lat√®ncia i millor seguretat.\nUtilitzat en servidors i centres de dades.\nExemples: VMware ESXi, Microsoft Hyper-V Server, Xen.\n\n\nType 2 (hosted)\n\nS‚Äôexecuta a sobre d‚Äôun sistema operatiu host.\nM√©s senzill d‚Äôinstal¬∑lar i ideal per a entorns de desenvolupament o escriptori.\nLleugerament menys eficient.\nExemples: VirtualBox, VMware Workstation, Parallels.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#arquitectura-t√≠piques",
    "href": "slides/05-virtualization-part1.html#arquitectura-t√≠piques",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Arquitectura t√≠piques",
    "text": "Arquitectura t√≠piques",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#paravirtualitzaci√≥",
    "href": "slides/05-virtualization-part1.html#paravirtualitzaci√≥",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Paravirtualitzaci√≥",
    "text": "Paravirtualitzaci√≥\nEl sistema operatiu guest es modifica per cooperar amb el VMM:\n\nCPU paravirtualitzada: √∫s de hypercalls en lloc d‚Äôinstruccions privilegiades.\nMMU paravirtualitzada: gesti√≥ compartida de les taules de p√†gines.\nI/O paravirtualitzada: dispositius virtuals optimitzats (Virtio).\n\n\nEl VMM exposa hypercalls per:\n\nActivar/desactivar interrupcions\nCanviar taules de p√†gines\nAccedir a perif√®rics virtualitzats\n\n\n\nEl VMM pot injectar interrupcions virtuals a trav√©s d‚Äôesdeveniments.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#intel-vt-",
    "href": "slides/05-virtualization-part1.html#intel-vt-",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Intel VT-",
    "text": "Intel VT-\n\nExtensi√≥ que transforma x86 en una arquitectura virtualitzable.\n\nRoot mode: s‚Äôexecuta el VMM\nNon-root mode: s‚Äôexecuten els guests\n\nCada inst√†ncia en non-root mode mant√© un VMCS (Virtual Machine Control Structure) amb:\n\nEstat del guest (registres, CR3, IDTR, etc.)\nEstat intern invisible\n\nTransicions:\n\nVM Entry: c√†rrega l‚Äôestat del guest des del VMCS\nVM Exit: guarda l‚Äôestat del guest i restaura el del host",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#com-guardarrestaurar-una-vm",
    "href": "slides/05-virtualization-part1.html#com-guardarrestaurar-una-vm",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Com guardar/restaurar una VM?",
    "text": "Com guardar/restaurar una VM?\nUna m√†quina virtual es pot guardar, copiar o restaurar perqu√® est√† formada per un conjunt d‚Äôarxius que descriuen:\n\nL‚Äôestat de la VM (configuraci√≥)\nEl disc dur virtual\n(Opcional) Snapshots o estats suspesos\n\n\nCada hypervisor utilitza formats propis:\n\nVMware: .vmx (configuraci√≥), .vmdk (disc virtual)\nVirtualBox: .vbox (configuraci√≥), .vdi (disc virtual)\nKVM/QEMU: .qcow2, .img (disc virtual)\n\n\n\nPer exemple, quan vau realitar la pr√†ctica 2, us vaig facilitar una imatge .vmdk de VMware.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#caracter√≠stiques",
    "href": "slides/05-virtualization-part1.html#caracter√≠stiques",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Caracter√≠stiques",
    "text": "Caracter√≠stiques\n\n\n\n\n\n\n\nAvantatges\nInconvenients\n\n\n\n\nPermeten executar arquitectures i SO diferents\nM√©s pesants: cal un SO complet ‚Üí mida de la imatge elevada\n\n\nA√Øllament i seguretat molt alts\nTemps d‚Äôarrencada m√©s lent que contenidors\n\n\nEs poden compartir i importar imatges f√†cilment\nInteroperabilitat limitada entre hypervisors (formats diferents)\n\n\n\n\n\nRecorda-los que una VM ocupa ‚Äúcom un ordinador real‚Äù ‚Üí per aix√≤ les imatges poden ser de diversos GB.\nSubratlla que compartir una imatge d‚Äôuna VM vol dir reproduir exactament el mateix entorn (molt √∫til en doc√®ncia i DevOps).\nCompara amb contenidors: VM = PC complet, contenidor = proc√©s a√Øllat.\nExplica que la interoperabilitat no est√† garantida: un .vmdk no sempre funciona en VirtualBox o QEMU sense conversi√≥.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#com-podem-millorar-una-m√†quina-virtual",
    "href": "slides/05-virtualization-part1.html#com-podem-millorar-una-m√†quina-virtual",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Com podem millorar una m√†quina virtual?",
    "text": "Com podem millorar una m√†quina virtual?\n\nImaginem que volem executar un programa senzill, com un petit servidor web.\nAmb una VM, necessitem instal¬∑lar un sistema operatiu complet (Linux, Windows‚Ä¶).\nAix√≤ vol dir:\n\nMolt m√©s espai en disc (GB de la imatge)\nM√©s mem√≤ria RAM per al SO\nTemps d‚Äôarrencada for√ßa m√©s elevat",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#per√≤-√©s-realment-necessari-un-so-complet",
    "href": "slides/05-virtualization-part1.html#per√≤-√©s-realment-necessari-un-so-complet",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Per√≤‚Ä¶ √©s realment necessari un SO complet?",
    "text": "Per√≤‚Ä¶ √©s realment necessari un SO complet?\n\nUn servidor web no necessita totes les funcions del kernel.\nEns agradaria dir-li al sistema:\n\nExecuta aquest proc√©s, per√≤ a√Øllat de la resta del sistema.\n\nUn servidor web no necessita:\n\nfuncions d‚Äôinici de sessi√≥,\ngesti√≥ d‚Äôusuaris complexa,\nserveis de fons innecessaris,\nprocessos del sistema que no tenen res a veure amb l‚Äôaplicaci√≥\n\n\n\nun paquet m√≠nim que inclou biblioteques + configuraci√≥ + aplicaci√≥, executat de manera a√Øllada per√≤ sense un SO complet per cada inst√†ncia.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#quantes-vegades-hem-sentit-aix√≤",
    "href": "slides/05-virtualization-part1.html#quantes-vegades-hem-sentit-aix√≤",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Quantes vegades hem sentit aix√≤?",
    "text": "Quantes vegades hem sentit aix√≤?\n\nWorks on my machine\n\n\n\n\nAl meu PC funciona‚Ä¶ per√≤ al teu no.\nA l‚Äôentorn de tests va perfecte, per√≤ en producci√≥ peta.\nLa versi√≥ de la llibreria X √©s diferent.\nAquest programa necessita permisos que aqu√≠ no t√©.\nFunciona a la meva m√†quina virtual‚Ä¶ per√≤ al servidor no.\n\n\n\nDepend√®ncies diferents\nVersions de llibreries inconsistents\nConfiguracions de sistema no iguals\nPermisos, usuaris o paths que no coincideixen\nServeis que al teu entorn estan actius, per√≤ en un altre no",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#contenidors",
    "href": "slides/05-virtualization-part1.html#contenidors",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Contenidors",
    "text": "Contenidors\n\nLa caracter√≠stica que estem buscant rep el nom de contenidors.\n\n\nEls contenidors no aparareixen com a tals al kernel de Linux. S√≥n una combinaci√≥ de diverses funcionalitats del nucli:\n\nNamespaces ‚Üí A√Øllen processos\ncgroups v2 ‚Üí Limiten i controlen recursos (CPU, mem√≤ria, E/S‚Ä¶)\nOverlay filesystems ‚Üí Proporcionen sistemes d‚Äôarxius lleugers i capa√ßos d‚Äôapilar capes\n\n\n\nLa combinaci√≥ d‚Äôaquests tres elements crea l‚Äôefecte que nosaltres anomenem contenidors.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#cgroups---control-de-recursos",
    "href": "slides/05-virtualization-part1.html#cgroups---control-de-recursos",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "cgroups - Control de recursos",
    "text": "cgroups - Control de recursos\nEls cgroups s√≥n una funcionalitat del kernel que permet limitar i controlar els recursos que utilitza un grup de processos (o un contenidor).\n\nAquests l√≠mits poden ser:\n\nCPU: quant temps de processador poden consumir\nMem√≤ria: l√≠mit de RAM i swap\nDisc (I/O): velocitat de lectura/escriptura\nXarxa: ample de banda\n\n\n\nPer qu√® s√≥n importants? Eviten que un proc√©s o contenidor monopolitzi el sistema.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#namespaces---a√Øllament",
    "href": "slides/05-virtualization-part1.html#namespaces---a√Øllament",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Namespaces - A√Øllament",
    "text": "Namespaces - A√Øllament\nEls namespaces permeten que cada contenidor tingui la seva pr√≤pia visi√≥ del sistema, com si fos un entorn independent\n\nPID ‚Üí processos propis\nUTS ‚Üí hostname propi\nNET ‚Üí interf√≠cies de xarxa i rutes separades\nMNT ‚Üí sistema de fitxers a√Øllat\nUSER ‚Üí UIDs/GIDs independents\nIPC ‚Üí recursos IPC separats\nCGROUP namespaces ‚Üí cgroups propis\n\n\nEfecte de m√†quina virtualitzada, per√≤ compartint el mateix nucli real.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#overlay-filesystems",
    "href": "slides/05-virtualization-part1.html#overlay-filesystems",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Overlay Filesystems",
    "text": "Overlay Filesystems\nEls contenidors utilitzen OverlayFS (o variants) per gestionar un sistema d‚Äôarxius:\n\nLes capes inferiors s√≥n de nom√©s lectura (base de la imatge).\nLa capa superior √©s d‚Äôescriptura, on viu el que modifica el contenidor.\nDiversos contenidors poden compartir les capes inferiors ‚Üí estalvi d‚Äôespai i efici√®ncia.\n\n\nAix√≤ fa que les imatges siguin:\n\nLleugeres\nR√†pides de desplegar\nFacils de distribuir i versionar",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#arquitectura-simplificada",
    "href": "slides/05-virtualization-part1.html#arquitectura-simplificada",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Arquitectura simplificada",
    "text": "Arquitectura simplificada\n\n\nAquesta figura mostra com un contenidor √©s, en realitat, un conjunt de processos normals del sistema Linux:\n\nEl kernel √©s compartit per tots els processos.\nsystemd (o un altre init) gestiona processos de l‚Äôamfitri√≥.\nEls programes normals (A, B, C‚Ä¶) conviuen en el mateix sistema.\nEls processos del contenidor tamb√© s√≥n processos normals, per√≤:\n\nEstan a√Øllats per namespaces,\nTenen l√≠mits de recursos amb cgroups,\nVeuen un sistema de fitxers propi (OverlayFS).\n\n\n\n\n\nTot i estar dins del contenidor, segueixen sent processos Linux del host.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#motors-o-llibreries-de-contenidors",
    "href": "slides/05-virtualization-part1.html#motors-o-llibreries-de-contenidors",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Motors o Llibreries de Contenidors",
    "text": "Motors o Llibreries de Contenidors\nLXC (Linux Containers)\n\nSistema de contenidors de baix nivell integrat al kernel.\nContenidors de sistema complet (semblants a mini-m√†quines lleugeres).\nIdeal per entorns que necessiten un sistema d‚Äôinici complet (init, serveis‚Ä¶).\n√âs la base t√®cnica sobre la qual Docker es va inspirar als inicis.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#motors-o-llibreries-de-contenidors-1",
    "href": "slides/05-virtualization-part1.html#motors-o-llibreries-de-contenidors-1",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Motors o Llibreries de Contenidors",
    "text": "Motors o Llibreries de Contenidors\ncontainerd\n\nMotor de contenidors de baix nivell.\nGestiona el cicle de vida dels contenidors (crear, executar, aturar, eliminar).\nUtilitza runc per crear els contenidors reals.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#motors-o-llibreries-de-contenidors-2",
    "href": "slides/05-virtualization-part1.html#motors-o-llibreries-de-contenidors-2",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Motors o Llibreries de Contenidors",
    "text": "Motors o Llibreries de Contenidors\nDocker\n\nPlataforma molt estesa per crear, distribuir i executar contenidors.\nEnfocada en contenidors d‚Äôaplicacions, no de sistema.\nFuncionalitats integrades:\n\nimatges en capes\nxarxes virtuals\nvolums\nAPI, logs, build‚Ä¶\nBuildkit sistema principal de construcci√≥",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#motors-o-llibreries-de-contenidors-3",
    "href": "slides/05-virtualization-part1.html#motors-o-llibreries-de-contenidors-3",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Motors o Llibreries de Contenidors",
    "text": "Motors o Llibreries de Contenidors\nPodman\n\nAlternativa moderna i compatible amb Docker.\nNo necessita daemon: cada contenidor √©s un proc√©s del propi usuari.\nPermet executar contenidors com usuari normal (rootless).\nCompatible amb:\n\nimatges Docker\ncomandes Docker (alias docker=podman)\nKubernetes (podman generate kube)\nPermet executar pods (grups de contenidors) sense kubelet",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#passos-per-executar-un-contenidor-i",
    "href": "slides/05-virtualization-part1.html#passos-per-executar-un-contenidor-i",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Passos per executar un contenidor (I)",
    "text": "Passos per executar un contenidor (I)\n\nEscriure un Containerfile ‚Üí Descriu com ha de ser el contenidor:\n\nsistema base\ndepend√®ncies\nfitxers a copiar\ncom s‚Äôexecuta l‚Äôaplicaci√≥\n\nConstruir la imatge ‚Üí A partir del Containerfile, el Engine crea una imatge. Pots pensar en la imatge com un .ova o .vmdk de VirtualBox:\n\ncont√© el sistema d‚Äôarxius\n√©s immutable (entre cometes)\nes pot copiar o distribuir (portable)",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#passos-per-executar-un-contenidor-ii",
    "href": "slides/05-virtualization-part1.html#passos-per-executar-un-contenidor-ii",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Passos per executar un contenidor (II)",
    "text": "Passos per executar un contenidor (II)\n\nExecutar un contenidor: Amb una imatge, el motor ( Engine / containerd + runc):\n\ncrea un sistema d‚Äôarxius a√Øllat (OverlayFS)\naplica namespaces i cgroups\narrenca el proc√©s principal del contenidor\n\n\n\nEls passos 1 i 2 nom√©s es fan un cop per crear la imatge. Per executar el contenidor, nom√©s cal el pas 3.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#qu√®-√©s-una-imatge-de-contenidor",
    "href": "slides/05-virtualization-part1.html#qu√®-√©s-una-imatge-de-contenidor",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Qu√® √©s una imatge de contenidor?",
    "text": "Qu√® √©s una imatge de contenidor?\nUn contenidor s‚Äôexecuta a partir d‚Äôuna imatge OCI (Open Container Initiative). Una imatge cont√©:\n\nRoot filesystem: El sistema d‚Äôarxius que el contenidor veu com a arrel (/):\n\nbinaris\nllibreries\nfitxers de configuraci√≥\n\nMetadades que indiquen com s‚Äôha d‚Äôexecutar el contenidor:\n\nvariables d‚Äôentorn\ncomanda o entrypoint\nports exposats\nusuaris\nconfiguraci√≥ de xarxa\npunts de muntatge (volums)",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#manifest.json",
    "href": "slides/05-virtualization-part1.html#manifest.json",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "manifest.json",
    "text": "manifest.json\n√âs el mapa general de la imatge.\nCont√©:\n\nidentificador de les capes (layers)\nel fitxer de configuraci√≥ a utilitzar\nel tipus de sistema d‚Äôarxius\nchecksums (sha256) per assegurar integritat\n\n\nPensa en el manifest com l‚Äô√≠ndex de tot el que forma la imatge.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#config.json",
    "href": "slides/05-virtualization-part1.html#config.json",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "config.json",
    "text": "config.json\nDefineix el comportament del contenidor quan s‚Äôexecuti.\nCont√©:\n\nEntrypoint i Cmd\nVariables d‚Äôentorn\nUsuari d‚Äôexecuci√≥\nVolums\nDirectori de treball (WORKDIR)\nAutor, timestamps, historial de construcci√≥\nInformaci√≥ d‚Äôarquitectura (amd64, arm64‚Ä¶)\n\n\nEl config √©s la recepta que diu com s‚Äôha d‚Äôexecutar la imatge.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#capes-duna-imatge-de-contenidor",
    "href": "slides/05-virtualization-part1.html#capes-duna-imatge-de-contenidor",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Capes d‚Äôuna imatge de contenidor",
    "text": "Capes d‚Äôuna imatge de contenidor\n\nEl filesystem d‚Äôuna imatge est√† format per diverses capes apilades (OverlayFS).\nCada capa representa un conjunt de canvis respecte la capa anterior (instal¬∑lar paquets, afegir fitxers‚Ä¶).\nLes capes s√≥n de nom√©s lectura i es poden reutilitzar entre imatges diferents ‚Üí estalvi d‚Äôespai i efici√®ncia.\n\n\nLes capes s√≥n com commits: cada una √©s un increment sobre l‚Äôanterior.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#caracter√≠stiques-dels-contenidors",
    "href": "slides/05-virtualization-part1.html#caracter√≠stiques-dels-contenidors",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Caracter√≠stiques dels contenidors",
    "text": "Caracter√≠stiques dels contenidors\n\n\nAvantatges\n\nAlt rendiment: Els contenidors s‚Äôexecuten gaireb√© a velocitat nativa perqu√® s√≥n processos d‚Äôusuari que comparteixen el kernel del host.\nDesplegament molt r√†pid: Arranquen instant√†niament, ja que no cal inicialitzar un sistema operatiu complet.\nInteroperabilitat d‚Äôexecuci√≥: Poden funcionar amb diferents engines i runtimes (Docker, containerd, CRI-O, Podman, runc‚Ä¶).\n\n\nDesavantatges\n\nNom√©s per a Linux\nDepenen de funcionalitats del kernel de Linux (namespaces, cgroups, OverlayFS).\nPer aix√≤ les imatges sempre s√≥n Linux encara que executis Docker a Windows/Mac.\nA√Øllament redu√Øt\nComparteixen el kernel del host ‚Üí menor seguretat que la virtualitzaci√≥ completa (VMs), on cada m√†quina t√© el seu kernel.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#immutable-per√≤-modificable",
    "href": "slides/05-virtualization-part1.html#immutable-per√≤-modificable",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Immutable per√≤ modificable",
    "text": "Immutable per√≤ modificable\n\nLes imatges de contenidors s√≥n immutables: La imatge original no canvia mai.\nPer√≤ quan un contenidor s‚Äôexecuta, s√≠ que es pot modificar.\nCom √©s possible?\n\n\nPerqu√® NO √©s una c√≤pia bit a bit\n\n\nEls contenidors utilitzen un filesystem en capes (OverlayFS):\nLes capes inferiors (base image) s√≥n nom√©s lectura.\nEl contenidor t√© una capa superior (writable layer) on fa els canvis.\nTotes les modificacions (fitxers nous, modificats o eliminats) van nom√©s a la capa superior.\nEl commit d‚Äôun contenidor crea una nova imatge amb els canvis de la capa superior.\n\n\nLa imatge no canvia. El contenidor s√≠.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#portable-si-per√≤-no-totalment",
    "href": "slides/05-virtualization-part1.html#portable-si-per√≤-no-totalment",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Portable si ‚Ä¶ per√≤ no totalment",
    "text": "Portable si ‚Ä¶ per√≤ no totalment\n\nLes imatges de contenidors s√≥n portables: es poden copiar i executar en qualsevol sistema amb el mateix motor (Docker, Podman, containerd‚Ä¶).\nPer√≤ hi ha algunes limitacions:\n\nArquitectura: una imatge x86 no funcionar√† en un host ARM. (Tot i que existeix multi-arch amb manifest i buildx.)\nDepend√®ncies del kernel: els contenidors depenen de funcionalitats espec√≠fiques del kernel (namespaces, cgroups, OverlayFS). Si el host no les suporta, el contenidor no funcionar√†.\nRecursos del host: si el host no t√© suficients recursos (CPU, mem√≤ria, disc), el contenidor pot no funcionar correctament\nEls contenidors no encapsulen el kernel ABI, per tant, si una aplicaci√≥ dep√®n d‚Äôuna versi√≥ espec√≠fica del kernel, pot no funcionar en un host amb un kernel diferent.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#vms-vs-contenidors",
    "href": "slides/05-virtualization-part1.html#vms-vs-contenidors",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "VMs vs Contenidors",
    "text": "VMs vs Contenidors\n\n\nQuan utilitzar m√†quines virtuals (VMs)\n\nControl complet del sistema operatiu (kernel propi, drivers, init, serveis‚Ä¶)\nA√Øllament molt fort: Ideal per seguretat estricta o entorns multi-tenant desconfiats.\nCompatibilitat d‚Äôarquitectura\nNecessitat d‚Äôemular o executar altres arquitectures i sistemes.\n\n\nQuan utilitzar contenidors\n\nDesplegament molt r√†pid: S‚Äôaixequen gaireb√© instant√†niament.\nConsum redu√Øt de recursos: Comparteixen el kernel ‚Üí menys RAM i CPU.\nIdeals per aplicacions i serveis.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#arquitectura-docker",
    "href": "slides/05-virtualization-part1.html#arquitectura-docker",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Arquitectura Docker",
    "text": "Arquitectura Docker",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#components-principals-docker",
    "href": "slides/05-virtualization-part1.html#components-principals-docker",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Components principals Docker",
    "text": "Components principals Docker\n\nDocker client: interf√≠cie d‚Äôusuari (CLI, GUI, API)\nDocker Engine: motor de contenidors\n\ncontainerd: Gestiona el cicle de vida dels contenidors (crear, aturar, eliminar).\nrunc: Crea el contenidor real utilitzant namespaces i cgroups. (√âs l‚Äô√∫nica part que parla directament amb el kernel.)\nlibnetwork: Gesti√≥ de xarxes virtuals (bridges, NAT, interfaces virtuals).\ngraphdriver: Gesti√≥ d‚Äôimatges i del sistema de capes (OverlayFS, btrfs, zfs‚Ä¶). Recentment anomenat snapshotter.\nplugins: Extensions per storage, logging i networking.\n\nKernel de Linux: El kernel √©s on realment s‚Äôexecuta el contenidor.\n\nNetwork stack, system calls, VFS‚Ä¶\nNamespaces, cgroups v2, OverlayFS\n\n\n\nDocker √©s nom√©s una capa d‚Äôorquestraci√≥. Els contenidors els crea el kernel.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#installaci√≥-de-docker-a-ec2-i",
    "href": "slides/05-virtualization-part1.html#installaci√≥-de-docker-a-ec2-i",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Instal¬∑laci√≥ de Docker a EC2 (I)",
    "text": "Instal¬∑laci√≥ de Docker a EC2 (I)\n\nInstal¬∑lar el paquet amb dnf a Amazon Linux 2:\n\n\nsudo dnf install docker -y\n\n\nIniciar el servei de Docker:\n\n\nsudo systemctl enable --now docker\n\n\nComprovar la instal¬∑laci√≥:\n\n\ndocker --version",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#installaci√≥-de-docker-a-ec2-ii",
    "href": "slides/05-virtualization-part1.html#installaci√≥-de-docker-a-ec2-ii",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Instal¬∑laci√≥ de Docker a EC2 (II)",
    "text": "Instal¬∑laci√≥ de Docker a EC2 (II)\n\nPer a poder executar comandes de Docker sense necessitat de ser un usuari root, afegirem el nostre usuari al grup docker:\n\n\nsudo usermod -a -G docker ec2-user\nnewgrp docker # Per a aplicar els canvis\n\n\nActualitzarem els permissos del socket de Docker per permetre als usuaris del grup docker llegir i escriure el fitxer: /var/run/docker.sock\n\n\nsudo chmod g+rw /var/run/docker.sock",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#experiment-1-temps-darrencada",
    "href": "slides/05-virtualization-part1.html#experiment-1-temps-darrencada",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Experiment 1: Temps d‚Äôarrencada",
    "text": "Experiment 1: Temps d‚Äôarrencada\nEn aquest experiment compararem la velocitat d‚Äôarrencada d‚Äôuna m√†quina virtual (VM) amb la d‚Äôun contenidor Docker.\n\nM√†quina Virtual (VM):\n\nUtilitzeu VirtualBox per crear una m√†quina virtual amb Debian.\nMesureu el temps d‚Äôarrencada des de l‚Äôinici fins que el sistema est√† llest per a l‚Äô√∫s. systemd-analyze √©s una eina √∫til per aix√≤.\n\nContenidor Docker:\n\nCreeu un contenidor Docker utilitzant la imatge oficial de Debian.\nMesureu el temps d‚Äôarrencada del contenidor des de la comanda docker run fins que el proc√©s principal est√† en execuci√≥. Podeu utilitzar la comanda time per mesurar-ho.\n\nPer exemple: time docker run --rm debian sleep 1",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#exemple-1-i",
    "href": "slides/05-virtualization-part1.html#exemple-1-i",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Exemple 1 (I)",
    "text": "Exemple 1 (I)\nImagineu un servidor amb molts recursos",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#exemple-1-ii",
    "href": "slides/05-virtualization-part1.html#exemple-1-ii",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Exemple 1 (II)",
    "text": "Exemple 1 (II)\nDespleguem primer una aplicaci√≥ amb JAVA",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#exemple-1-iii",
    "href": "slides/05-virtualization-part1.html#exemple-1-iii",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Exemple 1 (III)",
    "text": "Exemple 1 (III)\nDespleguem despr√©s una amb Python",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#exemple-1-iv",
    "href": "slides/05-virtualization-part1.html#exemple-1-iv",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Exemple 1 (IV)",
    "text": "Exemple 1 (IV)\nUna web amb react",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#exemple-1-v",
    "href": "slides/05-virtualization-part1.html#exemple-1-v",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Exemple 1 (V)",
    "text": "Exemple 1 (V)\naix√≤ no escalar√† gaireb√© b√©\n\nCal definir usuaris i permisos per a cada aplicaci√≥.\nCal evitar conflictes de versions de llibreries.\nI si Java necessita OpenSSL 1.1.x i Python OpenSSL 3.x?\nCal evitar que una aplicaci√≥ pugui accedir a fitxers d‚Äôuna altra aplicaci√≥.\nNecessitem a√Øllament:\n\nUna m√†quina virtual per aplicaci√≥ seria massa costosa en recursos.\nNecessitem un contenidor per aplicaci√≥!",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#exemple-1-vi",
    "href": "slides/05-virtualization-part1.html#exemple-1-vi",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Exemple 1 (VI)",
    "text": "Exemple 1 (VI)\n\nContru√Øm un contenidor per a cada aplicaci√≥:\n\nUn contenidor amb Java + app Java\nUn contenidor amb Python + app Python\nUn contenidor amb Node.js + app React\n\nCada contenidor t√© el seu propi sistema d‚Äôarxius, llibreries i configuraci√≥.\nCompartim el mateix kernel del host, per√≤ cada aplicaci√≥ est√† a√Øllada.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#exemple-1-vii",
    "href": "slides/05-virtualization-part1.html#exemple-1-vii",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Exemple 1 (VII)",
    "text": "Exemple 1 (VII)\nI ara s√≠ que escala b√©!",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#imatge-ubuntu",
    "href": "slides/05-virtualization-part1.html#imatge-ubuntu",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Imatge ubuntu",
    "text": "Imatge ubuntu\n\nLa imatge d‚Äôubuntu √©s una imatge oficial lleugera de Ubuntu.\nCont√© una sola capa.\nPodeu utiltizar docker inspect &lt;image_name&gt; per veure els detalls com les capes, el sistema d‚Äôarxius i la configuraci√≥.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#mida-de-les-imatges",
    "href": "slides/05-virtualization-part1.html#mida-de-les-imatges",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Mida de les imatges",
    "text": "Mida de les imatges\nSi utiltizeu la comanda docker pull ubuntu && docker image ls ubuntu, veureu que la imatge ocupa nom√©s 139 MB.\n\nAquest imatge √∫nicament cont√© el userspace filesystem i els paquets b√†sics de Ubuntu. No cont√©:\n\nKernel\nDrivers\nServeis de systemd\nEntorn gr√†fic\nbootloader\n\n\n\nUn contenidor no √©s una VM, √©s un proc√©s a√Øllat que comparteix el kernel del host.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#dockerfile-b√†sic",
    "href": "slides/05-virtualization-part1.html#dockerfile-b√†sic",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Dockerfile b√†sic",
    "text": "Dockerfile b√†sic\n\nCrear un fitxer anomenat Dockerfile.\nAfegeix al fitxer, la imatge per on vols comen√ßar:\n\n\nFROM ubuntu\n\n\nPer construir la imatge, utilitza la comanda:\n\n\ndocker build . -t amsa\n\n\nAquesta imatge amsa t√© una sola capa, basada en ubuntu.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#dockerfile-amb-m√©s-instruccions",
    "href": "slides/05-virtualization-part1.html#dockerfile-amb-m√©s-instruccions",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Dockerfile amb m√©s instruccions",
    "text": "Dockerfile amb m√©s instruccions\nFROM ubuntu\nRUN apt update && apt install figlet\nCMD figlet \"amsa\"\n\nRUN executa comandes a la imatge base.\nCMD defineix la comanda per defecte quan s‚Äôexecuta el contenidor.\nLa imatge resultatn tindr√† 2 capes:\n\nCapa base: ubuntu\nCapa RUN: amb figlet instal¬∑lat i les depend√®ncies actualitzades.\n\n\n\nOuch! Com √©s que estic instal¬∑lant sense sudo?\n\n\n\nExplica que dins del contenidor, el proc√©s s‚Äôexecuta com a root per defecte.\nAix√≤ no afecta el sistema host, ja que el contenidor est√† a√Øllat.\nPer√≤ cal tenir cura amb els permisos quan es munten volums o es comparteixen recursos.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#executant-la-imatge",
    "href": "slides/05-virtualization-part1.html#executant-la-imatge",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Executant la imatge",
    "text": "Executant la imatge\n\nReconstru√Øm la imatge: docker build . -t amsa\nExecutem el contenidor: docker run amsa\n\n\n$ docker run amsa\n\n  __ _ _ __ ___  ___  __ _\n / _` | '_ ` _ \\/ __|/ _` |\n| (_| | | | | | \\__ \\ (_| |\n \\__,_|_| |_| |_|___/\\__,_|\n\n\nVeurem que s‚Äôexecuta la comanda figlet \"amsa\" i es mostra el text ASCII.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#execuci√≥-interactiva",
    "href": "slides/05-virtualization-part1.html#execuci√≥-interactiva",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Execuci√≥ interactiva",
    "text": "Execuci√≥ interactiva\nPer executar el contenidor de manera interactiva, utilitzeu: docker run -it amsa bash.\n\nAquesta comanda dona al contenidor una terminal interactiva mantenint STDIN obert (-i) i assignant una terminal TTY (-t).\n\n\ndocker run -it ubuntu us permetr√† explorar el sistema de fitxers d‚ÄôUbuntu dins del contenidor amb una shell bash, mentre que docker run ubuntu nom√©s executa la comanda per defecte i surt.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#compartint-fitxers",
    "href": "slides/05-virtualization-part1.html#compartint-fitxers",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Compartint fitxers",
    "text": "Compartint fitxers\nAnem a modificar figlet per mostrar un missatge personalitzat, a partir d‚Äôun fitxer local message.txt.\n\necho \"Hello from amsa!\" &gt; message.txt\n\n\nCOPY   copia fitxers/directoris del host al sistema de fitxers del contenidor.\n\n\nFROM ubuntu\nCOPY message.txt my-message.txt\nRUN apt update && apt install -y figlet\nCMD cat my-message.txt | figlet\n\n\nCada cop que modifiqueu el fitxer message.txt, haureu de reconstruir la imatge per veure els canvis.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#pregunta-1",
    "href": "slides/05-virtualization-part1.html#pregunta-1",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Pregunta 1",
    "text": "Pregunta 1\nQuina √©s la difer√®ncia entre aquests dos Dockerfiles?\n\n\nA\nFROM ubuntu\nCOPY message.txt my-message.txt\nRUN apt update && apt install -y figlet\nCMD cat my-message.txt | figlet\n\nB\nFROM ubuntu\nRUN apt update && apt install -y figlet\nCOPY message.txt my-message.txt\nCMD cat my-message.txt | figlet\n\n\nLes capes es construeixen en ordre. Si el fitxer message.txt canvia, nom√©s la capa que el copia (COPY) es tornar√† a construir en el Dockerfile B. En el Dockerfile A, si message.txt canvia, tota la capa RUN (instal¬∑laci√≥ de figlet) tamb√© es tornar√† a construir, fent el proc√©s m√©s lent.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#treballant-amb-python",
    "href": "slides/05-virtualization-part1.html#treballant-amb-python",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Treballant amb python",
    "text": "Treballant amb python\nImagine que teniu un projecte amb python amb els fitxers seg√ºents:\n‚îú‚îÄ‚îÄ main.py\n‚îú‚îÄ‚îÄ message.txt      # The message we want pfiglet to print\n‚îú‚îÄ‚îÄ requirements.txt # pyfiglet declared as a dependency\n‚îî‚îÄ‚îÄ .venv            # The python virtual env\non el main.py cont√©:\nfrom pyfiglet import Figlet\n\nwith open(\"message.txt\") as file:\n  print(Figlet().renderText(file.read()))",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#dockerfile-per-a-laplicaci√≥-python",
    "href": "slides/05-virtualization-part1.html#dockerfile-per-a-laplicaci√≥-python",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Dockerfile per a l‚Äôaplicaci√≥ Python",
    "text": "Dockerfile per a l‚Äôaplicaci√≥ Python\n\nNormalment, per executar-ho sense contenidors, far√≠em:\n\n\npython -m venv .venv\nsource .venv/bin/activate\npip install -r requirements.txt\npython main.py\n\n\nPer√≤ amb Docker, podem crear un Dockerfile aix√≠:\n\n\nFROM python\nCOPY main.py main.py\nCOPY message.txt message.txt\nCOPY requirements.txt requirements.txt\nRUN pip install -r requirements.txt\nCMD python main.py\n\n\nCom √©s que no estem utilitzant un entorn virtual .venv dins del contenidor?\n\n\n\nExplica que dins del contenidor, el sistema est√† a√Øllat.\nNo hi ha conflictes amb altres aplicacions o versions de Python.\nPer aix√≤, no √©s necessari utilitzar un entorn virtual dins del contenidor.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#copy-.-.",
    "href": "slides/05-virtualization-part1.html#copy-.-.",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "COPY . .",
    "text": "COPY . .\n\nEn lloc de copiar fitxer per fitxer, podem copiar tot el directori de treball amb:\n\nFROM python\nCOPY . .\nRUN pip install -r requirements.txt\nCMD python main.py",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#optimitzant-la-imatge",
    "href": "slides/05-virtualization-part1.html#optimitzant-la-imatge",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Optimitzant la imatge",
    "text": "Optimitzant la imatge\n\nQuan es treballa amb contenidors, √©s important mantenir les imatge tant petites com sigui possible.\nEl contenidor √∫nicament necessita (message.txt, main.py, requirements.txt).\nCom estem fent COPY . ., tamb√© estem copiant el directori .venv, que pot ser molt gran i innecessari dins del contenidor.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#dockerignore",
    "href": "slides/05-virtualization-part1.html#dockerignore",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Dockerignore",
    "text": "Dockerignore\n\nPer evitar copiar fitxers/directoris innecessaris, podem utilitzar un fitxer .dockerignore.\nSembla un .gitignore, per√≤ per a Docker.\n\n\necho \".venv\" &gt;&gt; .dockerignore\necho \"Dockerfile\" &gt;&gt; .dockerignore\necho .dockerignore &gt;&gt; .dockerignore\n\n\nAix√≤ evitar√† que el directori .venv, el Dockerfile i el propi .dockerignore es copi√Øn a la imatge.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#optimitzaci√≥-final-del-dockerfile",
    "href": "slides/05-virtualization-part1.html#optimitzaci√≥-final-del-dockerfile",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Optimitzaci√≥ final del Dockerfile",
    "text": "Optimitzaci√≥ final del Dockerfile\nFROM python\nCOPY . .\nRUN pip install -r requirements.txt\nCMD python main.py\n\nQu√® m√©s es pot optimitzar?\nQu√® passa si √∫nicament modifico el fitxer message.txt?",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#cach√©-de-capes",
    "href": "slides/05-virtualization-part1.html#cach√©-de-capes",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Cach√© de capes",
    "text": "Cach√© de capes\n\nEls projectes reals tenen moltes depend√®ncies, i haver de reinstal¬∑lar-les cada cop que un fitxer canvia seria molt lent.\n√âs bona pr√†ctica primer copiar nom√©s els fitxers necessaris per instal¬∑lar les depend√®ncies, i despr√©s copiar la resta del projecte:\n\n\nFROM python\nCOPY requirements.txt requirements.txt\nRUN pip install -r requirements.txt\nCOPY . .\nCMD python main.py\n\n\n\nExplica que aix√≠, si nom√©s canvia message.txt o main.py, nom√©s es tornar√† a construir la capa que copia aquests fitxers.\nLa capa que instal¬∑la les depend√®ncies es mantindr√† en cach√©, fent el proc√©s de construcci√≥ molt m√©s r√†pid.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#dockerfile-ubuntu",
    "href": "slides/05-virtualization-part1.html#dockerfile-ubuntu",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Dockerfile ubuntu",
    "text": "Dockerfile ubuntu\nSi mireu el contingut de la imatge oficial d‚Äôubuntu, veureu que el Dockerfile √©s aix√≠:\nFROM scratch\nADD rootfs-22.04-amd64.tar /\nCMD [\"/bin/bash\"]\n\nFROM scratch indica que aquesta imatge no t√© cap capa base (√©s buida).\nADD rootfs-22.04-amd64.tar / semblant a COPY, per√≤ amb m√©s funcionalitats, per exemple, pot descomprimir arxius.\nCMD [\"/bin/bash\"] estableix la comanda per defecte quan s‚Äôexecuta el contenidor.\n\n\nQuina difer√®ncia hi ha entre CMD[\"/bin/bash\"] i CMD /bin/bash? √âs el mateix?\n\n\n\nExplica que la primera forma √©s la forma exec (recomanada), on s‚Äôexecuta directament el binari sense passar per un shell.\nLa segona forma √©s la forma shell, on s‚Äôexecuta a trav√©s d‚Äôun shell (com /bin/sh -c).\nLa forma exec √©s m√©s eficient i evita problemes amb senyals i processos fills.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#exercici-1-contenidor-amb-depend√®ncies",
    "href": "slides/05-virtualization-part1.html#exercici-1-contenidor-amb-depend√®ncies",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Exercici 1: Contenidor amb depend√®ncies",
    "text": "Exercici 1: Contenidor amb depend√®ncies\nImagineu que executeu la comanda seg√ºent:\ndocker run python:3.9 python -c \"import numpy as np; print(np.random.rand())\"\nExplica qu√® passa?",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#exercici-1-contenidor-amb-depend√®ncies-soluci√≥",
    "href": "slides/05-virtualization-part1.html#exercici-1-contenidor-amb-depend√®ncies-soluci√≥",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Exercici 1: Contenidor amb depend√®ncies (soluci√≥)",
    "text": "Exercici 1: Contenidor amb depend√®ncies (soluci√≥)\nLa imatge oficial de python:3.9 no inclou la llibreria NumPy per defecte. Per tant, quan s‚Äôintenta executar el codi Python que importa NumPy, es produeix un error perqu√® la llibreria no est√† instal¬∑lada dins del contenidor.\nFROM python:3.9\nRUN pip install numpy",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#exercici-2-compartint-dades",
    "href": "slides/05-virtualization-part1.html#exercici-2-compartint-dades",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Exercici 2: Compartint dades",
    "text": "Exercici 2: Compartint dades\nImagina que tens un script de Python anomenat hola.py al teu sistema host amb el seg√ºent contingut:\nprint(\"Hola m√≥n!\")\nVols executar aquest script dins d‚Äôun contenidor Docker basat en la imatge oficial de Python 3.9. Com ho faries?",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#exercici-2-compartint-dades-soluci√≥-1",
    "href": "slides/05-virtualization-part1.html#exercici-2-compartint-dades-soluci√≥-1",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Exercici 2: Compartint dades (soluci√≥ 1)",
    "text": "Exercici 2: Compartint dades (soluci√≥ 1)\nCreariam un dockerfile per a la nostra aplicaci√≥ Python:\nFROM python:3.9\nCOPY hola.py hola.py\nCMD python hola.py",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#exercici-3-compartint-dades-de-sortida",
    "href": "slides/05-virtualization-part1.html#exercici-3-compartint-dades-de-sortida",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Exercici 3: Compartint dades de sortida",
    "text": "Exercici 3: Compartint dades de sortida\nPer√≤, i si volem que el script hola.py escrigui un fitxer de sortida anomenat sortida.txt dins del sistema host? Com ho far√≠em?",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#compartint-dades-amb-un-contenidor-docker",
    "href": "slides/05-virtualization-part1.html#compartint-dades-amb-un-contenidor-docker",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Compartint dades amb un contenidor Docker",
    "text": "Compartint dades amb un contenidor Docker\nPer compartir dades est√†tiques estem utiltizant la instrucci√≥ COPY al Dockerfile. Per√≤, i si volem compartir dades din√†miques entre el sistema host i el contenidor, com els fitxers de sortida generats pel contenidor?\nCal compartir un directori o fitxer entre el sistema host i el contenidor. Per aix√≤, utilitzarem l‚Äôopci√≥ -v de la comanda docker run.\ndocker run -v &lt;directori_host&gt;:&lt;directori_contenidor&gt; &lt;imatge&gt; &lt;comanda&gt;",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#quins-s√≥n-els-directoris-del-contenidor",
    "href": "slides/05-virtualization-part1.html#quins-s√≥n-els-directoris-del-contenidor",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Quins s√≥n els directoris del contenidor?",
    "text": "Quins s√≥n els directoris del contenidor?\n\nPodem utilitzar la comanda docker run -it &lt;imatge&gt; bash per accedir a la consola del contenidor i explorar el sistema de fitxers.\nUn cop dins, podem utilitzar comandes com ls, pwd i cd per navegar pels directoris.\nAlguns directoris comuns s√≥n:\n\n/app: sovint utilitzat com a directori de treball per a aplicacions.\n/data: sovint utilitzat per emmagatzemar dades persistents.\n/tmp: directori temporal.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#workdir",
    "href": "slides/05-virtualization-part1.html#workdir",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "WORKDIR",
    "text": "WORKDIR\n\nLa instrucci√≥ WORKDIR al Dockerfile estableix el directori de treball per a qualsevol comanda seg√ºent (RUN, CMD, ENTRYPOINT, COPY, ADD).\nSi el directori no existeix, Docker el crear√† autom√†ticament.\nPer exemple:\n\nFROM python:3.9\nWORKDIR /app\nCOPY hola.py .\nCMD python hola.py",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#exericici-3-compartint-dades-de-sortida-soluci√≥",
    "href": "slides/05-virtualization-part1.html#exericici-3-compartint-dades-de-sortida-soluci√≥",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Exericici 3: Compartint dades de sortida (soluci√≥)",
    "text": "Exericici 3: Compartint dades de sortida (soluci√≥)\nPrimer, crearem un script hola2.py que escriu un fitxer de sortida:\noutput = open(\"sortida.txt\", \"w\")\noutput.write(\"Hola m√≥n!\")\noutput.close()\nDespr√©s, executarem el contenidor Docker amb l‚Äôopci√≥ -v per compartir el directori actual del sistema host amb el directori /app del contenidor:\ndocker run -v $(pwd):/app python:3.9 python /app/hola2.py",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#taula-de-comandes-√∫tils-de-docker",
    "href": "slides/05-virtualization-part1.html#taula-de-comandes-√∫tils-de-docker",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Taula de comandes √∫tils de Docker",
    "text": "Taula de comandes √∫tils de Docker\n\n\n\n\n\n\n\nComanda\nDescripci√≥\n\n\n\n\ndocker build -t &lt;nom&gt; .\nConstruir una imatge des del Dockerfile actual.\n\n\ndocker run &lt;imatge&gt;\nExecutar un contenidor des d‚Äôuna imatge.\n\n\ndocker run -it &lt;imatge&gt; bash\nExecutar un contenidor en mode interactiu amb una shell.\n\n\ndocker ps\nLlistar els contenidors en execuci√≥.\n\n\ndocker stop &lt;contenidor&gt;\nAturar un contenidor en execuci√≥.\n\n\ndocker rm &lt;contenidor&gt;\nEliminar un contenidor aturat.\n\n\ndocker rmi &lt;imatge&gt;\nEliminar una imatge.\n\n\ndocker images\nLlistar les imatges disponibles.\n\n\ndocker logs &lt;contenidor&gt;\nVeure els logs d‚Äôun contenidor.\n\n\ndocker inspect &lt;imatge/contenidor&gt;\nVeure els detalls d‚Äôuna imatge o contenidor.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#xarxes-i-contenidors",
    "href": "slides/05-virtualization-part1.html#xarxes-i-contenidors",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Xarxes i Contenidors",
    "text": "Xarxes i Contenidors\nImagineu que tenim un servidor web molt simple:\npython -m http.server &lt;port&gt;\nSi executem aquesta comanda exposarem els fitxers a una interf√≠cie de xarxa del host.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#contenidor-amb-servidor-web",
    "href": "slides/05-virtualization-part1.html#contenidor-amb-servidor-web",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Contenidor amb servidor web",
    "text": "Contenidor amb servidor web\n\nCreem un Dockerfile per al servidor web:\n\n\nFROM python\nCMD [\"python\", \"-m\", \"http.server\", \"8080\"]\n\n\nConstru√Øm la imatge i executem el contenidor:\n\n\ndocker build . -t amsa\ndocker run AMSA\nServing HTTP on 0.0.0.0 port 8080 (http://0.0.0.0:8080/) ...\n\n\nSi accedim a http://localhost:8080 des del host, no veurem res!",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#per-qu√®-no-funciona",
    "href": "slides/05-virtualization-part1.html#per-qu√®-no-funciona",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Per qu√® no funciona?",
    "text": "Per qu√® no funciona?\n\nEls contenidors per defecte estan a√Øllats.\nA part del seu sistema de fitxers propri, tamb√© tenen la seva pr√≤pia pila de xarxa.\nEl port 8080 del contenidor no √©s el port 8080 de la m√†quina host.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#mapeig-de-ports",
    "href": "slides/05-virtualization-part1.html#mapeig-de-ports",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Mapeig de ports",
    "text": "Mapeig de ports\n\nPer accedir als serveis d‚Äôun contenidor des del host, cal fer un mapeig de ports.\nUtilitzem l‚Äôopci√≥ -p de docker run per mapar un port del host a un port del contenidor:\n\n\ndocker run -p 8085:8080 amsa\nServing HTTP on 0.0.0.0 port 8080 (http://0.0.0.0:8080/) ...\n\n\nLa sintaxi √©s -p &lt;port_host&gt;:&lt;port_contenidor&gt;, on ara podem accedir al servidor web a http://localhost:8085.",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#multistage-builds-i",
    "href": "slides/05-virtualization-part1.html#multistage-builds-i",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Multistage Builds (I)",
    "text": "Multistage Builds (I)\nEn els exemples anteriors, hem vist que el Dockerfile per a l‚Äôaplicaci√≥ Python √©s aix√≠:\nFROM python\nCOPY requirements.txt requirements.txt\nRUN pip install -r requirements.txt\nCOPY . .\nCMD python main.py\n\nestem fent servir tota la imatge de Python per construir i executar‚Ä¶\n\n\nPaquets de compilaci√≥ innecessaris\nFitxers temporals deixats per pip\nLlibreries que nom√©s fan falta durant la instal¬∑laci√≥\n\n\n‚Ä¶ una imatge final molt m√©s gran del necessari!!!",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#multistage-builds-ii",
    "href": "slides/05-virtualization-part1.html#multistage-builds-ii",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Multistage Builds (II)",
    "text": "Multistage Builds (II)\nLa idea de les multistage builds √©s utilitzar diverses etapes de construcci√≥ dins del mateix Dockerfile. Separam la fase de construcci√≥ de la fase d‚Äôexecuci√≥.\n\n\n\nFROM python AS builder\nWORKDIR /app\n\nCOPY requirements.txt .\nRUN pip install --prefix=/install \\\n  -r requirements.txt\n\n\ninstal¬∑la depend√®ncies a /install\npython complet, amb pip\npot incloure eines de compilaci√≥ si calguessin\n\n\nüëâ Per√≤ res d‚Äôaix√≤ formar√† part de la imatge final.\n\n\n\nFROM python:slim\nWORKDIR /app\n\nCOPY --from=builder /install /usr/local\nCOPY . .\n\nCMD [\"python\", \"main.py\"]\n\n\nutilitza una imatge slim (molt m√©s petita)\nnom√©s copia les depend√®ncies instal¬∑lades i el codi font\nno inclou pip, ni temporals, ni eines de build\n\n\nüëâ Imatge m√©s petita, lleugera i √≤pitma",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#multistage-builds-iii",
    "href": "slides/05-virtualization-part1.html#multistage-builds-iii",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Multistage Builds (III)",
    "text": "Multistage Builds (III)\n\n\nSense multistage builds\n\nPython complet\nPip + eines de build\nFitxers temporals\n.pyc, caches‚Ä¶\n\n\n\\[\\geq ~400MB\\]\n\n\nAmb multistage builds\n\nPython slim\nNom√©s depend√®ncies finals\nCap fitxer temporal\n\n\n\\[\\leq ~150MB\\]\n\n\n\nObtenim el mateix servei, per√≤ amb imatges molt m√©s petites i √≤ptimes!",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#multistage-builds-iv",
    "href": "slides/05-virtualization-part1.html#multistage-builds-iv",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Multistage Builds (IV)",
    "text": "Multistage Builds (IV)\n\nMenys espai al disc ‚Üí ideal per CI/CD i servidors amb recursos limitats\nMenys temps de build i push/pull\nMenys superf√≠cie d‚Äôatac ‚Üí menys eines instal¬∑lades\nM√©s efici√®ncia a AWS Lambda, EC2, Kubernetes\nImatges m√©s professionals i production-ready",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#exercici-multistage-build",
    "href": "slides/05-virtualization-part1.html#exercici-multistage-build",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Exercici: Multistage Build",
    "text": "Exercici: Multistage Build\n\nUtilitzeu el Dockerfile original i constru√Øu la imatge.\nUtilitzeu el Dockerfile amb multistage build i constru√Øu la imatge.\nCompareu la mida de les dues imatges amb docker images i amb docker image ls.\nExecuteu docker run -it &lt;amb/sense&gt;-multistage bash per explorar el sistema de fitxers de cada imatge i veure les difer√®ncies.\n\n\nQuins fitxers i eines addicionals hi ha a la imatge sense multistage build que no estan a la imatge amb multistage build? Quines s√≥n les difer√®ncies principals?",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#preguntes-de-revisi√≥",
    "href": "slides/05-virtualization-part1.html#preguntes-de-revisi√≥",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Preguntes de revisi√≥",
    "text": "Preguntes de revisi√≥\n\nCom podem assegurar-nos que fitxers i carpetes espec√≠fiques no es copi√Øn al contenidor?\nQuina √©s la difer√®ncia entre COPY i ADD en un Dockerfile?\nQuin √©s el prop√≤sit de la instrucci√≥ CMD, i per qu√® no crea una capa?\nQuina √©s la difer√®ncia entre RUN i CMD en un Dockerfile?\nQuina √©s la difer√®ncia entre ENTRYPOINT i CMD en un Dockerfile?\nQu√® significa l‚Äôopci√≥ -p 8085:8080 en docker run?\nPer qu√® no es pot accedir al servidor web d‚Äôun contenidor a localhost:8080 tret que es mapi un port?",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#preguntes-dampliaci√≥",
    "href": "slides/05-virtualization-part1.html#preguntes-dampliaci√≥",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Preguntes d‚Äôampliaci√≥",
    "text": "Preguntes d‚Äôampliaci√≥\n\nQuins perills pot comportar fer docker run -v /:/host alpine?\nPer qu√® es considera perill√≥s executar docker run --network host?\nQuins riscos de seguretat reals existeixen si un contenidor executa processos que fan √∫s de ptrace o inspecci√≥ de processos del sistema?\nCom funcionaria el desplegament d‚Äôun contenidor creat en un host ARM en un host x86 sense suport multi-arch?\nExplica en detall qu√® passa internament quan un contenidor rep un SIGTERM i despr√©s un SIGKILL en una execuci√≥ de Docker.\nInvestigueu les difer√®ncies entre python:slim, python:alpine i python:full. Quins avantatges i desavantatges t√© cadascuna per a diferents casos d‚Äô√∫s?",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/05-virtualization-part1.html#exercicis",
    "href": "slides/05-virtualization-part1.html#exercicis",
    "title": "Virtualitzaci√≥ i Contenidors",
    "section": "Exercicis",
    "text": "Exercicis\n\nExercicis de Contenidors Docker",
    "crumbs": [
      "Diapositives",
      "Unitat 05 ¬∑ Virtualitzaci√≥ i Contenidors (Part 1)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#etapes-de-larrancada",
    "href": "slides/02-booting-part3.html#etapes-de-larrancada",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Etapes de l‚Äôarrancada",
    "text": "Etapes de l‚Äôarrancada",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#pid-1-initsystemd",
    "href": "slides/02-booting-part3.html#pid-1-initsystemd",
    "title": "Arrencada del sistema (Part 3)",
    "section": "PID 1: init/systemd",
    "text": "PID 1: init/systemd\nQuan s‚Äôacaba el proc√©s d‚Äôinicialitzaci√≥ del sistema en l‚Äôespai del kernel i es descomprimeix i executa l‚Äôinitramfs, es produeix una transici√≥ important cap a l‚Äôespai d‚Äôusuari.\nexec switch_root /mnt /sbin/init\n\nEl comandament switch_root substitueix l‚Äôarrel del sistema de fitxers actual (l‚Äôinitramfs) per la partici√≥ arrel real del sistema operatiu.\nEl kernel deixa de gestionar directament els processos i passa el control a un proc√©s en l‚Äôespai d‚Äôusuari.\nEl proc√©s PID 1 √©s el primer proc√©s que s‚Äôinicia en l‚Äôespai d‚Äôusuari i √©s responsable de la gesti√≥ dels processos del sistema operatiu.\nTradicionalment, aquest proc√©s era el programa init, per√≤ en els sistemes moderns, systemd ha substitu√Øt init com a responsable principal de la gesti√≥ de processos.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#funcions-de-pid-1",
    "href": "slides/02-booting-part3.html#funcions-de-pid-1",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Funcions de PID 1",
    "text": "Funcions de PID 1\n\nGesti√≥ de la inicialitzaci√≥ del sistema. Carrega els serveis i dimonis necessaris per al bon funcionament del sistema.\nGesti√≥ dels processos del sistema. Controla la creaci√≥, execuci√≥ i finalitzaci√≥ dels processos. Si un proc√©s orfe (un proc√©s que perd el seu proc√©s pare) continua en execuci√≥, el PID 1 assumeix la seva gesti√≥ i, eventualment, la seva terminaci√≥.\nArrel de l‚Äôarbre de processos: Tots els altres processos del sistema pengen d‚Äôell, directament o indirectament. Aix√≤ fa que sigui fonamental per a l‚Äôestabilitat i la continu√Øtat del sistema.\nApagat i reinici del sistema: El PID 1 tamb√© √©s responsable de controlar l‚Äôapagat i reinici del sistema, garantint que els processos es tanquin adequadament i que el sistema es desconnecti de manera segura",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#systemd-vs-sysvinit",
    "href": "slides/02-booting-part3.html#systemd-vs-sysvinit",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Systemd vs SysVinit",
    "text": "Systemd vs SysVinit\nEl canvi de SysVinit a Systemd en moltes distribucions de Linux va ser motivat per la necessitat de millorar l‚Äôefici√®ncia i la gesti√≥ dels serveis del sistema.\n\n\nSysVinit\n\nSeq√ºencial: Basat en scripts. Cada servei dep√®n de l‚Äôexecuci√≥ completa del servei anterior, la qual cosa pot ser lenta.\nSimple: Cada servei s‚Äôinicia amb un script directament llegible i modificable per l‚Äôadministrador del sistema.\nInflexible: Dificultat engestionar depend√®ncies. No permet arrencar serveis en paral¬∑lel ni controlar els processos un cop arrencats.\n\n\nSystemd\n\nRendiment: Capacitat de carregar serveis en paral¬∑lel. Reducci√≥ temps d‚Äôinici del sistema.\nModularitat: Els serveis es gestionen a trav√©s d‚Äôunitats (unit files) que poden especificar depend√®ncies, condicions de reinici autom√†tic,etc.\nCgroups: Limitar/gestionar els recursos assignats a cada servei.\nMonitoratge: Control i seguiment granular dels serveis amb journalctl.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#cr√≠tiques-a-systemd",
    "href": "slides/02-booting-part3.html#cr√≠tiques-a-systemd",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Cr√≠tiques a Systemd",
    "text": "Cr√≠tiques a Systemd\n\nComplexitat: Integra m√∫ltiples funcionalitats (gesti√≥ de serveis, journal, timers, logind, networkd, etc.) en un sol proc√©s. Aix√≤ pot augmentar la superf√≠cie de fallada i dificultar la depuraci√≥.\nTrenca amb la filosofia Unix tradicional\n\nUnix promou eines petites, especialitzades i composables.\n\nSystemd concentra moltes tasques en un √∫nic sistema de gesti√≥.\n\nDepend√®ncia del sistema: Molts scripts, paquets i eines modernes depenen de systemd, dificultant la compatibilitat amb sistemes alternatius (SysVinit, OpenRC).\n\n\nDebat en la comunitat\n\nEls defensors de systemd argumenten que simplifica l‚Äôadministraci√≥ de sistemes moderns i ofereix funcions que abans requerien m√∫ltiples eines externes.\n\nEls cr√≠tics insisteixen en que √©s massa intrusiu i redueix la flexibilitat per a administradors avan√ßats i entorns m√≠nims.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#backdoor-en-xz-utils-i",
    "href": "slides/02-booting-part3.html#backdoor-en-xz-utils-i",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Backdoor en XZ Utils (I)",
    "text": "Backdoor en XZ Utils (I)\nRecents vulnerabilitats en paquets com xz-utils han posat en evid√®ncia la complexitat de Systemd i com una backdoor ocult pot comprometre gran part de la infraestructura moderna de Linux.\n\nEl backdoor va ser introdu√Øt de manera gradual, comen√ßant amb contribucions sospitoses al projecte libarchive el 2021.\nDurant el 2022, un desenvolupador desconegut, JiaT75, va guanyar influ√®ncia dins del projecte xz-utils, substituint el contacte del mantenidor original i introduint canvis que van ocultar les vulnerabilitats.\nEl 2023, JiaT75 va introduir modificacions malicioses a xz-utils, aprofitant-les per comprometre sistemes a trav√©s de depend√®ncies amb Systemd.\n\nCVE-2024-3094: Vulnerabilitat que permet l‚Äôexecuci√≥ de codi malici√≥s en el sistema mitjan√ßant un defecte en la descompressi√≥ de fitxers .xz.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#backdoor-en-xz-utils-ii",
    "href": "slides/02-booting-part3.html#backdoor-en-xz-utils-ii",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Backdoor en XZ Utils (II)",
    "text": "Backdoor en XZ Utils (II)\nAquesta vulnerabilitat va afectar molts servidors Linux, que van actualitzar xz-utils amb la versi√≥ compromesa.\n\nliblzma √©s una llibreria de compressi√≥ que es pot enlla√ßar amb altres programes. Per exemple, OpenSSH es pot vincular a liblzma per gestionar la descompressi√≥ de fitxers de configuraci√≥.\nEn sistemes amb systemd, OpenSSH enlla√ßa amb systemd, que a la vegada enlla√ßa amb liblzma. Aix√≤ permet a XZ Utils controlar indirectament serveis essencials com sshd.\nMitjan√ßant una backdoor oculta en versions modificades de xz-utils, un atacant amb una clau de xifrat pr√®viament establerta podria carregar codi malici√≥s en certificats SSH i executar-lo en dispositius compromesos.\n\n\nAquests esdeveniments posen de manifest les contrapartides de la complexitat de Systemd i com una vulnerabilitat en un paquet aparentment inofensiu com xz-utils pot tenir un impacte significatiu en la seguretat del sistema i serveis cr√≠tics com sshd.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#executar-els-targets-o-runlevels",
    "href": "slides/02-booting-part3.html#executar-els-targets-o-runlevels",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Executar els Targets o Runlevels",
    "text": "Executar els Targets o Runlevels\nEl PID 1 executa els targets de systemd o runlevels d‚Äôinit. Els targets representen un conjunt de serveis i m√≤duls que s‚Äôexecuten per a cada estat del sistema. La seva funci√≥ √©s definir l‚Äôestat del sistema i els serveis que s‚Äôhan de carregar en aquest estat. La transici√≥ entre els targets es pot fer manualment amb la comanda systemctl isolate o autom√†ticament amb la comanda systemctl set-default.\n\n\ndefault.target: Apunta a graphical.target o multi-user.target-\ngraphical.target: Defineix un entorn gr√†fic.\nmulti-user.target: Proporciona un entorn no gr√†fic, permetent m√∫ltiples usuaris al sistema, habitual per a servidors.\nrescue.target: Proporciona un entorn de rescat amb una consola de l√≠nia de comandes.\nemergency.target: Ofereix un entorn d‚Äôemerg√®ncia que inicialitza el m√≠nim de serveis necessaris per a la soluci√≥ de problemes.\nshutdown.target: Gestiona l‚Äôapagat del sistema.\nreboot.target: Gestiona el reinici del sistema.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#units-de-systemd",
    "href": "slides/02-booting-part3.html#units-de-systemd",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Units de systemd",
    "text": "Units de systemd\nEls units s√≥n els fitxers de configuraci√≥ de systemd que defineixen els serveis, ens permeten gestionar-los i controlar-los.\n\n/etc/systemd/system/: Fitxers d‚Äôunitat personalitzats per l‚Äôadministrador.\n/run/systemd/system/: Configuraci√≥ en temps d‚Äôexecuci√≥, √©s a dir, afecta nom√©s un arrencada √∫nica.\n/usr/lib/systemd/system/: Configuraci√≥ proporcionada per la distribuci√≥. A Debian √©s /lib/systemd/system/.\n\n\nQuan hi ha dos fitxers de configuraci√≥ amb el mateix nom, systemd carregar√† nom√©s un des del directori que estigui m√©s alt en la jerarquia. Per exemple, la configuraci√≥ a /etc sempre sobreescriu la configuraci√≥ a /usr.\n\n\nDespr√©s de canviar la configuraci√≥, √©s necessari recarregar systemd amb: systemctl daemon-reload.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#tipus-dunitats",
    "href": "slides/02-booting-part3.html#tipus-dunitats",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Tipus d‚Äôunitats",
    "text": "Tipus d‚Äôunitats\n\nServeis: Fitxers que defineixen com s‚Äôinicien, s‚Äôaturen i es gestionen els serveis. Ex: /etc/systemd/system/sshd.service (servei SSH).\nSockets: Units que gestionen els sockets de comunicaci√≥ per als serveis.\nDevices: Units que representen dispositius de maquinari.\nMounts: Units que gestionen els punts de muntatge del sistema de fitxers.\nPaths: Units que monitoren els canvis en fitxers o directoris espec√≠fics.\nTimers: Units que planifiquen tasques per a la seva execuci√≥ en moments espec√≠fics.\nTargets: Units que agrupen altres units per a l‚Äôarrencada d‚Äôestats del sistema.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#targets-i-systemd",
    "href": "slides/02-booting-part3.html#targets-i-systemd",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Targets i Systemd",
    "text": "Targets i Systemd",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#exemple-de-fitxer-dunitat",
    "href": "slides/02-booting-part3.html#exemple-de-fitxer-dunitat",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Exemple de fitxer d‚Äôunitat",
    "text": "Exemple de fitxer d‚Äôunitat\n\n\n[Unit]\nDescription=CUPS Scheduler\nDocumentation=man:cupsd(8)\nAfter=network.target\n[Service]\nExecStart=/usr/sbin/cupsd -l\nType=notify\n[Install]\nAlso=cups.socket cups.path\nWantedBy=printer.target\n\n\nCUPS (Common Unix Printing System) √©s un sistema d‚Äôimpressi√≥ utilitzat en sistemes Unix i Linux.\nT√© una depend√®ncia amb la xarxa (After=network.target), ja que sovint es connecta a impressores de xarxa.\n\n\n\nS‚Äôinicia amb el comandament /usr/sbin/cupsd -l, que posa en marxa el servei d‚Äôimpressi√≥.\nEs configura per iniciar-se autom√†ticament quan s‚Äôarrenca el sistema (WantedBy=printer.target).\nCups.socket √©s una unitat de tipus socket que permet a CUPS escoltar connexions entrants per a serveis d‚Äôimpressi√≥.\nCups.path √©s una unitat de tipus path que monitoritza canvis en fitxers o directoris relacionats amb la configuraci√≥ d‚Äôimpressi√≥.\n\n\nAquest fitxer defineix el servei CUPS (Common Unix Printing System) √©s un sistema que t√© una depen√®ncia amb la xarxa (After=network.target), s‚Äôinicia amb el comandament /usr/sbin/cupsd -l i es configura per iniciar-se autom√†ticament quan s‚Äôarrenca el sistema (WantedBy=printer.target). Printer.target √©s un target que agrupa serveis relacionats amb la impressi√≥. Cups.socket i cups.path s√≥n altres unitats que tamb√© s‚Äôinicien quan s‚Äôinicia el servei CUPS ja que estan lligades a aquest servei. El tipus de servei √©s notify, el qual indica que el servei enviar√† una notificaci√≥ a systemd quan estigui llest.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#depend√®ncies-entre-unitats-i",
    "href": "slides/02-booting-part3.html#depend√®ncies-entre-unitats-i",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Depend√®ncies entre unitats (I)",
    "text": "Depend√®ncies entre unitats (I)\nLes unitats s√≥n objectes gestionats per systemd. Les depend√®ncies s√≥n associacions entre elles. Cada tipus d‚Äôunitat t√© algunes depend√®ncies per defecte (a menys que s‚Äôespecifiqui el contrari).\nRelacionals\n\nRequires: Indica que una unitat dep√®n d‚Äôuna altra unitat per a la seva activaci√≥. Si la unitat requerida no est√† activa, la unitat que la requereix no s‚Äôactivar√†.\nWants: Similar a Requires, per√≤ no √©s tan estricte. Si la unitat requerida no est√† activa, la unitat que la vol no es bloquejar√†.\nBindsTo: Similar a Requires, per√≤ si la unitat requerida es det√©, la unitat que la vincula tamb√© es detindr√†.\nPartOf: Indica que una unitat √©s part d‚Äôuna altra unitat. Si la unitat pare es det√©, la unitat fill tamb√© es detindr√†.\nConflicts: Indica que dues unitats no poden estar actives al mateix temps. Si una unitat s‚Äôactiva, l‚Äôaltra es detindr√† autom√†ticament.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#depend√®ncies-entre-unitats-ii",
    "href": "slides/02-booting-part3.html#depend√®ncies-entre-unitats-ii",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Depend√®ncies entre unitats (II)",
    "text": "Depend√®ncies entre unitats (II)\nOrdenaci√≥\n\nAfter: Indica que una unitat s‚Äôha d‚Äôiniciar despr√©s d‚Äôuna altra unitat. No crea una depend√®ncia estricta, nom√©s defineix l‚Äôordre d‚Äôinici.\nBefore: Indica que una unitat s‚Äôha d‚Äôiniciar abans d‚Äôuna altra unitat. No crea una depend√®ncia estricta, nom√©s defineix l‚Äôordre d‚Äôinici.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#transaccions-a-systemd-i",
    "href": "slides/02-booting-part3.html#transaccions-a-systemd-i",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Transaccions a systemd (I)",
    "text": "Transaccions a systemd (I)\nCada vegada que l‚Äôusuari o un servei sol¬∑licita una acci√≥ (per exemple, iniciar o aturar un servei), es crea una transacci√≥ que gestiona l‚Äôexecuci√≥ ordenada de les unitats afectades.\n\nCreaci√≥ de feines (jobs)\n\nEs crea una feina per a la unitat sol¬∑licitada.\n\nS‚Äôafegeixen recursivament les feines corresponents a totes les depend√®ncies de la unitat.\n\nMinimitzaci√≥ de la transacci√≥\n\nEliminar feines duplicades o redundants.\n\nEliminar feines que no estiguin referenciades per cap altre job (ancoratge).\n\nResoluci√≥ de cicles de depend√®ncies\n\nDetectar loops en el gr√†fic de depend√®ncies.\n\nTrencar-los eliminant feines problem√†tiques per evitar deadlocks.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#transaccions-a-systemd-i-1",
    "href": "slides/02-booting-part3.html#transaccions-a-systemd-i-1",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Transaccions a systemd (I)",
    "text": "Transaccions a systemd (I)\n\nFusi√≥ i optimitzaci√≥ de feines\n\nFusionar feines similars per reduir el nombre d‚Äôoperacions.\n\nPrioritzar feines ja existents a la cua.\n\nEnviament i execuci√≥\n\nAfegir les feines a la cua de jobs de systemd.\n\nExecutar les feines segons la depend√®ncia i l‚Äôordre optimitzat.\n\n\n\nGaranteix que les unitats es gestionin de manera at√≤mica i ordenada, permetent a systemd paral¬∑lelitzar serveis mentre respecta les depend√®ncies.\n\n\n\nLes transaccions garanteixen que les unitats es gestionin de manera at√≤mica i ordenada.\n\nAix√≤ permet a systemd paral¬∑lelitzar serveis mentre respecta les depend√®ncies.\n\nCadascuna de les feines cont√© informaci√≥ sobre la unitat, la seva acci√≥ (start, stop, reload) i les condicions d‚Äôexecuci√≥.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#systemctl-i",
    "href": "slides/02-booting-part3.html#systemctl-i",
    "title": "Arrencada del sistema (Part 3)",
    "section": "systemctl (I)",
    "text": "systemctl (I)\nLa comanda systemctl √©s l‚Äôeina principal per interactuar amb systemd i gestionar els serveis i unitats del sistema. Algunes de les operacions m√©s comunes inclouen:\n\n\n\n\n\n\n\nComanda\nDescripci√≥\n\n\n\n\nsystemctl start &lt;unit&gt;\nInicia una unitat (servei, socket, etc.).\n\n\nsystemctl stop &lt;unit&gt;\nAtura una unitat.\n\n\nsystemctl restart &lt;unit&gt;\nReinicia una unitat.\n\n\nsystemctl status &lt;unit&gt;\nMostra l‚Äôestat actual d‚Äôuna unitat.\n\n\nsystemctl enable &lt;unit&gt;\nHabilita una unitat perqu√® s‚Äôinici√Ø autom√†ticament en arrencar el sistema.\n\n\nsystemctl disable &lt;unit&gt;\nDeshabilita una unitat perqu√® no s‚Äôinici√Ø autom√†ticament.\n\n\nsystemctl is-active &lt;unit&gt;\nComprova si una unitat est√† activa.\n\n\nsystemctl is-enabled &lt;unit&gt;\nComprova si una unitat est√† habilitada per arrencar autom√†ticament.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#systemctl-ii",
    "href": "slides/02-booting-part3.html#systemctl-ii",
    "title": "Arrencada del sistema (Part 3)",
    "section": "systemctl (II)",
    "text": "systemctl (II)\n\n\n\n\n\n\n\nComanda\nDescripci√≥\n\n\n\n\nsystemctl list-units\nLlista totes les unitats carregades actualment.\n\n\nsystemctl list-unit-files\nLlista tots els fitxers d‚Äôunitats disponibles.\n\n\nsystemctl list-dependencies &lt;SERVICE&gt;\nMostra les depend√®ncies d‚Äôuna unitat.\n\n\nsystemctl list-jobs\nMostra les feines pendents i en execuci√≥.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#unitat-install",
    "href": "slides/02-booting-part3.html#unitat-install",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Unitat [INSTALL]",
    "text": "Unitat [INSTALL]\n[Install]\nWantedBy=multi-user.target\nAlso=sysstat-collect.timer\nAlso=sysstat-summary.timer\nAlias=monitoring.service\n\nLa secci√≥ [Install] defineix com s‚Äôinstal¬∑la i s‚Äôinicia una unitat.\nWantedBy=multi-user.target indica que aquesta unitat s‚Äôha d‚Äôiniciar quan s‚Äôarrenca el sistema en mode multiusuari (runlevel 3).\nAlso= permet associar altres unitats que s‚Äôhan d‚Äôiniciar juntament amb aquesta.\nAlias= crea un nom alternatiu per a la unitat, facilitant la seva refer√®ncia.\n\n\nEn aquest cas, la unitat s‚Äôiniciar√† autom√†ticament en arrencar el sistema en mode multiusuari, i tamb√© s‚Äôiniciaran els temporitzadors sysstat-collect.timer i sysstat-summary.timer. A m√©s, es pot referenciar aquesta unitat amb el nom alternatiu monitoring.service.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#opcions-service-i",
    "href": "slides/02-booting-part3.html#opcions-service-i",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Opcions [Service] (I)",
    "text": "Opcions [Service] (I)\n\n\n\n\n\n\n\nOpci√≥\nDescripci√≥\n\n\n\n\nType=\nDefineix el tipus de servei (simple, forking, oneshot, notify, idle).\n\n\nExecStart=\nComanda que s‚Äôexecuta per iniciar el servei.\n\n\nExecStop=\nComanda que s‚Äôexecuta per aturar el servei.\n\n\nExecReload=\nComanda que s‚Äôexecuta per recarregar la configuraci√≥ del servei.\n\n\nRemainAfterExit=\nIndica si el servei es mant√© actiu despr√©s de finalitzar.\n\n\nRestart=\nDefineix si el servei s‚Äôha de reiniciar en cas de fallada.\n\n\nUser=\nDefineix l‚Äôusuari amb el qual s‚Äôexecuta el servei.\n\n\nGroup=\nDefineix el grup amb el qual s‚Äôexecuta el servei.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#opcions-service-ii",
    "href": "slides/02-booting-part3.html#opcions-service-ii",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Opcions [Service] (II)",
    "text": "Opcions [Service] (II)\n\n\n\n\n\n\n\nOpci√≥\nDescripci√≥\n\n\n\n\nEnvironment=\nDefineix variables d‚Äôentorn per al servei.\n\n\nWorkingDirectory=\nDefineix el directori de treball del servei.\n\n\nPIDFile=\nEspecifica el fitxer que cont√© el PID del servei.\n\n\nTimeoutStartSec=\nTemps d‚Äôespera per a l‚Äôinici del servei.\n\n\nTimeoutStopSec=\nTemps d‚Äôespera per a l‚Äôaturada del servei.\n\n\nStandardOutput=\nDefineix on s‚Äôenvia la sortida est√†ndard del servei.\n\n\nStandardError=\nDefineix on s‚Äôenvia l‚Äôerror",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#tipus-de-serveis-i",
    "href": "slides/02-booting-part3.html#tipus-de-serveis-i",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Tipus de serveis (I)",
    "text": "Tipus de serveis (I)\n\nSimple: Per defecte, aquest servei s‚Äôinicia immediatament despr√©s del fork(). No espera cap senyal de que el servei estigui llest.\nForking: Aquest tipus de servei √©s per a processos que es bifurquen (fork) i es converteixen en dimonis. El servei es considera actiu despr√©s que el proc√©s pare finalitzi.\nOneshot: Aquest tipus √©s per a serveis que realitzen una tasca √∫nica i despr√©s finalitzen. Systemd espera que el proc√©s acabi abans de considerar el servei com a actiu.\nNotify: Aquest tipus de servei utilitza el mecanisme de notificaci√≥ de systemd per informar quan est√† llest. El servei ha d‚Äôenviar una notificaci√≥ expl√≠cita a systemd.\nDBus: Aquest tipus de servei s‚Äôutilitza per a serveis que es comuniquen a trav√©s de DBus. El servei es considera actiu quan el nom del bus apareix al bus de sistema.\nIdle: Aquest tipus de servei s‚Äôinicia nom√©s quan el sistema est√† inactiu, √©s a dir, quan no hi ha altres feines pendents.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#efecte-del-tipus-de-servei-al-runtime",
    "href": "slides/02-booting-part3.html#efecte-del-tipus-de-servei-al-runtime",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Efecte del tipus de servei al runtime",
    "text": "Efecte del tipus de servei al runtime",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#script-de-lusuari",
    "href": "slides/02-booting-part3.html#script-de-lusuari",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Script de l‚Äôusuari",
    "text": "Script de l‚Äôusuari\nUn cop s‚Äôhan carregat tots els serveis i el sistema est√† en marxa, els usuaris poden iniciar sessi√≥ al sistema. Els scripts de l‚Äôusuari es troben a la carpeta /etc/profile.d/ i s‚Äôexecuten quan l‚Äôusuari inicia sessi√≥.\n\n/etc/profile: Cont√© la configuraci√≥ global per a tots els usuaris. S‚Äôexecuta en iniciar sessi√≥ en un entorn de shell.\n/etc/bashrc: Proporciona configuraci√≥ per a shells interactius. S‚Äôexecuta cada vegada que s‚Äôinicia una nova sessi√≥ de shell.\n~/.bashrc: Fitxer de configuraci√≥ espec√≠fic per a l‚Äôusuari, que s‚Äôexecuta en iniciar una sessi√≥ de shell interactiu.\n~/.bash_profile: S‚Äôexecuta quan l‚Äôusuari inicia sessi√≥ a la terminal. Normalment, s‚Äôutilitza per configurar l‚Äôentorn de l‚Äôusuari, incloent la configuraci√≥ de l‚ÄôPATH.\n~/.bash_logout: S‚Äôexecuta quan l‚Äôusuari tanca la sessi√≥ de shell. Aqu√≠ es poden incloure comandes de neteja o tancament.\n~/.bash_history: Fitxer que emmagatzema l‚Äôhist√≤ric de les comandes executades per l‚Äôusuari en la sessi√≥ de shell.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#exercicis-propostas",
    "href": "slides/02-booting-part3.html#exercicis-propostas",
    "title": "Arrencada del sistema (Part 3)",
    "section": "Exercicis Propostas",
    "text": "Exercicis Propostas\n\nAn√†lisi del proc√©s d‚Äôarrencada amb systemd\nServei de C√≤pia de Seguretat Autom√†tica amb systemd\nDiscussi√≥: Secure Boot √©s realment segur?: Cerca not√≠cies recents sobre Secure Boot i comparteix-les al f√≤rum del curs. Debatiu sobre avantatges, desavantatges, vulnerabilitats conegudes i experi√®ncies personals.\nPr√†ctica 01: Snapshots i restauraci√≥ amb systemd i initramfs",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/02-booting-part3.html#thats-all",
    "href": "slides/02-booting-part3.html#thats-all",
    "title": "Arrencada del sistema (Part 3)",
    "section": "That‚Äôs all",
    "text": "That‚Äôs all\n\n\n\n\n\n\n\n\n\nTake Home Message\n\n\nEl proc√©s d‚Äôarrencada √©s un proc√©s complex. Els administradors de sistemes han de con√®ixer aquest proc√©s per poder gestionar i solucionar problemes durant l‚Äôarrencada del sistema i garantir un sistema segur, estable i eficient.",
    "crumbs": [
      "Diapositives",
      "Unitat 02 ¬∑ Arrencada del sistema (Part 3)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#qu√®-√©s-un-raid",
    "href": "slides/03-filesystem-part2.html#qu√®-√©s-un-raid",
    "title": "Sistema de fitxers (II)",
    "section": "Qu√® √©s un RAID?",
    "text": "Qu√® √©s un RAID?\nUn RAID (Redundant Array of Independent (originalment Inexpensive) Disks) √©s un conjunt de dispositius d‚Äôemmagatzematge que es combinen per a formar un sistema d‚Äôemmagatzematge √∫nic. Aquest nou sistema d‚Äôemmagatzematge permet distribuir les dades entre els diferents dispositius que el formen i millorar-ne m√®triques com la redund√†ncia o el rendiment.\n\n\nEls RAIDs s√≥n un conjunt de dispositius d‚Äôemmagatzematge que es combinen per a formar un sistema d‚Äôemmagatzematge √∫nic.\nEl principal objectiu d‚Äôaquesta combinaci√≥ √©s tolerar les fallades que es poden produir en els dispositius d‚Äôemmagatzematge. Aquesta redund√†ncia es pot aconseguir mitjan√ßant la duplicaci√≥ de les dades o mitjan√ßant la paritat, com veurem m√©s endavant.\nUn altre objectiu important dels RAIDs √©s millorar el rendiment del sistema mitjan√ßant la distribuci√≥ de les dades entre els diferents dispositius. Aix√≤ permet millorar la velocitat de lectura i escriptura de les dades. Es coneix tamb√© com striping o en altres paraules ens permet incrementar la ample de banda.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#qu√®-√©s-el-rendiment-i-la-redund√†ncia",
    "href": "slides/03-filesystem-part2.html#qu√®-√©s-el-rendiment-i-la-redund√†ncia",
    "title": "Sistema de fitxers (II)",
    "section": "Qu√® √©s el rendiment i la redund√†ncia?",
    "text": "Qu√® √©s el rendiment i la redund√†ncia?\n\nLa redund√†ncia √©s la capacitat d‚Äôun sistema de continuar funcionant en cas de fallada d‚Äôun o m√©s dispositius. Aquesta capacitat es pot aconseguir mitjan√ßant la duplicaci√≥ de les dades o mitjan√ßant la paritat.\nEl rendiment √©s la capacitat d‚Äôun sistema de processar un volum de dades en un temps determinat. Aquesta capacitat es pot aconseguir mitjan√ßant la distribuci√≥ de les dades entre els diferents dispositius, mitjan√ßant una t√®cnica coneguda com striping.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#conceptes-b√†sics",
    "href": "slides/03-filesystem-part2.html#conceptes-b√†sics",
    "title": "Sistema de fitxers (II)",
    "section": "Conceptes b√†sics",
    "text": "Conceptes b√†sics\n\nRedund√†ncia: Capacitat de tolerar fallades de dispositiu (quantitat de discs que poden fallar sense perdre dades).\nRendiment: Mesurat en IOPS i ample de banda MB/s. Dep√®n de la mida de stripe,nombre de discs i patr√≥ d‚Äôacc√©s (seq√ºencial vs aleatori).\nCapacitat: La capacitat total del sistema √©s la suma de les capacitats dels dispositius que el formen, tenint en compte la redund√†ncia.\nStripe: Un stripe √©s una unitat d‚Äôinformaci√≥ que es distribueix entre els diferents dispositius que formen el RAID. Conjunt de blocs distribu√Øts entre discs dins del RAID.\nBloc: Un bloc √©s una unitat d‚Äôinformaci√≥ que es llegeix o s‚Äôescriu en un dispositiu d‚Äôemmagatzematge. (512B, 4KB‚Ä¶).\n\n\n\n\n\n\n\n\nDifer√®ncia entre Stripe i Bloc\n\n\nAmb 2 dispositius i un stripe de 64 KB, cada dispositiu guarda 64 KB alternatius d‚Äôun fitxer.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#implementacions-de-raids",
    "href": "slides/03-filesystem-part2.html#implementacions-de-raids",
    "title": "Sistema de fitxers (II)",
    "section": "Implementacions de RAIDs",
    "text": "Implementacions de RAIDs\n\nSoftware RAID: Implementat a nivell de sistema operatiu.\n\nAvantatges: flexibilitat, transpar√®ncia, no dep√®n del hardware.\nInconvenients: CPU utilitzat per c√†lculs de paritat.\n\nHardware RAID: Controladora dedicada (caracter√≠stiques pr√≤pies, cache, acceleraci√≥ XOR).\n\nAvantatges: millors rendiments en alguns escenaris;\nInconvenients: depend√®ncia del controlador, propietat de metadades.\n\nFake/BIOS RAID: Soluci√≥ mixta (controladora amb firmware m√≠nim). Pot generar problemes de portabilitat i compatibilitat.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#implementacions-de-raids-1",
    "href": "slides/03-filesystem-part2.html#implementacions-de-raids-1",
    "title": "Sistema de fitxers (II)",
    "section": "Implementacions de RAIDs",
    "text": "Implementacions de RAIDs",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#raid-lineal",
    "href": "slides/03-filesystem-part2.html#raid-lineal",
    "title": "Sistema de fitxers (II)",
    "section": "RAID Lineal",
    "text": "RAID Lineal\n\ncat l√≤gic entre diversos dispositius d‚Äôemmagatzematge f√≠sics. JBOD (Just a Bunch Of Disks). No millora ni la redund√†ncia ni el rendiment.\n\n\n\n\n\n\nEl RAID lineal √©s el m√©s b√†sic de tots els tipus de RAID.\nEn aquest sistema, la informaci√≥ es distribueix primer en un disc i despr√©s en l‚Äôaltre, seguint un ordre seq√ºencial. Cada unitat d‚Äôinformaci√≥ es coneguda com a stripe, i correspon a un bloc.\nLa figura mostra un exemple de RAID Lineal (/dev/md0) amb dos discos (/dev/vda i /dev/vdb). En aquest exemple s‚Äôhan guardat els primers blocs (1 al 6) a la partici√≥ (/dev/vda1). Ara, s‚Äôha d‚Äôassumir que la partici√≥ (/dev/sda1) es plena. Els seg√ºents blocs es guarden a la seg√ºent partici√≥ disponible (/dev/vdb1). I aix√≠ successivament.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#raid-0-striping",
    "href": "slides/03-filesystem-part2.html#raid-0-striping",
    "title": "Sistema de fitxers (II)",
    "section": "RAID 0 (Striping)",
    "text": "RAID 0 (Striping)\n\n\n\n\n\n\n\nObjectiu: augmentar rendiment i capacitat (capacitat = suma de discos).\nMida de stripe:\n\nPetits milloren IOPS aleatoris.\nGrans stripes milloren seq√ºencials.\n\nSi les dades s√≥n prou grans, es poden llegir/escriure en paral¬∑lel.\nToler√†ncia a fallades: 0 (p√®rdua total si un disc falla).\nAplicacions: cache, fitxers temporals, tasques on la redund√†ncia no √©s priorit√†ria.\n\n\n\n\nEl nivell 0 de RAID √©s un dels m√©s senzills i m√©s utilitzats. El seu objectiu principal √©s millorar el rendiment del sistema mitjan√ßant la distribuci√≥ de les dades entre els diferents dispositius.\nAquesta distribuci√≥ es realitza mitjan√ßant una t√®cnica coneguda com striping. Aquesta t√®cnica permet dividir les dades en blocs m√©s petits i distribuir-los entre els diferents dispositius. Fent Round Robin a tots els dispositius.\nAix√≤ permet millorar la velocitat de lectura i escriptura de les dades, per tant incrementa l‚Äôample de banda.\nLa capacitat del sistema tamb√© es veu incrementada, ja que la capacitat total del sistema √©s la suma de les capacitats dels dispositius que el formen.\nEl principal desavantatge del nivell 0 de RAID √©s que no ofereix cap tipus de redund√†ncia. Aix√≤ vol dir que si un dels dispositius falla, es perden totes les dades del sistema.\nLa figura mostra un exemple de RAID0 (/dev/md0) amb dos discos (/dev/vda i /dev/vdb). En aquest exemple s‚Äôhan guardat els primers blocs (1 al 6) de forma alternada 1 a cada disc. El seg√ºent bloc (9) es guarda al disc (/dev/vdb). En aquest exemple, els blocs parells es guarden al disc (/dev/vdb) i els senars al disc (/dev/vda).",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#raid-1-mirror",
    "href": "slides/03-filesystem-part2.html#raid-1-mirror",
    "title": "Sistema de fitxers (II)",
    "section": "RAID 1 (Mirror)",
    "text": "RAID 1 (Mirror)\n\n\n\n\n\nObjectiu: redund√†ncia via duplicaci√≥ exacta (mirrors).\nLectures: potencialment paral¬∑leles (millora), dep√®n del controlador.\nEscriptures: es repliquen en tots els mirrors (overhead escritura).\nCapacitat usable: 50% amb 2 discos (en general n/2 en conjunts de mirrors).\nAplicacions: sistema root, dades cr√≠tiques on la coher√®ncia immediata √©s priorit√†ria.\n\n\n\n\nEl nivell 1 t√© com a objectiu principal millorar la redund√†ncia del sistema mitjan√ßant la duplicaci√≥ de les dades en dos dispositius.\nLa figura 1.3 mostra un exemple de RAID1 (/dev/md0) amb dos discos (/dev/vda i /dev/vdb). En aquest exemple s‚Äôhan guardat els primers blocs (1 al 6) de forma id√®ntica en els dos discos. Aix√≤ significa que si un dels discos falla, l‚Äôaltre disc pot continuar funcionant sense interrupci√≥, ja que cont√© una c√≤pia completa de totes les dades.\nPer tant, el principal avantatge del nivell 1 de RAID √©s la redund√†ncia. Aix√≤ vol dir que si un dels dispositius falla, es poden recuperar les dades sense problemes.\nUn altre avantatge del nivell 1 de RAID √©s que permet realitzar lectures gaireb√© el doble de r√†pides, ja que es poden llegir les dades de forma simult√†nia des dels dos dispositius.\nPer contra, el nivell 1 de RAID tamb√© t√© alguns desavantatges. El principal desavantatge √©s el cost, ja que es necessiten m√©s dispositius per a duplicar les dades. Aix√≤ vol dir que el cost del sistema es duplica. A m√©s, l‚Äôescriptura √©s m√©s lenta, ja que es necessita escriure les dades en els dos dispositius de forma simult√†nia. Finalment, la capacitat del sistema tamb√© es veu redu√Øda, ja que nom√©s es pot utilitzar la meitat de la capacitat total dels dispositius.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#raid-2",
    "href": "slides/03-filesystem-part2.html#raid-2",
    "title": "Sistema de fitxers (II)",
    "section": "RAID 2",
    "text": "RAID 2\n\n\n\n\nEl stripe √©s a nivell de bit i no de bloc com fins ara.\nPr√†cticament obsolet en sistemes moderns: exigeix molts discs i acc√®s sincronitzat.\n\n\n\nEl nivell 2 de RAID utilitza la paritat per detectar i corregir errors en les dades. Aquesta paritat es calcula mitjan√ßant bits de control anomenats bits de paritat.\nObservem que el stripe √©s a nivell de bit i no de bloc com fins ara. Aix√≤ vol dir que les dades es divideixen en bits m√©s petits i es distribueixen entre els diferents dispositius.\nLa Figura 1.4 mostra un exemple d‚Äôuna configuraci√≥ RAID 2 que implementa un codi Hamming(4,3), √©s a dir, 4 bits de dades i 3 bits de paritat. Aquesta configuraci√≥ pot semblar poc pr√†ctica en molts contextos, per√≤ ens proporciona una comprensi√≥ clara de com funciona la codificaci√≥ de les dades i, en particular, la codificaci√≥ de Hamming.\nEls codis Hamming s√≥n una classe de codis de correcci√≥ d‚Äôerrors que es basen en la paritat. Aquests codis s√≥n molt √∫tils per a la detecci√≥ i correcci√≥ d‚Äôerrors en les dades, ja que permeten identificar i corregir errors en les dades sense necessitat de retransmissi√≥.\nEl seu √∫s es poc pr√†ctic en molts contextos, ja que requereix una gran quantitat de dispositius i afegeix la complexitat de la implementaci√≥ de la codificaci√≥ de Hamming (encoded).",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#codis-de-hamming",
    "href": "slides/03-filesystem-part2.html#codis-de-hamming",
    "title": "Sistema de fitxers (II)",
    "section": "Codis de Hamming",
    "text": "Codis de Hamming\nEls codis de Hamming s√≥n una classe de codis de correcci√≥ d‚Äôerrors que es basen en la paritat. Aquests codis s√≥n molt √∫tils per a la detecci√≥ i correcci√≥ d‚Äôerrors en les dades, ja que permeten identificar i corregir errors en les dades sense necessitat de retransmissi√≥.\n\nEl codi de Hamming permet detectar i corregir un sol error de bit.\n\nS‚Äôutilitza en el RAID 2 per protegir dades a nivell de bit.\nS‚Äôintercalen bits de paritat entre els bits de dades.\n\nCada bit de paritat comprova un conjunt espec√≠fic de bits de dades.\n\nSi un bit es corromp, la combinaci√≥ dels bits de paritat indica quin bit s‚Äôha de corregir.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#xor-operaci√≥-b√†sica",
    "href": "slides/03-filesystem-part2.html#xor-operaci√≥-b√†sica",
    "title": "Sistema de fitxers (II)",
    "section": "XOR (Operaci√≥ b√†sica)",
    "text": "XOR (Operaci√≥ b√†sica)\nLa operaci√≥ XOR (exclusive OR) √©s una operaci√≥ l√≤gica que compara dos bits i retorna un bit de resultat. El resultat √©s 1 si els bits comparats s√≥n diferents, i 0 si s√≥n iguals.\n\n\n\nA\nB\n\\(A \\oplus B\\)\n\n\n\n\n0\n0\n0\n\n\n0\n1\n1\n\n\n1\n0\n1\n\n\n1\n1\n0",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#hamming74---0110",
    "href": "slides/03-filesystem-part2.html#hamming74---0110",
    "title": "Sistema de fitxers (II)",
    "section": "Hamming(7,4) -> [0110]",
    "text": "Hamming(7,4) -&gt; [0110]\n\n\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n\n\n\\(p_1\\)\n\\(p_2\\)\n\\(d_1\\)\n\\(p_3\\)\n\\(d_2\\)\n\\(d_3\\)\n\\(d_4\\)\n\n\nDades\n\n\n0\n\n1\n1\n0\n\n\n\\(p_1\\)\n1\n\n0\n\n1\n\n0\n\n\n\\(p_2\\)\n\n1\n0\n\n\n1\n0\n\n\n\\(p_3\\)\n\n\n\n0\n1\n1\n0\n\n\nCodi\n1\n1\n0\n0\n1\n1\n0\n\n\n\n\n\n\nEls bits que s√≥n pot√®ncia de 2 (\\(2^k\\), k=0,1, 2‚Ä¶) s√≥n els bits de paritat.\nBits de paritat = XOR bits de dades amb el \\(n^o\\) de bit de paritat.\n\n\n\n\n[0110] es codifica com [1100110]",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#comprovaci√≥-derrors-amb-hamming-1100110",
    "href": "slides/03-filesystem-part2.html#comprovaci√≥-derrors-amb-hamming-1100110",
    "title": "Sistema de fitxers (II)",
    "section": "Comprovaci√≥ d‚Äôerrors amb Hamming [1100110]",
    "text": "Comprovaci√≥ d‚Äôerrors amb Hamming [1100110]\n\nEs calcula els bits de Comprovaci√≥ = XOR del bits de paritat i de tots els seus bits de dades associats:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n\n\n\np\\(_1\\)\np\\(_2\\)\nd\\(_1\\)\np\\(_3\\)\nd\\(_2\\)\nd\\(_3\\)\nd\\(_4\\)\nComprovaci√≥\n\n\nCodi\n1\n1\n0\n0\n1\n1\n0\n\n\n\np\\(_1\\)\n1\n\n0\n\n1\n\n0\n0\n\n\np\\(_2\\)\n\n1\n0\n\n\n1\n0\n0\n\n\np\\(_3\\)\n\n\n\n0\n1\n1\n0\n0\n\n\n\n\nTots els bits de comprovaci√≥ = 0 ‚Üí cap error detectat.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#comprovaci√≥-derrors-amb-hamming-1100111",
    "href": "slides/03-filesystem-part2.html#comprovaci√≥-derrors-amb-hamming-1100111",
    "title": "Sistema de fitxers (II)",
    "section": "Comprovaci√≥ d‚Äôerrors amb Hamming [1100111]",
    "text": "Comprovaci√≥ d‚Äôerrors amb Hamming [1100111]\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n\n\n\np\\(_1\\)\np\\(_2\\)\nd\\(_1\\)\np\\(_3\\)\nd\\(_2\\)\nd\\(_3\\)\nd\\(_4\\)\nComprovaci√≥\n\n\nCodi\n1\n1\n0\n0\n1\n1\n1\n\n\n\np\\(_1\\)\n1\n\n0\n\n1\n\n1\n1\n\n\np\\(_2\\)\n\n1\n0\n\n\n1\n1\n1\n\n\np\\(_3\\)\n\n\n\n0\n1\n1\n1\n1\n\n\n\n\nS‚Äôha alterat el bit 7 corresponent a d\\(_4\\).",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#comprovaci√≥-derrors-amb-hamming-0100110",
    "href": "slides/03-filesystem-part2.html#comprovaci√≥-derrors-amb-hamming-0100110",
    "title": "Sistema de fitxers (II)",
    "section": "Comprovaci√≥ d‚Äôerrors amb Hamming [0100110]",
    "text": "Comprovaci√≥ d‚Äôerrors amb Hamming [0100110]\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n\n\n\np\\(_1\\)\np\\(_2\\)\nd\\(_1\\)\np\\(_3\\)\nd\\(_2\\)\nd\\(_3\\)\nd\\(_4\\)\nComprovaci√≥\n\n\nCodi\n0\n1\n0\n0\n1\n1\n0\n\n\n\np\\(_1\\)\n0\n\n0\n\n1\n\n0\n1\n\n\np\\(_2\\)\n\n1\n0\n\n\n1\n0\n0\n\n\np\\(_3\\)\n\n\n\n0\n1\n1\n0\n0\n\n\n\n\nEls bits de comprovaci√≥ = 001 ‚Üí s‚Äôha alterat el bit 1 corresponent a \\(p_1\\).",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#raid-3-i-4",
    "href": "slides/03-filesystem-part2.html#raid-3-i-4",
    "title": "Sistema de fitxers (II)",
    "section": "RAID 3 i 4",
    "text": "RAID 3 i 4\n\n\n\n\n\nRAID 3: striping a nivell de byte, paritat en disc dedicat; acc√©s molt sincronitzat ‚Üí bo per fitxers grans i seq√ºencials (p.ex. streaming).\nRAID 4: striping a nivell de bloc, paritat en disc dedicat; permet accessos independents per bloc per√≤ pateix bottleneck al disc de paritat.\nEn ambd√≥s casos la paritat dedicada pot ser coll d‚Äôampolla per escriptura.\n\n\n\n\nLa difer√®ncia entre un RAID 3 i 4 √©s la granularitat de la paritat. En un RAID 3 la paritat es calcula a nivell de bytes i en un RAID 4 a nivell de blocs.\nLes dades es distribueixen com un RAID 0 i la paritat es guarda en un disc dedicat.\nEn realitat, en un RAID 3 o 4, les dades no es dupliquen, sin√≥ que es calcula una paritat. Si un disc falla, les dades es poden recuperar utilitzant la informaci√≥ de paritat dels altres discs.\nLa figura il¬∑lustra un exemple de configuraci√≥ RAID 4. En aquest exemple, el RAID 4, identificat com a /dev/md0, est√† format per cinc discos: /dev/vda, /dev/vdb, /dev/vdc, /dev/vdd i /dev/vde. En aques- ta configuraci√≥ RAID 4, els primers quatre discos (/dev/vda, /dev/vdb, /dev/vdc, i /dev/vdd) s‚Äôutilitzen per emmagatzemar les dades. El cin- qu√® disc (/dev/vde) s‚Äôutilitza exclusivament per a la paritat.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#raid-5",
    "href": "slides/03-filesystem-part2.html#raid-5",
    "title": "Sistema de fitxers (II)",
    "section": "RAID 5",
    "text": "RAID 5\n\n\n\n\n\nParitat distribu√Øda entre tots els discos (evita coll d‚Äôampolla √∫nic).\nToler√†ncia: 1 disc (hi ha un petit risc durant rebuild). Probabilitat de fallada en discs grans.\nLectura: alta (com RAID0).\nEscriptura: penalitzaci√≥ per read-modify-write (llegir bloc antic, llegir paritat antiga, escriure dades i paritat nova) ‚Äî cr√≠tic per a c√†rregues amb moltes escriptures petites.\nCapacitat: \\((n-1)/n\\).\nAplicacions: sistemes de fitxers, bases de dades, servidors web.\n\n\n\n\nEl RAID 5 √©s un dels nivells de RAID m√©s utilitzats en els sistemes inform√†tics actuals. Aquest RAID ofereix un bon equilibri entre rendiment i redund√†ncia.\nLa principal difer√®ncia entre un RAID 4 i un RAID 5 √©s que en un RAID 5 la paritat es distribueix entre els diferents discs per evitar el coll d‚Äôampolla.\nLa figura il¬∑lustra un exemple de configuraci√≥ RAID 5. En aquesta configuraci√≥, la paritat es distribueix entre tots els discs, en lloc de ser emmagatzemada en un disc dedicat com en el RAID 4.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#raid-6",
    "href": "slides/03-filesystem-part2.html#raid-6",
    "title": "Sistema de fitxers (II)",
    "section": "RAID 6",
    "text": "RAID 6\n\nExtensi√≥ de RAID5 amb doble paritat (P i Q) ‚Üí tolera 2 fallades simult√†nies.\nRecomanat en conjunts grans (n gran) on la probabilitat de fallada durant rebuild √©s significativa.\nPenalitzaci√≥ d‚Äôescriptura m√©s elevada que RAID5, per√≤ millor toler√†ncia.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#raid-10",
    "href": "slides/03-filesystem-part2.html#raid-10",
    "title": "Sistema de fitxers (II)",
    "section": "RAID 10",
    "text": "RAID 10\n\nmirror + stripe. Toler√†ncia variable segons quins discs fallen; reconstrucci√≥ molt m√©s r√†pida.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#raid-50",
    "href": "slides/03-filesystem-part2.html#raid-50",
    "title": "Sistema de fitxers (II)",
    "section": "RAID 50",
    "text": "RAID 50\n\nStripe sobre m√∫ltiples conjunts RAID5. Millora rendiment i toler√†ncia depenent de cada grup.\n\n\n.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#comparativa-de-raids",
    "href": "slides/03-filesystem-part2.html#comparativa-de-raids",
    "title": "Sistema de fitxers (II)",
    "section": "Comparativa de RAIDs",
    "text": "Comparativa de RAIDs\n\n\n\n\n\n\n\n\n\n\n\nNivell\nMin discs\nCapacitat\nToler√†ncia\nLectura\nEscriptura\n\n\n\n\nRAID 0\n2\n100%\n0\nAlt\nAlt\n\n\nRAID 1\n2\n50% (amb 2 discos)\n1 per mirror\nPot ser Alt\nMitj√†\n\n\nRAID 5\n3\n\\((n-1)/n\\)\n1\nAlt\nMitj√†-Baix\n\n\nRAID 6\n4\n\\((n-2)/n\\)\n2\nAlt\nMitj√†-Baix (pitjor que RAID5)\n\n\nRAID 10\n4\n50% (dep√®n)\n‚â•1 (segons fallades)\nAlt\nAlt\n\n\nRAID 50\n6\naproximadament \\((n-1)/n\\) per grup\n‚â•1 per grup\nAlt\nMitj√†\n\n\n\n\n\nLa taula mostra una comparativa entre els diferents nivells de RAID m√©s comuns. Aquesta comparativa inclou les caracter√≠stiques m√©s importants de cada RAID, com ara el nombre m√≠nim de dispositius, la redund√†ncia, el rendiment en lectura i escriptura i la capacitat.\nCom es pot observar, cada RAID t√© les seves pr√≤pies caracter√≠stiques i avantatges. Per exemple, el RAID 0 ofereix un rendiment molt alt en lectura i escriptura, per√≤ no ofereix cap tipus de redund√†ncia. En canvi, el RAID 1 ofereix una alta redund√†ncia, per√≤ el rendiment en escriptura √©s baix.\nPer exemple, la instal¬∑laci√≥ d‚Äôun sistema operatiu es podria fer en un RAID 1, ja que la redund√†ncia √©s m√©s important que el rendiment.\nEn canvi, un servidor web seria m√©s adequat en un RAID 5, ja que ofereix un bon equilibri entre rendiment i redund√†ncia.\nEn general, la selecci√≥ del RAID m√©s adequat dep√®n de les necessitats del sistema i dels usuaris.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#dispositiu-devmd",
    "href": "slides/03-filesystem-part2.html#dispositiu-devmd",
    "title": "Sistema de fitxers (II)",
    "section": "Dispositiu /dev/md*",
    "text": "Dispositiu /dev/md*\n\nLinux implementa Software RAID mitjan√ßant el subsistema del kernel MD (Multiple Device).\nEl m√≤dul principal √©s md_mod, que crea dispositius virtuals de bloc /dev/mdX sobre dispositius f√≠sics (/dev/sd*, /dev/nvme*, etc.).\nCada dispositiu MD √©s gestionat per un controlador de tipus mdX que mant√© una taula de mapatge (metadata) amb:\n\nnivell RAID (level)\nnombre de dispositius (raid_disks)\nsuperblocs (superblock)\nestat de sincronitzaci√≥ i fallades",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#components-del-subsistema-md",
    "href": "slides/03-filesystem-part2.html#components-del-subsistema-md",
    "title": "Sistema de fitxers (II)",
    "section": "Components del subsistema MD",
    "text": "Components del subsistema MD\n\n\n\n\n\n\n\nComponent\nFunci√≥ principal\n\n\n\n\nmd_mod\nGestor principal del subsistema MD (creaci√≥ i manteniment de /dev/mdX).\n\n\nraid0, raid1, raid5, raid6, raid10\nM√≤duls del kernel que implementen la l√≤gica espec√≠fica de cada nivell RAID.\n\n\nmdadm\nEina user-space que interactua amb el subsistema MD via ioctl i sysfs.\n\n\n/proc/mdstat\nPunt d‚Äôentrada per consultar estat de sincronitzaci√≥, reconstrucci√≥ i fallades.\n\n\n/sys/block/mdX\nDirectori amb informaci√≥ detallada i opcions de configuraci√≥ per a cada mdX.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#flux-doperacions",
    "href": "slides/03-filesystem-part2.html#flux-doperacions",
    "title": "Sistema de fitxers (II)",
    "section": "Flux d‚Äôoperacions",
    "text": "Flux d‚Äôoperacions\n\n\n\n\n\nsequenceDiagram\n    participant A as Aplicaci√≥\n    participant B as Sistema de fitxers\n    participant C as VFS\n    participant D as /dev/mdX (md_mod)\n    participant E as Driver RAIDn\n    participant F as Discos f√≠sics\n\n    A-&gt;&gt;B: Read/Write\n    B-&gt;&gt;C: Operaci√≥ de fitxer\n    C-&gt;&gt;D: Acc√©s a /dev/mdX\n    D-&gt;&gt;E: Gesti√≥ RAID\n    E-&gt;&gt;F: Acc√©s a discos f√≠sics\n\n\n\n\n\n\n\nLes operacions de paritat, mirroring o striping s‚Äôexecuten al context del kernel, sovint amb tasques as√≠ncrones (mdX_raid_thread).\nLes metadades del RAID s‚Äôemmagatzemen al final (o inici) de cada disc com a superblock MD v1.x.\nDes del kernel 4.0 es pot utilitzar reshape per canviar el nivell RAID o afegir dispositius en viu.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#paquet-mdadm",
    "href": "slides/03-filesystem-part2.html#paquet-mdadm",
    "title": "Sistema de fitxers (II)",
    "section": "Paquet mdadm",
    "text": "Paquet mdadm\nEn la majoria de les distribucions de Linux, el paquet mdadm permet la creaci√≥ i gesti√≥ de dispositius RAID.\n\n\nDistribucions basades en Red Hat\ndnf search mdadm\ndnf install mdadm -y\n\nDistribucions basades en Debian\napt search mdadm\napt install mdadm -y\n\n\nEl funcionament del paquet mdadm √©s similar en totes les distribucions de Linux. Per tant, les instruccions d‚Äô√∫s s√≥n similars i no importa la distribuci√≥ que s‚Äôutilitzeu.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#creaci√≥-de-dispositius-raids",
    "href": "slides/03-filesystem-part2.html#creaci√≥-de-dispositius-raids",
    "title": "Sistema de fitxers (II)",
    "section": "Creaci√≥ de Dispositius RAIDs",
    "text": "Creaci√≥ de Dispositius RAIDs\n\n\nOpcions B√†siques\nmdadm --create --verbose /dev/[nom] \n--level=[nivell] \n--raid-devices=[n¬∫ dispositius] [dispositius]\n\n--create: Crea un nou dispositiu RAID.\n--verbose: Mostra informaci√≥ detallada sobre el proc√©s.\n/dev/[nom]: Nom del dispositiu RAID.\n--level=[nivell]: RAID.\n--raid-devices=[n¬∫ dispositius]: Nombre de dispositius que formen el RAID.\n[dispositius]: Llista de dispositius que formen el RAID.\n\n\n\n\nAltres Opcions\nmdadm --create --help\n\n--metadata=[tipus]: Tipus de metadades.\n--spare-devices=[n¬∫ dispositius]: Nombre de dispositius reservats.\n--chunk=[mida]: Mida dels blocs.\n--layout=[esquema]: Esquema de distribuci√≥ de les dades.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#gesti√≥-del-raid---manage",
    "href": "slides/03-filesystem-part2.html#gesti√≥-del-raid---manage",
    "title": "Sistema de fitxers (II)",
    "section": "Gesti√≥ del RAID (--manage)",
    "text": "Gesti√≥ del RAID (--manage)\nmdadm --manage /dev/[nom] [options] [dispositius]\n  --add         -a   : afegeix dispositius posteriors a l'array\n  --re-add           : els dispositius posteriors s√≥n reafegits si eren\n                     : membres recents de l'array\n  --remove      -r   : elimina els dispositius posteriors, que no han d'estar actius\n  --fail        -f   : marca els dispositius posteriors com a defectuosos\n  --set-faulty       : igual que --fail\n  --replace          : marca el(s) dispositiu(s) per ser reempla√ßat(s) per recanvis. \n                     : Un cop completat el reempla√ßament, el dispositiu es marcar√† \n                     : com a defectu√≥s\n  --with             : indica quin recanvi hauria de preferir un '--replace' anterior\n  --run         -R   : inicia un array parcialment constru√Øt\n  --stop        -S   : desactiva l'array, alliberant tots els recursos\n  --readonly    -o   : marca l'array com a nom√©s lectura\n  --readwrite   -w   : marca l'array com a lectura i escriptura",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#informaci√≥-i-monitoratge-del-raid",
    "href": "slides/03-filesystem-part2.html#informaci√≥-i-monitoratge-del-raid",
    "title": "Sistema de fitxers (II)",
    "section": "Informaci√≥ i Monitoratge del RAID",
    "text": "Informaci√≥ i Monitoratge del RAID\nLes opcions --detail i --examine permeten obtenir informaci√≥ detallada sobre un dispositiu RAID. La principal difer√®ncia entre ambdues opcions √©s que --examine mostra informaci√≥ m√©s detallada sobre el dispositiu.\n\n\nmdadm --detail /dev/[nom]\n\nmdadm --examine /dev/[nom]\n\nLa opci√≥ --monitor permet monitorar un dispositiu RAID en temps real. Obtenint informaci√≥ sobre els esdeveniments que es produeixen en el dispositiu i ens permet prendre accions en conseq√º√®ncia.\nmdadm --monitor /dev/[nom]",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#ensamblatge---assemble",
    "href": "slides/03-filesystem-part2.html#ensamblatge---assemble",
    "title": "Sistema de fitxers (II)",
    "section": "Ensamblatge --assemble",
    "text": "Ensamblatge --assemble\n\nPermet muntar un array RAID existent.\nAquesta opci√≥ no crea un nou array, sin√≥ que reuneix un array existent a partir dels dispositius que especifiquem.\n\nmdadm --assemble /dev/[nom] [dispositius]\n\nCada cop que el sistema s‚Äôinicia, aquesta opci√≥ s‚Äôexecuta al kernel. Escaneja els discs, busca els superblocks i reconstrueix tots els arrays per a nosaltres.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#initramfs-i-raid",
    "href": "slides/03-filesystem-part2.html#initramfs-i-raid",
    "title": "Sistema de fitxers (II)",
    "section": "Initramfs i RAID",
    "text": "Initramfs i RAID\nEn entorns amb RAID, initramfs inclou els binaris i la configuraci√≥ necessaris per gestionar els arrays RAID. Durant la fase d‚Äôarrencada, es fa servir la comanda:\nmdadm --assemble --scan\nDetecta i munta autom√†ticament tots els arrays definits a /etc/mdadm/mdadm.conf. Aix√≤ assegura que les particions RAID estiguin operatives abans de muntar la partici√≥ root i iniciar el sistema operatiu.\nA m√©s, initramfs pot incloure scripts per comprovar la integritat dels dispositius RAID i gestionar fallades de discs durant l‚Äôarrencada, assegurant un boot fiable en entorns amb mirroring (RAID1).",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#actualitzaci√≥-amb---grow",
    "href": "slides/03-filesystem-part2.html#actualitzaci√≥-amb---grow",
    "title": "Sistema de fitxers (II)",
    "section": "Actualitzaci√≥ amb --grow",
    "text": "Actualitzaci√≥ amb --grow\nAquesta opci√≥ permet actualitzar un dispositiu RAID. Per exemple, canviar el RAID, augmentar el nombre de dispositius o canviar la mida dels blocs.\nmdadm --grow /dev/[nom] --level=[nivell] --raid-devices=[n¬∫ dispositius]\n\nSituaci√≥ I: En un RAID5 format per 3 discs, ens pot interessar al cap del temps afegir un disc m√©s.\nSituaci√≥ II: En un RAID5 format per 4 discs, ens pot interessar al cap del temps canviar el RAID a 6.\nSituaci√≥ III: En un RAID5 format per 4 discs, ens pot interessar al cap del temps canviar la mida dels blocs.\n\n\n\n\n\n\n\n\nCompte!\n\n\nAmb aquestes operacions, el sistema pot quedar inutilitzat. √âs recomanable fer una c√≤pia de seguretat abans de realitzar aquestes operacions.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#aturar-i-eliminar-un-raid",
    "href": "slides/03-filesystem-part2.html#aturar-i-eliminar-un-raid",
    "title": "Sistema de fitxers (II)",
    "section": "Aturar i Eliminar un RAID",
    "text": "Aturar i Eliminar un RAID\nPer aturar un RAID, podem utilitzar l‚Äôopci√≥ --stop del mode --manage de mdadm. Aquesta opci√≥ desactiva l‚Äôarray i allibera tots els recursos associats.\nmdadm --manage /dev/[nom] --stop\n\n\n\n\n\n\n\nCompte!\n\n\nAquesta operaci√≥ no destruir√† l‚Äôarray, sin√≥ que simplement el desactivar√†. Per eliminar un raid podem eliminar el seu dispositiu associat, sempre primer aturant l‚Äôarray.\nmdadm --manage /dev/[nom] --stop\nrm /dev/[nom]",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#etcmdadmmdadm.conf",
    "href": "slides/03-filesystem-part2.html#etcmdadmmdadm.conf",
    "title": "Sistema de fitxers (II)",
    "section": "/etc/mdadm/mdadm.conf",
    "text": "/etc/mdadm/mdadm.conf\nAquest fitxer cont√© informaci√≥ que permet al sistema recon√®ixer i muntar autom√†ticament els arrays RAID durant l‚Äôarrencada i tamb√© proporciona par√†metres per a la creaci√≥, monitoritzaci√≥ i manteniment dels arrays.\nARRAY /dev/md0 UUID=12345678:90ab:cdef:1234:567890abcdef\nARRAY /dev/md1 UUID=abcdef12:3456:7890:abcd:ef1234567890\n\nARRAY: indica un dispositiu RAID gestionat per mdadm.\n/dev/mdX: dispositiu de bloc que representa l‚Äôarray RAID.\nUUID: identificador √∫nic de l‚Äôarray RAID, utilitzat per assegurar que el sistema connecta correctament les particions corresponents encara que canvi√Øn els noms dels dispositius f√≠sics (per exemple, vdb1 esdev√© vdc1).",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#cas-pr√†ctic-i",
    "href": "slides/03-filesystem-part2.html#cas-pr√†ctic-i",
    "title": "Sistema de fitxers (II)",
    "section": "Cas Pr√†ctic (I)",
    "text": "Cas Pr√†ctic (I)\nAssumeix que vols configurar un RAID per configurar la partici√≥ root del teu servidor Debian. quin RAID recomanaries i que t‚Äôaportaria?\n\nEl RAID 5. Aquest RAID ofereix redund√†ncia i una millora en la velocitat de lectura. No obstant aix√≤, requereix un m√≠nim de tres discs i la velocitat d‚Äôescriptura pot veure‚Äôs afectada per les operacions de paritat. Aquest RAID pot ser una bona opci√≥ per a emmagatzemament de dades, per√≤ pot ser massa complex per a un sistema root.\nEl RAID 10 combina les caracter√≠stiques del RAID 1 i del RAID 0, oferint tant redund√†ncia com una millora en la velocitat de lectura i escriptura. Aquest RAID pot ser una bona opci√≥ per a un sistema que requereixi un alt rendiment, per√≤ pot ser massa cost√≥s per a un sistema root.\n\n\n\nLa meva recomanaci√≥ √©s utilitzar RAID 1 per a un sistema root, ja que proporciona la redund√†ncia necess√†ria per assegurar la integritat de les dades del sistema. Si la velocitat de lectura √©s una preocupaci√≥, es podria considerar l‚Äô√∫s d‚Äôun disc SSD",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#cas-pr√†ctic-ii",
    "href": "slides/03-filesystem-part2.html#cas-pr√†ctic-ii",
    "title": "Sistema de fitxers (II)",
    "section": "Cas Pr√†ctic (II)",
    "text": "Cas Pr√†ctic (II)\nAssumeix que vols configurar un servidor amb dos discs SATA per fer renders de v√≠deo on l‚Äôobjectiu principal es millorar el rendiment i la capacitat d‚Äôenmagatzemament temporal. Quin RAID recomanaries?\n\nCom √∫nicament es disposa de dos discs, el RAID 0 seria la millor opci√≥. Aquest RAID millora el rendiment i la capacitat d‚Äôemmagatzemament temporal, ja que les dades es divideixen i s‚Äôemmagatzemen en els dos discs de forma simult√†nia. No obstant aix√≤, cal tenir en compte que el RAID 0 no ofereix cap mena de redund√†ncia. Per tant, si un dels discs falla, es perdran totes les dades. S‚Äôhaurien de fer c√≤pies de seguretat regulars per evitar la p√®rdua de dades.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#cas-pr√†ctic-iii",
    "href": "slides/03-filesystem-part2.html#cas-pr√†ctic-iii",
    "title": "Sistema de fitxers (II)",
    "section": "Cas Pr√†ctic (III)",
    "text": "Cas Pr√†ctic (III)\nAssumeix un servidor de bases de dades on la integritat de les dades es cr√≠tica i les transaccions han de ser r√†pides. Quin RAID recomanaries?\n\nEn aquest cas, el RAID 10 seria la millor opci√≥. Aquest RAID combina les caracter√≠stiques del RAID 1 i del RAID 0, oferint tant redund√†ncia com una millora en la velocitat de lectura i escriptura. Aix√≤ √©s important per a un servidor de bases de dades on la integritat de les dades √©s cr√≠tica i les transaccions han de ser r√†pides.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#exercici",
    "href": "slides/03-filesystem-part2.html#exercici",
    "title": "Sistema de fitxers (II)",
    "section": "Exercici",
    "text": "Exercici\n\nConfiguraci√≥ d‚Äôun RAID 1 a AlmaLinux amb una instal¬∑laci√≥ neta.\nMigraci√≥ de /home a un RAID 1 en un sistema Debian existent.\nSimulaci√≥ de fallada d‚Äôun disc en un RAID 5.\nMigraci√≥ d‚Äôun sistema legacy a un sistema amb RAIDs.\n\n\nExercicis: Administrant RAIDs",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part2.html#thats-all",
    "href": "slides/03-filesystem-part2.html#thats-all",
    "title": "Sistema de fitxers (II)",
    "section": "That‚Äôs all",
    "text": "That‚Äôs all\n\n\n\n\n\n\n\n\n\nTake Home Message\n\n\n\nRAID mant√© les dades, per√≤ la bona administraci√≥ mant√© el servei.\nLa redund√†ncia no √©s seguretat si no s‚Äôha provat mai l‚Äôarrencada.\nConfigurar RAID √©s f√†cil; garantir que arrenca quan els discs fallen √©s el cam√≠ de l‚Äôadministrador.\nRAID no √©s substitut de les c√≤pies de seguretat.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 2)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#necessitat-dun-sistema-de-fitxers-i",
    "href": "slides/03-filesystem-part1.html#necessitat-dun-sistema-de-fitxers-i",
    "title": "Sistema de fitxers (I)",
    "section": "Necessitat d‚Äôun Sistema de Fitxers (I)",
    "text": "Necessitat d‚Äôun Sistema de Fitxers (I)\nLa implementaci√≥ d‚Äôun Sistema de Fitxers (FS) √©s essencial per a l‚Äôorganitzaci√≥, emmagatzematge i recuperaci√≥ eficient de la informaci√≥ en qualsevol sistema operatiu modern.\n\n\n\n\n\n\n\nObservaci√≥\n\n\nEn els sistemes operatius moderns (UNIX-like), el seu rol s‚Äôest√©n molt m√©s enll√† de la gesti√≥ de dades persistents al disc, abracant una filosofia fonamental.\n\n\n\n\n\nEverything is a File",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#necessitat-dun-sistema-de-fitxers-ii",
    "href": "slides/03-filesystem-part1.html#necessitat-dun-sistema-de-fitxers-ii",
    "title": "Sistema de fitxers (I)",
    "section": "Necessitat d‚Äôun Sistema de Fitxers (II)",
    "text": "Necessitat d‚Äôun Sistema de Fitxers (II)\n\n\n\n\n\n\n\n\nTipus de Recurs\nExemple de Path\nSistema de Fitxers\n\n\n\n\nProc√©s/Estat del Kernel\n/proc/PID (p.¬†ex., /proc/1234/status)\nprocfs (Mem√≤ria, no disc)\n\n\nDispositiu de Blocs\n/dev/sda1\ndevfs o udev\n\n\nPunts de Configuraci√≥\n/etc/hosts, /usr/bin/comando\nFS persistent (Ext4, XFS)\n\n\nDades d‚ÄôUsuari\n/home/username/documents\nFS persistent\n\n\nXarxa\n/dev/tcp/80 (en certs entorns, e.g., Plan 9)\n√ös de Sockets com a File Descriptors\n\n\n\n\n\n\n\n\n\n\nAvantatge\n\n\nLa implementaci√≥ d‚Äôun sistema de fitxers permet unificar l‚Äôacc√©s a recursos heterogenis. El kernel pot tractar una E/S a /dev/sda1 (blocs f√≠sics) i una E/S a /proc/cpuinfo (informaci√≥ virtual) utilitzant la mateixa API. API.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#dispositius-i-device-files",
    "href": "slides/03-filesystem-part1.html#dispositius-i-device-files",
    "title": "Sistema de fitxers (I)",
    "section": "Dispositius i Device Files",
    "text": "Dispositius i Device Files\nUn Fitxer de Dispositiu (Device File o Node) √©s un nom assignat a un dispositiu d‚ÄôE/S (Entrada/Sortida), ja sigui f√≠sic (disc, targeta de so) o l√≤gic (port de xarxa, terminal).\n\n\n\n\n\n\n\n\nTipus de Dispositiu\nExemples Comuns\nCaracter√≠stica\n\n\n\n\nBlocs (Block Devices)\n/dev/sda (Disc sencer), /dev/sdb1 (Partici√≥), /dev/md0 (RAID)\nTransfereixen dades en blocs de mida fixa. S√≥n cachejables i permeten acc√©s aleatori.\n\n\nCar√†cters (Character Devices)\n/dev/ttyX (Terminals), /dev/lp0 (Port Paral¬∑lel), /dev/input/mouse0\nTransfereixen dades seq√ºencialment car√†cter a car√†cter. No tenen caching de blocs.\n\n\n\nEls drivers √©s el conjunt de rutines del kernel que defineix com s‚Äôha de dur a terme la comunicaci√≥ espec√≠fica amb el Hardware mitjan√ßant interrupcions, acc√©s directe a mem√≤ria (DMA) i E/S programada. Sense el driver, el fitxer a /dev seria in√∫til.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#virtual-filesystem-switch-vfs",
    "href": "slides/03-filesystem-part1.html#virtual-filesystem-switch-vfs",
    "title": "Sistema de fitxers (I)",
    "section": "Virtual Filesystem Switch (VFS)",
    "text": "Virtual Filesystem Switch (VFS)\nUn Sistema de Fitxers (FS) √©s la capa l√≤gica fonamental que gestiona l‚Äôacc√©s i l‚Äôorganitzaci√≥ dels objectes (fitxers i directoris) sobre un dispositiu d‚Äôemmagatzematge.\n\n\n\n\n\n\n\nM√∫ltiples FS actius\n\n\n√âs habitual que un sistema operatiu gestioni simult√†niament diverses inst√†ncies de sistemes de fitxers diferents:\n\nExt4 per a dades d‚Äôusuari (/home)\nBtrfs per a backups autom√†tics\ntmpfs per a fitxers temporals (/tmp)\nprocfs per a informaci√≥ del kernel (/proc)\n\nCadascun muntat en un punt d‚Äôacc√©s l√≤gic diferent.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#abstraccions-comunes-del-vfs",
    "href": "slides/03-filesystem-part1.html#abstraccions-comunes-del-vfs",
    "title": "Sistema de fitxers (I)",
    "section": "Abstraccions Comunes del VFS",
    "text": "Abstraccions Comunes del VFS\nTot i les difer√®ncies estructurals a nivell de disc, el VFS (Virtual Filesystem Switch) del kernel utilitza abstraccions uniformes per oferir una interf√≠cie consistent als processos.\n\n\n\n\n\n\n\n\n\nAbstracci√≥\nUbicaci√≥\nFunci√≥ T√®cnica\nPersist√®ncia\n\n\n\n\nSuperbloc\nDisc + Mem√≤ria\nCont√© metadata global del FS: tipus, mida, estat, punters clau\nPersistent\n\n\nInode\nDisc + Mem√≤ria\nMetadata del fitxer: permisos, timestamps, punters a blocs de dades\nPersistent\n\n\nDentry\nNom√©s Mem√≤ria\nEntrada de Directori: cacheja nom del fitxer ‚ÜîÔ∏é inode\nTemporal\n\n\nFile Object\nNom√©s Mem√≤ria\nRepresenta un fitxer obert per un proc√©s (file descriptors)\nTemporal\n\n\n\nPermet que un programa pugui treballar amb fitxers Ext4, XFS, NTFS o FAT32 sense modificar ni una sola l√≠nia de codi.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#jerarquia-l√≤gica-de-les-abstraccions",
    "href": "slides/03-filesystem-part1.html#jerarquia-l√≤gica-de-les-abstraccions",
    "title": "Sistema de fitxers (I)",
    "section": "Jerarquia L√≤gica de les Abstraccions",
    "text": "Jerarquia L√≤gica de les Abstraccions\nPer entendre com el kernel mapeja un nom de fitxer a les dades, visualitzem la interacci√≥ entre les estructures in-memory i on-disk.\n\n\n\n\n\nclassDiagram\n    direction LR\n    \n    class Superbloc {\n        &lt;&lt;On-Disk i In-Memory&gt;&gt;\n        + Tipus FS (Ext4, XFS)\n        + Mida del Volum\n        + Punter a llistes d'Inodes Lliures\n    }\n\n    class Inode {\n        &lt;&lt;On-Disk i In-Memory&gt;&gt;\n        + Num Inode √önic\n        + Pointers a Blocs de Dades\n        + Permisos/ACLs\n        + UID/GID, Timestamps\n    }\n\n    class Dentry {\n        &lt;&lt;In-Memory Cache&gt;&gt;\n        + Nom del Fitxer/Directori\n        + Punter a Inode\n        + Punter al Dentry Pare\n    }\n\n    class FileObject {\n        &lt;&lt;In-Memory&gt;&gt;\n        + File Descriptor FD\n        + Offset de Lectura/Escriptura Actual\n        + Punter a Dentry (Path)\n    }\n\n    Superbloc \"1\" --&gt; \"*\" Inode : Gestiona\n    Dentry \"1\" --&gt; \"1\" Inode : Caching ¬∑ Nom -&gt; Metadata\n    FileObject \"1\" --&gt; \"1\" Dentry : Resoluci√≥ de Path\n    Inode \"1\" --&gt; \"*\" DataBlocks : Adre√ßament\n    \n    %% Colors per a claredat t√®cnica\n    classDef memory fill:#eaf7ff,stroke:#007bff\n    classDef disk fill:#f9f5dd,stroke:#c4aa18\n    class Dentry\n    FileObject memory\n    class Inode\n    Superbloc disk\n\n\n\n\n\n\n\n\n\n\n\n\n\nImpacte del Dentry\n\n\nUna Dentry Cache saturada o poc eficient pot degradar significativament el rendiment del sistema (I/O latency), ja que el kernel es veu for√ßat a re-llegir l‚Äôestructura de directoris directament del disc.\n\n\n\n\n\n\nFileObject: Un proc√©s obre un fitxer, creant un FileObject amb un File Descriptor.\nDentry (Cache): El FileObject resol el cam√≠ a trav√©s d‚Äôuna cadena de Dentries (des de la muntura fins al fitxer final). El Dentry proporciona l‚Äôassociaci√≥ Nom ‚Üí Inode.\nInode: El n√∫mero d‚ÄôInode permet al VFS carregar les metadades on-disk a mem√≤ria. Aquesta estructura cont√© els punters directes i indirectes als blocs de dades.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#relacions-in-memory-del-vfs",
    "href": "slides/03-filesystem-part1.html#relacions-in-memory-del-vfs",
    "title": "Sistema de fitxers (I)",
    "section": "Relacions In-Memory del VFS",
    "text": "Relacions In-Memory del VFS\n\nM√∫ltiples descriptors de fitxer poden apuntar al mateix fitxer (dup()).\nM√∫ltiples abstraccions de fitxer poden apuntar a la mateixa Dentry (obrim el mateix path diverses vegades).\nM√∫ltiples Dentries poden apuntar al mateix Inode (Hard Links).",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#el-superbloc",
    "href": "slides/03-filesystem-part1.html#el-superbloc",
    "title": "Sistema de fitxers (I)",
    "section": "El Superbloc",
    "text": "El Superbloc\nEl Superbloc √©s el punt de refer√®ncia absolut de qualsevol Sistema de Fitxers (FS). Sense aquesta estructura, el kernel no pot ni tan sols intentar muntar el volum.\n\n\n\n\n\n\n\nAv√≠s\n\n\nSi el Superbloc es corromp (per un error de disc o d‚ÄôE/S), el sistema de fitxers esdev√© inaccessible fins que es restaura una de les seves c√≤pies de seguretat (backup copies).\n\n\n\n\nPer aquest motiu, els FS moderns mantenen m√∫ltiples c√≤pies del superbloc distribu√Ødes pel volum.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#organitzaci√≥-f√≠sica-del-superbloc",
    "href": "slides/03-filesystem-part1.html#organitzaci√≥-f√≠sica-del-superbloc",
    "title": "Sistema de fitxers (I)",
    "section": "Organitzaci√≥ F√≠sica del Superbloc",
    "text": "Organitzaci√≥ F√≠sica del Superbloc\n\n\nEl diagrama mostra que el superbloc es troba t√≠picament a l‚Äôinici del sistema de fitxers i que hi ha diversos blocs utilitzats amb diferents prop√≤sits: alguns per emmagatzemar dentries, alguns per emmagatzemar inodes i alguns per emmagatzemar blocs de dades d‚Äôusuari. Tamb√© hi ha blocs utilitzats per gestionar els blocs lliures disponibles (p.¬†ex., mapes de bits per als sistemes de fitxers simples).",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#abstraccions-del-superbloc",
    "href": "slides/03-filesystem-part1.html#abstraccions-del-superbloc",
    "title": "Sistema de fitxers (I)",
    "section": "Abstraccions del Superbloc",
    "text": "Abstraccions del Superbloc\n\n\n\n\n\n\n\n\nComponent\nFunci√≥\nUbicaci√≥\n\n\n\n\nSuperbloc\nCont√© la metadata global del FS: tipus, mida, estat, i punters clau.\nInici del FS (i c√≤pies de seguretat).\n\n\nIMAP (Inode Map)\nBitmap per a l‚Äôassignaci√≥ i desassignaci√≥ d‚ÄôInodes. Indica quins Inodes estan lliures o en √∫s dins de la IZONE.\nBloc(s) assignat(s) pel Superbloc.\n\n\nDMAP (Data Map)\nBitmap per a l‚Äôassignaci√≥ i desassignaci√≥ de Blocs de Dades. Indica quins blocs de la DZONE estan lliures o en √∫s.\nBloc(s) assignat(s) pel Superbloc.\n\n\nIZONE\n√Ärea que cont√© les estructures d‚ÄôInode dels fitxers.\nDespr√©s dels mapes.\n\n\nDZONE\n√Ärea que cont√© les dades d‚Äôusuari (el contingut real dels fitxers).\nDespr√©s de la IZONE.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#estructura-i-implementaci√≥-del-superbloc",
    "href": "slides/03-filesystem-part1.html#estructura-i-implementaci√≥-del-superbloc",
    "title": "Sistema de fitxers (I)",
    "section": "Estructura i Implementaci√≥ del Superbloc",
    "text": "Estructura i Implementaci√≥ del Superbloc\nEl Superbloc no nom√©s s‚Äôautodefineix, sin√≥ que defineix l‚Äôarquitectura de tota la partici√≥:\n\nfs_type: El tipus de FS (p.¬†ex., EXT4_MAGIC).\ns_blocks_count: El nombre total de blocs al FS.\ns_log_block_size: Defineix la mida del bloc l√≤gic (p.¬†ex., 1K, 4K). Tota la I/O es fa en aquesta unitat.\nPunters a Bitmaps: Adreces del primer bloc de l‚ÄôIMAP i el DMAP.\nEstat del FS: Indica si el FS va ser desmuntat netament o si va patir un crash (s_state - important per al fsck).",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#mapes-de-bits-bitmaps",
    "href": "slides/03-filesystem-part1.html#mapes-de-bits-bitmaps",
    "title": "Sistema de fitxers (I)",
    "section": "Mapes de Bits (Bitmaps)",
    "text": "Mapes de Bits (Bitmaps)\nEls mapes de bits s√≥n crucials per a l‚Äôefici√®ncia en l‚Äôassignaci√≥:\n\nIMAP (Inode Bitmap): Cada bit representa l‚Äôestat d‚Äôun √∫nic Inode a la IZONE. 1 = En √∫s, 0 = Lliure.\nDMAP (Data Bitmap): Cada bit representa l‚Äôestat d‚Äôun √∫nic bloc a la DZONE. 1 = Ocupat per dades, 0 = Lliure per assignaci√≥.\n\n\n\n\n\n\n\nOptimitzaci√≥ (Caching)\n\n\nQuan el FS es munta, el kernel carrega el Superbloc i, almenys parcialment, els mapes IMAP i DMAP a la mem√≤ria. Aix√≤ permet que les noves assignacions de fitxers i blocs siguin extremadament r√†pides sense requerir una E/S de disc constant.\n\n\n\n\n\n\n\n\n\n\nFS Grans\n\n\nEs carreguen parcialment i a demanda per no gastar massa mem√≤ria en FS grans.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#mapping-crides-de-sistema-vfs",
    "href": "slides/03-filesystem-part1.html#mapping-crides-de-sistema-vfs",
    "title": "Sistema de fitxers (I)",
    "section": "Mapping: Crides de Sistema ‚Üí VFS",
    "text": "Mapping: Crides de Sistema ‚Üí VFS\n\n\n\n\n\n\n\n\n\n\nCrida al Sistema\nOperaci√≥ VFS\nDescripci√≥\n\n\n\n\nmount()\nvfs_mount()\nMuntar un FS.\n\n\nopen()\nvfs_open()\nObrir un fitxer (i obtenir un FD).\n\n\nstat() / fstat()\nvfs_stat() / vfs_fstat()\nConsultar atributs del fitxer.\n\n\nread() / write()\nvfs_read() / vfs_write()\nLlegir o escriure dades.\n\n\ncreate() / delete()\nvfs_create() / vfs_unlink()\nCrear i eliminar fitxers.\n\n\nclose()\nvfs_close()\nTancar un fitxer\n\n\n\n\nEl VFS √©s l‚Äôabstracci√≥ de Linux que permet gestionar m√∫ltiples tipus de FS (Ext4, XFS, NTFS) de manera transparent.\n\n\n\n\n\ngraph TD\n    A[Crida al Sistema open, read] --&gt; B{VFS};\n    B --&gt;|Operaci√≥ abstracta| C1[Driver FS Espec√≠fic Ext4];\n    B --&gt;|Operaci√≥ abstracta| C2[Driver FS Espec√≠fic XFS];\n    C1 --&gt; D[Subsistema d'Emmagatzematge E/S];\n    C2 --&gt; D;\n    \n    style B fill:#eaf7ff,stroke:#007bff\n    style C1 fill:#f9f5dd,stroke:#c4aa18\n    style C2 fill:#f9f5dd,stroke:#c4aa18",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#montatge-dun-fs",
    "href": "slides/03-filesystem-part1.html#montatge-dun-fs",
    "title": "Sistema de fitxers (I)",
    "section": "Montatge d‚Äôun FS",
    "text": "Montatge d‚Äôun FS\n# Sintaxi: mount -t &lt;fs_type&gt; &lt;device&gt; &lt;mount_point&gt;\nmount -t ext4 /dev/nvme0n1p2 /home\nmount -t btrfs /dev/sdb1 /backup\nmount -t tmpfs -o size=1G tmpfs /tmp/ramdisk\n\n\n\n\n\n\n\n\nPas\nDescripci√≥\nImplicaci√≥\n\n\n\n\n1. Entrada/Sortida\nInput: Dispositiu de blocs (Partici√≥). Output: Dentry arrel del FS.\n\n\n\n2. Check Device\nValidaci√≥ de l‚Äôestructura inicial del FS.\n\n\n\n3. Llegir Superbloc\nDeterminar par√†metres (mida de bloc, magic number). Carregar el Superbloc a mem√≤ria.\nCr√≠tic: Estableix el context global.\n\n\n4. Crear Inode i Dentry\nLocalitzar el Root Inode (e.g., inode 2 a Ext4) i crear l‚Äôestructura Dentry arrel a la mem√≤ria.\nInici de la navegaci√≥ l√≤gica.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#obertura-dun-fitxer",
    "href": "slides/03-filesystem-part1.html#obertura-dun-fitxer",
    "title": "Sistema de fitxers (I)",
    "section": "Obertura d‚Äôun Fitxer",
    "text": "Obertura d‚Äôun Fitxer\n\n\n\n\n\nsequenceDiagram \n    participant P as Proc√©s\n    participant VFS as VFS (Kernel)\n    participant FS as Driver de FS (read_inode)\n\n    P-&gt;&gt;VFS: open -&gt; /a/b/fitxer.txt \n    VFS-&gt;&gt;VFS: 1. Per cada component a, b, fitxer.txt:\n    VFS-&gt;&gt;VFS: Resoldre Dentry Pare (Cache)\n    VFS-&gt;&gt;FS: 2. Carregar Inode si no est√† en cache (via Num. Inode)\n    VFS-&gt;&gt;VFS: 3. Final: Crear nou **FILE OBJECT**\n    VFS-&gt;&gt;P: 4. Assignar **File Descriptor** (FD)",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#consultar-atributs",
    "href": "slides/03-filesystem-part1.html#consultar-atributs",
    "title": "Sistema de fitxers (I)",
    "section": "Consultar Atributs",
    "text": "Consultar Atributs\n\n\n\n\n\nsequenceDiagram\n    participant P as Proc√©s\n    participant VFS as VFS (Kernel)\n    participant FS as Driver de FS (read_inode)\n    P-&gt;&gt;VFS: stat -&gt; fitxer.txt o fstat -&gt; FD\n    VFS-&gt;&gt;VFS: 1. Acc√©s a l'Inode via FD\n    VFS-&gt;&gt;FS: 2. Si no est√† en cache, llegir Inode del disc\n    FS--&gt;&gt;VFS: 3. Retornar Atributs\n    VFS--&gt;&gt;P: 4. Retornar Atributs UID, GID, Permisos, Mida, Timestamps",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#operacions-de-lectura",
    "href": "slides/03-filesystem-part1.html#operacions-de-lectura",
    "title": "Sistema de fitxers (I)",
    "section": "Operacions de Lectura",
    "text": "Operacions de Lectura\n\n\n\n\n\nsequenceDiagram\n    participant P as Proc√©s\n    participant VFS as VFS \n    participant FS as Driver de FS ¬∑ read\n    P-&gt;&gt;VFS: read -&gt; FD, buf, len\n    VFS-&gt;&gt;VFS: 1. Validar FD i permisos\n    VFS-&gt;&gt;VFS: 2. Calcular blocs a llegir -&gt; offset, len\n    VFS-&gt;&gt;FS: 3. Llegir dades file-&gt;dentry-&gt;inode-&gt;data blocks\n    FS--&gt;&gt;VFS: 4. Retornar dades a VFS\n    VFS--&gt;&gt;P: 5. Copiar dades a l'espai d'usuari",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#operacions-descriptura",
    "href": "slides/03-filesystem-part1.html#operacions-descriptura",
    "title": "Sistema de fitxers (I)",
    "section": "Operacions d‚ÄôEscriptura",
    "text": "Operacions d‚ÄôEscriptura\n\n\n\n\n\nsequenceDiagram\n    participant P as Proc√©s\n    participant VFS as VFS\n    participant PC as Page Cache\n    participant FS as Driver FS\n    participant J as Journal\n    participant BD as Block Device\n\n    P-&gt;&gt;VFS: write -&gt; fd=5, buffer, 4096\n    VFS-&gt;&gt;VFS: Validar FD i permisos d'escriptura\n    VFS-&gt;&gt;VFS: Calcular nous blocs necessaris\n    \n    alt Fitxer necessita cr√©ixer\n        VFS-&gt;&gt;FS: Assignar nous blocs de dades\n        FS-&gt;&gt;FS: Actualizar bitmaps i inode\n        FS-&gt;&gt;J: Registrar transacci√≥ al journal\n    end\n    \n    VFS-&gt;&gt;PC: Escriure dades a la page cache ¬∑ dirty pages\n    VFS--&gt;&gt;P: Retornar bytes escrits \n    \n    Note over PC,BD: Writeback as√≠ncron \n    PC-&gt;&gt;BD: Flush dirty pages al disc\n    J-&gt;&gt;BD: Commit transacci√≥ journal",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#escriptura-as√≠ncrona-i-writeback",
    "href": "slides/03-filesystem-part1.html#escriptura-as√≠ncrona-i-writeback",
    "title": "Sistema de fitxers (I)",
    "section": "Escriptura As√≠ncrona i Writeback",
    "text": "Escriptura As√≠ncrona i Writeback\nLa escriptura as√≠ncrona permet que les operacions d‚Äôescriptura es realitzin en segon pla, millorant la resposta del sistema. Les dades es desplacen a la page cache i es poden escriure al disc m√©s tard.\n\nDirty Pages: P√†gines a la mem√≤ria que han estat modificades per√≤ encara no s‚Äôhan escrit al disc.\nWriteback: Proc√©s de transferir les dirty pages de la mem√≤ria al disc.\nJournaling: Mecanisme per assegurar la integritat del FS en cas de fallada durant el writeback.\nFlush: Operaci√≥ per escriure immediatament les dirty pages al disc.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#creaci√≥-de-directoris",
    "href": "slides/03-filesystem-part1.html#creaci√≥-de-directoris",
    "title": "Sistema de fitxers (I)",
    "section": "Creaci√≥ de Directoris",
    "text": "Creaci√≥ de Directoris\n\n\n\n\n\nsequenceDiagram\n    participant P as Proc√©s\n    participant VFS as VFS\n    participant FS as Driver de FS ¬∑ mkdir\n    P-&gt;&gt;VFS: mkdir -&gt; /a/b/novedirectori\n    VFS-&gt;&gt;VFS: 1. Resoldre Dentry Pare -&gt; /a/b -&gt; Determinar Inode Pare\n    VFS-&gt;&gt;VFS: 2. Llegir blocs de dades del directori pare ¬∑ Trobar espai per a nova Dentry\n    VFS-&gt;&gt;FS: 4. Crear nou Inode per al directori\n    FS--&gt;&gt;VFS: 5. Retornar Num. Inode\n    VFS-&gt;&gt;VFS: 6. Afegir Dentry al directori par ¬∑ Escriure els blocs de dades del directori pare modificats\n    VFS--&gt;&gt;P: 8. Retornar √®xit o error",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#eliminaci√≥-de-fitxers",
    "href": "slides/03-filesystem-part1.html#eliminaci√≥-de-fitxers",
    "title": "Sistema de fitxers (I)",
    "section": "Eliminaci√≥ de Fitxers",
    "text": "Eliminaci√≥ de Fitxers\n\n\n\n\n\nsequenceDiagram\n    participant P as Proc√©s\n    participant VFS as VFS\n    participant FS as Driver de FS ¬∑ unlink\n    P-&gt;&gt;VFS: unlink -&gt; /a/b/fitxer.txt\n    VFS-&gt;&gt;VFS: 1. Resoldre Dentry Pare -&gt; /a/b -&gt; Determinar Inode Pare\n    VFS-&gt;&gt;VFS: 2. Llegir blocs de dades del directori pare ¬∑ Trobar i esborrar la Dentry\n    VFS-&gt;&gt;VFS: 4. Comprovar enlla√ßos -&gt; Si √©s l'√∫ltim enlla√ß, desassignar blocs de dades i blocs d'inode\n    VFS-&gt;&gt;FS: 6. Actualitzar metadades al disc\n    FS--&gt;&gt;VFS: 7. Confirmaci√≥ d'actualitzaci√≥\n    VFS--&gt;&gt;P: 8. Retornar √®xit o error",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#superbloc-i-operacions-dinode",
    "href": "slides/03-filesystem-part1.html#superbloc-i-operacions-dinode",
    "title": "Sistema de fitxers (I)",
    "section": "Superbloc i Operacions d‚ÄôInode",
    "text": "Superbloc i Operacions d‚ÄôInode\nEl VFS (Virtual Filesystem Switch) estableix dos conjunts d‚Äôoperacions que el driver de cada Sistema de Fitxers ha d‚Äôimplementar. Aquests m√®todes permeten al kernel interactuar amb les metadades de forma uniforme.\n\n\n\n\n\n\n\n\nOperaci√≥\nFunci√≥ T√®cnica\nProp√≤sit\n\n\n\n\nfill_super()\nLlegeix l‚Äôestat global del FS (total/lliure d‚ÄôInodes i Blocs).\nInicialitzaci√≥ i muntatge.\n\n\nwrite_super()\nPersisteix les estad√≠stiques i l‚Äôestat actualitzat al disc.\nCanvis en l‚Äôassignaci√≥.\n\n\nput_super()\nAllibera la mem√≤ria associada a la inst√†ncia del FS.\nDesmuntatge (umount).",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#operacions-de-linode",
    "href": "slides/03-filesystem-part1.html#operacions-de-linode",
    "title": "Sistema de fitxers (I)",
    "section": "Operacions de l‚ÄôInode",
    "text": "Operacions de l‚ÄôInode\nMalgrat el nom, la majoria d‚Äôaquestes operacions tracten amb la gesti√≥ de les Dentries i la jerarquia de noms de fitxer (no el contingut de l‚ÄôInode en si).\n\nCreaci√≥ i Cerca: create, lookup, link, unlink.\nDirectori i Enlla√ßos: mkdir, rmdir, symlink, readlink, rename.\n\n\n\n\n\n\n\n\nTipus d‚ÄôInode\n\n\nEls drivers de FS treballen amb dos tipus d‚ÄôInode:\n\nVFS Inode: Estructura gen√®rica utilitzada pel kernel.\nFS Inode: Estructura interna del driver (p.¬†ex., la versi√≥ Ext4 o XFS).\n\nEl driver √©s responsable de la conversi√≥ entre aquestes dues estructures segons sigui necessari.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#cache-dinodes-icache",
    "href": "slides/03-filesystem-part1.html#cache-dinodes-icache",
    "title": "Sistema de fitxers (I)",
    "section": "Cache d‚ÄôInodes (Icache)",
    "text": "Cache d‚ÄôInodes (Icache)\nAquesta cache emmagatzema les metadades del fitxer a mem√≤ria (l‚Äôestructura de l‚ÄôInode), evitant lectures repetitives a la IZONE del disc.\n\nEstructura: S‚Äôindexa mitjan√ßant una Taula Hash (hash table).\nClau Hash: Es genera a partir de la tupla (Superbloc, N√∫mero d‚ÄôInode).\nPol√≠tica: Els Inodes es mantenen fins que el FS es desmunta, s‚Äôelimina el fitxer, o hi ha pressi√≥ de mem√≤ria (memory pressure).",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#cache-de-dentries",
    "href": "slides/03-filesystem-part1.html#cache-de-dentries",
    "title": "Sistema de fitxers (I)",
    "section": "Cache de Dentries",
    "text": "Cache de Dentries\nLa Dcache √©s l‚Äôeina m√©s important per a la resoluci√≥ r√†pida de camins (path lookup). Cacheja la relaci√≥ Nom \\(\\rightarrow\\) Inode.\n\n\n\n\n\n\n\nEstat de la Dentry\nImplicaci√≥ T√®cnica\n\n\n\n\nUsed\nL‚Äôobjecte est√† en √∫s (p.¬†ex., associat a un FILE Objecte). El seu d_inode √©s v√†lid.\n\n\nUnused\nEl d_inode √©s v√†lid, per√≤ l‚Äôobjecte Dentry no est√† sent utilitzat activament per cap proc√©s.\n\n\nNegative\nL‚Äôd_inode no √©s v√†lid. S‚Äôutilitza per recordar que un fitxer no existeix o ha estat eliminat, evitant cerques futures innecess√†ries al disc.\n\n\n\n\n\n\n\n\n\n\nOptimitzaci√≥ de la Dentry Cache\n\n\nL‚Äôacc√©s a l‚ÄôInode cache (per al seu alliberament en condicions de mem√≤ria baixa) utilitza l‚Äôestat d‚Äô√∫s, basat en el Superbloc i el n√∫mero d‚ÄôInode. La Dentry cache tamb√© fa servir taules hash per a cerques ultra-r√†pides.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#cache-de-p√†gines-dades-i-es",
    "href": "slides/03-filesystem-part1.html#cache-de-p√†gines-dades-i-es",
    "title": "Sistema de fitxers (I)",
    "section": "Cache de p√†gines: Dades i E/S",
    "text": "Cache de p√†gines: Dades i E/S\nLa Cache de p√†gines √©s el mecanisme principal del kernel per a la gesti√≥ de dades d‚ÄôE/S, utilitzat per tots els sistemes de fitxers. Emmagatzema els blocs de dades del fitxer a la mem√≤ria del sistema,per a la lectura r√†pida i per a l‚Äôescriptura diferida.\n\n\n\n\n\n\n\nGesti√≥ de Mem√≤ria\n\n\nLinux reutilitza la mem√≤ria lliure com a cache, per√≤ l‚Äôallibera quan un proc√©s necessita RAM.\n\n\n\n\n\nDades Cachejades: Nom√©s dades de fitxers, no metadades de nivell de bloc (block device data).\nMecanismes d‚ÄôE/S: Suporta operacions read(), write() i mmap() (mapes de mem√≤ria).\n\n\n\n\n\n\n\n\nEstructura Interna: R√†dix-Arbre\n\n\nLa Cache de p√†gines utilitza una estructura de dades Radix Tree per mapejar de manera eficient els offsets de fitxer a les p√†gines de mem√≤ria. Aix√≤ permet acc√©s r√†pid a p√†gines de dades grans.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#fat-file-allocation-table",
    "href": "slides/03-filesystem-part1.html#fat-file-allocation-table",
    "title": "Sistema de fitxers (I)",
    "section": "FAT: File Allocation Table",
    "text": "FAT: File Allocation Table\n\nSistema de fitxers creat el 1977 i popularitzat gr√†cies a MS-DOS.\nEncara popular avui (FAT32): USB, targetes de mem√≤ria, partici√≥ d‚Äôarrencada EFI.\nFile Allocation Table: Estructura de llista enlla√ßada que cont√© informaci√≥ sobre els blocs ocupats per cada fitxer.\nTamb√© determina si un bloc est√† en √∫s o no.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#fat-organitzaci√≥-de-directoris",
    "href": "slides/03-filesystem-part1.html#fat-organitzaci√≥-de-directoris",
    "title": "Sistema de fitxers (I)",
    "section": "FAT: Organitzaci√≥ de Directoris",
    "text": "FAT: Organitzaci√≥ de Directoris\nEls directoris en FAT s√≥n fitxers especials que contenen entrades de 32 bytes per a cada fitxer o subdirectori. Cada entrada inclou: nom, atributs, timestamps, primer cl√∫ster i mida del fitxer.\n\n\n\nNom\nIndex\nDir?\nPermisos\n\n\n\n\n.\n2\nS√≠\nrwx\n\n\nWindows\n3\nS√≠\nrwx\n\n\nUsers\n4\nS√≠\nrwx\n\n\npagefile.sys\n5\nNo\nr‚Äì\n\n\n\nEl superbloc actua com a punt de refer√®ncia per a tot el sistema de fitxers, emmagatzemant informaci√≥ cr√≠tica com la mida del cl√∫ster, la ubicaci√≥ de la FAT i la ubicaci√≥ del directori arrel.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#fat-limitacions-t√®cniques",
    "href": "slides/03-filesystem-part1.html#fat-limitacions-t√®cniques",
    "title": "Sistema de fitxers (I)",
    "section": "FAT: Limitacions T√®cniques",
    "text": "FAT: Limitacions T√®cniques\nLimitacions de capacitat:\n\nFAT32: m√†xim 2TB per volum\nFAT32: m√†xim 4GB per fitxer\n\nProblemes de rendiment:\n\nLocalitzaci√≥ de blocs lliures: scan complet de la FAT\nFragmentaci√≥ severa (pobra localitat)\nFragmentaci√≥ de metadata: cerques costoses\nLlistes enlla√ßades ineficients per fitxers grans\n\nImpacte pr√†ctic:\n\nUn fitxer de 16MB (4096 cl√∫sters de 4KB) requereix 4096 lectures de la FAT per acc√©s seq√ºencial complet",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#ext-extended-file-system",
    "href": "slides/03-filesystem-part1.html#ext-extended-file-system",
    "title": "Sistema de fitxers (I)",
    "section": "EXT: Extended File System",
    "text": "EXT: Extended File System\nEls sistemes EXT van ser dissenyats espec√≠ficament per a Linux com a evoluci√≥ dels sistemes Unix tradicionals.\nEvoluci√≥:\n\next (1992): Primera versi√≥, problemes de rendiment\next2 (1993): Inodes, directoris flexibles\n\next3 (2001): Journaling per a consist√®ncia\next4 (2008): Extents, millor rendiment\n\nCaracter√≠stiques:\n\nInodes com a element b√†sic\nBitmaps per gesti√≥ d‚Äôassignaci√≥\nBlock Groups per localitat de dades\nJournaling per integritat",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#ext-estructura-de-linode",
    "href": "slides/03-filesystem-part1.html#ext-estructura-de-linode",
    "title": "Sistema de fitxers (I)",
    "section": "EXT: Estructura de l‚ÄôInode",
    "text": "EXT: Estructura de l‚ÄôInode\nL‚Äôinode √©s el nucli del sistema EXT. Cada fitxer t√© almenys un inode que cont√© tota la seva metadata:\nstruct ext4_inode {\n    uint16_t i_mode;        // Permisos i tipus de fitxer\n    uint16_t i_uid;         // User ID del propietari\n    uint32_t i_size;        // Mida del fitxer en bytes\n    uint32_t i_atime;       // √öltim temps d'acc√©s\n    uint32_t i_ctime;       // Temps de creaci√≥ de l'inode\n    uint32_t i_mtime;       // √öltim temps de modificaci√≥\n    uint16_t i_gid;         // Group ID del propietari\n    uint16_t i_links_count; // Nombre de hard links\n    \n    // Punters a blocs de dades\n    uint32_t i_block[15];   // Blocs directes i indirectes\n    /*\n     * i_block[0-11]: 12 punters directes (48KB amb blocs de 4KB)\n     * i_block[12]:   1 punter simple indirecte (4MB addicionals)\n     * i_block[13]:   1 punter doble indirecte (4GB addicionals)\n     * i_block[14]:   1 punter triple indirecte (4TB addicionals)\n     */\n\n};\nEls i-nodes consumeixen un 10% de l‚Äôemmagatzematge del disc (es pot configurar en el moment de la creaci√≥ del sistema de fitxers).",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#ext-adre√ßament-de-blocs-ext2",
    "href": "slides/03-filesystem-part1.html#ext-adre√ßament-de-blocs-ext2",
    "title": "Sistema de fitxers (I)",
    "section": "EXT: Adre√ßament de Blocs (ext2)",
    "text": "EXT: Adre√ßament de Blocs (ext2)\n\nUn fitxer de 100MB (25.600 blocs de 4KB) necessita 2 nivells d‚Äôindirecci√≥, requerint m√∫ltiples lectures de metadades abans d‚Äôaccedir a les dades reals.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#ext-organitzaci√≥",
    "href": "slides/03-filesystem-part1.html#ext-organitzaci√≥",
    "title": "Sistema de fitxers (I)",
    "section": "EXT: Organitzaci√≥",
    "text": "EXT: Organitzaci√≥\n\n\nBitmap d‚ÄôInodes: mapa de bits d‚Äôinodes ocupats/lliures.\nBitmap de Blocs: mapa de bits de blocs ocupats/lliures.\nTaula d‚ÄôInodes: cada entrada √©s un √∫nic inode.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#ext3-problema-de-consist√®ncia-i",
    "href": "slides/03-filesystem-part1.html#ext3-problema-de-consist√®ncia-i",
    "title": "Sistema de fitxers (I)",
    "section": "EXT3: Problema de Consist√®ncia (I)",
    "text": "EXT3: Problema de Consist√®ncia (I)\nImagineu que un fitxer necessita augmentar la seva mida, i aix√≤ requereix assignar un nou bloc de dades i actualitzar l‚Äôinode per reflectir aquesta nova assignaci√≥. Aquest proc√©s implica m√∫ltiples operacions d‚Äôescriptura al disc.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#ext3-problema-de-consist√®ncia-ii",
    "href": "slides/03-filesystem-part1.html#ext3-problema-de-consist√®ncia-ii",
    "title": "Sistema de fitxers (I)",
    "section": "EXT3: Problema de Consist√®ncia (II)",
    "text": "EXT3: Problema de Consist√®ncia (II)\n\nImagina que el proc√©s es veu interromput (crash) a mitja operaci√≥.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#journaling---consist√®ncia",
    "href": "slides/03-filesystem-part1.html#journaling---consist√®ncia",
    "title": "Sistema de fitxers (I)",
    "section": "Journaling - Consist√®ncia",
    "text": "Journaling - Consist√®ncia\n\n\n\n\n\nsequenceDiagram\n    participant P as Proc√©s\n    participant K as Kernel\n    participant J as Journal\n    participant FS as Filesystem\n\n    P-&gt;&gt;K: write() - ampliar fitxer\n    \n    Note over K,J: FASE 1: Preparaci√≥\n    K-&gt;&gt;J: Crear transacci√≥: T1\n    K-&gt;&gt;J: Nou bloc dades ¬∑ Update bitmap ¬∑ Update inode\n    K-&gt;&gt;J: COMMIT transacci√≥ T1\n    \n    Note over K,FS: FASE 2: Aplicaci√≥\n    K-&gt;&gt;FS: Aplicar canvis del journal\n    K-&gt;&gt;J: Marcar T1 com a completa\n    \n    K--&gt;&gt;P: write() completat",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#journaling-modes",
    "href": "slides/03-filesystem-part1.html#journaling-modes",
    "title": "Sistema de fitxers (I)",
    "section": "Journaling: Modes",
    "text": "Journaling: Modes\n\nJournaling Complet: Tant les dades com les metadades s‚Äôescriuen al journal abans d‚Äôaplicar-les al sistema de fitxers. M√†xima seguretat, per√≤ m√©s lent.\nJournaling de Metadades: Nom√©s les metadades s‚Äôescriuen al journal. Les dades es poden escriure directament al sistema de fitxers. Equilibri entre seguretat i rendiment.\nEscriptura Diferida (Writeback): Les dades i les metadades es poden escriure directament al sistema de fitxers sense passar pel journal. M√†xim rendiment, per√≤ risc de corrupci√≥ de dades en cas de fallada.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#ext3-journaling",
    "href": "slides/03-filesystem-part1.html#ext3-journaling",
    "title": "Sistema de fitxers (I)",
    "section": "ext3 ¬∑ Journaling",
    "text": "ext3 ¬∑ Journaling\n\nPre-escriptura (Write-Ahead Logging):\n\nAbans d‚Äôescriure qualsevol dada o metadada al disc, es registra la intenci√≥ d‚Äôaquesta escriptura en un registre especial anomenat journal. Garanteix que les operacions es completin correctament, fins i tot en cas de fallades.\n\nSi escriu el journal correctament:\n\nLa transacci√≥ es marca com a completa. Els canvis es poden aplicar al sistema de fitxers de manera segura.\n\nSi la escriptura del journal es veu interrompuda:\n\nLa transacci√≥ no es completa (p√®rdua de dades), per√≤ el sistema de fitxers roman consistent.\n\nSi el journal s‚Äôescriu correctament, per√≤ el disc no:\n\nTemporalment, el sistema de fitxers perd la consist√®ncia.El registre t√© la informaci√≥ per restaurar-la (durant l‚Äôarrencada, els journals inacabats es completen).",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#ext4-extents-per-a-millor-efici√®ncia",
    "href": "slides/03-filesystem-part1.html#ext4-extents-per-a-millor-efici√®ncia",
    "title": "Sistema de fitxers (I)",
    "section": "ext4: Extents per a Millor Efici√®ncia",
    "text": "ext4: Extents per a Millor Efici√®ncia\nEl principal problema (ext2/ext3) era la gesti√≥ ineficient dels punters a blocs de dades, especialment per a fitxers grans.\n\nUn extends √©s un descriptor que representa un rang contigu de blocs, millorant l‚Äôefici√®ncia en l‚Äôassignaci√≥ i reduint la fragmentaci√≥.\n\n\nRangs de blocs f√≠sics contigus, descrits amb una entrada (bloc inicial + nombre de blocs).\nUn extent pot mapar fins a 128 MiB (blocs de 4KB) d‚Äôespai contigu amb blocs de 4 KiB.\nL‚Äôinode d‚Äôext4 pot contenir directament fins a 4 extents; si el fitxer √©s gran o fragmentat, s‚Äôutilitza una estructura d‚Äôarbre (HTree) per indexar m√©s extents.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#ext4-estructura-dun-extent",
    "href": "slides/03-filesystem-part1.html#ext4-estructura-dun-extent",
    "title": "Sistema de fitxers (I)",
    "section": "ext4: Estructura d‚Äôun Extent",
    "text": "ext4: Estructura d‚Äôun Extent\nstruct ext4_extent {\n    uint32_t ee_block;      // Bloc l√≤gic inicial al fitxer\n    uint16_t ee_len;        // Longitud en blocs (m√†xim 32.768)\n    uint16_t ee_start_hi;   // Bits alts del bloc f√≠sic\n    uint32_t ee_start_lo;   // Bits baixos del bloc f√≠sic\n};\n\n\n\n\n\ngraph TD\n    A[Inode] --&gt; B[Extent Header]\n    B --&gt; C1[Extent 1]\n    B --&gt; C2[Extent 2]\n    B --&gt; C3[Extent 3]\n    B --&gt; C4[Extent 4]\n    C1 --&gt; D1[Bloc F√≠sic 1000 - 1023]\n    C2 --&gt; D2[Bloc F√≠sic 2000 - 2023]\n    C3 --&gt; D3[Bloc F√≠sic 3000 - 3023]\n    C4 --&gt; D4[Bloc F√≠sic 4000 - 4023]\n    style A fill:#eaf7ff,stroke:#007bff\n    style B fill:#f9f5dd,stroke:#c4aa18",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#ext4-htreebtree",
    "href": "slides/03-filesystem-part1.html#ext4-htreebtree",
    "title": "Sistema de fitxers (I)",
    "section": "ext4: HTree/Btree",
    "text": "ext4: HTree/Btree\n\n\n\nUn B-tree √©s una estructura d‚Äôarbre auto-balancejada que mant√© dades ordenades i permet cerques, insercions i eliminacions en temps logar√≠tmic.\nUn HTree √©s una variant de B-tree utilitzada espec√≠ficament per indexar fitxers i directoris en ext4.\nLa principal difer√®ncia √©s que les entrades es distribueixen en nodes fulla i no fulla, amb una estructura de cap√ßalera espec√≠fica per a cada node.\nInode/Arrel: Apunta a la cap√ßalera de l‚ÄôHTree.\n\n\n\n\n\n\n\ngraph TD\n    A[Inode] --&gt; B[HTree Root]\n    B --&gt; C1[Node No Fulla 1]\n    B --&gt; C2[Node No Fulla 2]\n    C1 --&gt; D1[Node Fulla 1]\n    C1 --&gt; D2[Node Fulla 2]\n    C2 --&gt; D3[Node Fulla 3]\n    C2 --&gt; D4[Node Fulla 4]\n    D1 --&gt; E1[Extent 1]\n    D1 --&gt; E2[Extent 2]\n    D2 --&gt; E3[Extent 3]\n    D3 --&gt; E4[Extent 4]\n    D4 --&gt; E5[Extent 5]\n\n\n\n\n\n\n\nNodes no fulla: Indexen altres nodes, permetent que l‚Äôarbre creixi i es mantingui balancejat.\nNodes fulla: Contenen les extents, que s√≥n rangs de blocs f√≠sics contigus.\nExtents: Descriuen els blocs reals del fitxer o directori.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#ext4-assignaci√≥-multibloc-i-retrassada",
    "href": "slides/03-filesystem-part1.html#ext4-assignaci√≥-multibloc-i-retrassada",
    "title": "Sistema de fitxers (I)",
    "section": "ext4 ¬∑ Assignaci√≥ multibloc i retrassada",
    "text": "ext4 ¬∑ Assignaci√≥ multibloc i retrassada\n\nAssignaci√≥ Multibloc:\n\next4 pot assignar m√∫ltiples blocs a la vegada, agrupant blocs consecutius per minimitzar la fragmentaci√≥.\nAix√≤ redueix la sobrec√†rrega d‚Äôassignaci√≥ i millora la localitat de les dades.\n\nAssignaci√≥ Retardada:\n\nL‚Äôassignaci√≥ retardada espera a bloquejar l‚Äôespai fins just abans d‚Äôescriure, optimitzant la distribuci√≥ de blocs.\nAix√≤ permet agrupar escriptures i minimitzar la fragmentaci√≥.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#exercicis-propostas",
    "href": "slides/03-filesystem-part1.html#exercicis-propostas",
    "title": "Sistema de fitxers (I)",
    "section": "Exercicis Propostas",
    "text": "Exercicis Propostas\n\nAdministraci√≥ B√†sica de Sistemes de Fitxers\nDiscussi√≥: Secure Boot √©s realment segur?: Cerca not√≠cies recents sobre Secure Boot i comparteix-les al f√≤rum del curs. Debatiu sobre avantatges, desavantatges, vulnerabilitats conegudes i experi√®ncies personals.\nPr√†ctica 01: Snapshots i restauraci√≥ amb systemd i initramfs",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/03-filesystem-part1.html#thats-all",
    "href": "slides/03-filesystem-part1.html#thats-all",
    "title": "Sistema de fitxers (I)",
    "section": "That‚Äôs all",
    "text": "That‚Äôs all\n\n\n\n\n\n\n\n\n\nTake Home Message\n\n\nEls sistemes de fitxers s√≥n complexos i cr√≠tics per al rendiment i la fiabilitat del sistema operatiu. El VFS proporciona una capa d‚Äôabstracci√≥ que permet gestionar diferents tipus de sistemes de fitxers de manera uniforme. Sistemes de fitxers com EXT4 han evolucionat per abordar problemes de rendiment i consist√®ncia, incorporant caracter√≠stiques com els extents i el journaling.",
    "crumbs": [
      "Diapositives",
      "Unitat 03 ¬∑ Sistemes de fitxers (Part 1)"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#benvinguda",
    "href": "slides/01-foundations-of-systems-administration.html#benvinguda",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Benvinguda",
    "text": "Benvinguda\n\n\n\n\n\n\n\n\n\n\n\nAdministraci√≥ i Manteniment de Sistemes i Aplicacions (AMSA)\n\n\n1r Semestre, 3r Curs del Grau en Enginyeria Inform√†tica. Impartida per Jordi Mateo, professor del Departament d‚ÄôEnginyeria Inform√†tica i Disseny Digital (DEIDD).\n\n\n\n\n\n\n\n\n\n(Font: Extret de Neowin)\n\n\n\n\nBenvinguts al curs 25/26 de Administraci√≥ i Manteniment de Sistemes i Aplicacions. Aquesta assignatura pret√©n introduir-vos en el m√≥n de l‚Äôadministraci√≥ de sistemes i aplicacions, aix√≠ com en la seva gesti√≥ i manteniment.\nAquesta vinyeta, amb un toc d‚Äôhumor, il¬∑lustra la dedicaci√≥ d‚Äôun administrador de sistemes. Malgrat el caos i els reptes, la seva prioritat √©s assegurar que els sistemes funcionin correctament i estiguin sempre disponibles. Independentment del que passi fora de la sala de servidors. La seva feina consisteix a mantenir la infraestructura, prevenir problemes i resoldre‚Äôls r√†pidament per garantir la continu√Øtat dels serveis.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-ladministraci√≥-de-sistemes",
    "href": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-ladministraci√≥-de-sistemes",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Qu√® √©s l‚ÄôAdministraci√≥ de Sistemes?",
    "text": "Qu√® √©s l‚ÄôAdministraci√≥ de Sistemes?\n\n\n\n\nPer comen√ßar, m‚Äôagradaria con√®ixer la vostra opini√≥ sobre qu√® √©s l‚ÄôAdministraci√≥ de Sistemes. Per fer-ho, crearem un n√∫vol de paraules amb les vostres respostes, al final de curs analitzarem les respostes i veurem si la vostra opini√≥ ha canviat. Enlla√ß al wordcloud",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-ladministraci√≥-de-sistemes-1",
    "href": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-ladministraci√≥-de-sistemes-1",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Qu√® √©s l‚ÄôAdministraci√≥ de Sistemes?",
    "text": "Qu√® √©s l‚ÄôAdministraci√≥ de Sistemes?\n\n\n\n\nL‚Äôadministraci√≥ de sistemes √©s la disciplina t√®cnica que implica la configuraci√≥, la gesti√≥, la supervisi√≥ i el manteniment continu d‚Äôinfraestructures inform√†tiques (servidors, xarxes, emmagatzematge de dades, programari, seguretat, etc.), per garantir la seva disponibilitat, rendiment, seguretat i funcionalitat, amb l‚Äôobjectiu de satisfer les necessitats operacionals i estrat√®giques de l‚Äôorganitzaci√≥.\n\n\nSi preguntem a ChatGPT que ens defineixi formalment qu√® √©s l‚ÄôAdministraci√≥ de Sistemes, ens dir√† que √©s la disciplina t√®cnica que implica la configuraci√≥, la gesti√≥, la supervisi√≥ i el manteniment continu d‚Äôinfraestructures inform√†tiques (servidors, xarxes, emmagatzematge de dades, programari, seguretat, etc.), per garantir la seva disponibilitat, rendiment, seguretat i funcionalitat, amb l‚Äôobjectiu de satisfer les necessitats operacionals i estrat√®giques de l‚Äôorganitzaci√≥.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-un-administrador",
    "href": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-un-administrador",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Qu√® √©s un administrador?",
    "text": "Qu√® √©s un administrador?\n\n\n\n\nUn administrador √©s una persona que t√© cura, gestiona o dirigeix els b√©ns o els interessos d‚Äôuna altra persona o entitat. En aquest cas, configurar, gestionar, supervisar i mantenir sistemes informatics.\n\n\nFixeu-vos en els elements clau de la definici√≥:\nSegons la RAE, un administrador √©s una persona que t√© cura, gestiona o dirigeix els b√©ns o els interessos d‚Äôuna altra persona o entitat. En aquest cas, configurar, gestionar, supervisar i mantenir sistemes informatics. Aix√≤ implica que la primera part de la definici√≥ de ChatGPT est√† en l√≠nia amb la definici√≥ de l‚Äôadministrador.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-un-sistema",
    "href": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-un-sistema",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Qu√® √©s un sistema?",
    "text": "Qu√® √©s un sistema?\n\n\n\n\nUn sistema √©s un conjunt d‚Äôelements interconnectats que treballen junts per aconseguir un objectiu com√∫. El Sistema Inform√†tic est√† format per hardware, programari, dades, xarxes, persones, etc., que treballen junts per processar informaci√≥.\n\n\nSegons la RAE, un sistema √©s un conjunt d‚Äôelements interconnectats que treballen junts per aconseguir un objectiu com√∫. El Sistema Inform√†tic est√† format per hardware, programari, dades, xarxes, persones, etc., que treballen junts per processar informaci√≥. Aix√≤ implica que la segona part de la definici√≥ de ChatGPT necessita ser m√©s espec√≠fica per reflectir la complexitat i diversitat dels sistemes inform√†tics i no √∫nicament la infraestructura.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#quines-s√≥n-les-m√©triques-a-garantir",
    "href": "slides/01-foundations-of-systems-administration.html#quines-s√≥n-les-m√©triques-a-garantir",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Quines s√≥n les m√©triques a garantir?",
    "text": "Quines s√≥n les m√©triques a garantir?\n\nDisponibilitat: Capacitat d‚Äôun sistema per estar operatiu i accessible als usuaris en tot moment.\nRendiment: Mesura de l‚Äôefici√®ncia amb qu√® un sistema utilitza els recursos disponibles per executar tasques.\nSeguretat: Capacitat d‚Äôun sistema per protegir les dades i recursos contra accessos no autoritzats, atacs i p√®rdues.\nFuncionalitat: Conjunt de caracter√≠stiques i capacitats que un sistema ofereix per complir amb els requisits operatius i les necessitats dels usuaris.\n\n\nA qu√® ens referim quan diem garantir unes m√®triques com la disponibilitat, el rendiment, la seguretat i la funcionalitat d‚Äôun sistema?\n\nDisponibilitat: La disponibilitat d‚Äôun sistema es refereix a la capacitat d‚Äôaquest de romandre operatiu i accessible als usuaris en tot moment, minimitzant el temps d‚Äôinactivitat. Aix√≤ implica assegurar que el sistema estigui disponible per a l‚Äô√∫s en qualsevol moment, evitant interrupcions i fallades.\nRendiment: El rendiment d‚Äôun sistema es refereix a la mesura de l‚Äôefici√®ncia amb qu√® aquest utilitza els recursos disponibles per executar tasques de manera r√†pida i efectiva. Aix√≤ implica garantir que el sistema pugui processar dades i executar tasques de manera eficient, sense retards ni interrupcions.\nSeguretat: La seguretat d‚Äôun sistema es refereix a la capacitat d‚Äôaquest de protegir les dades i recursos contra accessos no autoritzats, atacs i p√®rdues. Aix√≤ implica implementar mesures de seguretat, com xifrat, autenticaci√≥, control d‚Äôacc√©s i monitoritzaci√≥, per protegir la informaci√≥ i els recursos del sistema.\nFuncionalitat: La funcionalitat d‚Äôun sistema es refereix al conjunt de caracter√≠stiques i capacitats que aquest ofereix per complir amb els requisits operatius i les necessitats dels usuaris. Aix√≤ implica garantir que el sistema pugui realitzar les tasques i funcions requerides, oferint una experi√®ncia d‚Äôusuari satisfact√≤ria i complint amb les expectatives dels usuaris.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#quines-s√≥n-les-necessitats-a-satisfer",
    "href": "slides/01-foundations-of-systems-administration.html#quines-s√≥n-les-necessitats-a-satisfer",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Quines s√≥n les necessitats a satisfer?",
    "text": "Quines s√≥n les necessitats a satisfer?\n\nNecessitats Operacionals: Requisits i objectius relacionats amb l‚Äôexecuci√≥ di√†ria i el funcionament eficient dels sistemes, com ara la disponibilitat, el rendiment i la seguretat.\nNecessitats Estrat√®giques: Objectius i metes a llarg termini de l‚Äôorganitzaci√≥, com ara la innovaci√≥, la competitivitat i l‚Äôadaptabilitat o la escalabilitat dels sistemes.\n\n\nFinalment, la definici√≥ de ChatGPT tamb√© fa refer√®ncia a les necessitats operacionals i estrat√®giques de l‚Äôorganitzaci√≥. Aix√≤ implica que l‚Äôadministraci√≥ de sistemes no nom√©s es centra en garantir el funcionament i la seguretat dels sistemes, sin√≥ que tamb√© t√© en compte els objectius i les metes de l‚Äôorganitzaci√≥ en conjunt. Aix√≤ significa que els administradors de sistemes han de tenir en compte les necessitats operacionals i estrat√®giques de l‚Äôorganitzaci√≥ per garantir que els sistemes compleixin amb els requisits i expectatives de l‚Äôempresa.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#millorant-la-definici√≥-feta-per-chatgpt",
    "href": "slides/01-foundations-of-systems-administration.html#millorant-la-definici√≥-feta-per-chatgpt",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Millorant la definici√≥ feta per ChatGPT",
    "text": "Millorant la definici√≥ feta per ChatGPT\nL‚Äôadministraci√≥ de sistemes √©s la disciplina t√®cnica que implica la configuraci√≥, gesti√≥, supervisi√≥ i manteniment continu d‚Äôinfraestructures inform√†tiques (servidors, xarxes, emmagatzematge de dades, programari, seguretat, etc.)\naix√≠ com la coordinaci√≥ de les persones usu√†ries, pol√≠tiques, procediments i dades associades\nper garantir la disponibilitat, rendiment, seguretat i funcionalitat del sistema, amb l‚Äôobjectiu de satisfer les necessitats operacionals i estrat√®giques de l‚Äôorganitzaci√≥ en conjunt.\n\nLa definici√≥ de ChatGPT no √©s incorrecta, per√≤ √©s una mica limitada. Un sistema no nom√©s est√† format per infraestructures (hardware, programari, xarxes, etc.), sin√≥ que tamb√© inclou altres elements com les persones, les pol√≠tiques, els procediments, les dades que estan relacionades amb les necessitats operacionals i estrat√®giques. Per tant, la definici√≥ millorada inclou aquests elements per proporcionar una visi√≥ m√©s completa de l‚Äôadministraci√≥ de sistemes.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#analogia-amb-matrix",
    "href": "slides/01-foundations-of-systems-administration.html#analogia-amb-matrix",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Analogia amb Matrix",
    "text": "Analogia amb Matrix\n\nQuants de vosaltres heu vist la pel¬∑l√≠cula Matrix? Qu√® t√© a veure amb l‚ÄôAdministraci√≥ de Sistemes?\n\n\n\n\n\nIntroducci√≥ a System Administration - CBT Nuggets (0:32 fins a 2:16)\n\n\n\n\nL‚Äôautor del clip fa una analogia entre l‚Äôadministraci√≥ de sistemes i la pel¬∑l√≠cula Matrix. En aquesta pel¬∑l√≠cula, els personatges principals s√≥n capa√ßos de controlar i manipular el m√≥n virtual de Matrix, canviant la realitat a voluntat. Aquesta analogia reflecteix la capacitat dels administradors de sistemes per controlar i gestionar els sistemes inform√†tics, configurant-los, supervisant-los i mantenint-los per garantir el seu funcionament i seguretat. Compara matrix amb un super administrador de sistemes que controla tots els aspectes i us permet menjar dos pastilles per canviar la realitat (una de blava i una de vermella). Una us permet ser administrador de sistemes i l‚Äôaltra us permet ser usuari de sistemes. Aquesta analogia √©s una manera divertida de visualitzar el paper dels administradors de sistemes i la seva capacitat per controlar i gestionar els sistemes inform√†tics.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#evoluci√≥",
    "href": "slides/01-foundations-of-systems-administration.html#evoluci√≥",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Evoluci√≥",
    "text": "Evoluci√≥\n\n\n\n\n\nsequenceDiagram\n    participant Maquinari\n    participant Virtualitzaci√≥\n    participant Contenidors\n    participant DevOps\n    participant IaC as Infraestructura com a Codi\n    participant FaaS as Funcions com a Servei\n\n    rect rgb(255, 255, 204)\n        Note over Maquinari: 1. Configuraci√≥ Tradicional\n        Maquinari-&gt;&gt;Maquinari: L'administrador es centra en el hardware\n    end\n\n    rect rgb(204, 255, 204)\n        Note over Maquinari,Virtualitzaci√≥: 2. Virtualitzaci√≥\n        Maquinari-&gt;&gt;Virtualitzaci√≥: A√Øllament de S.O.\n    end\n\n    rect rgb(204, 255, 255)\n        Note over Maquinari,DevOps: 3. Contenidors i DevOps\n        Virtualitzaci√≥-&gt;&gt;Contenidors: A√Øllament d'aplicacions\n        Contenidors-&gt;&gt;DevOps: Faciliten el desplegament continu\n    end\n\n    rect rgb(255, 204, 255)\n        Note over Maquinari,IaC: 4. Infraestructura com a Codi (IaC)\n        DevOps-&gt;&gt;IaC: Automatitzaci√≥ total de la infraestructura\n    end\n\n    rect rgb(255, 204, 204)\n        Note over Maquinari,FaaS: 5. Funcions com a Servei (FaaS)\n        IaC-&gt;&gt;FaaS: Abstracci√≥ completa de la plataforma\n    end\n\n\n\n\n\n\n\nFa una d√®cada, el m√≥n del software i el hardware era molt diferent del que coneixem avui en dia. Els servidors eren f√≠sics, les aplicacions s‚Äôexecutaven en un √∫nic servidor i la infraestructura era est√†tica i dif√≠cil de modificar. Els administradors de sistemes treballaven en un entorn dominat pel hardware i els cables, dedicant moltes hores a configurar i mantenir els servidors. Al mateix temps, els desenvolupadors de software operaven en un univers separat, on les aplicacions s‚Äôexecutaven en servidors f√≠sics i tenien poc control sobre la infraestructura. Aquesta separaci√≥ va generar una divisi√≥ notable entre els dos grups, amb escassa comunicaci√≥ i col¬∑laboraci√≥.\nLa situaci√≥ va canviar radicalment amb l‚Äôarribada de la virtualitzaci√≥. Aquesta tecnologia va permetre als administradors de sistemes crear m√†quines virtuals i clons de servidors, simplificant enormement la gesti√≥ i configuraci√≥ de la infraestructura. La virtualitzaci√≥ va marcar un punt d‚Äôinflexi√≥, transformant la manera de gestionar els sistemes i permetent als desenvolupadors provar i desplegar aplicacions en entorns a√Øllats, millorant aix√≠ la qualitat i fiabilitat del software i apropant els dos grups.\nL‚Äôaparici√≥ dels contenidors va suposar un altre gran avan√ß en l‚Äôadministraci√≥ de sistemes. Aquesta tecnologia va permetre als desenvolupadors empaquetar aplicacions i les seves depend√®ncies en contenidors lleugers i port√†tils, que podien ser executats en qualsevol entorn. Aix√≤ va impulsar el concepte de DEVOPS, facilitant la col¬∑laboraci√≥ entre els equips de desenvolupament i operacions per automatitzar i millorar els processos de desplegament, monitoritzaci√≥ i gesti√≥ de la infraestructura.\nDEVOPS va emergir com a resposta a aquest canvi, promovent la col¬∑laboraci√≥, comunicaci√≥ i integraci√≥ entre els equips de desenvolupament i operacions, amb l‚Äôobjectiu de millorar la qualitat del software i accelerar el desplegament d‚Äôaplicacions. Aquesta metodologia va permetre als equips treballar conjuntament per automatitzar i perfeccionar els processos relacionats amb la infraestructura.\nLa pr√†ctica de Infrastructure as Code (IAC) va completar aquest proc√©s, permetent gestionar la infraestructura de manera program√†tica mitjan√ßant codi. Aix√≤ va permetre als equips de desenvolupament i operacions tractar la infraestructura com a codi, aplicant les mateixes pr√†ctiques de desenvolupament de software en la seva gesti√≥. Com a resultat, la col¬∑laboraci√≥, integraci√≥ i automatitzaci√≥ dels processos van millorar, augmentant la fiabilitat i escalabilitat de la infraestructura.\nFinalment, amb l‚Äôaparici√≥ dels conceptes serverless i Function as a Service (FAAS), la diferenciaci√≥ entre desenvolupament i operacions va desapar√®ixer completament. Aquest nou model (actual) permet als desenvolupadors executar funcions de manera a√Øllada i eficient, sense preocupar-se de la infraestructura subjacent. Aquesta nova forma de treballar ha millorat la productivitat i flexibilitat dels equips de desenvolupament, facilitant el desenvolupament i desplegament d‚Äôaplicacions en entorns din√†mics i escalables. Els administradors de sistemes han evolucionat de t√®cnics centrats en la infraestructura a enginyers de sistemes i aplicacions, amb un enfocament m√©s ampli i integrat en el desenvolupament de software.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#sortides-professionals",
    "href": "slides/01-foundations-of-systems-administration.html#sortides-professionals",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Sortides Professionals",
    "text": "Sortides Professionals\n\n\nL‚Äôadministraci√≥ de sistemes √©s una disciplina √†mplia i diversa, que no segueix una √∫nica via d‚Äôaprenentatge. Aquesta professi√≥ inclou una gran varietat de rols i especialitzacions, per√≤ no compta amb un itinerari professional clarament establert, fet que dificulta l‚Äôensenyament de tots els seus aspectes en una sola assignatura. Si observeu el pla d‚Äôestudis del Grau en Enginyeria Inform√†tica, veureu que inclou assignatures orientades a la programaci√≥, amb sortides professionals com a desenvolupadors de software en diferents √†mbits. Alhora, tamb√© ofereix formaci√≥ en computaci√≥ (xarxes, sistemes operatius, bases de dades), amb possibilitats laborals com a enginyer de xarxes o administrador de bases de dades.\nTradicionalment, l‚Äôadministraci√≥ de sistemes ha estat vinculada a les operacions, amb sortides professionals com a t√®cnic de suport o t√®cnic de centre de dades, sovint allunyades dels perfils d‚Äôun enginyer inform√†tic. No obstant aix√≤, avui en dia, l‚Äôadministraci√≥ de sistemes ha evolucionat significativament, donant lloc a perfils m√©s avan√ßats i t√®cnics com DevOps, SRE (Site Reliability Engineer), i Cloud Engineer, que ofereixen oportunitats laborals molt m√©s atractives i alineades amb les necessitats del mercat actual.\nAquesta assignatura t√© com a objectiu introduir-vos al m√≥n de l‚Äôadministraci√≥ de sistemes i aplicacions, aix√≠ com a la seva gesti√≥ i manteniment. Ho farem amb una visi√≥ actualitzada, orientada cap a les sortides professionals m√©s demandades en el mercat laboral, preparant-vos per a perfils amb m√©s responsabilitat i especialitzaci√≥ dins del camp de les tecnologies de la informaci√≥.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#objectius-del-curs",
    "href": "slides/01-foundations-of-systems-administration.html#objectius-del-curs",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Objectius del curs",
    "text": "Objectius del curs\n\nIntroduir-vos en el m√≥n de l‚Äôadministraci√≥ de sistemes i aplicacions, aix√≠ com en la seva gesti√≥ i manteniment.\nRepasar llenguatges de programaci√≥ i scripting per a l‚Äôautomatitzaci√≥ de tasques. Bash, AWK, YAML, que ens permetran utilitzar eines com Ansible, AWS CloudFormation, Docker, Kubernetes, etc.\nApendre a gestionar, configurar i monitoritzar servidors en entorns f√≠sics i virtuals.\nIntroduir-vos en el m√≥n del Cloud Computing i les seves principals plataformes (AWS, Azure, Google Cloud).\nDesplegar serveis Web, Bases de Dades, Aplicacions i Infraestructures en diferents entorns.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#metodologia",
    "href": "slides/01-foundations-of-systems-administration.html#metodologia",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Metodologia",
    "text": "Metodologia\n\nTeoria: En aquestes sessions, es presentaran els continguts te√≤rics de l‚Äôassignatura, que es complementaran amb exemples il¬∑lustratius. Com a material de suport, s‚Äôutilitzaran les diapositives de l‚Äôassignatura.\nPr√†ctiques: Aquestes sessions es basen en una metodologia activa i asincr√≤nica que permet a cada estudiant o grup avan√ßar al seu ritme. El contingut √©s autosuficient, i la funci√≥ del professor √©s fomentar el debat i ajudar a resoldre dubtes.\nTreball aut√≤nom: Aquesta part del curs implica la finalitzaci√≥ dels laboratoris i l‚Äôelaboraci√≥ d‚Äôinformes a partir dels reptes proposats. Tamb√© inclou la lectura i visualitzaci√≥ de documentaci√≥ t√®cnica; aix√≠ com la realitzaci√≥ d‚Äôactivitats al cloud AWS.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#planificaci√≥-part-i",
    "href": "slides/01-foundations-of-systems-administration.html#planificaci√≥-part-i",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Planificaci√≥ Part I",
    "text": "Planificaci√≥ Part I\n\n\n\n\n\n\n\n\nSet.\nDilluns\nDimecres\n\n\n\n\n1a\n-\nU1: Fonaments de l‚ÄôAdministraci√≥\n\n\n2a\nU2: Proc√©s d‚ÄôArrencada i Inicialitzaci√≥ del Sistema\nU2: Proc√©s d‚ÄôArrencada i Inicialitzaci√≥\n\n\n3a\nU2: Proc√©s d‚ÄôArrencada i Inicialitzaci√≥ del Sistema\nU2: Proc√©s d‚ÄôArrencada i Inicialitzaci√≥\n\n\n4a\nU3: Sis. de Fitxers i Emmagatzematge\nU3: Sis. de Fitxers i Emmagatzematge\n\n\n5a\nU3: Sis. de Fitxers i Emmagatzematge\nU3: Sis. de Fitxers i Emmagatzematge\n\n\n6a\nU3: Sis. de Fitxers i Emmagatzematge\nU4: Autenticaci√≥ i Autoritzaci√≥\n\n\n7a\nU4: Autenticaci√≥ i Autoritzaci√≥\nU4: Autenticaci√≥ i Autoritzaci√≥\n\n\n8a\nWorkshop\nWorkshop\n\n\n9a\nPARCIALS",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#planificaci√≥-part-ii",
    "href": "slides/01-foundations-of-systems-administration.html#planificaci√≥-part-ii",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Planificaci√≥ Part II",
    "text": "Planificaci√≥ Part II\n\n\n\nSet.\nDilluns\nDimecres\n\n\n\n\n10a\nU5: Virtualitzaci√≥\nU5: Virtualitzaci√≥\n\n\n11a\nU5: Virtualitzaci√≥\nU5: Virtualitzaci√≥\n\n\n12a\nU6: Computaci√≥ en el N√∫vol\nU6: Computaci√≥ en el N√∫vol\n\n\n13a\nU6: Computaci√≥ en el N√∫vol\nU6: Computaci√≥ en el N√∫vol\n\n\n14a\n-\nU7: Orquestraci√≥ i CI/CD\n\n\n15a\nWorkshop\nWorkshop\n\n\n16a\nPARCIALS\n\n\n\n17a\n\n\n\n\n18a\n\n\n\n\n19a\nRECUPERACIONS",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#criteris-davaluaci√≥",
    "href": "slides/01-foundations-of-systems-administration.html#criteris-davaluaci√≥",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Criteris d‚ÄôAvaluaci√≥",
    "text": "Criteris d‚ÄôAvaluaci√≥\n\n\n\n\n\n\n\n\n\n\nActivitat\nPes\nRecuperable?\nNota M√≠nima?\nGrup?\n\n\n\n\nExamen 1\n35%\nS√≠\nNo\nNo\n\n\nExamen 2\n35%\nS√≠\nNo\nNo\n\n\nLaboratori\n20%\nNo\nS√≠\nS√≠\n\n\nActivitats Async\n5%\nNo\nNo\nNo\n\n\nSeguiment i participaci√≥\n5%\nNo\nNo\nNo",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#ex√†mens",
    "href": "slides/01-foundations-of-systems-administration.html#ex√†mens",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Ex√†mens",
    "text": "Ex√†mens\nEls ex√†mens parcials (E1 i E2) s√≥n proves escrites que avaluen els coneixements te√≤rics i pr√†ctics adquirits durant el curs.\n\nS√≥n proves individuals i presencials.\nEs realitzaran en les dates establertes al calendari acad√®mic.\nNo es permet l‚Äô√∫s de cap dispositiu electr√≤nic (tel√®fons m√≤bils, ordinadors port√†tils o tauletes).\nSi es permet l‚Äô√∫s d‚Äôun resum de continguts, que ha de ser un document escrit a m√† i no pot excedir una fulla DIN A4 (per davant i per darrere).",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#recuperaci√≥",
    "href": "slides/01-foundations-of-systems-administration.html#recuperaci√≥",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Recuperaci√≥",
    "text": "Recuperaci√≥\n\nEls parcials s√≥n recuperables mitjan√ßant proves escrites addicionals que es realitzaran durant la setmana de recuperaci√≥.\nSi un estudiant necessita recuperar un √∫nic parcial (E1 o E2), podr√† fer una prova espec√≠fica per a aquest parcial. La qualificaci√≥ obtinguda en aquesta recuperaci√≥ substituir√† la nota del parcial corresponent.\nSi un estudiant necessita recuperar ambd√≥s parcials, haur√† de realitzar dues proves separades, una per a cada parcial (E1 i E2). Les qualificacions obtingudes en cadascuna d‚Äôaquestes proves de recuperaci√≥ substituiran les notes originals dels parcials respectius.\n√âs important notar que no hi haur√† un model d‚Äôexamen unificat per a la recuperaci√≥; cada prova de recuperaci√≥ se centrar√† exclusivament en els continguts del parcial al qual correspon.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#pr√†ctiques",
    "href": "slides/01-foundations-of-systems-administration.html#pr√†ctiques",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Pr√†ctiques",
    "text": "Pr√†ctiques\n\nLes pr√†ctiques de l‚Äôassignatura impliquen treball fora de l‚Äôaula i s‚Äôhan de lliurar de forma estricta en les dates establertes.\nLa seva avaluaci√≥ es far√† mitjan√ßant r√∫briques de correcci√≥, que estaran disponibles per als estudiants amb antelaci√≥.\nEl professorat pot entrevistar els estudiants per verificar l‚Äôautoria. Si es detecta que una activitat no ha estat realitzada per l‚Äôestudiant la seva qualificaci√≥ ser√† 0.\nQualsevol entrega fora del termini establert es considerar√† no v√†lida i es qualificar√† amb un 0.\nCadascuna pot tenir una ponderaci√≥ espec√≠fica indicada a la descripci√≥ de l‚Äôactivitat.\nAquestes pr√†ctiques no s√≥n recuperables.\nTot i ser activitats en grup, cada estudiant pot obtenir una nota diferent en funci√≥ de la seva participaci√≥ i aportacions individuals al grup.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#activitats-as√≠ncrones-a-aws",
    "href": "slides/01-foundations-of-systems-administration.html#activitats-as√≠ncrones-a-aws",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Activitats As√≠ncrones a AWS",
    "text": "Activitats As√≠ncrones a AWS\nAquestes activitats as√≠ncrones es realitzaran a la plataforma AWS al llarg del curs. La seva finalitat √©s que completis totes les activitats i laboratoris proposats, ja que la qualificaci√≥ es basar√† √≠ntegrament en la finalitzaci√≥ d‚Äôaquests. Completar totes les tasques et donar√† el 5% de la nota final. Si en fas nom√©s una part, la puntuaci√≥ ser√† proporcional a les activitats que hagis realitzat.\n\nNo recuperable: Aquesta activitat no disposa de recuperaci√≥.\nData l√≠mit: La data m√†xima per a la presentaci√≥ i finalitzaci√≥ √©s el dia de l‚ÄôE2.\nValor afegit: Obtenci√≥ d‚Äôun certificat oficial AWS.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#seguiment-i-participaci√≥",
    "href": "slides/01-foundations-of-systems-administration.html#seguiment-i-participaci√≥",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Seguiment i Participaci√≥",
    "text": "Seguiment i Participaci√≥\n\n\n\n\n\n\n\nR√∫brica d‚ÄôAvaluaci√≥\n\n\n\n\n\n\n\n\n\n\n\nPunts\nParticipaci√≥ Presencial\nParticipaci√≥ en F√≤rums\nActivitats Sessi√≥\n\n\n\n\n10\nContribucions excepcionals,enriqueix la discussi√≥.\nL√≠der en discussions, promou debat.\nQualitat excepcional, supera expectatives.\n\n\n9\nComentaris rellevants, mostra comprensi√≥, escolta activament.\nRespostes significatives.\nAlta qualitat, treball prec√≠s.\n\n\n8\nContribucions regulars, interactua amb companys.\nPublicacions rellevants, contribueix constructivament.\nCompleix tots requisits amb precisi√≥.\n\n\n7\nParticipa amb una comprensi√≥ b√†sica.\nCompleix m√≠nims, contribucions breus.\nQualitat inconsistent per√≤ acceptable.\n\n\n5-6\nPoca freq√º√®ncia, comentaris superficials.\nPublicacions rares, poc profundes.\nAlgunes activitats incompletes.\n\n\n1-4\nNom√©s participa si se li demana.\nPublicacions irrellevants.\nRarament completa activitats.\n\n\n0\nEvita participar, distret.\nPublicacions fora de tema.\nNo lliura activitats.\n\n\n\n\n\n\n\n\nL‚Äôassist√®ncia passiva no es puntua.\n\n\nAquest component d‚Äôavaluaci√≥ est√† dissenyat per fomentar la participaci√≥ activa i el comprom√≠s amb l‚Äôassignatura. La participaci√≥ no es limita nom√©s a l‚Äôassist√®ncia a classe, sin√≥ que tamb√© inclou la contribuci√≥ en discussions, f√≤rums en l√≠nia i activitats relacionades amb les sessions. Tota participaci√≥ ha de ser rellevant i constructiva per ser valorada positivament. En aquesta r√∫brica, es detallen els criteris espec√≠fics que s‚Äôutilitzaran per avaluar la participaci√≥ dels estudiants en diferents √†mbits.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#bonus-1",
    "href": "slides/01-foundations-of-systems-administration.html#bonus-1",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Bonus 1",
    "text": "Bonus 1\n\n\n\nObjectiu: Fomentar la reflexi√≥ i l‚Äôautoavaluaci√≥ dels continguts treballats a classe.\nMetodologia: Cada setmana, els estudiants han de fer un commit al seu repositori d‚Äôapunts amb les notes de les sessions de teoria i pr√†ctiques.\nAvaluaci√≥: Es valorar√† la qualitat de les notes, la seva coher√®ncia i la seva relaci√≥ amb els continguts treballats, aix√≠ com les reflexions i opinions personals incloses.\nPer participar cal crear un repositori a Github (p√∫blic) i fer-me arribar l‚Äôenlla√ß.\n\n\n\n\nExemple de Notes\n## Setmana X\n\n# Resum te√≤ric\n\n# Exemples pr√†ctics\n\n# Dubtes i preguntes\n\n# Reflexions personals\n\n\n\n\n\n\n\nNo es permet cap altre forma\n\n\nLes notes han de ser escrites en format Markdown i mantingudes en un repositori Git i Github.\n\n\n\n\n\n\nAquest bonus est√† dissenyat per incentivar els estudiants a mantenir un registre organitzat i reflexiu dels continguts treballats a classe. En fer un commit setmanal amb les seves notes, els estudiants no nom√©s reforcen el seu aprenentatge, sin√≥ que tamb√© desenvolupen habilitats de documentaci√≥ i autoavaluaci√≥. La qualitat de les notes ser√† clau en l‚Äôavaluaci√≥, ja que es valorar√† no nom√©s la precisi√≥ dels continguts, sin√≥ tamb√© la capacitat de reflexionar sobre el que s‚Äôha apr√®s i com s‚Äôha aplicat aquest coneixement. Es tracta d‚Äôuna oportinitat per als estudiants per crear el seu diari d‚Äôaprenentatge al llarg del curs. Per participar, els estudiants han de crear un repositori p√∫blic a Github i compartir l‚Äôenlla√ß amb el professorat.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#bonus-2",
    "href": "slides/01-foundations-of-systems-administration.html#bonus-2",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Bonus 2",
    "text": "Bonus 2\n\n\n\nEls materials s√≥n Open Source.\nQualsevol estudiant pot detectar errors, millorar els materials o afegir continguts nous.\nS‚Äôavaluar√† la quantitat i qualitat.\n\n\n\n\n\nUn altre bonus que oferim √©s la possibilitat de contribuir als materials de l‚Äôassignatura seguint la metodologia de Open Source. Aix√≤ significa que qualsevol estudiant pot detectar errors, suggerir millores o afegir continguts nous als materials proporcionats. Per participar, els estudiants poden fer un fork del repositori de l‚Äôassignatura, treballar en una branca separada i despr√©s obrir una pull request amb les seves propostes de canvi. La quantitat i qualitat de les contribucions seran avaluades, oferint aix√≠ una oportunitat per als estudiants de participar activament en la millora dels recursos educatius.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#gesti√≥-del-curs",
    "href": "slides/01-foundations-of-systems-administration.html#gesti√≥-del-curs",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Gesti√≥ del curs",
    "text": "Gesti√≥ del curs\n\nEs demana que els estudiants arribin puntuals a les sessions. L‚Äôentrada tardana pot interrompre la din√†mica de la classe i el treball dels companys.\nEs demana que els estudiants respectin les normes de conviv√®ncia i respecte mutu durant les sessions de classe. Aix√≤ inclou evitar interrupcions innecess√†ries, escoltar activament als companys i al professor, i mantenir un ambient de treball positiu i constructiu.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#comunicaci√≥-amb-el-professorat",
    "href": "slides/01-foundations-of-systems-administration.html#comunicaci√≥-amb-el-professorat",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Comunicaci√≥ amb el professorat",
    "text": "Comunicaci√≥ amb el professorat\n\nIntenteu comunicar-vos a trav√©s del correu electr√≤nic i no per l‚Äôeina del campus virtual per assegurar una resposta m√©s r√†pida.\nLes sessions de tutoria es realitzaran de manera presencial o virtual, segons les necessitats dels estudiants. √âs important que els estudiants sol¬∑licitin cita pr√®via per a les tutories utilitzant el correu electr√≤nic jordi.mateo@udl.cat indicant el motiu de la consulta i la disponibilitat hor√†ria i afegint l‚Äôassumpte [AMSA]: Sol¬∑licitud de Tutoria.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#treball-individual",
    "href": "slides/01-foundations-of-systems-administration.html#treball-individual",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Treball individual",
    "text": "Treball individual\n\nCada estudiant √©s responsable de la seva pr√≤pia feina i de com gestiona el seu temps.\nL‚Äôassist√®ncia a classe no √©s obligat√≤ria.\nCada alumne ha de presentar evid√®ncies pr√≤pies del treball realitzat, encara que es col¬∑labori en grup.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#√∫s-de-la-iag",
    "href": "slides/01-foundations-of-systems-administration.html#√∫s-de-la-iag",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "√ös de la IAG",
    "text": "√ös de la IAG\n\nPots utilitzar eines d‚ÄôIAG per generar idees, entendre conceptes complexos o esbossar l‚Äôestructura inicial del teu codi o projecte. No obstant aix√≤, la implementaci√≥ i la versi√≥ final han de ser sempre de la teva autoria.\nEst√† estrictament prohibit presentar codi o solucions generades directament per una IAG com a treball propi (√©s a dir, mitjan√ßant un simple copiar i enganxar).\nSi incorpores material assistit per una IAG, has de declarar-ho expl√≠citament. Aix√≤ implica identificar clarament les seccions generades per IAG i proporcionar el prompt exacte utilitzat per crear-les.\n\n\nL‚Äôincompliment d‚Äôaquestes directrius es considerar√† una violaci√≥ de la integritat acad√®mica.\n\n\nQualificaci√≥ de zero en la tasca.\nConseq√º√®ncies disciplin√†ries que estableix la Normativa de Conviv√®ncia de la UdL per frau acad√®mic.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#eines",
    "href": "slides/01-foundations-of-systems-administration.html#eines",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Eines",
    "text": "Eines\n\nOrdinador port√†til amb connexi√≥ a Internet.\n\nEs recomana portar el vostre propi ordinador per cursar l‚Äôassignatura.\nSi no disposeu d‚Äôordinador, podreu utilitzar els ordinadors de la classe durant les sessions de laboratori.\n\nDistribucions Linux (Debian i AlmaLinux)\n\n√âs obligatori utilitzar les distribucions indicades als laboratoris. Altres distribucions no rebran suport.\n\nSoftware de virtualitzaci√≥ (VMWare i QEMU)\n\nEs recomana utilitzar VMWare i QEMU, per√≤ podeu optar per altres opcions de virtualitzaci√≥. Heu de ser capa√ßos d‚Äôadaptar el material al vostre programari de virtualitzaci√≥.\n\nCompte a AWS",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#materials-i-recursos",
    "href": "slides/01-foundations-of-systems-administration.html#materials-i-recursos",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Materials i Recursos",
    "text": "Materials i Recursos\n\nApunts de l‚Äôassignatura i materials proporcionats pel professor.\nDocumentaci√≥ oficial de les eines i tecnologies utilitzades.\nF√≤rums t√®cnics a la xarxa com Stack Overflow, Reddit, etc\nLlibres de refer√®ncia en administraci√≥ de sistemes:\n\n‚ÄúUNIX and Linux System Administration Handbook‚Äù de Evi Nemeth, Garth Snyder, Trent R. Hein, Ben Whaley.\n‚ÄúThe Practice of System and Network Administration‚Äù de Thomas A. Limoncelli, Christina J. Hogan, Strata R. Chalup.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#el-rol-de-ladministrador-de-sistemes---similituds-amb-un-bomber",
    "href": "slides/01-foundations-of-systems-administration.html#el-rol-de-ladministrador-de-sistemes---similituds-amb-un-bomber",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "El rol de l‚Äôadministrador de sistemes - Similituds amb un bomber",
    "text": "El rol de l‚Äôadministrador de sistemes - Similituds amb un bomber\n\nEls administradors de sistemes han de tenir coneixements t√®cnics profunds i una actitud proactiva per anticipar problemes i, si cal, resoldre‚Äôls sota pressi√≥, tal com ho faria un bomber en una emerg√®ncia.\n\n\n\n\n\nEl rol tradicional de l‚Äôaministrador de sistemes pot ser semblant al d‚Äôun bomber. Ha de treballar per prevenir incendis, per√≤ quan hi ha un incendi ha de c√≥rrer per apagar-lo i restaurar la situaci√≥ el m√©s r√†pid. No importa l‚Äôhora, el lloc o el dia, l‚Äôadministrador de sistemes ha de ser capa√ß de respondre a les emerg√®ncies i solucionar els problemes de manera eficient i efectiva. Aix√≤ requereix una gran habilitat t√®cnica, coneixements profunds dels sistemes i una actitud proactiva per anticipar-se als problemes i resoldre‚Äôls r√†pidament. Els administradors de sistemes han de ser tant proactius com reactius, prevenint problemes i responent r√†pidament davant els imprevistos per garantir la continu√Øtat del servei. Poden utilitzar eines com Nagios, Zabbix, Prometheus per monitoritzar els sistemes i detectar problemes abans que es converteixin en emerg√®ncies reals. Per√≤, han d‚Äôintervenir i improvisar quan calgui per resoldre els problemes i restaurar la normalitat.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#el-rol-de-ladministrador-de-sistemes---similituds-amb-un-cient√≠fic",
    "href": "slides/01-foundations-of-systems-administration.html#el-rol-de-ladministrador-de-sistemes---similituds-amb-un-cient√≠fic",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "El rol de l‚Äôadministrador de sistemes - Similituds amb un cient√≠fic",
    "text": "El rol de l‚Äôadministrador de sistemes - Similituds amb un cient√≠fic\n\n\n\n\n\n\n\nEls administradors de sistemes han de ser capa√ßos de resoldre problemes complexos i trobar solucions creatives.\nAix√≤ pot ser semblant al treball d‚Äôun cient√≠fic, que ha de plantejar hip√≤tesis, realitzar experiments i analitzar dades per arribar a conclusions.\nPer exemple, una empresa pot necessitar donar codis d‚Äôacc√©s temporals als usuaris per connectar-se a la xarxa Wifi. En lloc de gestionar-ho manualment, un administrador de sistemes va crear un sistema que generava codis d‚Äôacc√©s temporals quan els usuaris tocaven un platan connectada a un Raspberry Pi.\n\n\n\nUn altra caracter√≠stica de l‚Äôadministrador de sistemes √©s la seva capacitat per resoldre problemes complexos i trobar solucions creatives. Aix√≤ pot ser semblant al treball d‚Äôun cient√≠fic, que ha de plantejar hip√≤tesis, realitzar experiments i analitzar dades per arribar a conclusions.\nPer exemple, una empresa pot necessitar donar codis d‚Äôacc√©s temporals als usuaris per connectar-se a la xarxa Wifi. En lloc de gestionar-ho manualment, un administrador de sistemes va crear un sistema que generava codis d‚Äôacc√©s temporals quan els usuaris tocaven un platan connectada a un Raspberry Pi. Aquesta soluci√≥ creativa i inesperada va permetre automatitzar una tasca manual i millorar l‚Äôexperi√®ncia de l‚Äôusuari. Aix√≤ demostra la capacitat de l‚Äôadministrador de sistemes per trobar solucions innovadores i eficients als problemes que es presenten.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#salari-administrador-de-sistemes",
    "href": "slides/01-foundations-of-systems-administration.html#salari-administrador-de-sistemes",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Salari Administrador de Sistemes",
    "text": "Salari Administrador de Sistemes\n\n\n\n\n\nEl salari base segons el portal payscale a Espanya √©s de mitjana 30k amb un potencial de creixement a futtur de 10k. Aquesta dada √©s orientativa i pot variar segons la ubicaci√≥, l‚Äôexperi√®ncia, les habilitats i la formaci√≥ del professional. Per√≤, en comparativa amb altres sortides professionals, l‚Äôadministrador de sistemes igual no √©s una opci√≥ interessant. Analitzem ara sortides professionals m√©s especialitzades.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#especialitzacions-en-administraci√≥-de-sistemes",
    "href": "slides/01-foundations-of-systems-administration.html#especialitzacions-en-administraci√≥-de-sistemes",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Especialitzacions en Administraci√≥ de Sistemes",
    "text": "Especialitzacions en Administraci√≥ de Sistemes\n\n\n\nAdministradors de Xarxa, Enmagatzematge, Seguretat\nOperadors de Xarxa\nArquitectes de Sistemes\nT√®cnics de Suport\nT√®cnics de Centre de Dades\nEnginyers de Sistemes\nEnginyer DEVOPS\nEnginyer SRE (Site Reliability Engineer)\n\n\n\n\n\nHi ha una gran varietat d‚Äôespecialitzacions dins l‚Äô√†mbit de l‚Äôadministraci√≥ de sistemes, cada una amb responsabilitats √∫niques que poden influir en el salari i els rols. A continuaci√≥, detallem algunes d‚Äôaquestes especialitzacions:\n\nAdministradors de Xarxa: S‚Äôencarreguen de la configuraci√≥, gesti√≥ i manteniment de routers, switches, firewalls i altres dispositius de xarxa en entorns f√≠sics i virtuals. La seva tasca √©s garantir la connectivitat i seguretat de les xarxes de l‚Äôempresa.\nAdministradors de Emmagatzematge: Gestionen sistemes de fitxers, solucions de c√≤pies de seguretat i tecnologies d‚Äôemmagatzematge de dades com NETAPP o EMC. S√≥n responsables d‚Äôassegurar que les dades estiguin segures i accessibles.\nAdministradors de Seguretat: Protegeixen els sistemes inform√†tics contra amenaces i atacs cibern√®tics. Implementen pol√≠tiques de seguretat, gestionen certificats digitals i realitzen auditories de seguretat per protegir la informaci√≥ sensible.\nOperadors de Xarxa: Supervisionen el funcionament diari de les xarxes, gestionant el tr√†nsit de dades i resolent problemes de connexi√≥ o rendiment. S‚Äôasseguren que les xarxes funcionin sense interrupcions.\nArquitectes de Sistemes: Dissenyen i planifiquen la infraestructura tecnol√≤gica de l‚Äôempresa. S√≥n responsables d‚Äôassegurar que els sistemes compleixin els requisits de rendiment, seguretat i escalabilitat.\nT√®cnics de Suport: Ofereixen assist√®ncia t√®cnica als usuaris, resolent problemes i incidents a trav√©s de sistemes de tickets. La seva tasca √©s garantir que els usuaris puguin utilitzar les tecnologies sense problemes.\n\n-T√®cnics de Centre de Dades: Gestionen i mantenen els servidors, xarxes i altres equips f√≠sics en els centres de dades. S‚Äôasseguren que el centre de dades funcioni amb alta disponibilitat i rendiment.\n\nEnginyers de Sistemes: S√≥n responsables de dissenyar, implementar i mantenir la infraestructura inform√†tica de l‚Äôempresa. La seva tasca √©s assegurar que els sistemes compleixin els requisits operatius i t√®cnics.\n\nAra veurem dues especialitzacions m√©s avan√ßades i amb m√©s demanda en el mercat laboral actual: Enginyer DEVOPS i Enginyer SRE (Site Reliability Engineer) amb detall. Tamb√© us deixo un enlla√ß a un llibre que parla de les diferents especialitzacions.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-un-site-reliability-engineer-sre",
    "href": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-un-site-reliability-engineer-sre",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Qu√® √©s un Site Reliability Engineer (SRE)?",
    "text": "Qu√® √©s un Site Reliability Engineer (SRE)?\nEls Site Reliability Engineers (SRE) s√≥n enginyers de sistemes especialitzats en la fiabilitat i l‚Äôescalabilitat dels sistemes inform√†tics. Estan centrats en les operacions, utilitzant el software com a eina per gestionar els sistemes, solucionar els afers i automatitzar tasques. Les seves missions s√≥n crear sistemes escalables i fiables.\n\nFiabilitat del Sistema: Nagios, Zabbix, Prometheus.\nEscalabilitat: Kubernetes, Docker, Terraform.\nMonitoritzaci√≥ i Alertes: Grafana, ELK Stack, PagerDuty.\nGesti√≥ d‚ÄôIncidents: Jira, ServiceNow, Slack.\nOptimitzaci√≥ de Rendiment: New Relic, Datadog, AppDynamics.\nAutomatitzaci√≥ de Processos: Ansible, Puppet, Chef.\n\n\nAmb l‚Äôevoluci√≥ cont√≠nua de les tecnologies cloud i l‚Äôaugment de la demanda de serveis digitals, les pr√†ctiques de Site Reliability Engineering (SRE) s‚Äôhan convertit en una pe√ßa clau per a moltes organitzacions. Un SRE es pot definir com un professional especialitzat en garantir que les empreses compleixin els seus Acords de Nivell de Servei (SLA) pel que fa a disponibilitat, rendiment, experi√®ncia de l‚Äôusuari i indicadors clau de negoci (KPIs). Aix√≤ implica centrar-se en la millora de la fiabilitat i l‚Äôescalabilitat dels sistemes, aix√≠ com en la implementaci√≥ de pr√†ctiques d‚Äôintegraci√≥ i lliurament continu (CI/CD), refor√ßar la seguretat i optimitzar els costos operatius.\nEls SREs aprofiten el programari com una eina per gestionar i automatitzar els sistemes, identificar i resoldre problemes, i automatitzar processos amb l‚Äôobjectiu final de construir infraestructures escalables i fiables que responguin als objectius de negoci.\nLes funcions principals d‚Äôun SRE inclouen la monitoritzaci√≥ constant dels sistemes, la gesti√≥ d‚Äôalertes i resposta a incidents, l‚Äôautomatitzaci√≥ de tasques rutin√†ries, i l‚Äôoptimitzaci√≥ de l‚Äôescala i adaptabilitat dels recursos tecnol√≤gics. A m√©s, col¬∑laboren estretament amb els equips de desenvolupament per assegurar la millora cont√≠nua de la fiabilitat i el rendiment dels sistemes.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#salari-dun-site-reliability-engineer",
    "href": "slides/01-foundations-of-systems-administration.html#salari-dun-site-reliability-engineer",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Salari d‚Äôun Site Reliability Engineer",
    "text": "Salari d‚Äôun Site Reliability Engineer\n\n\n\n\n\nEls Site Reliability Engineers (SREs) experimenten un increment salarial substancial en comparaci√≥ amb els administradors de sistemes. Un SRE pot comen√ßar guanyant fins a 50.000 ‚Ç¨ durant el seu primer any, i amb l‚Äôexperi√®ncia, arribar fins als 70.000 ‚Ç¨ o m√©s en un termini de cinc anys. Aquest diferencial salarial reflecteix la creixent import√†ncia i demanda de professionals especialitzats en la fiabilitat i escalabilitat dels sistemes inform√†tics. A difer√®ncia dels administradors de sistemes, els SREs no nom√©s es dediquen a mantenir la infraestructura, sin√≥ que tamb√© se centren en optimitzar la resili√®ncia i efici√®ncia dels serveis digitals, assegurant que compleixin els Acords de Nivell de Servei (SLA). Per tant, si t‚Äôinteressa un rol amb responsabilitats m√©s t√®cniques i un potencial de creixement major, el cam√≠ d‚ÄôSRE pot ser una opci√≥ molt atractiva dins del mercat laboral actual. Les seves responsabilitats dins de l‚Äôempresa s√≥n molt importants i tenen un impacte directe amb els objectius de negoci.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-un-devops-engineer",
    "href": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-un-devops-engineer",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Qu√® √©s un DevOps Engineer?",
    "text": "Qu√® √©s un DevOps Engineer?\nEls DevOps Engineers s√≥n professionals clau en la integraci√≥ i col¬∑laboraci√≥ entre els equips de desenvolupament (Dev) i operacions (Ops), amb l‚Äôobjectiu principal de millorar l‚Äôefici√®ncia i agilitat dels processos de desenvolupament de software. El seu treball se centra en accelerar el desplegament d‚Äôaplicacions, millorar la qualitat del software i optimitzar els fluxos de treball, fent √∫s intensiu de l‚Äôautomatitzaci√≥, la integraci√≥ cont√≠nua (CI) i el lliurament continu (CD).\n\nAutomatitzaci√≥: Jenkins, GitLab CI, Bamboo.\nGesti√≥ d‚Äôinfraestructura com a codi (IaC): Terraform, Ansible, CloudFormation.\nContenidors i orquestraci√≥: Docker, Kubernetes.\nMonitoritzaci√≥ i registre: Prometheus, Grafana, ELK Stack.\nCol¬∑laboraci√≥ i comunicaci√≥: Slack, Jira, Confluence.\n\n\nMentre que els Sysadmins tradicionalment s‚Äôocupen de la gesti√≥ i manteniment de la infraestructura, com ara servidors, xarxes i sistemes operatius, els DevOps Engineers van m√©s enll√† d‚Äôaquestes tasques. El seu rol inclou l‚Äôautomatitzaci√≥ de processos, la implementaci√≥ de pipelines de CI/CD, la gesti√≥ de contenidors (com Docker) i la infraestructura com a codi (IaC), com Terraform o Ansible. En lloc d‚Äôenfocar-se nom√©s en el manteniment i la disponibilitat dels sistemes, els DevOps Engineers treballen per integrar millor el desenvolupament i les operacions, assegurant que els nous llan√ßaments de software siguin r√†pids, segurs i consistents.\nTot i que hi ha solapaments entre DevOps i SRE, les difer√®ncies clau radican en l‚Äôenfocament i les prioritats. Mentre que els DevOps Engineers se centren en l‚Äôoptimitzaci√≥ dels processos de desenvolupament i operacions a trav√©s de la col¬∑laboraci√≥ i l‚Äôautomatitzaci√≥, els SREs estan m√©s orientats a la fiabilitat i escalabilitat dels sistemes en producci√≥. El SRE t√© un enfocament m√©s espec√≠fic en mantenir els serveis en l√≠nia, gestionant incidents, optimitzant el rendiment i assegurant-se que es compleixen els SLA. Tot i que ambd√≥s rols treballen amb eines similars, com CI/CD i contenidors, els SREs tenen m√©s responsabilitats en la resoluci√≥ d‚Äôincidents cr√≠tics i en la millora de la resili√®ncia del sistema.\nCom podeu veure les eines tecnol√≤giques que utilitzen els DevOps Engineers s√≥n molt similars a les dels SREs, per√≤ la seva aplicaci√≥ i objectius s√≥n diferents. Per tant, apunteu-vos aquestes eines i tecnologies, ja que s√≥n essencials pel m√≥n laboral actual.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#salari-dun-devops-engineer",
    "href": "slides/01-foundations-of-systems-administration.html#salari-dun-devops-engineer",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Salari d‚Äôun DevOps Engineer",
    "text": "Salari d‚Äôun DevOps Engineer\n\n\n\n\n\nEls DevOps Engineers, igual que els SREs, gaudeixen d‚Äôun salari m√©s alt i d‚Äôun major potencial de creixement professional en comparaci√≥ amb els administradors de sistemes tradicionals. Si t‚Äôapassiona l‚Äôadministraci√≥ de sistemes enfocada a l‚Äôautomatitzaci√≥ del desplegament de software, el disseny i la gesti√≥ de pipelines de CI/CD, l‚Äô√∫s de contenidors i la implementaci√≥ d‚Äôinfraestructura com a codi, el rol de DevOps Engineer pot oferir-te una carrera m√©s atractiva i plena d‚Äôoportunitats. En l‚Äôactualitat, moltes empreses busquen professionals amb habilitats en DevOps.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#transfomraci√≥-del-administrador-de-sistemes-a-sre",
    "href": "slides/01-foundations-of-systems-administration.html#transfomraci√≥-del-administrador-de-sistemes-a-sre",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Transfomraci√≥ del Administrador de Sistemes a SRE",
    "text": "Transfomraci√≥ del Administrador de Sistemes a SRE\n\n\n\n\nDamon Edwards, co-fundador de Rundeck, parla de la transformaci√≥ d‚Äôun administrador de sistemes a un Site Reliability Engineer (SRE) i com aquesta evoluci√≥ pot ajudar a millorar la fiabilitat dels sistemes i la productivitat dels equips de desenvolupament. Aquesta xerrada va ser presentada a la DevOpsCon 2019.\n\n\nEn aquest curs, veure una pinzellada de les tasques d‚Äôun SRE i d‚Äôun DevOps Engineer quan introdu√Øm les eines de monitoritzaci√≥, automatitzaci√≥ i CI/CD. Per√≤, si voleu aprofundir en la tem√†tica, us recomano aquesta xerrada de la DevOpsCon, per Damon Edwarks, que parla del tema i explica com un administrador de sistemes es pot transformar en un SRE tenint en compte una responsabilitat compartida entre els SLOs i els errors de pressupost.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#arquitectura-client-servidor",
    "href": "slides/01-foundations-of-systems-administration.html#arquitectura-client-servidor",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Arquitectura Client-Servidor",
    "text": "Arquitectura Client-Servidor\nUna arquitectura client-servidor involucra uns sistemes que necessiten serveis i uns servidors que processen i responen a aquestes peticions.\n\n\nClient\nUn ordinador o dispositiu capacÃß de rebre informacioÃÅ o utilitzar un servei o proveiÃàdor.\nServidor\nUn ordinador o dispositiu remot capacÃß de proveir acceÃÅs a un servei o a informacioÃÅ.\n\n\n\n\nUn dels conceptes m√©s importants en l‚Äôadministraci√≥ de sistemes √©s l‚Äôarquitectura client-servidor. Aquesta arquitectura implica la interacci√≥ entre dos tipus de sistemes: els clients, que sol¬∑liciten serveis o informaci√≥, i els servidors, que processen i responen a aquestes peticions. Aquesta arquitectura √©s √†mpliament utilitzada en entorns inform√†tics, com ara la web, les xarxes d‚Äôordinadors i les aplicacions empresarials.\nPer exemple, quan un usuari accedeix a una p√†gina web, el seu navegador actua com a client i sol¬∑licita la p√†gina al servidor web. El servidor de DNS consulta la URL i retorna l‚Äôadre√ßa IP del servidor web. El navegador envia una petici√≥ HTTP o HTTPS al servidor web, que respon amb els fitxers necessaris per mostrar la p√†gina al navegador. Aquest proc√©s implica la comunicaci√≥ entre el client i el servidor per proporcionar la informaci√≥ sol¬∑licitada a l‚Äôusuari.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#caracter√≠stiques-client-servidor",
    "href": "slides/01-foundations-of-systems-administration.html#caracter√≠stiques-client-servidor",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Caracter√≠stiques Client-Servidor",
    "text": "Caracter√≠stiques Client-Servidor\n\n\nAvantatges\n\nSistema centralitzat Totes les dades en un lloc.\nPol√≠tiques de recuperaci√≥ de dades.\nSeparaci√≥ de la l√≤gica.\n\n\n\n\nInconvenients\n\nAtacs de denegaci√≥ de serveis.\nMan-in-the-middle.\nPhishing.\nSpoofing.\n\n\n\nAquesta arquitectura t√© avantatges i inconvenients. Entre els avantatges es troba la centralitzaci√≥ de les dades, ja que tota la informaci√≥ es troba en un √∫nic lloc, el que facilita la gesti√≥ i la recuperaci√≥ de les dades. A m√©s, permet establir pol√≠tiques de recuperaci√≥ de dades i separar la l√≤gica de negoci de la interf√≠cie d‚Äôusuari, el que facilita la gesti√≥ i el manteniment del sistema. D‚Äôaquesta manera, els desenvolupadors poden centrar-se en la l√≤gica de negoci sense preocupar-se de la interf√≠cie d‚Äôusuari. Per exemple, en una aplicaci√≥ web, la l√≤gica de negoci es pot gestionar al servidor, mentre que la interf√≠cie d‚Äôusuari es pot gestionar al client.\nEls principals inconvenients d‚Äôaquesta arquitectura s√≥n els possibles atacs de denegaci√≥ de serveis, els atacs de l‚Äôhome al mig, el phishing i l‚Äôusurpaci√≥ d‚Äôidentitat. Aquests atacs poden comprometre la seguretat del sistema i posar en perill la informaci√≥ dels usuaris. Per tant, √©s important implementar mesures de seguretat per protegir el sistema i les dades dels usuaris. Un atac de denegaci√≥ de servei enviar√† moltes peticions al servidor per saturar-lo i fer-lo caure. Un atac de l‚Äôhome al mig intercepta les comunicacions entre el client i el servidor per obtenir informaci√≥ sensible. El phishing √©s un atac en qu√® els atacants envien correus electr√≤nics falsos per enganyar els usuaris i obtenir informaci√≥ confidencial. L‚Äôusurpaci√≥ d‚Äôidentitat implica fer-se passar per una altra persona per obtenir acc√©s a informaci√≥ o recursos sensibles. Per tant, √©s molt imporant ser conscients d‚Äôaquests riscos i implementar mesures de seguretat per protegir el sistema i les dades dels usuaris.\nA la figura s‚Äôobserva com m√∫ltiples clients es comuniquen amb un servidor central per obtenir informaci√≥ o serveis. I com multiples servidors poden comunicar-se amb altres servidors per obtenir informaci√≥ o serveis. Tamb√© 1 client pot comunicar-se amb m√∫ltiples servidors. Per exemple, un client pot accedir a un servidor web per obtenir informaci√≥ i a un servidor de correu per enviar correus electr√≤nics. El servidor web pot comunicar-se amb el servidor de correu per enviar notificacions als usuaris.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#servidors-m√©s-comuns",
    "href": "slides/01-foundations-of-systems-administration.html#servidors-m√©s-comuns",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Servidors m√©s comuns",
    "text": "Servidors m√©s comuns\n\n\n\nServidor d‚Äôautenticaci√≥.\nServidor de fitxers.\nServidor de discos.\nServidor de correu.\nServidor de base de dades.\n\n\n\nServidor SSH.\nServidor Web.\nServidor d‚Äôaplicacions.\nServidor de backups.\nServidor de c√≤mput.\n\n\n\nHi ha molts tipus de servidors en funci√≥ de l‚Äôobjectiu que tenen. Alguns dels servidors m√©s comuns s√≥n els servidors d‚Äôautenticaci√≥, que s‚Äôencarreguen de gestionar l‚Äôacc√©s dels usuaris als sistemes; els servidors de fitxers, que emmagatzemen i gestionen els fitxers i documents de l‚Äôempresa; els servidors de discos, que proporcionen emmagatzematge addicional als servidors; els servidors de correu, que gestionen el correu electr√≤nic de l‚Äôempresa; els servidors de base de dades, que emmagatzemen i gestionen les dades de l‚Äôempresa; els servidors SSH, que permeten l‚Äôacc√©s remot als servidors; els servidors web, que allotgen les p√†gines web de l‚Äôempresa; els servidors d‚Äôaplicacions, que executen les aplicacions de l‚Äôempresa; els servidors de backups, que realitzen c√≤pies de seguretat de les dades de l‚Äôempresa; i els servidors de c√≤mput, que realitzen c√†lculs i processos computacionals entre altres.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#exemple-darquitectura-escalable",
    "href": "slides/01-foundations-of-systems-administration.html#exemple-darquitectura-escalable",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Exemple d‚Äôarquitectura escalable",
    "text": "Exemple d‚Äôarquitectura escalable\n\n\n\n\nA la figura proporcionada es mostra una arquitectura t√≠picament utilitzada per al desplegament d‚Äôuna web escalable i fiable. En aquesta arquitectura, el punt d‚Äôentrada √©s un balancejador de c√†rrega, que distribueix les peticions entre els diversos servidors web. Els servidors web, que poden ser r√®pliques, allotgen les p√†gines web i gestionen les peticions dels usuaris. Aquestes p√†gines web necessiten accedir a un servidor de base de dades per emmagatzemar i gestionar les dades associades. Cada base de dades est√† protegida per un servidor de backups, que realitza c√≤pies de seguretat per garantir la recuperaci√≥ en cas de fallades. A m√©s, per millorar la velocitat de c√†rrega de les p√†gines web, es fa servir un dispositiu CDN (Content Delivery Network) que redirigeix les peticions als servidors m√©s propers a l‚Äôusuari.\nAquesta arquitectura √©s √†mpliament utilitzada per allotjar llocs webs, ja que ofereix una combinaci√≥ d‚Äôescalabilitat i fiabilitat, assegurant un rendiment √≤ptim i una alta disponibilitat per als usuaris finals.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#problemes-m√©s-comuns-servidors-i",
    "href": "slides/01-foundations-of-systems-administration.html#problemes-m√©s-comuns-servidors-i",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Problemes m√©s comuns servidors (I)",
    "text": "Problemes m√©s comuns servidors (I)\n\nQui i com accedeix a la informaci√≥?\n\nDeterminar qui (usuari,proc√©s,servei) pot accedir a quins fitxers i directoris i com ho pot fer (lectura, escriptura, execuci√≥).\nPermisos, ACLs, pol√≠tiques de seguretat.\n\nCom protegeixo la informaci√≥?\n\nDeterminar com protegir la informaci√≥ sensible i confidencial.\nEncriptaci√≥, contrasenyes, autenticaci√≥, autoritzaci√≥, auditoria, backups.\n\nCom asseguro el sistema?\n\nProtegir el sistema contra atacs i amenaces.\nFirewall, IDS/IPS, antivirus, actualitzacions, patches, hardening.\n\n\n\nUn dels problemes m√©s comuns en els servidors √©s determinar qui i com accedeix a la informaci√≥. Aix√≤ implica definir qui (usuari, proc√©s, servei) pot accedir a quins fitxers i directoris i com ho pot fer (lectura, escriptura, execuci√≥). Per fer-ho, es poden utilitzar permisos, llistes de control d‚Äôacc√©s (ACLs) i pol√≠tiques de seguretat per garantir que nom√©s els usuaris autoritzats puguin accedir a la informaci√≥.\nUn altre problema com√∫ √©s com protegir la informaci√≥ sensible i confidencial. Aix√≤ implica determinar com protegir la informaci√≥ per evitar l‚Äôacc√©s no autoritzat. Per fer-ho, es poden utilitzar t√®cniques com l‚Äôencriptaci√≥, les contrasenyes, l‚Äôautenticaci√≥, l‚Äôautoritzaci√≥, l‚Äôauditoria i els backups per garantir la seguretat i la privacitat de la informaci√≥.\nUn altre problema √©s com assegurar el sistema contra atacs i amenaces. Aix√≤ implica protegir el sistema contra atacs externs i interns que puguin comprometre la seguretat i la integritat del sistema. Per fer-ho, es poden utilitzar eines com el firewall, els sistemes de detecci√≥ i prevenci√≥ d‚Äôintrusions (IDS/IPS), l‚Äôantivirus, les actualitzacions, els patches i el hardening per garantir la seguretat del sistema.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#problemes-m√©s-comuns-servidors-ii",
    "href": "slides/01-foundations-of-systems-administration.html#problemes-m√©s-comuns-servidors-ii",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Problemes m√©s comuns servidors (II)",
    "text": "Problemes m√©s comuns servidors (II)\n\nCom puc saber si el client √©s qui diu ser?\n\nAutenticar els usuaris i els dispositius.\nContrasenyes, certificats digitals, autenticaci√≥ multifactorial.\n\nQuins avantatges/inconvenients t√© un disseny respecte a un altre?\n\nDeterminar quin disseny √©s m√©s adequat per a les necessitats de l‚Äôempresa.\nEscalabilitat, rendiment, seguretat, disponibilitat, fiabilitat.\n\nCom asseguro el bon funcionament?\n\nGarantir que el sistema funcioni correctament i sense problemes.\nMonitoritzaci√≥, alertes, backups, redund√†ncia, toler√†ncia a fallades.\n\n\n\nUn altre problema √©s com autenticar els usuaris i els dispositius per garantir que siguin qui diuen ser. Aix√≤ implica autenticar els usuaris i els dispositius per garantir que nom√©s els usuaris autoritzats puguin accedir a la informaci√≥. Per fer-ho, es poden utilitzar t√®cniques com les contrasenyes, els certificats digitals i l‚Äôautenticaci√≥ multifactorial per garantir la seguretat i la privacitat de la informaci√≥.\nUn altre problema com√∫ √©s determinar quins avantatges i inconvenients t√© un disseny respecte a un altre. Aix√≤ implica determinar quin disseny √©s m√©s adequat per a les necessitats de l‚Äôempresa en termes d‚Äôescalabilitat, rendiment, seguretat, disponibilitat i fiabilitat. Per fer-ho, es poden avaluar els avantatges i inconvenients de cada disseny per garantir que s‚Äôadeq√ºi a les necessitats de l‚Äôempresa.\nUn altre problema √©s com assegurar el bon funcionament del sistema. Aix√≤ implica garantir que el sistema funcioni correctament i sense problemes. Per fer-ho, es poden utilitzar t√®cniques com la monitoritzaci√≥, les alertes, els backups, la redund√†ncia i la toler√†ncia a fallades per garantir que el sistema funcioni correctament i sense problemes.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#problemes-m√©s-comuns-servidors-iii",
    "href": "slides/01-foundations-of-systems-administration.html#problemes-m√©s-comuns-servidors-iii",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Problemes m√©s comuns servidors (III)",
    "text": "Problemes m√©s comuns servidors (III)\n\nCom dissenyo pol√≠tiques i plans d‚Äôemerg√®ncia si tot falla?\n\nPreparar-se per a situacions d‚Äôemerg√®ncia i desastres.\nPlans de conting√®ncia, plans de recuperaci√≥, plans de resposta a incidents.\n\nCom analitzo post-mortem les causes d‚Äôun atac?\n\nIdentificar les causes d‚Äôun atac i prendre mesures correctives.\nAn√†lisi forense, auditoria, millora cont√≠nua.\n\n\n\nUn altre problema √©s com dissenyar pol√≠tiques i plans d‚Äôemerg√®ncia si tot falla. Aix√≤ implica preparar-se per a situacions d‚Äôemerg√®ncia i desastres per garantir la continu√Øtat del negoci. Per fer-ho, es poden utilitzar plans de conting√®ncia, plans de recuperaci√≥ i plans de resposta a incidents per garantir que l‚Äôempresa pugui respondre de manera efica√ß a situacions d‚Äôemerg√®ncia i desastres.\nFinalment, un altre problema √©s com analitzar post-mortem les causes d‚Äôun atac per identificar les causes i prendre mesures correctives. Aix√≤ implica realitzar una an√†lisi forense, una auditoria i una millora cont√≠nua per identificar les causes d‚Äôun atac i prendre mesures correctives per evitar que es repeteixin en el futur.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-un-centre-de-dades",
    "href": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-un-centre-de-dades",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Qu√® √©s un centre de dades?",
    "text": "Qu√® √©s un centre de dades?\n√âs una instal¬∑laci√≥ que allotja un conjunt de servidors i equipament de xarxa (recursos heterogenis) per proporcionar recursos inform√†tics a diverses aplicacions i serveis (c√†rregues de treball diverses).\n\n\n\n\nEsquema d‚Äôun centre dades\n\n\n\n\nUn centre de dades o data center √©s un espai f√≠sic on s‚Äôallotgen els servidors, els dispositius de xarxa i altres equips inform√†tics necessaris per emmagatzemar, processar i distribuir la informaci√≥. Aquests centres de dades poden ser propis de l‚Äôempresa o externs, i poden ser gestionats per l‚Äôempresa o per un prove√Ødor de serveis. Els centres de dades s√≥n essencials per a les empreses que necessiten emmagatzemar i processar grans quantitats de dades, ja que proporcionen l‚Äôespai, la infraestructura i els recursos necessaris per garantir el funcionament dels sistemes inform√†tics.\nUn exemple notable de reutilitzaci√≥ d‚Äôestructures per a centres de dades √©s l‚Äô√∫s d‚Äôedificis hist√≤rics com esgl√©sies i mines abandonades. Aquests espais, amb les seves condicions √∫niques i sovint amb una infraestructura s√≤lida, s√≥n adaptats per allotjar servidors i equips. Per exemple, l‚Äôantiga esgl√©sia de Saint-Ouen a Fran√ßa ha estat convertida en un centre de dades, aprofitant la seva estructura i espai per complir amb els requisits tecnol√≤gics moderns. D‚Äôaltra banda, la mina de carboni de Pionen a Su√®cia ha estat transformada en un centre de dades subterrani, oferint una protecci√≥ f√≠sica addicional contra desastres naturals i atacs.\nGoogle disposa de servidors al fons del mar, aprofitant l‚Äôenergia de les ones per refredar els servidors i reduir el consum energ√®tic. Aquesta innovadora soluci√≥ aprofita els recursos naturals per millorar l‚Äôefici√®ncia energ√®tica dels centres de dades i reduir l‚Äôimpacte ambiental. Aquestes iniciatives mostren la diversitat de solucions i enfoques per a la gesti√≥ de centres de dades, adaptant-se a les necessitats i condicions espec√≠fiques de cada empresa.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-un-rack",
    "href": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-un-rack",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Qu√® √©s un rack?",
    "text": "Qu√® √©s un rack?\nUn rack √©s una estructura met√†l¬∑lica que allotja servidors, switches, routers i altres equips inform√†tics en un centre de dades.\n\n\n\n\nRacks del CPD de la UdL\n\n\n\n\nUn rack √©s una estructura met√†l¬∑lica que allotja servidors, switches, routers i altres equips inform√†tics en un centre de dades. Aquests racks permeten organitzar i protegir els equips inform√†tics, aix√≠ com facilitar la gesti√≥ dels cables i la refrigeraci√≥ dels equips. Cada rack pot contenir diversos servidors, switches i altres equips, i es pot apilar verticalment per aprofitar l‚Äôespai disponible al centre de dades. A m√©s, els racks disposen de panells laterals i portes per protegir els equips i garantir la seguretat dels servidors i altres equips inform√†tics.\nPer exemple, a la imatge us mostro els racks d‚Äôun passad√≠s del centre de dades de la Universitat de Lleida, on es poden aquests armaris, penseu que cada rack pot contenir diversos servidors, switches i altres equips inform√†tics, i √∫nciament es veu un dels m√∫ltiples passadissos del centre de dades. En aquest centre de dades √©s on tenim el Campus Virtual, les eines i dades dels estudiants i professors, aix√≠ com els servidors de recerca dels grups de recerca de la UdL, entre d‚Äôaltres.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#exemple-de-racks",
    "href": "slides/01-foundations-of-systems-administration.html#exemple-de-racks",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Exemple de racks",
    "text": "Exemple de racks\n\n\n\n\n\n\nRack 1 - GCD - Davant\n\n\n\n\n\n\n\n\n\n\nRack 1 - GCD - Darrera\n\n\n\n\n\nAra us mostro un rack, en concret els servidors s√≥n del grup de recerca en computaci√≥ distribu√Øda. A la part de dalt es pot veure un switch, i la resta s√≥ servidors. A la part de davant es poden veure els servidors i a la part de darrera els cables de xarxa i alimentaci√≥. En aquest cas, hi ha diferents colors de cables per identificar la xarxa a la qual pertanyen i la seva funci√≥.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#exemple-de-servidor",
    "href": "slides/01-foundations-of-systems-administration.html#exemple-de-servidor",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Exemple de servidor",
    "text": "Exemple de servidor\n\n\n\n\n\n\nExterior d‚Äôun servidor\n\n\n\n\n\n\n\n\n\n\nInterior d‚Äôun servidor\n\n\n\n\n\nEn aquestes imatges podem fer zoom i veure els components exteriors i interiors d‚Äôun servidor. A la imatge 8 es pot veure com cada disc t√© un indicador de color per identificar el disc en cas de fallada. A la imatge 9 es pot veure la placa base, els discos durs, la font d‚Äôalimentaci√≥, la mem√≤ria RAM i el processador.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-un-switch",
    "href": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-un-switch",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Qu√® √©s un switch?",
    "text": "Qu√® √©s un switch?\nUn switch √©s un dispositiu de xarxa que connecta diversos equips inform√†tics per permetre la comunicaci√≥ entre ells.\n\n\n\n\nSwitch\n\n\n\n\nUn switch √©s un dispositiu de xarxa que connecta diversos equips per facilitar la comunicaci√≥ entre ells. Cada switch utilitza una taula de comutaci√≥ per dirigir les dades cap al destinatari correcte. Aquesta taula permet al switch con√®ixer quins equips estan connectats a quins ports i escollir la millor ruta per enviar les dades. Els ports del switch es poden configurar per assignar-los a VLANs (Xarxes Locals Virtuals), la qual cosa permet segmentar la xarxa en diverses sub-xarxes, millorant aix√≠ la seguretat i el rendiment global de la xarxa.\nNo confondre un switch amb un router. Un switch connecta diversos equips dins de la mateixa xarxa local, mentre que un router connecta diverses xarxes locals o xarxes WAN (Xarxes d‚Äô√Ärea Ampliada). Els routers utilitzen taula de rutes per determinar la millor ruta per enviar les dades entre xarxes, mentre que els switches utilitzen taula de comutaci√≥ per enviar les dades entre equips dins de la mateixa xarxa local.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#caracter√≠stiques-dun-sistema",
    "href": "slides/01-foundations-of-systems-administration.html#caracter√≠stiques-dun-sistema",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Caracter√≠stiques d‚Äôun sistema",
    "text": "Caracter√≠stiques d‚Äôun sistema\n\nSimplicitat\nEscalabilitat\nSeguretat\nFiabilitat\nDisponibilitat\nRendiment\nFacilitat d‚Äô√∫s\n\n\nEn el disseny de sistemes inform√†tics, √©s important tenir en compte diverses caracter√≠stiques per garantir que el sistema sigui eficient, segur i fiable. Algunes de les caracter√≠stiques m√©s importants d‚Äôun sistema s√≥n la simplicitat, l‚Äôescalabilitat, la seguretat, la fiabilitat, la disponibilitat, el rendiment i la facilitat d‚Äô√∫s. Ara b√©, sovint intentem dotar sistemes amb caracter√≠stiques que no es poden afegir despr√©s de la seva construcci√≥. Per exemple, intentar aplicar ‚Äúseguretat‚Äù despr√©s que les interf√≠cies del sistema hagin estat definides produeix restriccions i limitacions; intentar fer un sistema amb limitacions intr√≠nseques funcionar en circumst√†ncies per les quals no va ser dissenyat produeix ‚Äúhacks‚Äù i ‚Äúworkarounds‚Äù i el resultat final sovint essembla m√©s una casa de cartes fr√†gil que una estructura s√≤lida i fiable.\nPer tant, quan discutim sobre el disseny de sistemes inform√†tics, √©s important tenir en compte aquestes caracter√≠stiques i assegurar-nos que el sistema compleixi els objectius de l‚Äôempresa i sigui capa√ß de respondre a les necessitats dels usuaris",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-lescalabilitat",
    "href": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-lescalabilitat",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Qu√® √©s l‚Äôescalabilitat?",
    "text": "Qu√® √©s l‚Äôescalabilitat?\n\n\nL‚Äôescalabilitat √©s la capacitat d‚Äôun sistema per gestionar un augment de la c√†rrega de treball sense afectar el rendiment.\n\nVertical: augmentar la capacitat d‚Äôun servidor afegint m√©s recursos (CPU, mem√≤ria, disc).\nHoritzontal: augmentar la capacitat d‚Äôun sistema afegint m√©s servidors.\n\n\n\n\n\nEscalabilitat\n\n\n\n\n\n\n\n\n\n\n\n\nExemple\n\n\nEl serveis al n√∫vol permeten pagar nom√©s pel que s‚Äôutilitza, permetent augmentar o disminuir la capacitat segons les necessitats. Et permet estirar els recursos tecnol√≤gics com un globus d‚Äôaire calent, augmentant la capacitat quan √©s necessari i reduint-la quan ja no √©s necessari.\n\n\n\n\n\nEscalabilitat es refereix a la capacitat d‚Äôun sistema per gestionar un augment en la c√†rrega de treball sense que el seu rendiment es vegi afectat. √âs un concepte clau en el disseny de sistemes inform√†tics, especialment en entorns amb variacions en la demanda. Aquesta capacitat s‚Äôaconsegueix mitjan√ßant dues estrat√®gies principals:\n\nEscalabilitat Vertical: Consisteix en millorar la capacitat d‚Äôun servidor afegint m√©s recursos com CPU, mem√≤ria o disc. Aix√≤ permet que un servidor maneje una c√†rrega de treball m√©s gran sense necessitat d‚Äôaddicional hardware.\nEscalabilitat Horitzontal: Consisteix en augmentar la capacitat del sistema afegint m√©s servidors. Aix√≤ distribueix la c√†rrega de treball entre diversos servidors, millorant la capacitat global del sistema.\n\nEn l‚Äôentorn de cloud computing, aquest concepte es relaciona sovint amb elasticitat, que √©s la capacitat d‚Äôun sistema per adaptar-se de manera din√†mica a les fluctuacions de la c√†rrega de treball. Per exemple, una botiga en l√≠nia podria experimentar un augment significatiu de tr√†nsit durant el Black Friday. Un sistema escalable i el√†stic podria gestionar aquest augment de demanda sense perdre rendiment, i despr√©s reduir la capacitat quan la demanda torna a nivells normals.\nL‚Äôobjectiu √©s garantir que el sistema pugui mantenir un rendiment √≤ptim i evitar problemes com temps d‚Äôespera llargs, errors o caigudes, que podrien afectar negativament l‚Äôexperi√®ncia de l‚Äôusuari i els resultats comercials.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-la-fiabilitat",
    "href": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-la-fiabilitat",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Qu√® √©s la fiabilitat?",
    "text": "Qu√® √©s la fiabilitat?\nLa fiabilitat d‚Äôun sistema es refereix a la seva capacitat per operar sense interrupcions durant un per√≠ode determinat. La fiabilitat es mesura habitualment mitjan√ßant el MTBF (Mean Time Between Failures), que indica el temps mitj√† que un sistema pot funcionar abans de fallar. Per exemple, si un sistema t√© un MTBF de 1000 hores, aix√≤ vol dir que, de mitjana, es pot esperar que el sistema falli cada 1000 hores d‚Äô√∫s.\n\n\\[ MTBF = \\frac{Temps\\ total\\ de\\ funcionament}{Nombre\\ de\\ fallades} \\]\n\n\nPer millorar la fiabilitat i minimitzar les interrupcions, es poden implementar t√®cniques com la redund√†ncia. Un exemple com√∫ √©s l‚Äô√∫s de servidors en configuraci√≥ de calent i fred:\n\nServidor en calent: √âs el servidor principal que est√† en funcionament i gestionant les operacions actuals.\nServidor en fred: √âs un servidor de reserva que es mant√© en espera i es posa en marxa nom√©s quan el servidor en calent falla.\n\n\n\nLa fiabilitat √©s la capacitat d‚Äôun sistema per mantenir-se operatiu durant un per√≠ode de temps determinat sense fallar. Es mesura en MTBF (Mean Time Between Failures). Per exemple, un sistema amb un MTBF de 1000 hores es pot esperar que falli cada 1000 hores d‚Äô√∫s.\nUna forma d‚Äôevitar fallades √©s la redund√†ncia, imagineu que tenim un servidor en calent (actual) i un servidor en fred (reserva) que es posa en marxa en cas de fallada del servidor actual. En aquest cas, el sistema √©s m√©s fiable perqu√® si falla el servidor actual, el servidor de reserva pot prendre el relleu sense afectar el servei. La contrapartida √©s que aquesta redund√†ncia implica un cost addicional.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-la-disponibilitat",
    "href": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-la-disponibilitat",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Qu√® √©s la disponibilitat?",
    "text": "Qu√® √©s la disponibilitat?\nLa disponibilitat d‚Äôun sistema es refereix a la seva capacitat per estar operatiu i accessible per als usuaris durant un per√≠ode de temps determinat.\n\nLa disponibilitat es mesura habitualment mitjan√ßant el MTTR (Mean Time To Repair), que indica el temps mitj√† que es triga a reparar un sistema despr√©s d‚Äôuna fallada. Per exemple, si un sistema t√© un MTTR de 2 hores, aix√≤ vol dir que, de mitjana, es triga 2 hores a reparar el sistema despr√©s d‚Äôuna fallada.\n\n\n\\[ Disponibilitat = \\frac{Temps\\ de\\ funcionament}{Temps\\ de\\ funcionament + Temps\\ de\\ reparar} \\]\n\n\n\n\n\n\n\n\nExemple\n\n\nAmazon Web Services (AWS) ofereix un SLA (Service Level Agreement) del 99,99%, el que significa que el servei estar√† disponible el 99,99% del temps. Si el servei no compleix aquest SLA, AWS ha de compensar els clients amb cr√®dits de servei.\n\n\n\n\n\nLa disponibilitat d‚Äôun sistema es refereix a la seva capacitat per estar operatiu i accessible per als usuaris durant un per√≠ode de temps determinat. Es mesura en MTTR (Mean Time To Repair), que indica el temps mitj√† que es triga a reparar un sistema despr√©s d‚Äôuna fallada. Per exemple, si un sistema t√© un MTTR de 2 hores, aix√≤ vol dir que, de mitjana, es triga 2 hores a reparar el sistema despr√©s d‚Äôuna fallada. No confondre amb fiabilitat, que es refereix a la capacitat d‚Äôun sistema per operar sense interrupcions durant un per√≠ode determinat.\nPer exemple, un sistema pot tenir una alta fiabilitat, per√≤ una baixa disponibilitat si el temps de reparaci√≥ despr√©s d‚Äôuna fallada √©s llarg. D‚Äôaltra banda, un sistema pot tenir una baixa fiabilitat, per√≤ una alta disponibilitat si es pot reparar r√†pidament despr√©s d‚Äôuna fallada. La disponibilitat es mesura en percentatge i es pot garantir mitjan√ßant acords de nivell de servei (SLA) que estipulen el temps de disponibilitat del sistema i les compensacions en cas de fallada.\nUn exemple com√∫ d‚Äôalta disponibilitat √©s Amazon Web Services (AWS), que ofereix un SLA del 99,99%, el que significa que el servei estar√† disponible el 99,99% del temps.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#kiss-keep-it-simple-stupid",
    "href": "slides/01-foundations-of-systems-administration.html#kiss-keep-it-simple-stupid",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "KISS: Keep It Simple, Stupid",
    "text": "KISS: Keep It Simple, Stupid\nUn sistema simple √©s m√©s f√†cil de mantenir, gestionar i entendre. Per dissenyar un sistema simple, es poden seguir les seg√ºents pautes:\n\nDivideix i vencer√†s: Divideix el sistema en components m√©s petits i senzills\nMinimitza la complexitat: Evita la complexitat innecess√†ria i mant√©n el sistema senzill\nUtilitza est√†ndards: Utilitza est√†ndards i pr√†ctiques comunes per simplificar el disseny\nDocumenta el sistema: Documenta el sistema per facilitar la comprensi√≥ i el manteniment\nAutomatitza les tasques repetitives: Utilitza la automatitzaci√≥ per simplificar les tasques repetitives i reduir els errors humans\n\n\n\n\n\n\n\n\nExemple\n\n\nUn sistema LEGO √©s un exemple de simplicitat, ja que es pot construir gaireb√© qualsevol cosa convinant peces senzilles. Aquesta simplicitat permet als usuaris crear i modificar les seves pr√≤pies creacions sense necessitat de coneixements t√®cnics avan√ßats.\n\n\n\n\n\nKISS √©s una directriu de disseny que destaca la import√†ncia de la simplicitat. Aplicant aquest principi, els sistemes resulten ser m√©s robustos i f√†cils de gestionar, cosa que millora la seva efic√†cia i la satisfacci√≥ de l‚Äôusuari.\nAlgunes pautes per aplicar el principi KISS en el disseny de sistemes s√≥n:\n\nDivideix i vencer√†s: Divideix el sistema en components m√©s petits i senzills, per exemple, en lloc de tenir un gran mon√≤lit, divideix el sistema en microserveis.\nMinimitza la complexitat: Evita la complexitat innecess√†ria i mant√©n el sistema senzill, per exemple, evita l‚Äô√∫s de tecnologies i funcionalitats que no s√≥n necess√†ries.\nUtilitza est√†ndards: Utilitza est√†ndards i pr√†ctiques comunes per simplificar el disseny, per exemple, segueix les pr√†ctiques de codificaci√≥ i disseny recomanades per la comunitat.\nDocumenta el sistema: Documenta el sistema per facilitar la comprensi√≥ i el manteniment, per exemple, crea documentaci√≥ clara i concisa per als desenvolupadors i els usuaris.\nAutomatitza les tasques repetitives: Utilitza la automatitzaci√≥ per simplificar les tasques repetitives i reduir els errors humans, per exemple, automatitza les tasques de desplegament i proves per millorar l‚Äôefici√®ncia i la fiabilitat del sistema.\n\nUn exemple de simplicitat √©s un sistema LEGO, que permet als usuaris construir gaireb√© qualsevol cosa combinant peces senzilles. Aquesta simplicitat permet als usuaris crear i modificar les seves pr√≤pies creacions sense necessitat de coneixements t√®cnics avan√ßats.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#eines-i-tecnologies-m√©s-comuns",
    "href": "slides/01-foundations-of-systems-administration.html#eines-i-tecnologies-m√©s-comuns",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Eines i tecnologies m√©s comuns?",
    "text": "Eines i tecnologies m√©s comuns?\n\nVirtualitzaci√≥: M√†quines Virtuals, Contenidors\nCloud Computing: Infraestructura com a Servei (IaaS), Plataforma com a Servei (PaaS), Software com a Servei (SaaS)\nAutomatitzaci√≥: Ansible, Puppet, Chef\nInfraestructura com a Codi: Terraform, CloudFormation\nMonitoritzaci√≥: Nagios, Zabbix, Prometheus\nCI/CD: Jenkins, GitLab CI\nSeguretat: PfSense, Suricata, Snort\nBases de Dades: MySQL, PostgreSQL, MongoDB\nServeis Web: Apache, Nginx, Tomcat\nOrquestaci√≥ de Contenidors: Kubernetes, Docker Swarm\n\n\nEn el m√≥n de l‚Äôadministraci√≥ de sistemes, hi ha una gran varietat d‚Äôeines i tecnologies que es poden utilitzar per gestionar i mantenir els sistemes inform√†tics. Algunes de les eines i tecnologies m√©s comuns s√≥n:\n\nVirtualitzaci√≥: La virtualitzaci√≥ permet crear m√†quines virtuals i contenidors per a√Øllar i gestionar els recursos del sistema. Aix√≤ permet millorar l‚Äôefici√®ncia i la flexibilitat dels sistemes, ja que es poden crear m√∫ltiples entorns virtuals en un sol servidor f√≠sic.\nCloud Computing: El cloud computing ofereix serveis inform√†tics a trav√©s d‚ÄôInternet, permetent als usuaris accedir a recursos inform√†tics a la demanda. Aix√≤ inclou Infraestructura com a Servei (IaaS), Plataforma com a Servei (PaaS) i Software com a Servei (SaaS).\nAutomatitzaci√≥: L‚Äôautomatitzaci√≥ permet automatitzar tasques repetitives i reduir els errors humans. Algunes eines d‚Äôautomatitzaci√≥ com Ansible, Puppet i Chef permeten gestionar la configuraci√≥ dels servidors de manera eficient.\nInfraestructura com a Codi: L‚Äôinfraestructura com a codi permet gestionar la infraestructura de manera program√†tica, utilitzant codi per definir i gestionar els recursos del sistema. Eines com Terraform i CloudFormation permeten gestionar la infraestructura com a codi.\nMonitoritzaci√≥: La monitoritzaci√≥ permet supervisar l‚Äôestat dels sistemes i identificar problemes abans que afectin el rendiment. Algunes eines de monitoritzaci√≥ com Nagios, Zabbix i Prometheus permeten supervisar els sistemes en temps real.\nCI/CD: La integraci√≥ cont√≠nua (CI) i el desplegament cont√≠nu (CD) permeten automatitzar el proc√©s de desenvolupament i desplegament de codi. Eines com Jenkins i GitLab CI permeten implementar pr√†ctiques de CI/CD.\nSeguretat: La seguretat dels sistemes √©s una preocupaci√≥ important en l‚Äôadministraci√≥ de sistemes. Algunes eines de seguretat com PfSense, Suricata i Snort permeten protegir els sistemes contra atacs i amenaces.\nBases de Dades: Les bases de dades s√≥n essencials per emmagatzemar i gestionar la informaci√≥ dels sistemes. Algunes bases de dades com MySQL, PostgreSQL i MongoDB s√≥n √†mpliament utilitzades en l‚Äôadministraci√≥ de sistemes.\nServeis Web: Els serveis web s√≥n essencials per proporcionar serveis i aplicacions a trav√©s d‚ÄôInternet. Algunes eines com Apache, Nginx i Tomcat permeten gestionar i desplegar serveis web.\nOrquestaci√≥ de Contenidors: L‚Äôorquestaci√≥ de contenidors permet gestionar i coordinar els contenidors en un entorn de contenidors. Eines com Kubernetes i Docker Swarm permeten gestionar i escalar els contenidors de manera eficient.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#virtualitzaci√≥-m√†quines-virtuals",
    "href": "slides/01-foundations-of-systems-administration.html#virtualitzaci√≥-m√†quines-virtuals",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Virtualitzaci√≥ (M√†quines Virtuals)",
    "text": "Virtualitzaci√≥ (M√†quines Virtuals)\n\n\n\n\nEsquema de tipus de virtualitzaci√≥ de m√†quines virtuals\n\n\n\n\nLa virtualitzaci√≥ √©s una tecnologia clau que permet aprofitar millor els recursos d‚Äôun servidor f√≠sic, creant m√∫ltiples m√†quines virtuals (VMs) que funcionen com a entitats independents, cadascuna amb el seu propi sistema operatiu i aplicacions. Aquest enfocament permet millorar l‚Äôefici√®ncia, ja que m√∫ltiples m√†quines virtuals poden compartir un √∫nic servidor f√≠sic, maximitzant l‚Äô√∫s dels recursos disponibles i oferint m√©s flexibilitat a l‚Äôhora de gestionar sistemes. Per exemple, si voleu executar tant Windows com Linux al vostre ordinador per fer proves, podeu crear m√†quines virtuals per a cada sistema operatiu utilitzant programes com VirtualBox o VMware. Aix√≤ us permet treballar amb diferents entorns sense necessitat de tenir diversos ordinadors f√≠sics. A nivell de servidors, aquesta mateixa idea es porta a gran escala: un sol servidor f√≠sic pot tenir m√∫ltiples m√†quines virtuals a√Øllades, cada una amb la seva funci√≥ espec√≠fica. Aix√≤ permet consolidar serveis i maximitzar l‚Äô√∫s de recursos. Per exemple, en una empresa, un sol servidor f√≠sic podria allotjar VMs per a bases de dades, aplicacions web, i sistemes de correu, cadascun funcionant de manera independent.\n\nVirtualitzaci√≥ Nativa: Tamb√© coneguda com a ‚Äúbare-metal‚Äù, en aquest tipus, l‚Äôhipervisor s‚Äôexecuta directament sobre el maquinari f√≠sic sense cap sistema operatiu intermedi. Exemples d‚Äôaquesta tecnologia inclouen VMware ESXi o Microsoft Hyper-V. Aix√≤ ofereix un rendiment molt elevat, ja que no hi ha cap capa addicional entre el maquinari i l‚Äôhipervisor, ideal per a entorns de producci√≥.\nVirtualitzaci√≥ Allotjada: Aqu√≠, l‚Äôhipervisor s‚Äôexecuta sobre un sistema operatiu ja existent. Per exemple, en KVM (Kernel-based Virtual Machine), s‚Äôutilitza Linux com a sistema operatiu base, i sobre aquest es creen les m√†quines virtuals. Aquest enfocament √©s m√©s f√†cil d‚Äôimplementar per√≤ pot sacrificar una mica de rendiment en comparaci√≥ amb la virtualitzaci√≥ nativa.\nParavirtualitzaci√≥: En aquest model, el sistema operatiu convidat sap que est√† sent virtualitzat i coopera amb l‚Äôhipervisor per millorar el rendiment. Un exemple destacat √©s Xen, que √©s molt utilitzat en entorns cloud per la seva efici√®ncia. Aquest tipus de virtualitzaci√≥ pot oferir un rendiment proper al de la virtualitzaci√≥ nativa, per√≤ amb m√©s flexibilitat.\nVirtualitzaci√≥ Assistida per Hardware: Aquest model aprofita les capacitats del processador per accelerar el proc√©s de virtualitzaci√≥. Processadors moderns com els d‚ÄôIntel (VT-x) o AMD (AMD-V) ofereixen suport per a aquest tipus de virtualitzaci√≥, que √©s utilitzat per tecnologies com VMware o Hyper-V.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#ansible",
    "href": "slides/01-foundations-of-systems-administration.html#ansible",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Ansible",
    "text": "Ansible\nAnsible √©s una eina d‚Äôautomatitzaci√≥ de la configuraci√≥ i gesti√≥ de sistemes. Utilitza un llenguatge senzill basat en YAML per definir les tasques i la configuraci√≥ dels sistemes, i utilitza SSH per connectar-se als servidors i executar les tasques.\n\n\n- hosts: webservers\n  tasks:\n    - name: Install Apache\n      apt:\n        name: apache2\n        state: present\n    - name: Start Apache\n      service:\n        name: apache2\n        state: started\n\nhosts:\n  webservers:\n    - web1.example.com\n    - web2.example.com\n    - web3.example.com\n\n\nAnsible √©s una eina d‚Äôautomatitzaci√≥ que ens permet gestionar la configuraci√≥ dels servidors de manera eficient i fiable. Per exemple, si necessitem instal¬∑lar un servidor web a 10.000 servidors, en lloc de fer-ho manualment en cada servidor, podem utilitzar Ansible per automatitzar aquesta tasca. Amb aquest script indiquem les tasques ha realitzar instal¬∑lar apache i aixecar el servei. I en el fitxer de hosts indiquem els servidors on volem realitzar aquestes tasques.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-el-cloud-computing",
    "href": "slides/01-foundations-of-systems-administration.html#qu√®-√©s-el-cloud-computing",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Qu√® √©s el Cloud Computing?",
    "text": "Qu√® √©s el Cloud Computing?\nLliurament de recursos sota demanda, incloent servidors, emmagatzematge, bases de dades, programari, anal√≠tica, i m√©s, a trav√©s d‚Äôinternet amb un model de pagament per √∫s.\n\n\n\n\nPizza as a service\n\n\n\n\nEl cloud computing es refereix al lliurament sota demanda de serveis inform√†tics, incloent servidors, emmagatzematge, bases de dades, programari, anal√≠tica, i molt m√©s, a trav√©s d‚Äôinternet amb un model de pagament per √∫s.\nAquests recursos s‚Äôexecuten en servidors ubicats en grans centres de dades arreu del m√≥n. Els usuaris poden accedir-hi de manera remota des de qualsevol lloc amb connexi√≥ a internet. En lloc de posseir i mantenir la seva pr√≤pia infraestructura, els usuaris i empreses poden llogar serveis des d‚Äôaplicacions fins a emmagatzematge d‚Äôun prove√Ødor de serveis al n√∫vol. Els recursos es poden combinar com peces de LEGO per crear solucions a mida de les necessitats.\nAquest model ha perm√®s l‚Äôevoluci√≥ de l‚Äôadministraci√≥ de sistemes a un nivell superior, permetent als usuaris centrar-se en el desenvolupament d‚Äôaplicacions i serveis sense haver de preocupar-se de la infraestructura subjacents.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#amazon-web-services",
    "href": "slides/01-foundations-of-systems-administration.html#amazon-web-services",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Amazon Web Services",
    "text": "Amazon Web Services\n\n\n\n\nAmazon Web Services (AWS) √©s un prove√Ødor de serveis de computaci√≥ en n√∫vol que ofereix una √†mplia gamma de serveis, incloent servidors virtuals, emmagatzematge, bases de dades, anal√≠tica, seguretat, i molt m√©s. AWS permet als usuaris i empreses llogar recursos inform√†tics a trav√©s d‚Äôinternet, oferint una plataforma flexible i escalable per a la implementaci√≥ d‚Äôaplicacions en n√∫vol. Altres prove√Ødors de serveis en n√∫vol inclouen Microsoft Azure, Google Cloud Platform, IBM Cloud, i Oracle Cloud, per√≤ en aquest curs utilitzarem AWS per raons de popularitat i disponibilitat de recursos.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#cloudformation",
    "href": "slides/01-foundations-of-systems-administration.html#cloudformation",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "CloudFormation",
    "text": "CloudFormation\nCloudFormation √©s un servei d‚ÄôAWS que permet als desenvolupadors definir i desplegar la infraestructura de manera program√†tica mitjan√ßant codi.\nResources:\n  MyInstance:\n    Type: AWS::EC2::Instance\n    Properties:\n      ImageId: ami-0c55b159cbfafe1f0\n      InstanceType: t2.micro\n      KeyName: my-key-pair\n      SecurityGroups:\n        - my-security-group\n\nAWS CloudFormation √©s un servei que permet als desenvolupadors definir i desplegar la infraestructura de manera program√†tica mitjan√ßant codi. Aquest codi es defineix en plantilles de CloudFormation, que descriuen els recursos necessaris per a la infraestructura, com ara inst√†ncies EC2, grups de seguretat, taules de rutes, ‚Ä¶, En aquest exemple, es defineix una inst√†ncia EC2 amb una imatge AMI, un tipus d‚Äôinst√†ncia, una clau SSH, i un grup de seguretat. Un cop es defineix la plantilla, es pot desplegar la infraestructura amb un sol clic o una sola comanda, automatitzant aix√≠ el proc√©s de desplegament i garantint la consist√®ncia de la infraestructura.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#virtualitzaci√≥-contenidors",
    "href": "slides/01-foundations-of-systems-administration.html#virtualitzaci√≥-contenidors",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Virtualitzaci√≥ (Contenidors)",
    "text": "Virtualitzaci√≥ (Contenidors)\n\n\n\n\nEsquema de tipus de virtualitzaci√≥ de contenidors (Docker)\n\n\n\n\nLa virtualitzaci√≥ de contenidors √©s una tecnologia que permet als desenvolupadors empaquetar aplicacions i les seves depend√®ncies en un contenidor lleuger i port√†til que pot ser executat en qualsevol sistema que tingui un motor de contenidors. Aquest enfocament permet als desenvolupadors crear, distribuir i executar aplicacions de manera eficient i fiable, ja que els contenidors s√≥n autosuficients i a√Øllats de l‚Äôentorn d‚Äôexecuci√≥. A m√©s, els contenidors s√≥n lleugers i port√†tils, el que facilita la seva distribuci√≥ i execuci√≥ en entorns diversos.\nPer exemple, Docker o containerd s√≥n motors de contenidors que permeten als desenvolupadors crear i executar contenidors lleugers i port√†tils. Aquests contenidors poden contenir aplicacions, serveis o microserveis, i es poden executar en qualsevol sistema que tingui un motor de contenidors instal¬∑lat. Aix√≤ permet als desenvolupadors crear, distribuir i executar aplicacions de manera eficient i fiable, ja que els contenidors s√≥n autosuficients i a√Øllats de l‚Äôentorn d‚Äôexecuci√≥.\nLa principal difer√®ncia entre la virtualitzaci√≥ de m√†quines virtuals i la virtualitzaci√≥ de contenidors √©s el nivell d‚Äôabstracci√≥. Mentre que les m√†quines virtuals virtualitzen tota una m√†quina f√≠sica, incloent el sistema operatiu, els contenidors virtualitzen nom√©s l‚Äôaplicaci√≥ i les seves depend√®ncies, compartint el mateix nucli del sistema operatiu hoste. Aix√≤ fa que els contenidors siguin m√©s lleugers i port√†tils que les m√†quines virtuals, i permet als desenvolupadors crear i executar aplicacions de manera m√©s eficient i fiable.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#kubernetes",
    "href": "slides/01-foundations-of-systems-administration.html#kubernetes",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "Kubernetes",
    "text": "Kubernetes\n\n\n\n\nKubernetes\n\n\n\n\nKubernetes √©s una plataforma de codi obert per a la gesti√≥ d‚Äôaplicacions en contenidors. Permet als desenvolupadors automatitzar el desplegament, l‚Äôescalat i la gesti√≥ d‚Äôaplicacions en contenidors, oferint una plataforma flexible i escalable per a la implementaci√≥ d‚Äôaplicacions en entorns de producci√≥. Es basa en una arquitectura de m√†ster i nodes, on el m√†ster √©s responsable de la gesti√≥ i control del cl√∫ster, mentre que els nodes s√≥n els servidors on s‚Äôexecuten les aplicacions en contenidors. Requereix de diferents xarxes (com xarxa de control, xarxa de pod, xarxa de servei) per a la comunicaci√≥ entre els components del cl√∫ster, a m√©s necessita serveis de descobriment de serveis (com etcd) per a la gesti√≥ de la configuraci√≥ i l‚Äôestat del cl√∫ster, controladors de xarxa (com Flannel) per a la comunicaci√≥ entre els nodes, i controladors de volums (com Rook) per a la gesti√≥ de l‚Äôemmagatzematge persistent, un planificador (com kube-scheduler) per a la programaci√≥ de les tasques, i un controlador de replicaci√≥ (com kube-controller-manager) per a la gesti√≥ de la replicaci√≥ de les aplicacions i sobretot el kubelet, que √©s l‚Äôagent que s‚Äôexecuta en cada node i √©s responsable de la gesti√≥ dels contenidors en el node. Com veieu, Kubernetes √©s una plataforma complexa que requereix una configuraci√≥ i gesti√≥ adequades per a garantir el seu funcionament correcte.",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "slides/01-foundations-of-systems-administration.html#thats-all",
    "href": "slides/01-foundations-of-systems-administration.html#thats-all",
    "title": "Fonaments de l‚ÄôAdministraci√≥ de Sistemes",
    "section": "That‚Äôs all",
    "text": "That‚Äôs all\n\n\n\n\n\n\n\n\n\nTake Home Message\n\n\nUn administrador de sistemes combina habilitats de bomber i investigador: ha de solucionar problemes de manera r√†pida i efectiva, per√≤ tamb√© anticipar-se i prevenir-ne de futurs abans que esdevinguin cr√≠tics. Aquesta tasca √©s complexa i diversa, abastant des de la gesti√≥ de cables i servidors f√≠sics fins a l‚Äôadministraci√≥ de pods i sistemes autom√†tics sense servidor (serverless).",
    "crumbs": [
      "Diapositives",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes"
    ]
  },
  {
    "objectID": "exercises/01-foundations-of-systems-administration/02-ex-week1.html",
    "href": "exercises/01-foundations-of-systems-administration/02-ex-week1.html",
    "title": "Emulaci√≥ en mode d‚Äôusuari amb QEMU",
    "section": "",
    "text": "Aquest exercici t‚Äôintroduir√† a l‚Äôemulaci√≥ en mode d‚Äôusuari de QEMU, una eina que et permet executar un programa compilat per a una arquitectura de CPU diferent de la teva m√†quina. Concretament, executar√†s un programa de 32 bits compilat per a ARM en un sistema x86 (processadors Intel o AMD) o ARM de 64 bits (processadors Apple M). Per simplificar l‚Äôexercici, utiltizarem un Hello, World! com a programa d‚Äôexemple.",
    "crumbs": [
      "Activitats",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Activitat 2 ¬∑ Emulaci√≥ en mode d'usuari amb QEMU"
    ]
  },
  {
    "objectID": "exercises/01-foundations-of-systems-administration/02-ex-week1.html#requeriments-previs",
    "href": "exercises/01-foundations-of-systems-administration/02-ex-week1.html#requeriments-previs",
    "title": "Emulaci√≥ en mode d‚Äôusuari amb QEMU",
    "section": "Requeriments previs",
    "text": "Requeriments previs\n\nDisposar d‚Äôuna m√†quina virtual amb Debian configurada segons les instruccions de l‚Äôexercici de configuraci√≥ d‚Äôentorn de virtualitzaci√≥.\nDisposar de les eines b√†siques de desenvolupament instal¬∑lades a la m√†quina virtual (compilador gcc, make, etc.). Pots instal¬∑lar-les com a root amb la comanda seg√ºent: apt install build-essential.",
    "crumbs": [
      "Activitats",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Activitat 2 ¬∑ Emulaci√≥ en mode d'usuari amb QEMU"
    ]
  },
  {
    "objectID": "exercises/01-foundations-of-systems-administration/02-ex-week1.html#objectius",
    "href": "exercises/01-foundations-of-systems-administration/02-ex-week1.html#objectius",
    "title": "Emulaci√≥ en mode d‚Äôusuari amb QEMU",
    "section": "Objectius",
    "text": "Objectius\n\nIntroduir-se en l‚Äô√∫s de QEMU en mode d‚Äôusuari per a l‚Äôemulaci√≥ d‚Äôaplicacions.\nComprendre la difer√®ncia entre compilaci√≥ nativa i compilaci√≥ creuada.\nCompilar i executar un programa senzill per a una arquitectura diferent de la teva m√†quina.",
    "crumbs": [
      "Activitats",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Activitat 2 ¬∑ Emulaci√≥ en mode d'usuari amb QEMU"
    ]
  },
  {
    "objectID": "exercises/01-foundations-of-systems-administration/02-ex-week1.html#tasques",
    "href": "exercises/01-foundations-of-systems-administration/02-ex-week1.html#tasques",
    "title": "Emulaci√≥ en mode d‚Äôusuari amb QEMU",
    "section": "Tasques",
    "text": "Tasques\n\nEscriure i compilar un programa Hello World per a ARM\n\nCrea un fitxer anomenat hello.c amb el seg√ºent contingut:\n\n#include &lt;stdio.h&gt;\n\nint main() {\n    printf(\"Hello, World!\\n\");\n    return 0;\n}\nPer compilar-lo per a l‚Äôarquitectura ARM, necessites un compilador creuat. En aquest laboratori, utilitzarem el GNU ARM toolchain per a Linux. Instal¬∑la‚Äôl amb la seg√ºent comanda:\n# Com a root\napt install gcc-arm-linux-gnueabi\nAra, compila el programa per a ARM amb aquesta comanda:\n# Com a usuari normal\narm-linux-gnueabi-gcc -o helloarm -static hello.c\nAix√≤ generar√† un executable anomenat helloarm. La bandera -static crea un binari est√†ticament enlla√ßat, la qual cosa significa que totes les biblioteques necess√†ries s‚Äôinclouen dins del propi fitxer.\nSi intentes executar helloarm directament, rebr√†s un error:\n./helloarm\n-bash: ./helloarm: no es pot executar el fitxer binari: Error de format d'execuci√≥\nAquest error es produeix perqu√® el teu sistema operatiu no reconeix l‚Äôarquitectura del fitxer. Pots verificar-ho amb la comanda file:\nfile helloarm\nhelloarm: ELF 32-bit LSB executable, ARM, EABI5 version 1 (SYSV), statically linked, not stripped\n\n\nCompilaci√≥ per a l‚Äôarquitectura de la teva MV\nPer entendre la difer√®ncia, ara compila el mateix codi per a l‚Äôarquitectura de la teva m√†quina amb gcc:\ngcc -o hellohost hello.c\nSi l‚Äôexecutes, funcionar√† sense problemes:\n./hellohost\nHello, World!\nPer comprovar-ne l‚Äôarquitectura, utilitza de nou la comanda file:\nfile hellohost\n# Exemple per a x86\nhellohost: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked...\n# Exemple per a Apple M Series (ARM 64-bit)\nhellohost: ELF 64-bit LSB shared object, ARM aarch64, version 1 (SYSV), dynamically linked...\n\n\nExecuci√≥ del programa amb QEMU\nFinalment, per executar el binari ARM a la teva m√†quina, necessites el component de QEMU per a emulaci√≥ en mode d‚Äôusuari. Instal¬∑la‚Äôl amb aquesta comanda:\n# Com a root\napt install qemu-user\nUn cop instal¬∑lat, pots executar el programa helloarm amb l‚Äôemulador qemu-arm:\nqemu-arm helloarm\nHello, World!\n\n\nPreguntes finals\n\nInvestiga quines altres arquitectures s√≥n compatibles amb QEMU en mode d‚Äôusuari. Prova de compilar i executar un programa per a una d‚Äôaquestes arquitectures.\nPer qu√® la compilaci√≥ est√†tica √©s important en aquest context? Per qu√® no cal incloure la bandera -static en la compilaci√≥ normal? Quines avantatges i inconvenients t√© cada enfocament?",
    "crumbs": [
      "Activitats",
      "Unitat 01 ¬∑ Fonaments de l'Administraci√≥ de Sistemes",
      "Activitat 2 ¬∑ Emulaci√≥ en mode d'usuari amb QEMU"
    ]
  },
  {
    "objectID": "exercises/03-fs/08-ex-week5.html",
    "href": "exercises/03-fs/08-ex-week5.html",
    "title": "Administraci√≥ b√†sica de Sistemes de Fitxers",
    "section": "",
    "text": "Crear particions i sistemes de fitxers (ext4, xfs).\nMigrar directoris reals a particions separades amb coher√®ncia i sense p√®rdua de dades.\nConfigurar el muntatge autom√†tic amb UUID i opcions de seguretat (nodev, nosuid, noexec).\nDiagnosticar i recuperar problemes reals: saturaci√≥ d‚Äôespai i corrupci√≥ de sistema de fitxers.\nEines: fdisk, mkfs.*, tune2fs, mount, rsync, xfs_repair, hexedit.",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 8 ¬∑ Administraci√≥ b√†sica de Sistemes de Fitxers"
    ]
  },
  {
    "objectID": "exercises/03-fs/08-ex-week5.html#objectius",
    "href": "exercises/03-fs/08-ex-week5.html#objectius",
    "title": "Administraci√≥ b√†sica de Sistemes de Fitxers",
    "section": "",
    "text": "Crear particions i sistemes de fitxers (ext4, xfs).\nMigrar directoris reals a particions separades amb coher√®ncia i sense p√®rdua de dades.\nConfigurar el muntatge autom√†tic amb UUID i opcions de seguretat (nodev, nosuid, noexec).\nDiagnosticar i recuperar problemes reals: saturaci√≥ d‚Äôespai i corrupci√≥ de sistema de fitxers.\nEines: fdisk, mkfs.*, tune2fs, mount, rsync, xfs_repair, hexedit.",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 8 ¬∑ Administraci√≥ b√†sica de Sistemes de Fitxers"
    ]
  },
  {
    "objectID": "exercises/03-fs/08-ex-week5.html#requeriments-previs",
    "href": "exercises/03-fs/08-ex-week5.html#requeriments-previs",
    "title": "Administraci√≥ b√†sica de Sistemes de Fitxers",
    "section": "Requeriments previs",
    "text": "Requeriments previs\n\nTenir una m√†quina virtual (MV) amb Debian instal¬∑lat.\nCrear un disc dur virtual addicional de 10GB del tipus SATA o NVMe.\nInstal¬∑lar els paquets xfsprogs, rsync, hexedit i build-essential:\napt update -y && apt install xfsprogs rsync hexedit build-essential -y\nTotes les comandes s‚Äôhan d‚Äôexecutar amb permisos de superusuari (root). Per tant, su -.\nCompte amb el nom del disc dur addicional, en aquest cas /dev/nvme0n2, per√≤ pot variar en funci√≥ de la configuraci√≥ de la m√†quina virtual, utilitza la comanda lsblk per a identificar el disc dur addicional. Utilitza el nom correcte actualitzant-lo en les comandes que apareixen en aquest exercici.",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 8 ¬∑ Administraci√≥ b√†sica de Sistemes de Fitxers"
    ]
  },
  {
    "objectID": "exercises/03-fs/08-ex-week5.html#particions-i-sistemes-de-fitxers",
    "href": "exercises/03-fs/08-ex-week5.html#particions-i-sistemes-de-fitxers",
    "title": "Administraci√≥ b√†sica de Sistemes de Fitxers",
    "section": "Particions i Sistemes de Fitxers",
    "text": "Particions i Sistemes de Fitxers\n\nCrear Particions i Sistemes de Fitxers\nAssegurarem que el disc dur addicional est√† detectat pel sistema. En aquest cas, el disc dur √©s /dev/nvme0n2, per√≤ pot variar en funci√≥ de la configuraci√≥ de la m√†quina virtual, utilitza la comanda lsblk per a identificar el disc dur addicional.\nUtilitzarem la comanda fdisk per a crear tres noves particions en el disc dur.\n\nLa primera partici√≥ ser√† per a /var amb el sistema de fitxers ext4, etiqueta var mida 4GB.\nLa segona partici√≥ ser√† per a /tmp amb el sistema de fitxers xfs, sense etiqueta i mida 2GB.\nLa tercera partici√≥ ser√† per a /opt amb el sistema de fitxers ext4, etiqueta opt mida 3GB.\nLa quarta partici√≥ ser√† /home amb el sistema de fitxers ext4, etiqueta home i la resta d‚Äôespai disponible (1GB).\n\nCrearem les noves particions en el disc dur. Podeu utilzar una pipeline per a automatitzar la creaci√≥ de les particions.\necho -e \"n\\np\\n\\n\\n+4G\\nn\\np\\n\\n\\n+2G\\nn\\np\\n\\n\\n+3G\\nn\\np\\n\\n\\n+1G\\nw\" | fdisk /dev/nvme0n2\nEl seg√ºent pas √©s crear els sistemes de fitxers en les particions que acabem de crear i assignar les etiquetes corresponents.\nmkfs.ext4 /dev/nvme0n2p1\ntune2fs -L \"var\" /dev/nvme0n2p1\nmkfs.xfs /dev/nvme0n2p2\nmkfs.ext4 /dev/nvme0n2p3\ntune2fs -L \"opt\" /dev/nvme0n2p3\nmkfs.xfs /dev/nvme0n2p4\ntune2fs -L \"home\" /dev/nvme0n2p4\nMonteu les particions en directoris temporals per a migrar les dades, per a aix√≤, creeu els directoris /mnt/var, /mnt/tmp , /mnt/opt i /mnt/home.\nmkdir /mnt/var /mnt/tmp /mnt/opt /mnt/home\nmount /dev/nvme0n2p1 /mnt/var\nmount /dev/nvme0n2p3 /mnt/opt\nmount /dev/nvme0n2p4 /mnt/home\n\n\n\n\n\n\nNota/tmp\n\n\n\nLa partici√≥ /tmp √©s temporal i no cont√© dades importants, per tant, no la muntarem en aquest pas, ja que no necessitem migrar cap dada. Les seves dades es perdran en el reinici del sistema.\n\n\n\n\nMigrar Directoris a les Noves Particions\nAbans de migrar les dades, √©s important assegurar-se que no hi ha processos que estiguin utilitzant els directoris que volem migrar. Per a aix√≤, podem utilitzar la comanda lsof per a llistar els fitxers oberts en aquests directoris.\nlsof +D /var\nlsof +D /opt\nlsof +D /home\n\n\n\n\n\n\nNotaFitxers oberts\n\n\n\nSi hi ha processos que estan utilitzant els directoris que volem migrar, √©s recomanable aturar aquests processos abans de continuar amb la migraci√≥. Aix√≤ √©s especialment important per al directori /var, ja que cont√© fitxers de registre i altres dades que poden ser utilitzades per diversos serveis del sistema.\n\n\nHi ha moltes comandes per a migrar dades entre directoris, per√≤ en aquest cas utilitzarem la comanda rsync ja que ens permet mostrar el progr√©s de la c√≤pia i tamb√© ens permet reprendre la c√≤pia en cas que es talli la connexi√≥ o hi hagi un error. A m√©s, tamb√© ens permet excloure directoris o fitxers que no volem migrar i ens permet fer c√≤pies incrementals.\nrsync -av /var/ /mnt/var\nrsync -av /opt/ /mnt/opt\nrsync -av /home/ /mnt/home\n\n\n\n\n\n\nNotarsync\n\n\n\nrsync √©s una eina molt potent per a la sincronitzaci√≥ de fitxers i directoris. En aquest cas, utilitzem les opcions -a (mode arxiu) i -v (verbose) per a conservar els permisos, propietaris, marques de temps i per a mostrar el progr√©s de la c√≤pia. La barra inclinada (/) al final dels directoris d‚Äôorigen √©s important perqu√® indica a rsync que nom√©s volem copiar el contingut del directori i no el directori en si mateix. Si no posem la barra inclinada, rsync crear√† un subdirectori amb el mateix nom que el directori d‚Äôorigen dins del directori de destinaci√≥. Per a m√©s informaci√≥ sobre rsync, podeu consultar la documentaci√≥ (man rsync).\n\n\nUn cop copiem les dades, √©s important verificar que les dades s‚Äôhan copiat correctament. Per a aix√≤, podem utilitzar la comanda diff per a comparar els directoris d‚Äôorigen i destinaci√≥.\ndiff -r /var /mnt/var\ndiff -r /opt /mnt/opt\ndiff -r /home /mnt/home\nSi la comanda diff no mostra cap sortida, significa que els directoris s√≥n id√®ntics i que les dades s‚Äôhan copiat correctament. Si hi ha difer√®ncies, la comanda diff mostrar√† les l√≠nies que s√≥n diferents entre els dos directoris.\nMuntarem les noves particions en els directoris corresponents.\nmount /dev/nvme0n2p1 /var\nmount /dev/nvme0n2p3 /opt\nmount /dev/nvme0n2p4 /home\nUtiltiza la comanda df per a comprovar que les particions s‚Äôhan muntat correctament o lsblk per a veure totes les particions i els seus punts de muntatge.\n\n\nConfigurar el Muntatge Autom√†tic\nSi ara reinicieu el sistema reboot, les particions no estaran muntades autom√†ticament. Per a que les particions es muntin autom√†ticament en l‚Äôarrencada del sistema, hem d‚Äôeditar el fitxer /etc/fstab i afegir les noves particions amb els seus punts de muntatge corresponents.\necho \"/dev/nvme0n2p1 /var ext4 defaults 0 0\" &gt;&gt; /etc/fstab\necho \"/dev/nvme0n2p2 /tmp xfs defaults 0 0\" &gt;&gt; /etc/fstab\necho \"/dev/nvme0n2p3 /opt ext4 defaults 0 0\" &gt;&gt; /etc/fstab\necho \"/dev/nvme0n2p4 /home xfs defaults 0 0\" &gt;&gt; /etc/fstab\n\n\n\n\n\n\nNota/etc/fstab\n\n\n\nEl fitxer /etc/fstab cont√© la informaci√≥ de les particions que es muntaran autom√†ticament en l‚Äôarrencada del sistema. Cada l√≠nia del fitxer cont√© la informaci√≥ d‚Äôuna partici√≥. Els camps de cada l√≠nia s√≥n: dispositiu, punt de muntatge, sistema de fitxers, opcions, freq√º√®ncia de comprovaci√≥ i ordre de comprovaci√≥. Podeu consultar la documentaci√≥ del fitxer per a m√©s informaci√≥ (man fstab).\n\n\nPots provar la configuraci√≥ del fitxer /etc/fstab sense reiniciar el sistema amb la comanda mount -a. Aquesta comanda muntar√† totes les particions que estan definides en el fitxer /etc/fstab. Tamb√© podem fer un reboot per a comprovar que les particions es muntin autom√†ticament en l‚Äôarrencada del sistema, sempre hi quan la comanda mount -a no hagi donat cap error.\nEn aquest punt podriam optimitzar la configuraci√≥ particions per a millorar el rendiment del sistema.\n\nUtiltizarem els UUIDs en lloc dels dispositius per a muntar les particions. Aix√≤ ens permetr√† identificar les particions de forma un√≠voca i evitar problemes en cas que els dispositius canvi√Øn d‚Äôidentificador. Per fer-ho podem utilitzar la comanda sed per actualitzar el fitxer /etc/fstab.\nsed -i \"s|/dev/nvme0n2p1|UUID=$(blkid -s UUID -o value /dev/nvme0n2p1)|\" /etc/fstab\nsed -i \"s|/dev/nvme0n2p2|UUID=$(blkid -s UUID -o value /dev/nvme0n2p2)|\" /etc/fstab\nsed -i \"s|/dev/nvme0n2p3|UUID=$(blkid -s UUID -o value /dev/nvme0n2p3)|\" /etc/fstab\nsed -i \"s|/dev/nvme0n2p4|UUID=$(blkid -s UUID -o value /dev/nvme0n2p4)|\" /etc/fstab\n\nüîç Pregunta: En quins casos poden canviar els dispositius o tenir duplicats?\nEls dispositius poden canviar d‚Äôidentificador en cas que es connectin m√©s dispositius al sistema o es canvii l‚Äôordre de connexi√≥ dels dispositius. Aix√≤ pot provocar que les particions es muntin en llocs diferents dels esperats. Per a evitar aquest problema, √©s recomanable utilitzar els UUIDs en lloc dels dispositius per a muntar les particions.\n\nUtilitzarem opcions m√©s espec√≠fiques per protegir la partici√≥ /tmp per a evitar que s‚Äôexecutin programes des de la partici√≥. Utilitzant les opcions nodev, nosuid, i noexec:\n\nEdita el fitxer /etc/fstab i afegeix les opcions nodev, nosuid, i noexec a la partici√≥ /tmp.\n\n\n\n\n\n\n\n\nNotaOpcions de Muntatge\n\n\n\nLa opci√≥ defaults √©s una col¬∑lecci√≥ d‚Äôopcions que s‚Äôutilitzen per defecte en la majoria de sistemes de fitxers. Aquestes opcions inclouen rw (lectura i escriptura), suid (permet l‚Äô√∫s de l‚Äôatribut suid), √©s a dir, evita que es puguin exectuar programaes amb permisos de superusuari, dev (permet l‚Äô√∫s de dispositius), exec (permet l‚Äôexecuci√≥ de fitxers binaris), auto (muntatge autom√†tic en l‚Äôarrencada del sistema), nouser (nom√©s l‚Äôusuari root pot muntar la partici√≥) i async (permet l‚Äôescriptura as√≠ncrona).\n\n\n\nComprova les opcions despr√©s d‚Äôeditar el fitxer /etc/fstab.\n\nmount | grep /tmp\n\nPer aplicar les opcions de muntatge a la partici√≥ /tmp, farem un reboot del sistema.\nTestem les opcions de muntatge de la partici√≥ /tmp:\n\nProva d‚Äôexecutar un programa des de la partici√≥ /tmp com a usuari no privilegiat.\n\necho \"echo 'Hello, World'\" &gt; /tmp/hello.sh\nchmod +x /tmp/hello.sh\n/tmp/hello.sh\nbash /tmp/hello.sh\n\nProva de fer el mateix com a usuari privilegiat.\n\nsu -\n/tmp/hello.sh\nbash /tmp/hello.sh\n\nüëÅÔ∏è Observaci√≥:\nObserveu que la opci√≥ noexec impedeix la execuci√≥ dels binaris per√≤ no ens protegeix contra l‚Äôexecuci√≥ de scripts de bash.\n\n\nProva d‚Äôaccedir a un dispositiu creat a /tmp:\n\nInicialitza un dispositiu a /tmp utilitzant la comanda mknod.\n\nmknod /tmp/dispositiu c 1 3\n\n‚ö†Ô∏è Compte:\nLa comanda mknod √∫nica i exclusivament la poden fer els usuaris amb permisos de superusuari. Per tant, feu servir la comanda su per a canviar a l‚Äôusuari root abans de fer servir la comanda mknod.\n\n\nPer accedir al dispositiu, utilitza la comanda cat.\n\ncat /tmp/dispositiu\n\nüëÅÔ∏è Observaci√≥:\nFixeu-vos que quan intento accedir a un dispositiu al directori actual, no hi ha cap problema. Per√≤ quan intento accedir al dispositiu creat a /tmp, rebre un missatge d‚Äôerror indicant que no es pot accedir al dispositiu. Aix√≤ √©s degut a la opci√≥ nodev que impedeix l‚Äôacc√©s a dispositius en la partici√≥.\n\n\n\nPer veure, les implicacions de la opci√≥ nosuid, podem realitzar el seg√ºent experiment:\nPer fer-ho, crearem un executable amb c que ens indicar√† l‚Äôidentificador de l‚Äôusuari real i l‚Äôidentificador de l‚Äôusuari efectiu. On l‚Äôusuari real √©s l‚Äôusuari que ha iniciat la sessi√≥ i l‚Äôusuari efectiu √©s l‚Äôusuari que executa el programa. Si un programa t√© el bit suid activat, l‚Äôusuari efectiu ser√† l‚Äôusuari propietari del programa i no l‚Äôusuari que l‚Äôha executat.\n#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n\nint main() {\n    printf(\"Effective user ID: %d\\n\", geteuid());\n    printf(\"Real user ID: %d\\n\", getuid());\n    return 0;\n}\nCompilem el programa amb la comanda gcc.\ngcc -o /tmp/suid /tmp/suid.c\nDesactiva la opci√≥ nosuid i tamb√© la opci√≥ noexec per a la partici√≥ /tmp. Per fer-ho, utilitza l‚Äôusuari root per a editar el fitxer /etc/fstab.\nRemunta la partici√≥ /tmp.\nProva d‚Äôexecutar el programa com a usuari no privilegiat.\n/tmp/suid\nActiva la opci√≥ nosuid i torna a provar d‚Äôexecutar el programa.\n/tmp/suid\n\n\nüëÅÔ∏è Observaci√≥:\nFixeu-vos que quan la opci√≥ nosuid est√† activada, no es pot executar el programa amb permisos de superusuari. Aix√≤ √©s important per a evitar que els usuaris no privilegiats puguin executar programes amb permisos de superusuari. Aquesta opci√≥ pot permetre escalar privilegis i comprometre la seguretat del sistema.\n\n\n\nüîç Pregunta: Per qu√® √©s important tenir els directoris /var, /tmp i /opt en particions diferents?\nLa ra√≥ principal per a tenir els directoris /var, /tmp i /opt en particions diferents √©s per a millorar el rendiment i la seguretat del sistema. El directori /var cont√© dades variables com ara logs, bases de dades, correu electr√≤nic, etc. Si aquest directori es queda sense espai, el sistema podria fallar. El mateix raonament s‚Äôaplica al directori /tmp i /opt. Per aix√≤, √©s important tenir-los en particions separades per a evitar que el sistema falli. A m√©s, tenir els directoris /var, /tmp i /opt en particions separades tamb√© millora la seguretat del sistema ja que si una partici√≥ falla, les altres particions seguiran funcionant.\n\nAnem a fer una simulaci√≥ de com respon el sistema en cas de no tenir els directoris /var, /tmp i /opt en particions separades. Per a aix√≤, simularem que el directori /opt es va omplint fins a ocupar tot l‚Äôespai disponible en la partici√≥ principal del sistema.\n\nDesmuntem la partici√≥ /opt per a poder continuar amb l‚Äôexercici.\numount /opt\nCreeu un fitxer de 20GB al directori /opt:\ndd if=/dev/urandom of=/opt/fitxer bs=1M count=20480\nComprova l‚Äôestat del sistema.\ndf -h\n\n\n\nComprova l‚Äôestat del sistema\n\n\nIntenta instal¬∑lar un paquet amb apt i comprova que el sistema falla.\napt install htop\n\n\n\nIntenta instal¬∑lar un paquet amb apt i comprova que el sistema falla\n\n\nCom podeu veure, el sistema fallar√† ja que no t√© espai suficient per a instal¬∑lar el paquet. Aix√≤ √©s un problema greu ja que el sistema no podr√† funcionar correctament fins que no alliberem espai en la partici√≥ principal.\nElimina el fitxer que has creat per a poder continuar amb la resta de l‚Äôexercici.\nrm /opt/fitxer\nMunteu la partici√≥ /opt i torneu a crear el fitxer per a omplir el directori.\nmount /dev/nvme0n2p3 /opt\ndd if=/dev/urandom of=/opt/fitxer bs=1M count=20480\nAra √∫nicament teniu la partici√≥ /opt plena; per√≤ el sistema pot continuar fent tasques:\napt install htop",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 8 ¬∑ Administraci√≥ b√†sica de Sistemes de Fitxers"
    ]
  },
  {
    "objectID": "exercises/03-fs/08-ex-week5.html#simulant-una-corrupci√≥-a-home",
    "href": "exercises/03-fs/08-ex-week5.html#simulant-una-corrupci√≥-a-home",
    "title": "Administraci√≥ b√†sica de Sistemes de Fitxers",
    "section": "Simulant una corrupci√≥ a /home",
    "text": "Simulant una corrupci√≥ a /home\nEn aquest escenari simularem que hem patit una corrupci√≥ a la partici√≥ /home i quines eines podem utiltzar per intentar recuperar les dades. B√†sicament editarem alguns bits de la partici√≥ /home amb un editor hexadecimal per a simular la corrupci√≥ i despr√©s utilitzarem l‚Äôeina xfs_repair per a intentar recuperar les dades.\nEl primer pas que farem ser√† migrar el directori /home a una partici√≥ diferent per a poder simular la corrupci√≥. A continuaci√≥, simularem la corrupci√≥ i finalment recuperarem les dades.\nAra podem crear fitxers i directoris al directori /home del vostre usuari normal, en el meu cas jordi.\nmkdir codi\nmkdir dades\ntouch dades/pokemon.csv\ntouch codi/main.c\ntouch codi/Makefile\ntouch codi/README.md\ntouch .vim\nPer a simular una corrupci√≥ editarem alguns valors de la partici√≥ /home amb un editor hexadecimal.\n\nDesmuntem la partici√≥ /home.\numount /home\n\nCompte!: Si esteu connectats per SSH, no podreu desmuntar la partici√≥ /home ja que el vostre usuari est√† utilitzant aquesta partici√≥. En la primera sessi√≥. Per tant, haure de fer-ho a la consola de la m√†quina virtual.\n\nObrirem la partici√≥ /home amb un editor hexadecimal:\n\nhexedit /dev/nvme0n2p4 \n\nModifiqueu bits a l‚Äôatzar i deseu els canvis. Per fer-ho escriviu damunt dels valors hexadecimals altres valors. Un cop fet guardeu amb Ctrl + X i Y.\nAra intentarem muntar la partici√≥ /home per a comprovar que ha estat corrompuda.\n\nmount /home\nSi la partici√≥ /home s‚Äôha corromput, haur√≠eu de veure un missatge d‚Äôerror com aquest:\n\nEls diferents sistemes de fitxers tenen eines per a comprovar la integritat dels fitxers. Per exemple, el sistema de fitxers xfs t√© l‚Äôeina xfs_ncheck que permet comprovar la integritat dels fitxers.\nxfs_ncheck /dev/nvme0n2p4\nPer a reparar la partici√≥ /home utilitzarem l‚Äôeina xfs_repair.\nxfs_repair /dev/nvme0n2p4\nUn cop reparada la partici√≥ /home, la muntarem de nou.\nmount /home\nComprovarem que la partici√≥ /home s‚Äôha muntat correctament i cont√© els fitxers que hav√≠em creat.\nls /home",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 8 ¬∑ Administraci√≥ b√†sica de Sistemes de Fitxers"
    ]
  },
  {
    "objectID": "exercises/03-fs/10-ex-week7.html",
    "href": "exercises/03-fs/10-ex-week7.html",
    "title": "Laboratori: Desplegament d‚Äôun servidor web amb LVM",
    "section": "",
    "text": "En aquest laboratori aprendrem a utilitzar LVM (Logical Volume Manager) per administrar l‚Äôemmagatzematge d‚Äôun servidor web. Simularem un entorn real on diferents tipus de dades (codi font, dades de la web, i fitxers temporals) es gestionen mitjan√ßant volums l√≤gics, millorant la flexibilitat i escalabilitat del sistema.",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 10 ¬∑ Administraci√≥ de volums l√≤gics amb LVM"
    ]
  },
  {
    "objectID": "exercises/03-fs/10-ex-week7.html#objectius",
    "href": "exercises/03-fs/10-ex-week7.html#objectius",
    "title": "Laboratori: Desplegament d‚Äôun servidor web amb LVM",
    "section": "üéØ Objectius",
    "text": "üéØ Objectius\n\nEntendre el funcionament i components de LVM: PV, VG i LV.\n\nCrear, formatar i muntar volums l√≤gics per a un servei web.\n\nAmpliar o reduir la mida dels volums.\n\nCrear i utilitzar snapshots per fer c√≤pies de seguretat en calent.",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 10 ¬∑ Administraci√≥ de volums l√≤gics amb LVM"
    ]
  },
  {
    "objectID": "exercises/03-fs/10-ex-week7.html#escenari",
    "href": "exercises/03-fs/10-ex-week7.html#escenari",
    "title": "Laboratori: Desplegament d‚Äôun servidor web amb LVM",
    "section": "üß± Escenari",
    "text": "üß± Escenari\nGestionarem una aplicaci√≥ web desplegada en un servidor AlmaLinux.\n\n\n\nDirectori\nFunci√≥\nExemple de contingut\n\n\n\n\n/opt/webapp/sources\nCodi font Django\nPython, HTML, JS\n\n\n/opt/webapp/data\nDades, imatges, logs\nCSV, JPG, LOG\n\n\n/opt/webapp/run\nFitxers temporals i sockets\nPID, sock",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 10 ¬∑ Administraci√≥ de volums l√≤gics amb LVM"
    ]
  },
  {
    "objectID": "exercises/03-fs/10-ex-week7.html#preparaci√≥-de-la-m√†quina-virtual",
    "href": "exercises/03-fs/10-ex-week7.html#preparaci√≥-de-la-m√†quina-virtual",
    "title": "Laboratori: Desplegament d‚Äôun servidor web amb LVM",
    "section": "üß© Preparaci√≥ de la m√†quina virtual",
    "text": "üß© Preparaci√≥ de la m√†quina virtual\n\nCrea una nova MV amb AlmaLinux i un disc principal de 20 GB.\nDurant la instal¬∑laci√≥, selecciona LVM com a esquema de particionat.\nAfegeix dos discos addicionals de 20 GB cadascun (ex. nvme0n2 i nvme0n3).\nComprova l‚Äôestat inicial del sistema:\nlsblk\nHauries de veure una sortida semblant a:\nnvme0n1     20G  \n‚îú‚îÄnvme0n1p1 600M  /boot/efi\n‚îú‚îÄnvme0n1p2   1G  /boot\n‚îú‚îÄnvme0n1p3   2G  [SWAP]\n‚îî‚îÄnvme0n1p4 16.4G /\nnvme0n2     20G\nnvme0n3     20G",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 10 ¬∑ Administraci√≥ de volums l√≤gics amb LVM"
    ]
  },
  {
    "objectID": "exercises/03-fs/10-ex-week7.html#activitat-1.-creaci√≥-dels-volums-f√≠sics-i-grup-de-volums",
    "href": "exercises/03-fs/10-ex-week7.html#activitat-1.-creaci√≥-dels-volums-f√≠sics-i-grup-de-volums",
    "title": "Laboratori: Desplegament d‚Äôun servidor web amb LVM",
    "section": "üß† Activitat 1. Creaci√≥ dels volums f√≠sics i grup de volums",
    "text": "üß† Activitat 1. Creaci√≥ dels volums f√≠sics i grup de volums\n\nPas 1: Crear els volums f√≠sics\npvcreate /dev/nvme0n2 /dev/nvme0n3\n\n\n\n\n\n\nAlertaüí° Comprova l‚Äôestat dels PV\n\n\n\nQuin √©s l‚Äôestat del camp Allocatable abans de crear el grup de volums?\n\n\n\n\nPas 2: Crear el grup de volums vg_webapp\nvgcreate vg_webapp /dev/nvme0n2 /dev/nvme0n3\n\n\n\n\n\n\nAlertaüí° Comprova l‚Äôestat del VG\n\n\n\n\nQuina √©s la mida total del grup de volums vg_webapp?\nQuants extents t√© el VG i quina √©s la mida de cada extent?",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 10 ¬∑ Administraci√≥ de volums l√≤gics amb LVM"
    ]
  },
  {
    "objectID": "exercises/03-fs/10-ex-week7.html#activitat-2.-creaci√≥-i-muntatge-dels-volums-l√≤gics",
    "href": "exercises/03-fs/10-ex-week7.html#activitat-2.-creaci√≥-i-muntatge-dels-volums-l√≤gics",
    "title": "Laboratori: Desplegament d‚Äôun servidor web amb LVM",
    "section": "‚öôÔ∏è Activitat 2. Creaci√≥ i muntatge dels volums l√≤gics",
    "text": "‚öôÔ∏è Activitat 2. Creaci√≥ i muntatge dels volums l√≤gics\n\nPas 1: Crear els LV\nlvcreate -L 1G -n lv_sources vg_webapp\nlvcreate -L 10G -n lv_data vg_webapp\nlvcreate -L 1G -n lv_run vg_webapp\n\n\nPas 2: Formatar els LV amb sistemes de fitxers\nmkfs.xfs /dev/vg_webapp/lv_sources\nmkfs.ext4 /dev/vg_webapp/lv_data\nmkfs.xfs /dev/vg_webapp/lv_run\n\n\n\n\n\n\nAlertaüí° Discussi√≥\n\n\n\nPer qu√® podria ser interessant utilitzar xfs per a /run i ext4 per a /data o al rev√©s?\n\n\n\n\nPas 3: Muntar els volums\nmkdir -p /opt/webapp/{sources,data,run}\nmount /dev/vg_webapp/lv_sources /opt/webapp/sources\nmount /dev/vg_webapp/lv_data /opt/webapp/data\nmount /dev/vg_webapp/lv_run /opt/webapp/run\n\n\n\n\n\n\nAlertaüí° Comprova els muntatges\n\n\n\n\nUtilitza df -h per verificar que els volums estan muntats correctament.\nAfegeix les entrades corresponents a /etc/fstab per muntar-los autom√†ticament en reiniciar.",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 10 ¬∑ Administraci√≥ de volums l√≤gics amb LVM"
    ]
  },
  {
    "objectID": "exercises/03-fs/10-ex-week7.html#activitat-3.-redimensionar-volums-l√≤gics",
    "href": "exercises/03-fs/10-ex-week7.html#activitat-3.-redimensionar-volums-l√≤gics",
    "title": "Laboratori: Desplegament d‚Äôun servidor web amb LVM",
    "section": "üìè Activitat 3. Redimensionar volums l√≤gics",
    "text": "üìè Activitat 3. Redimensionar volums l√≤gics\n\nEscenari 1: Augmentar lv_data de 10 GB a 20 GB\nQuan s‚Äôamplia un volum l√≤gic, s‚Äôafegeixen nous extents al final del volum. Si el sistema de fitxers √©s ext4, cal actualitzar-ne la taula d‚Äôespai amb resize2fs.\nlvextend -L +10G /dev/vg_webapp/lv_data\nresize2fs /dev/vg_webapp/lv_data\n\n\nEscenari 2: Reduir lv_run de 1 GB a 500 MB\nEl sistema de fitxers xfs no permet reduir volums.\numount /opt/webapp/run\nlvremove /dev/vg_webapp/lv_run\nlvcreate -L 500M -n lv_run vg_webapp\nmkfs.xfs -f /dev/vg_webapp/lv_run\nmount /dev/vg_webapp/lv_run /opt/webapp/run\n\n\n\n\n\n\nAlertaüí° Reduir o Ampliar\n\n\n\nQu√® creus que √©s m√©s segur: redimensionar un volum l√≤gic cap amunt o cap avall? Per qu√®?",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 10 ¬∑ Administraci√≥ de volums l√≤gics amb LVM"
    ]
  },
  {
    "objectID": "exercises/03-fs/10-ex-week7.html#activitat-4.-creaci√≥-dsnapshots",
    "href": "exercises/03-fs/10-ex-week7.html#activitat-4.-creaci√≥-dsnapshots",
    "title": "Laboratori: Desplegament d‚Äôun servidor web amb LVM",
    "section": "üíæ Activitat 4. Creaci√≥ d‚Äôsnapshots",
    "text": "üíæ Activitat 4. Creaci√≥ d‚Äôsnapshots\nEls snapshots LVM permeten fer c√≤pies de seguretat en calent del sistema de fitxers. Aquest mecanisme utilitza la t√®cnica Copy-on-Write (COW) per mantenir versions consistents de les dades mentre s‚Äôestan utilitzant.\n\nPas 1: Crear dades\necho \"Hello, World1!\" &gt; /opt/webapp/data/file1.txt\necho \"Hello, World2!\" &gt; /opt/webapp/data/file2.txt\necho \"Hello, World3!\" &gt; /opt/webapp/data/file3.txt\n\n\nPas 2: Crear snapshot\nlvcreate -L 1G -s -n snap_data /dev/vg_webapp/lv_data\n\n\nPas 3: Muntar snapshot\nmkdir /snaps\nmount /dev/vg_webapp/snap_data /snaps\ndiff -r /opt/webapp/data /snaps\n\n\nPas 4: Modificar dades originals i comparar\ndd if=/dev/zero of=/opt/webapp/data/file3.txt bs=1M count=100\ndiff -r /opt/webapp/data /snaps\n\n\n\n\n\n\nAlertaüí° Reflexi√≥: Mida snapshot\n\n\n\nQu√® passa amb la mida de l‚Äôsnapshot quan s‚Äôescriuen noves dades?\n\n\n\n\nPas 5: Crear un segon snapshot i comprovar versions\nlvcreate -L 1G -s -n snap_data2 /dev/vg_webapp/lv_data\numount /snaps\nmount /dev/vg_webapp/snap_data2 /snaps\nls -li /opt/webapp/data /snaps/\n\n\n\n\n\n\nAlertaInodes\n\n\n\nEls fitxers inalterats comparteixen inode; els modificats tenen un inode nou.\n\n\n\n\nüßπ Neteja\numount /snaps\nlvremove /dev/vg_webapp/snap_data\nlvremove /dev/vg_webapp/snap_data2",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 10 ¬∑ Administraci√≥ de volums l√≤gics amb LVM"
    ]
  },
  {
    "objectID": "exercises/03-fs/10-ex-week7.html#exercicis-addicionals",
    "href": "exercises/03-fs/10-ex-week7.html#exercicis-addicionals",
    "title": "Laboratori: Desplegament d‚Äôun servidor web amb LVM",
    "section": "Exercicis addicionals",
    "text": "Exercicis addicionals\n\nDescriu els passos per migrar un LV existent a un altre PV utilitzant pvmove. Quin avantatge t√© aquest procediment respecte a copiar fitxers manualment?\nConfigura un mirall de /opt/webapp/data utilitzant LVM. Realitza una prova simulant la fallada d‚Äôun disc i comprova que les dades es mantenen accessibles. Quines implicacions t√© sobre el rendiment?\nCerca informaci√≥ sobre l‚Äôeina fio i realitza un experiment per avaluar el rendiment d‚Äôun volum striped. Representa una gr√†fica amb els resultats per diferents valors de --stripe-size (64K, 128K, 256K, 512K, 1M, 2M). Interpreta la relaci√≥ entre mida de bloc i rendiment.",
    "crumbs": [
      "Activitats",
      "Unitat 03 ¬∑ Sistemes de fitxers",
      "Activitat 10 ¬∑ Administraci√≥ de volums l√≤gics amb LVM"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-lord-of-system.html",
    "href": "exercises/04-accounts/01-lord-of-system.html",
    "title": "Laboratori: Gesti√≥ de comptes en un servidor Linux",
    "section": "",
    "text": "Aprendre a gestionar comptes en servidors UNIX/Linux.\nFamiliaritzar-se amb els mecanismes de protecci√≥ i control d‚Äôusuaris.",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 11 ¬∑ Gesti√≥ de comptes en un servidor Linux"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-lord-of-system.html#objectius",
    "href": "exercises/04-accounts/01-lord-of-system.html#objectius",
    "title": "Laboratori: Gesti√≥ de comptes en un servidor Linux",
    "section": "",
    "text": "Aprendre a gestionar comptes en servidors UNIX/Linux.\nFamiliaritzar-se amb els mecanismes de protecci√≥ i control d‚Äôusuaris.",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 11 ¬∑ Gesti√≥ de comptes en un servidor Linux"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-lord-of-system.html#requisits",
    "href": "exercises/04-accounts/01-lord-of-system.html#requisits",
    "title": "Laboratori: Gesti√≥ de comptes en un servidor Linux",
    "section": "Requisits",
    "text": "Requisits\nEn aquesta pr√†ctica, es demana que es cre√Øn comptes d‚Äôusuari en un sistema Linux. Aquests comptes hauran de ser creats amb diferents permisos i restriccions, i s‚Äôhauran de configurar els grups i els permisos de fitxers i directoris per a cada usuari. Per tant, reviseu les comandes i els conceptes seg√ºents abans de comen√ßar:\n\nuseradd: Aquesta comanda s‚Äôutilitza per crear nous usuaris en un sistema Linux. Cada usuari t√© un identificador √∫nic (UID) i pot ser assignat a un o m√©s grups. Aquesta comanda tamb√© pot crear els directoris inicials (home directories) pels usuaris.\ngroupadd: Aquesta comanda s‚Äôutilitza per crear nous grups en un sistema Linux. Els grups s√≥n una manera de gestionar col¬∑leccions d‚Äôusuaris, permetent una administraci√≥ efica√ß de permisos i acc√©s als recursos del sistema. Els grups ajuden a organitzar i controlar els usuaris amb un mateix conjunt de permisos.\nusermod: Aquesta comanda s‚Äôutilitza per modificar els atributs d‚Äôun usuari en un sistema Linux. Aquests atributs poden incloure el nom de l‚Äôusuari, el directori home, el grup principal, el shell, el UID, el GID, etc.\npasswd: Aquesta comanda s‚Äôutilitza per canviar la contrasenya d‚Äôun usuari en un sistema Linux. Aquesta comanda permet als usuaris canviar la seva pr√≤pia contrasenya o als administradors canviar la contrasenya d‚Äôaltres usuaris.\nchown: Aquesta comanda s‚Äôutilitza per canviar el propietari i el grup d‚Äôun fitxer o directori en un sistema Linux. Aquesta comanda permet als usuaris canviar el propietari i el grup d‚Äôun fitxer o directori, sempre que tinguin els permisos necessaris.\nchmod: Aquesta comanda s‚Äôutilitza per canviar els permisos d‚Äôun fitxer o directori en un sistema Linux. Aquesta comanda permet als usuaris canviar els permisos d‚Äôun fitxer o directori, especificant els permisos per a propietaris, grups i altres usuaris.\nsetfacl/getfacl: Aquestes comandes s‚Äôutilitzen per establir i obtenir llistes de control d‚Äôacc√©s (ACL) en un sistema Linux. Les ACL s√≥n una manera de controlar l‚Äôacc√©s als fitxers i directoris, permetent als usuaris especificar permisos m√©s detallats que els permisos tradicionals de propietari, grup i altres usuaris.",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 11 ¬∑ Gesti√≥ de comptes en un servidor Linux"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-lord-of-system.html#preparant-el-servidor",
    "href": "exercises/04-accounts/01-lord-of-system.html#preparant-el-servidor",
    "title": "Laboratori: Gesti√≥ de comptes en un servidor Linux",
    "section": "Preparant el servidor",
    "text": "Preparant el servidor\nInstancieu un servidor AMI Linux a la plataforma AWS. Aquest servidor ser√† el vostre Middlearth.\n\nActualitzar totes les llibreries amb sudo dnf update -y.\nInstal¬∑lar un editor de text (vim o nano) amb sudo dnf install vim -y.\nInstal¬∑lar la shell tcsh amb sudo dnf install tcsh -y.\nActualitzar el nom de l‚Äôamfitri√≥ amb: sudo hostnamectl set-hostname middlearth.",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 11 ¬∑ Gesti√≥ de comptes en un servidor Linux"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-lord-of-system.html#mostrant-informaci√≥-de-benvinguda",
    "href": "exercises/04-accounts/01-lord-of-system.html#mostrant-informaci√≥-de-benvinguda",
    "title": "Laboratori: Gesti√≥ de comptes en un servidor Linux",
    "section": "Mostrant informaci√≥ de benvinguda",
    "text": "Mostrant informaci√≥ de benvinguda\nEl fitxer /etc/motd √©s l‚Äôarxiu on es guarda un missatge de benvinguda; normalment √©s un arxiu de text senzill que es mostra als usuaris quan inicien sessi√≥. Pot contenir informaci√≥ com la benvinguda al sistema, informaci√≥ d‚Äôactualitat, pol√≠tiques de l‚Äôempresa, enlla√ßos a recursos importants o qualsevol altra cosa que es consideri √∫til per als usuaris en el moment d‚Äôiniciar sessi√≥.\nCopieu el text seg√ºent al fitxer /etc/motd:\n#                Bienvenido a la tierra media!                  #\n#                            *  *  *                            #\n#                         *  *  *  *  *                         #\n#                      *  *  *  *  *  *  *                      #\n#                      *  *  *  *  *  *  *                      #\n#                      *  *  *  *  *  *  *                      #\n#                         *  *  *  *  *                         #\n#                            *  *  *                            #\n# El hogar est√° atr√°s, el mundo por delante, y ha               #\n# y muchos caminos que recorrer a trav√©s de la                  #\n# sombras hasta el borde de la noche, hasta que                 #\n# las estrellas est√©n encendidas                                #\n#################################################################\n sudo vim /etc/motd \n# Afegiu la informaci√≥ a l'arxiu.\n exit\nTornem a iniciar sessi√≥ SSH. Per veure el nostre banner, despr√©s de fer login.",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 11 ¬∑ Gesti√≥ de comptes en un servidor Linux"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-lord-of-system.html#mostrant-informaci√≥-connexions-remotes",
    "href": "exercises/04-accounts/01-lord-of-system.html#mostrant-informaci√≥-connexions-remotes",
    "title": "Laboratori: Gesti√≥ de comptes en un servidor Linux",
    "section": "Mostrant informaci√≥: Connexions remotes",
    "text": "Mostrant informaci√≥: Connexions remotes\nL‚Äôarxiu /etc/issue.net √©s similar al missatge del dia (/etc/motd), per√≤ aquest s‚Äôutilitza per mostrar un missatge als usuaris abans que aquests s‚Äôautentiquin en un servidor mitjan√ßant protocols com SSH. Aquest missatge normalment cont√© informaci√≥ b√†sica o una benvinguda als usuaris quan intenten connectar-se al servidor.\nPer activar-ho:\n\nCopieu el contingut del fitxer /etc/issue.net a /etc/issue.net.default. D‚Äôaquesta manera sempre mantindrem una c√≤pia del fitxer original sense editar.\nCopieu el seg√ºent text al fitxer /etc/issue.net:\n\n#################################################################\n#                   _    _           _   _                      #\n#                  / \\  | | ___ _ __| |_| |                     #\n#                 / _ \\ | |/ _ \\ '__| __| |                     #\n#                / ___ \\| |  __/ |  | |_|_|                     #\n#               /_/   \\_\\_|\\___|_|   \\__(_)                     #\n#                                                               #\n#               You are entering into Mordor!                   #\n#   Username has been noted and has been sent to the server     #\n#                       administrator!                          #\n#################################################################\nFinalment, tornem a iniciar sessi√≥ SSH. Per veure el nostre banner.\n sudo cp /etc/issue.net /etc/issue.net.default\n¬†sudo vim /etc/issue.net\n# Copieu el text\n# Guardar i sortir\nPer podeu veure el banner, s‚Äôha d‚Äôeditar la configuraci√≥ del servei SSH:\nsudo vim /etc/ssh/sshd_config\n# Descomentar \nBanner /etc/issue.net\n# Guardar i sortir\nsudo systemctl restart sshd\nexit",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 11 ¬∑ Gesti√≥ de comptes en un servidor Linux"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-lord-of-system.html#creaci√≥-de-grups",
    "href": "exercises/04-accounts/01-lord-of-system.html#creaci√≥-de-grups",
    "title": "Laboratori: Gesti√≥ de comptes en un servidor Linux",
    "section": "Creaci√≥ de grups",
    "text": "Creaci√≥ de grups\nLa comanda groupadd s‚Äôutilitza per crear nous grups en un sistema Linux. Els grups s√≥n una manera de gestionar col¬∑leccions d‚Äôusuaris, permetent una administraci√≥ efica√ß de permisos i acc√©s als recursos del sistema. Els grups ajuden a organitzar i controlar els usuaris amb un mateix conjunt de permisos.\ngroupadd [opcions] nom_del_grup\n\nCrea 4 grups amb els seg√ºents GIDs\n\n\n\nnom\nGID\n\n\n\n\nhobbits\n6000\n\n\nelfs\n7000\n\n\nnans\n8000\n\n\nmags\n9000\n\n\n\n\nUtilitza la comanda groupadd per crear els grups amb els GIDs especificats.\nPrepara un script bash que cre√Ø els grups autom√†ticament.",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 11 ¬∑ Gesti√≥ de comptes en un servidor Linux"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-lord-of-system.html#creant-els-usuaris",
    "href": "exercises/04-accounts/01-lord-of-system.html#creant-els-usuaris",
    "title": "Laboratori: Gesti√≥ de comptes en un servidor Linux",
    "section": "Creant els usuaris",
    "text": "Creant els usuaris\nLa comanda useradd s‚Äôutilitza per crear nous usuaris en un sistema Linux. Cada usuari t√© un identificador √∫nic (UID) i pot ser assignat a un o m√©s grups. Aquesta comanda tamb√© pot crear els directoris inicials (home directories) pels usuaris.\n\nCrea els seg√ºents comptes\n\n\n\nusuari\nUID\nGID\nnom\n\n\n\n\nfrodo\n6001\n6000\nFrodo\n\n\ngollum\n6002\n6000\nSmeagol\n\n\nsamwise\n6003\n6000\nSamwise\n\n\nlegolas\n7001\n7000\nLegolas\n\n\ngimli\n8001\n8000\nGimli\n\n\ngandalf\n9001\n9000\nGandalf\n\n\n\n\nUtilitza la comanda useradd per crear els usuaris amb els UIDs i GIDs especificats.\nPrepara un script bash que cre√Ø els usuaris autom√†ticament.",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 11 ¬∑ Gesti√≥ de comptes en un servidor Linux"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-lord-of-system.html#protegint-els-comptes",
    "href": "exercises/04-accounts/01-lord-of-system.html#protegint-els-comptes",
    "title": "Laboratori: Gesti√≥ de comptes en un servidor Linux",
    "section": "Protegint els comptes",
    "text": "Protegint els comptes\nS‚Äôha de requerir contrasenyes robustes per als comptes d‚Äôusuari. De manera predeterminada, tots els comptes d‚Äôusuari tenen assignada la contrasenya Tolkien2LOR. Un cop l‚Äôusuari es connecti per primera vegada, haur√† de canviar la contrasenya. A m√©s, s‚Äôha de configurar el sistema perqu√® bloquegi els comptes d‚Äôusuari despr√©s de 3 intents fallits.\n\nAssigna la contrasenya Tolkien2LOR a tots els usuaris.\nConfigura el sistema per bloquejar els comptes d‚Äôusuari despr√©s de 3 intents fallits durant 120 segons. D‚Äôaquesta manera, prevenim els atacs de for√ßa bruta i protegim els comptes d‚Äôusuari. Per fer-ho, podem utilitzar faillock en versions m√©s recents de RHEL. En versions anteriors, es podia utilitzar pam_tally2.\nConfigura pol√≠tiques de contrasenyes m√©s fortes, heu de requerir que les contrasenyes tinguin almenys 12 car√†cters, incloguin maj√∫scules, min√∫scules, n√∫meros i car√†cters especials.\nRequereix el canvi de contrasenya en el primer inici de sessi√≥.",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 11 ¬∑ Gesti√≥ de comptes en un servidor Linux"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-lord-of-system.html#acc√©s-a-la-comarca-ssh",
    "href": "exercises/04-accounts/01-lord-of-system.html#acc√©s-a-la-comarca-ssh",
    "title": "Laboratori: Gesti√≥ de comptes en un servidor Linux",
    "section": "Acc√©s a la comarca (SSH)",
    "text": "Acc√©s a la comarca (SSH)\nConfigura el servidor SSH per permetre l‚Äôacc√©s als usuaris Frodo, Samwise, Legolas i Gimli utilitzant contrasenya. L‚Äôusuari Gandalf ha de poder accedir al sistema utilitzant una clau SSH. No s‚Äôha de permetre l‚Äôacc√©s a l‚Äôusuari Gollum o a l‚Äôusuari root.\n\nConfigura el servidor SSH per permetre l‚Äôacc√©s als usuaris Frodo, Samwise, Legolas i Gimli utilitzant contrasenya. Per fer-ho, edita el fitxer de configuraci√≥ del servei SSH /etc/ssh/sshd_config i les seves opcions.\n\nNota: La instancia EC2 de RedHat utilitza el fitxer de configuraci√≥ /etc/ssh/sshd_config/50-cloud-init.conf per configurar el servei SSH. Aquest fitxer s‚Äôinclou en el fitxer de configuraci√≥ principal /etc/ssh/sshd_config.\n\nGenera un parell de claus SSH per a l‚Äôusuari Gandalf i afegeix la clau p√∫blica al fitxer ~/.ssh/authorized_keys de l‚Äôusuari Gandalf, guarda la seva clau p√∫blica i privada a /home/gandalf/.ssh/. Assegura‚Äôt que els permisos del directori .ssh i del fitxer authorized_keys siguin correctes. Permet l‚Äôacc√©s SSH sense contrasenya per a l‚Äôusuari Gandalf utilitzant la clau SSH.\nBloqueja l‚Äôacc√©s a l‚Äôusuari Gollum.",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 11 ¬∑ Gesti√≥ de comptes en un servidor Linux"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-lord-of-system.html#gandalf-el-mag",
    "href": "exercises/04-accounts/01-lord-of-system.html#gandalf-el-mag",
    "title": "Laboratori: Gesti√≥ de comptes en un servidor Linux",
    "section": "Gandalf, el mag",
    "text": "Gandalf, el mag\n\nDescriu quins passos heu seguit per permetre que l‚Äôusuari Gandalf tingui permisos de root. Assuemix que existeix al sistema un grup anomenat wheel que t√© permisos de root.\nEn les instancies EC2 d‚ÄôAmazon Linux, el grup wheel no est√† habilitat per defecte. Cerca a EC2 el fitxer on es defineixen els usuaris amb permisos de sudo, com l‚Äôusuari ec2-user.\nUtilitza l‚Äôeina visudo per editar el fitxer /etc/sudoers i afegeix les l√≠nies necess√†ries per permetre que l‚Äôusuari gandalf utilitzi la comanda sudo.",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 11 ¬∑ Gesti√≥ de comptes en un servidor Linux"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-lord-of-system.html#actualitzant-usuaris",
    "href": "exercises/04-accounts/01-lord-of-system.html#actualitzant-usuaris",
    "title": "Laboratori: Gesti√≥ de comptes en un servidor Linux",
    "section": "Actualitzant Usuaris",
    "text": "Actualitzant Usuaris\n\nL‚Äôusuari gollum vol tenir el seu home amb el nom smeagol.\nL‚Äôusuari legolas vol tenir per defecte la shell tcsh.\nL‚Äôusuari gimli no vol tenir contrasenya.",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 11 ¬∑ Gesti√≥ de comptes en un servidor Linux"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-lord-of-system.html#el-poder-de-lanell",
    "href": "exercises/04-accounts/01-lord-of-system.html#el-poder-de-lanell",
    "title": "Laboratori: Gesti√≥ de comptes en un servidor Linux",
    "section": "El poder de l‚Äôanell",
    "text": "El poder de l‚Äôanell\n\nCrearem un directori /anell.\nCrearem un grup portadors.\nAssignarem a frodo com a propietari del directori /anell.\nModificarem els permisos del directori: Els fitxers d‚Äôaquest directori √∫nicament podran ser executats/editats per l‚Äôusuari Frodo, la resta d‚Äôusuaris no ha de tenir cap perm√≠s ni de lectura, a excepci√≥ del grup d‚Äôusuari del grup portadors que han de poder llegir el directori.\nEn Frodo ha de poder executar tots els fitxers del director /anell/bin sense haver d‚Äôafegir tota la ruta, √∫nicament indicant el nom de l‚Äôexecutable.",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 11 ¬∑ Gesti√≥ de comptes en un servidor Linux"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-lord-of-system.html#final-del-viatge",
    "href": "exercises/04-accounts/01-lord-of-system.html#final-del-viatge",
    "title": "Laboratori: Gesti√≥ de comptes en un servidor Linux",
    "section": "Final del viatge",
    "text": "Final del viatge\n\nGimli es confon amb tots els missatges que apareixen a la pantalla quan inicia sessi√≥. Configureu el seu compte perqu√® no es mostri cap missatge a la pantalla quan comenci la sessi√≥.\nNo s‚Äôha de permetre que en Gimli executi programes des del seu propi directori /home. Per fer-ho heu d‚Äôutilitzar (setfacl):\nL‚Äôusuari Samwise s‚Äôha perdut i ha acabat a Narnia, elimineu-lo de l‚Äôunivers.",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 11 ¬∑ Gesti√≥ de comptes en un servidor Linux"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-lord-of-system.html#notificaci√≥-de-la-comarca",
    "href": "exercises/04-accounts/01-lord-of-system.html#notificaci√≥-de-la-comarca",
    "title": "Laboratori: Gesti√≥ de comptes en un servidor Linux",
    "section": "Notificaci√≥ de la comarca",
    "text": "Notificaci√≥ de la comarca\nUn cop s‚Äôhan creat els usuaris entrarem al sistema com a frodo i enviarem un mail a la resta amb el seg√ºent missatge: Benvinguts a la companyia, anem direcci√≥ mordor.\nsudo dnf -y install postfix\nsudo dnf -y install s-nail\nPostfix √©s un programari de servidor de correu electr√≤nic que t√© com a objectiu principal gestionar l‚Äôenviament, recepci√≥ i l‚Äôencaminament de correus electr√≤nics en un entorn de servidor. √âs conegut per la seva efici√®ncia, seguretat i flexibilitat, i √©s √†mpliament utilitzat en servidors de correu electr√≤nic en tot el m√≥n.\n\nConfiguraci√≥ del postfix\nEditeu el fitxer /etc/postfix/main.cf:\n\nmyhostname = mail.middlearth.udl.cat\nmydomain = udl.cat\nmyorigin = $mydomain\ninet_interfaces = all\ninet_protocols = ipv4\nmydestination = $myhostname, localhost.$mydomain, localhost, $mydomain\nmynetworks = 127.0.0.0/8\nhome_mailbox = Maildir/\n\nAfegiu al final del fitxer /etc/postfix/main.cf:\n# Amaga el tipus o la versi√≥ del programari SMTP\nsmtpd_banner = $myhostname ESMTP\n\n# Afegeix el seg√ºent al final\n# Desactiva la comanda SMTP VRFY\ndisable_vrfy_command = yes\n\n# Requereix la comanda HELO als amfitrions emissors\nsmtpd_helo_required = yes\n\n# L√≠mit de mida d'un correu electr√≤nic\n# Exemple a continuaci√≥ significa l√≠mit de 10M bytes\nmessage_size_limit = 10240000\n\n# Configuracions SMTP-Auth\nsmtpd_sasl_type = dovecot\nsmtpd_sasl_path = private/auth\nsmtpd_sasl_auth_enable = yes\nsmtpd_sasl_security_options = noanonymous\nsmtpd_sasl_local_domain = $myhostname\nsmtpd_recipient_restrictions = permit_mynetworks, permit_auth_destination, permit_sasl_authenticated, reject\n\n\nConfigurant el dimoni\n\nArrancant el dimoni\n\nsudo systemctl enable --now postfix\n\n\nProva\nsu - ganfalf\necho \"Benvinguts a la companyia, anem direcci√≥ mordor.\" | mail -s \"Notificaci√≥ de la comarca\" frodo@localhost\nsu - frodo\nmail",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 11 ¬∑ Gesti√≥ de comptes en un servidor Linux"
    ]
  },
  {
    "objectID": "exercises/04-accounts/01-lord-of-system.html#entregable",
    "href": "exercises/04-accounts/01-lord-of-system.html#entregable",
    "title": "Laboratori: Gesti√≥ de comptes en un servidor Linux",
    "section": "Entregable",
    "text": "Entregable\n\nCal un document on s‚Äôexpliquin tots els passos seguits per completar l‚Äôexercici amb les comandes utilitzades i captures de pantalla quan sigui necessari.",
    "crumbs": [
      "Activitats",
      "Unitat 04 ¬∑ Autenticaci√≥ i Autoritzaci√≥",
      "Activitat 11 ¬∑ Gesti√≥ de comptes en un servidor Linux"
    ]
  },
  {
    "objectID": "exercises/02-booting/06-ex-week4.html",
    "href": "exercises/02-booting/06-ex-week4.html",
    "title": "An√†lisi del proc√©s d‚Äôarrencada amb systemd",
    "section": "",
    "text": "Aprendre a utilitzar les eines de systemd per analitzar el proc√©s d‚Äôarrencada del sistema.\nEntendre com identificar quines unitats s√≥n les m√©s cr√≠tiques per al temps d‚Äôarrencada.\nAprendre a interpretar la sortida de les comandes systemd-analyze i systemctl.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 6 ¬∑ An√†lisi del proc√©s d'arrencada amb systemd"
    ]
  },
  {
    "objectID": "exercises/02-booting/06-ex-week4.html#objectius",
    "href": "exercises/02-booting/06-ex-week4.html#objectius",
    "title": "An√†lisi del proc√©s d‚Äôarrencada amb systemd",
    "section": "",
    "text": "Aprendre a utilitzar les eines de systemd per analitzar el proc√©s d‚Äôarrencada del sistema.\nEntendre com identificar quines unitats s√≥n les m√©s cr√≠tiques per al temps d‚Äôarrencada.\nAprendre a interpretar la sortida de les comandes systemd-analyze i systemctl.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 6 ¬∑ An√†lisi del proc√©s d'arrencada amb systemd"
    ]
  },
  {
    "objectID": "exercises/02-booting/06-ex-week4.html#requeriments-previs",
    "href": "exercises/02-booting/06-ex-week4.html#requeriments-previs",
    "title": "An√†lisi del proc√©s d‚Äôarrencada amb systemd",
    "section": "Requeriments Previs",
    "text": "Requeriments Previs\n\nTenir una m√†quina virtual (MV) amb Debian instal¬∑lat.\nTotes les comandes s‚Äôhan d‚Äôexecutar amb permisos de superusuari (root). Per tant, su -.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 6 ¬∑ An√†lisi del proc√©s d'arrencada amb systemd"
    ]
  },
  {
    "objectID": "exercises/02-booting/06-ex-week4.html#an√†lisi-del-proc√©s-darrencada-amb-systemd",
    "href": "exercises/02-booting/06-ex-week4.html#an√†lisi-del-proc√©s-darrencada-amb-systemd",
    "title": "An√†lisi del proc√©s d‚Äôarrencada amb systemd",
    "section": "An√†lisi del proc√©s d‚Äôarrencada amb systemd",
    "text": "An√†lisi del proc√©s d‚Äôarrencada amb systemd\nLa comanda systemd ens permet gestionar els serveis del sistema i controlar el proc√©s d‚Äôarrencada. Podeu comprovar les seves possibilitats amb la comanda man systemd. Una de les funcionalitats m√©s √∫tils de systemd √©s la capacitat de generar informaci√≥ detallada sobre el proc√©s d‚Äôarrencada del sistema.\nEl primer pas per analitzar el proc√©s d‚Äôarrencada amb systemd √©s utilitzar la comanda systemd-analyze per obtenir informaci√≥ sobre el temps que ha trigat el sistema a arrencar. Aquesta comanda mostrar√† informaci√≥ sobre el temps que ha trigat el sistema a arrencar, incloent el temps que ha trigat el kernel i l‚Äôespai d‚Äôusuari.\nStartup finished in 899ms (kernel) + 2.074s (userspace) = 2.973s\ngraphical.target reached after 2.068s in userspace.\n\n\n\nKernel\nEspai d‚Äôusuari\nTotal\n\n\n\n\n899ms\n2.074s\n2.973s\n\n\n\nEn aquest cas, els primers 899ms s‚Äôutilitzen per carregar les funcions del kernel com ara els controladors de dispositius i el sistema de fitxers. Els seg√ºents 2.074s s‚Äôutilitzen per carregar l‚Äôespai d‚Äôusuari, com ara els serveis i els processos del sistema. En total, el sistema ha trigat 2.973s a arrencar.\nAra que tenim aquesta informaci√≥, podem utilitzar la comanda systemd-analyze blame per obtenir informaci√≥ detallada sobre el temps que ha trigat cada unitat a carregar durant el proc√©s d‚Äôarrencada. Aquesta opci√≥ ens llistar√† les unitats ordenades per temps d‚Äôarrencada, de major a menor.\n\n\n\nTemps\nUnitat\n\n\n\n\n1.876s\nsystemd-random-seed.service\n\n\n784ms\ndbus.service\n\n\n782ms\ne2scrub_reap.service\n\n\n778ms\nsystemd-logind.service\n\n\n‚Ä¶\n‚Ä¶\n\n\n4ms\nsystemd-update-utmp-runlevel.service\n\n\n\nAmb aquesta informaci√≥, podem identificar les unitats que poden estar retardant el proc√©s d‚Äôarrencada i optimitzar-les si cal. Per obtenir m√©s informaci√≥ sobre una unitat espec√≠fica, podeu utilitzar la comanda systemctl status seguida del nom de la unitat. Per exemple, si volem informaci√≥ sobre la unitat systemd-random-seed.service, podem executar:\nsystemctl status systemd-random-seed.service\nAquesta informaci√≥ ens mostrar√†:\n\nL‚Äôestat actual de la unitat (inactiu, actiu, desactivat, error o recarregant).\nLa linia Loaded ens indica la ruta al fitxer on es desa la configuraci√≥ de la unitat. En aquest cas, /lib/systemd/system/systemd-random-seed.service. A m√©s ens indica static que vol dir que la unitat no es pot desactivar. Altres unitats ens poden indicar error, masked, not-found, enable o disabled\nLa entrada al manual de la unitat, si n‚Äôhi ha.\nFinalment, ens mostra informaci√≥ sobre el proc√©s: PID, estat del proc√©s i temps que ha estat en execuci√≥ (aix√≤ en el exemple) tamb√© pot mostrar la mem√≤ria, el cgroup, o el nombre de tasques associades.\n\nSi volem saber exactament qu√® fa aquest servei, podem consultar el manual amb la comanda man systemd-random-seed.service.\nEn el manual d‚Äôaquesta comanda us explicar√† de forma detallada qu√® aquest servei carrega una llavor aleat√≤ria al espai del nucli quan arranca i la desa quan s‚Äôapaga. Aquesta llavor es guarda a /var/lib/systemd/random-seed. Per defecte, no s‚Äôassigna entropia quan s‚Äôescriu la llavor al nucli, per√≤ aix√≤ es pot canviar amb $SYSTEMD_RANDOM_SEED_CREDIT. El servei s‚Äôexecuta despr√©s de muntar el sistema de fitxers /var/, per la qual cosa √©s recomanable utilitzar un carregador d‚Äôarrencada que passi una llavor inicial al nucli, com systemd-boot.\n\n\n\n\n\n\nNotaObservaci√≥\n\n\n\nAmb aquesta informaci√≥ podem identificar quina √©s la funci√≥ de cada servei i decidir si pel nostre sistema √©s necessari o no. En aquest cas, el servei systemd-random-seed.service √©s necessari per a la generaci√≥ de nombres aleatoris, per tant, no √©s recomanable desactivar-lo.\n\n\nSi volem informaci√≥ sobre la unitat systemd-random-seed.service, podem utilitzar la comanda systemctl cat systemd-random-seed.service per veure la configuraci√≥ de la unitat.\n# /lib/systemd/system/systemd-random-seed.service\n#  SPDX-License-Identifier: LGPL-2.1-or-later\n#\n#  This file is part of systemd.\n#\n#  systemd is free software; you can redistribute it and/or modify it\n#  under the terms of the GNU Lesser General Public License as published by\n#  the Free Software Foundation; either version 2.1 of the License, or\n#  (at your option) any later version.\n\n[Unit]\nDescription=Load/Save Random Seed\nDocumentation=man:systemd-random-seed.service(8) man:random(4)\nDefaultDependencies=no\nRequiresMountsFor=/var/lib/systemd/random-seed\nConflicts=shutdown.target\nAfter=systemd-remount-fs.service\nBefore=first-boot-complete.target shutdown.target\nWants=first-boot-complete.target\nConditionVirtualization=!container\nConditionPathExists=!/etc/initrd-release\n\n[Service]\nType=oneshot\nRemainAfterExit=yes\nExecStart=/lib/systemd/systemd-random-seed load\nExecStop=/lib/systemd/systemd-random-seed save\n\n# This service waits until the kernel's entropy pool is initialized, and may be\n# used as ordering barrier for service that require an initialized entropy\n# pool. Since initialization can take a while on entropy-starved systems, let's\n# increase the timeout substantially here.\nTimeoutSec=10min\nAquesta informaci√≥ ens mostra la configuraci√≥ de la unitat, incloent la descripci√≥, la documentaci√≥, les depend√®ncies, les condicions, el tipus de servei, els comandaments d‚Äôinici i parada, i altres opcions de configuraci√≥. El servei t√© una depend√®ncia de muntatge per a /var/lib/systemd/random-seed, i s‚Äôexecuta despr√©s de systemd-remount-fs.service i abans de first-boot-complete.target i shutdown.target. A m√©s, ens indica que √©s un servei de tipus oneshot, que s‚Äôexecuta una sola vegada i roman actiu despr√©s de la sortida. Els comandaments d‚Äôinici i parada s√≥n /lib/systemd/systemd-random-seed load i /lib/systemd/systemd-random-seed save, respectivament.\n\n\n\n\n\n\nNotaNota\n\n\n\nSi observeu el param√®tre TimeoutSec=10min aquesta unitat pot trigar fins a 10 minuts a carregar. Si el sistema est√† en un entorn amb poca entropia, aquesta unitat pot trigar m√©s temps a carregar.\n\n\nPer exemple, editarem la unitat systemd-random-seed.service per activar la entropia al sistema. Per editar la unitat podeu utilitzar qualsevol editor de text ( i.e vi) o b√© la comanda systemctl edit systemd-random-seed.service que obrir√† un editor de text per afegir la l√≠nia. Un cop obert l‚Äôeditor heu d‚Äôafegir la l√≠na a la secci√≥ [Service] i desar el fitxer. Recordeu que per fer aquesta acci√≥ necessitareu permisos d‚Äôadministrador. Per tant, su - per canviar a l‚Äôusuari root i despr√©s fer la comanda.\nEnvironment=SYSTEMD_RANDOM_SEED_CREDIT=4096\n\nCompte! Si feu anar el systemctl edit aquest crear√† un fitxer de configuraci√≥ a /etc/systemd/system/systemd-random-seed.service.d/override.conf que sobreescriur√† la configuraci√≥ de la unitat original. Per afegir la configuraci√≥ c√≤pieu la configuraci√≥ original i afegiu la l√≠nia Environment=SYSTEMD_RANDOM_SEED_CREDIT=4096 a la secci√≥ [Service].\n\nEstem assignant un cr√®dit de 4096 a la llavor aleat√≤ria. Aix√≤ augmentar√† la quantitat d‚Äôentropia que es passa al nucli quan s‚Äôescriu la llavor. Un cr√®dit m√©s alt pot augmentar la seguretat del sistema, per√≤ tamb√© pot augmentar el temps d‚Äôarrencada en sistemes amb poca entropia.\nUn cop h√†gim fet els canvis, guardarem el fitxer i sortirem de l‚Äôeditor. Despr√©s, podem fer un reboot per aplicar els canvis. Quan el sistema s‚Äôhagi reiniciat, podem tornar a utilitzar la comanda systemd-analyze per comprovar si els canvis han tingut algun impacte en el temps d‚Äôarrencada del sistema.\nUna altra opci√≥ interesant que ens ofereix systemd √©s la comanda systemd-analyze critical-chain. Aquesta comanda ens permet veure la cadena cr√≠tica de les unitats de temps del sistema. Aix√≤ ens mostra quines unitats s√≥n les m√©s cr√≠tiques per al temps d‚Äôarrencada del sistema. Per analizar la sortida, heu de mirar el temps despr√©s del car√†cter @ per veure quant temps ha trigat la unitat a activar-se o iniciar-se, i el temps despr√©s del car√†cter + per veure quant temps ha trigat la unitat a iniciar-se. A m√©s, aquesta comanda nom√©s mostra el temps que les unitats han passat a l‚Äôestat activant-se, i no cobreix les unitats que mai han passat per l‚Äôestat activant-se (com les unitats de dispositius que passen directament de inactiu a actiu). Tot i aix√≤, √©s una eina √∫til per identificar les unitats que poden estar retardant el proc√©s d‚Äôarrencada.\ngraphical.target @2.076s\n‚îî‚îÄmulti-user.target @2.075s\n  ‚îî‚îÄssh.service @1.497s +578ms\n    ‚îî‚îÄnetwork.target @1.494s\n      ‚îî‚îÄnetworking.service @1.225s +268ms\n        ‚îî‚îÄapparmor.service @1.158s +63ms\n          ‚îî‚îÄlocal-fs.target @1.158s\n            ‚îî‚îÄrun-credentials-systemd\\x2dtmpfiles\\x2dsetup.service.mount @1.171s\n              ‚îî‚îÄlocal-fs-pre.target @242ms\n                ‚îî‚îÄsystemd-tmpfiles-setup-dev.service @224ms +17ms\n                  ‚îî‚îÄsystemd-sysusers.service @192ms +20ms\n                    ‚îî‚îÄsystemd-remount-fs.service @131ms +54ms\n                      ‚îî‚îÄsystemd-journald.socket @114ms\n                        ‚îî‚îÄ-.mount @86ms\n                          ‚îî‚îÄ-.slice @86ms\nEn aquest cas, podem veure que la unitat ssh.service √©s la m√©s cr√≠tica per al temps d‚Äôarrencada del sistema, ja que ha trigat 578ms a iniciar-se. A m√©s, podem veure les depend√®ncies de totes les unitats que s‚Äôhan carregat durant el proc√©s d‚Äôarrencada. Comen√ßant pel graphical.target i seguint per les unitats multi-user.target, aquestes dos unitats ens asseguren que el sistema ha arrencat en mode gr√†fic i multiusuari. A partir d‚Äôaquest moment es carreguen la resta de serveis.\nUn altra opci√≥ interessant √©s utilitzar la comanda systemd-analyze plot per generar un gr√†fic del proc√©s d‚Äôarrencada del sistema. Aquesta comanda generar√† un fitxer SVG amb el gr√†fic del proc√©s d‚Äôarrencada, que podeu visualitzar amb un navegador web o un visor d‚Äôimatges.\n\nSi volem analitzar tots les unitats:\nsystemd-analyze plot &gt; boot_system.svg\nSi volem analitzar les unitats de la instancia de l‚Äôusuari:\nsystemd-analyze --user plot &gt; boot_user.svg\nSi volem les unitats de l‚Äôarrencada del sistema:\nsystemd-analyze --system plot &gt; boot_system.svg\n\n\n\n‚ö†Ô∏è Compte: Com puc visualtizar una imatge SVG en un debian sense interf√≠cie gr√†fica?\nPer visualitzar una imatge SVG en un sistema sense interf√≠cie gr√†fica, podeu descarregar el fitxer SVG a la vostra m√†quina local i visualitzar-lo amb un visor d‚Äôimatges o un navegador web. Per exemple, podeu utilitzar la comanda scp per descarregar el fitxer SVG a la vostra m√†quina local:\nscp user@remote:/path/to/boot.svg /path/to/local/boot.svg\n\n\n\n‚ö†Ô∏è Compte: Debian no permet conexions remotes com a root per defecte. Abans de fer-ho, com debian per defecte no permet l‚Äôexecuci√≥ de scp com a root, caldr√† fer-ho com a usuari normal i despr√©s copiar el fitxer a la carpeta desitjada.\nmv boot.svg /tmp \nchown user:user /tmp/boot.svg  \n\nPer a m√©s informaci√≥ sobre les opcions de la comanda systemd-analyze, podeu consultar el manual amb la comanda man systemd-analyze.\nPer acabar, podem comentar que aix√≠ com systemctl status unitat ens mostra la informaci√≥ d‚Äôuna unitat. Tamb√© podem consultar la informaci√≥ de totes les unitats amb:\n\nsystemctl status: Mostra informaci√≥ sobre l‚Äôestat actual del sistema o d‚Äôuna unitat espec√≠fica acompanyada de les dades m√©s recents del registre del diari.\nsystemctl list-units: Mostra una llista de totes les unitats carregades al sistema, incloent les unitats actives, inactives i fallades.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 6 ¬∑ An√†lisi del proc√©s d'arrencada amb systemd"
    ]
  },
  {
    "objectID": "exercises/02-booting/07-ex-week4.html",
    "href": "exercises/02-booting/07-ex-week4.html",
    "title": "Servei de C√≤pia de Seguretat Autom√†tica amb systemd",
    "section": "",
    "text": "Aprendre a crear un servei b√†sic amb systemd.\nConfigurar un servei que s‚Äôexecuti a l‚Äôinici del sistema.\nEntendre els fitxers d‚Äôunitat de systemd i com gestionar-los.\nCrear un script senzill per realitzar una c√≤pia de seguretat de la carpeta /home i desar-lo a /backup.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 7 ¬∑ Servei de C√≤pia de Seguretat Autom√†tica amb systemd"
    ]
  },
  {
    "objectID": "exercises/02-booting/07-ex-week4.html#objectius",
    "href": "exercises/02-booting/07-ex-week4.html#objectius",
    "title": "Servei de C√≤pia de Seguretat Autom√†tica amb systemd",
    "section": "",
    "text": "Aprendre a crear un servei b√†sic amb systemd.\nConfigurar un servei que s‚Äôexecuti a l‚Äôinici del sistema.\nEntendre els fitxers d‚Äôunitat de systemd i com gestionar-los.\nCrear un script senzill per realitzar una c√≤pia de seguretat de la carpeta /home i desar-lo a /backup.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 7 ¬∑ Servei de C√≤pia de Seguretat Autom√†tica amb systemd"
    ]
  },
  {
    "objectID": "exercises/02-booting/07-ex-week4.html#requeriments-previs",
    "href": "exercises/02-booting/07-ex-week4.html#requeriments-previs",
    "title": "Servei de C√≤pia de Seguretat Autom√†tica amb systemd",
    "section": "Requeriments Previs",
    "text": "Requeriments Previs\n\nTenir una m√†quina virtual (MV) amb Debian instal¬∑lat.\nTotes les comandes s‚Äôhan d‚Äôexecutar amb permisos de superusuari (root). Per tant, su -.\nRealitzar un apt update -y && apt upgrade -y per assegurar-se que el sistema est√† actualitzat.\nInstal¬∑lar el paquet vim per editar fitxers: apt install vim -y.\nCrear la carpeta /backup on es desaran les c√≤pies de seguretat: mkdir -p /backup.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 7 ¬∑ Servei de C√≤pia de Seguretat Autom√†tica amb systemd"
    ]
  },
  {
    "objectID": "exercises/02-booting/07-ex-week4.html#servei-b√†sic-amb-systemd",
    "href": "exercises/02-booting/07-ex-week4.html#servei-b√†sic-amb-systemd",
    "title": "Servei de C√≤pia de Seguretat Autom√†tica amb systemd",
    "section": "Servei b√†sic amb systemd",
    "text": "Servei b√†sic amb systemd\n\nCrearem un script que far√† la c√≤pia de seguretat de la carpeta /home, per fer-ho simplement crearem un arxiu .tar.gz amb la data i hora actual al nom de l‚Äôarxiu. Aquest arxiu es desar√† a la carpeta /backup que hem creat anteriorment. El script es col¬∑locar√† a /usr/local/bin/backup.sh.\n#!/bin/bash\ntar -czf /backup/system_backup_$(date +%Y%m%d_%H%M%S).tar.gz /home\nConfigurarem un servei que faci una c√≤pia de seguretat cada cop que s‚Äôinici√Ø el sistema. Crearem un fitxer de servei a /etc/systemd/system/backup.service.\n[Unit]\nDescription=Backup Service\nAfter=network.target\n\n[Service]\nType=oneshot\nExecStart=/usr/local/bin/backup.sh\n\n[Install]\nWantedBy=multi-user.target\n\n\n\n\n\n\n\nNota\n\n\n\nEl target multi-user.target s‚Äôutilitza perqu√® el servei s‚Äôexecuti quan el sistema est√† en mode multiusuari, √©s a dir, quan la majoria dels serveis del sistema ja estan en funcionament.\n\n\n\nActivarem el servei perqu√® s‚Äôexecuti a l‚Äôinici del sistema amb la comanda:\nsystemctl start backup.service\nComprova l‚Äôestat del servei amb:\nsystemctl status backup.service\n\n\n\n\n\n\n\nImportant\n\n\n\nEl servei no s‚Äôha arrancat degut a errors en l‚Äôscript. Revisa el fitxer de registre amb journalctl -xeu backup.service per veure els errors i corregir-los. On xeu indica que volem veure els missatges d‚Äôerror i advert√®ncia filtrant per unitat. El error que observareu √©s que el script no t√© permisos d‚Äôexecuci√≥. Per solucionar-ho, simplement afegiu permisos d‚Äôexecuci√≥ a l‚Äôscript amb chmod +x /usr/local/bin/backup.sh i torneu a iniciar el servei amb systemctl restart backup.service.\n\n\n\nComprovarem el contigut de la carpeta /backup. Un cop el servei s‚Äôhagi executat correctament, haur√≠eu de veure un fitxer de c√≤pia de seguretat amb la data actual al nom del fitxer.\nls -lh /backup\nActivarem el servei perqu√® s‚Äôexecuti a l‚Äôinici del sistema amb la comanda:\nsystemctl enable backup.service\nFinalment, reiniciarem el sistema per assegurar-nos que el servei s‚Äôexecuta correctament a l‚Äôinici:\nreboot\nDespr√©s de reiniciar, comprova que el fitxer de c√≤pia de seguretat s‚Äôha creat correctament a la carpeta /backup:\nls -lh /backup",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 7 ¬∑ Servei de C√≤pia de Seguretat Autom√†tica amb systemd"
    ]
  },
  {
    "objectID": "exercises/02-booting/07-ex-week4.html#servei-amb-timer-amb-systemd",
    "href": "exercises/02-booting/07-ex-week4.html#servei-amb-timer-amb-systemd",
    "title": "Servei de C√≤pia de Seguretat Autom√†tica amb systemd",
    "section": "Servei amb Timer amb systemd",
    "text": "Servei amb Timer amb systemd\nEl servei que hem creat anteriorment s‚Äôexecuta nom√©s una vegada a l‚Äôinici del sistema. Ara crearem un servei que s‚Äôexecuti di√†riament a una hora espec√≠fica utilitzant un timer de systemd. El primer pas √©s crear el servei que volem executar peri√≤dicament, en aquest cas, el mateix script de c√≤pia de seguretat que hem creat abans. El segon pas √©s crear un fitxer de timer que programi l‚Äôexecuci√≥ del servei.\n\nCrearem un fitxer de timer a /etc/systemd/system/backup-daily.timer per programar l‚Äôexecuci√≥ del servei di√†riament a les 2:00 AM.\n[Unit]\nDescription=Runs backup-daily.service daily at 2:00 AM\nRequires=backup-daily.service\n\n[Timer]\nOnCalendar=*-*-* 02:00:00\nPersistent=true\n\n[Install]\nWantedBy=timers.target\non el camp OnCalendar, *-*-* 02:00:00 indica que el servei s‚Äôexecutar√† di√†riament a les 2:00 AM. La l√≠nia Persistent=true assegura que si el sistema est√† apagat a l‚Äôhora programada, el servei s‚Äôexecutar√† tan aviat com el sistema s‚Äôinici√Ø. El *-*-* √©s un comod√≠ que representa qualsevol any, mes i dia.\nCrearem el fitxer de servei a /etc/systemd/system/backup-daily.service que ser√† el que s‚Äôexecutar√† di√†riament.\n[Unit]\nDescription=Daily Backup Service\n\n[Service]\nType=oneshot\nExecStart=/usr/local/bin/backup.sh\nActivarem el timer perqu√® s‚Äôexecuti di√†riament amb la comanda:\nsystemctl enable --now backup-daily.timer\n\n\n\n\n\n\n\nImportant\n\n\n\nL‚Äôargument --now activa el timer immediatament despr√©s d‚Äôhabilitar-lo, de manera que no cal reiniciar el sistema per comen√ßar a utilitzar-lo.\n\n\n\nComprova l‚Äôestat del timer amb:\nsystemctl status backup-daily.timer\nPer veure quan s‚Äôexecutar√† el proper cop el servei, utilitza la comanda:\nsystemctl list-timers --all\nPer provar que el servei funciona correctament, pots for√ßar l‚Äôexecuci√≥ del servei amb la comanda:\nsystemctl start backup-daily.service",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 7 ¬∑ Servei de C√≤pia de Seguretat Autom√†tica amb systemd"
    ]
  },
  {
    "objectID": "exercises/02-booting/07-ex-week4.html#exercicis-proposats",
    "href": "exercises/02-booting/07-ex-week4.html#exercicis-proposats",
    "title": "Servei de C√≤pia de Seguretat Autom√†tica amb systemd",
    "section": "Exercicis Proposats",
    "text": "Exercicis Proposats\n\nModifica el servei perqu√® faci una c√≤pia de seguretat de la carpeta /var i /etc en lloc de /home. Un cop fet aix√≤, utilitza systemd-analyze i systemd-analyze blame per analitzar el servei abans i despr√©s d‚Äôactivar-lo. Comenta i justifica els resultats obtinguts.\nCrea un servei que permeti actualitzar el sistema autom√†ticament cada diumenge a les 3:00 AM. Aquest servei hauria d‚Äôexecutar apt update && apt upgrade -y.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 7 ¬∑ Servei de C√≤pia de Seguretat Autom√†tica amb systemd"
    ]
  },
  {
    "objectID": "exercises/02-booting/04-ex-week3.html",
    "href": "exercises/02-booting/04-ex-week3.html",
    "title": "Modificant la contrasenya de l‚Äôusuari root a trav√©s del GRUB",
    "section": "",
    "text": "Entendre com funciona la edici√≥ temporal del GRUB.\nEntendre com protegir el GRUB amb una contrasenya.\nEntendre com GRUB pot ser un vector d‚Äôacc√©s f√≠sic al sistema.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 4 ¬∑ Modificant la contrasenya de l'usuari root a trav√©s del GRUB"
    ]
  },
  {
    "objectID": "exercises/02-booting/04-ex-week3.html#objectiu",
    "href": "exercises/02-booting/04-ex-week3.html#objectiu",
    "title": "Modificant la contrasenya de l‚Äôusuari root a trav√©s del GRUB",
    "section": "",
    "text": "Entendre com funciona la edici√≥ temporal del GRUB.\nEntendre com protegir el GRUB amb una contrasenya.\nEntendre com GRUB pot ser un vector d‚Äôacc√©s f√≠sic al sistema.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 4 ¬∑ Modificant la contrasenya de l'usuari root a trav√©s del GRUB"
    ]
  },
  {
    "objectID": "exercises/02-booting/04-ex-week3.html#escenari",
    "href": "exercises/02-booting/04-ex-week3.html#escenari",
    "title": "Modificant la contrasenya de l‚Äôusuari root a trav√©s del GRUB",
    "section": "Escenari",
    "text": "Escenari\nUn atacant amb acc√©s f√≠sic al servidor podria modificar la contrasenya de l‚Äôusuari root iniciant el sistema des del GRUB. En aquesta pr√†ctica assumirem aquest escenari de manera controlada.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 4 ¬∑ Modificant la contrasenya de l'usuari root a trav√©s del GRUB"
    ]
  },
  {
    "objectID": "exercises/02-booting/04-ex-week3.html#requeriments-previs",
    "href": "exercises/02-booting/04-ex-week3.html#requeriments-previs",
    "title": "Modificant la contrasenya de l‚Äôusuari root a trav√©s del GRUB",
    "section": "Requeriments previs",
    "text": "Requeriments previs\n\nUna m√†quina virtual amb Debian 12 amb GRUB com a gestor d‚Äôarrencada.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 4 ¬∑ Modificant la contrasenya de l'usuari root a trav√©s del GRUB"
    ]
  },
  {
    "objectID": "exercises/02-booting/04-ex-week3.html#procediment",
    "href": "exercises/02-booting/04-ex-week3.html#procediment",
    "title": "Modificant la contrasenya de l‚Äôusuari root a trav√©s del GRUB",
    "section": "Procediment",
    "text": "Procediment\n\nAcc√©s al GRUB\n\nReinicia el sistema i accedeix al men√∫ del bootloader GRUB.\nSelecciona la entrada del sistema operatiu i prem e per editar-la.\n\nModificaci√≥ de la l√≠nia del kernel\n\nLocalitza la l√≠nia que comen√ßa amb linux i acaba amb ro.\nAfageix init=/bin/bash al final.\nAquesta opci√≥ indica al kernel iniciar directament un shell sense passar pel proc√©s d‚Äôinicialitzaci√≥ normal.\n\n\n\n\n\n\n\n\nNotainit=/bin/bash\n\n\n\nAquesta opci√≥ fa que el sistema arranqui directament en un shell de bash com a root, evitant els processos d‚Äôinicialitzaci√≥ habituals. Tots els serveis systemd i altres processos no s‚Äôinicien, i el sistema es troba en un estat m√≠nim, amb nom√©s el shell disponible.\n\n\n\nInici amb les opcions modificades\n\nPrem Ctrl + X per iniciar el sistema amb aquesta configuraci√≥.\nAccedir√†s a un prompt de bash amb permisos de root.\n\nMuntar el sistema de fitxers en mode escriptura\nmount -o remount,rw /\n\n\n\n\n\n\n\nNotamount -o remount,rw /\n\n\n\nCom alternativa, es pot editar la l√≠nia del kernel per canviar ro (read-only) a rw (read-write). Aix√≤ permetr√† que el sistema de fitxers es monti en mode escriptura des del principi, evitant la necessitat de remuntar-lo m√©s tard.\n\n\n\nAccedir a l‚Äôarrel amb chroot\nchroot /\n\n\n\n\n\n\n\nNotachroot\n\n\n\nUna chroot (change root) √©s una operaci√≥ que canvia el directori arrel aparent d‚Äôun proc√©s i els seus fills a un directori especificat. Aix√≤ crea un entorn a√Øllat on el proc√©s veu el directori especificat com la seva arrel (/), permetent executar processos en un sistema de fitxers diferent sense afectar el sistema principal.\n\n\n\nCanviar la contrasenya de root\npasswd\n\nIntrodueix la nova contrasenya quan se‚Äôt demani.\n\nSincronitzar els canvis i reiniciar\nexit \nreboot\n\n\n\n\n\n\n\nNotaSolcuci√≥ si reboot no funciona\n\n\n\nSi el sistema no respon a la comanda reboot, pots for√ßar un reinici f√≠sic de la m√†quina virtual.\n\n\n\nIniciar sessi√≥ amb l‚Äôusuari normal.\nCanviar a l‚Äôusuari root amb la nova contrasenya. su -",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 4 ¬∑ Modificant la contrasenya de l'usuari root a trav√©s del GRUB"
    ]
  },
  {
    "objectID": "exercises/02-booting/04-ex-week3.html#protecci√≥-del-grub",
    "href": "exercises/02-booting/04-ex-week3.html#protecci√≥-del-grub",
    "title": "Modificant la contrasenya de l‚Äôusuari root a trav√©s del GRUB",
    "section": "Protecci√≥ del GRUB",
    "text": "Protecci√≥ del GRUB\nPer protegir el GRUB i evitar que un atacant amb acc√©s f√≠sic pugui modificar les opcions d‚Äôarrencada, es pot configurar una contrasenya per al GRUB.\n\nGenerar una contrasenya xifrada\n\nUtilitza la comanda seg√ºent per generar una contrasenya xifrada:\ngrub-mkpasswd-pbkdf2\nIntrodueix la contrasenya desitjada i copia la sortida que comen√ßa amb pbkdf2.\n\nEditar la configuraci√≥ del GRUB\n\nObre el fitxer de configuraci√≥ del GRUB:\n# Com a root\nvi /etc/grub.d/40_custom\nAfegeix les l√≠nies seg√ºents al fitxer, substituint your_encrypted_password per la contrasenya xifrada que has generat:\nset superusers=\"root\"\npassword_pbkdf2 root your_encrypted_password\n\nActualitzar la configuraci√≥ del GRUB\n\nDespr√©s d‚Äôhaver editat el fitxer, actualitza la configuraci√≥ del GRUB:\nupdate-grub    # Debian/Ubuntu\ngrub2-mkconfig -o /boot/grub2/grub.cfg  # Alma/Rocky (BIOS)\ngrub2-mkconfig -o /boot/efi/EFI/almalinux/grub.cfg  # Alma/Rocky (UEFI)\n\nReiniciar el sistema\n ```bash\n reboot\n ```\nVerificar la protecci√≥ del GRUB\n\nDurant l‚Äôarrencada, intenta editar una entrada del GRUB. Hauries de ser sol¬∑licitat per una contrasenya.\n\n\n\n\n\n\n\n\nImportantüëÅÔ∏è Observaci√≥\n\n\n\nMalgrat l‚Äô√∫s d‚Äôuna contrasenya per a protegir el GRUB, aquesta t√®cnica no √©s infal¬∑lible. Un atacant amb acc√©s f√≠sic pot montar un usb bootable i iniciar el sistema amb aquest dispositiu. Un cop iniciat el sistema, l‚Äôatacant podria montar el sistema de fitxers i modificar la contrasenya de l‚Äôusuari root. Ara b√©, es podria configurar el BIOS o UEFI per a desactivar l‚Äôarrencada des de dispositius externs com els USBs. Aix√≤ dificultaria l‚Äôacc√©s no autoritzat al sistema a trav√©s d‚Äôaquesta t√®cnica.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 4 ¬∑ Modificant la contrasenya de l'usuari root a trav√©s del GRUB"
    ]
  },
  {
    "objectID": "exercises/02-booting/04-ex-week3.html#reflexions",
    "href": "exercises/02-booting/04-ex-week3.html#reflexions",
    "title": "Modificant la contrasenya de l‚Äôusuari root a trav√©s del GRUB",
    "section": "Reflexions",
    "text": "Reflexions\n\nControl f√≠sic del servidor: Limitar l‚Äôacc√©s f√≠sic √©s essencial.\nDesactivar arrencada des de dispositius externs: Configurar BIOS/UEFI per bloquejar USB/CD.\nAmb LUKS/dm-crypt, encara que l‚Äôatacant accedeixi f√≠sicament al GRUB, no podr√† llegir ni modificar les dades sense la clau.\nUEFI Secure Boot: Si est√† activat i el GRUB est√† signat, no es podr√† iniciar amb init=/bin/bash sense desactivar temporalment Secure Boot.",
    "crumbs": [
      "Activitats",
      "Unitat 02 ¬∑ Arrencada del sistema",
      "Activitat 4 ¬∑ Modificant la contrasenya de l'usuari root a trav√©s del GRUB"
    ]
  }
]